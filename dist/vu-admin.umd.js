(function(W,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],i):(W=typeof globalThis<"u"?globalThis:W||self,i(W.VuAdmin={},W.Vue))})(this,function(W,i){"use strict";var vO=Object.defineProperty;var xO=(W,i,X)=>i in W?vO(W,i,{enumerable:!0,configurable:!0,writable:!0,value:X}):W[i]=X;var B=(W,i,X)=>xO(W,typeof i!="symbol"?i+"":i,X);var X="top",wt="bottom",Tt="right",ft="left",_i="auto",Vn=[X,wt,Tt,ft],sn="start",Dn="end",pl="clippingParents",Ir="viewport",$n="popper",gl="reference",Vr=Vn.reduce(function(n,t){return n.concat([t+"-"+sn,t+"-"+Dn])},[]),Dr=[].concat(Vn,[_i]).reduce(function(n,t){return n.concat([t,t+"-"+sn,t+"-"+Dn])},[]),bl="beforeRead",yl="read",El="afterRead",_l="beforeMain",Nl="main",wl="afterMain",Tl="beforeWrite",kl="write",Al="afterWrite",Cl=[bl,yl,El,_l,Nl,wl,Tl,kl,Al];function te(n){return n?(n.nodeName||"").toLowerCase():null}function kt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function rn(n){var t=kt(n).Element;return n instanceof t||n instanceof Element}function St(n){var t=kt(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function $r(n){if(typeof ShadowRoot>"u")return!1;var t=kt(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function Tu(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];!St(o)||!te(o)||(Object.assign(o.style,s),Object.keys(r).forEach(function(a){var c=r[a];c===!1?o.removeAttribute(a):o.setAttribute(a,c===!0?"":c)}))})}function ku(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],o=t.attributes[s]||{},a=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:e[s]),c=a.reduce(function(l,h){return l[h]="",l},{});!St(r)||!te(r)||(Object.assign(r.style,c),Object.keys(o).forEach(function(l){r.removeAttribute(l)}))})}}const Mr={name:"applyStyles",enabled:!0,phase:"write",fn:Tu,effect:ku,requires:["computeStyles"]};function ee(n){return n.split("-")[0]}var on=Math.max,Ni=Math.min,Mn=Math.round;function Rr(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Sl(){return!/^((?!chrome|android).)*safari/i.test(Rr())}function Rn(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var s=n.getBoundingClientRect(),r=1,o=1;t&&St(n)&&(r=n.offsetWidth>0&&Mn(s.width)/n.offsetWidth||1,o=n.offsetHeight>0&&Mn(s.height)/n.offsetHeight||1);var a=rn(n)?kt(n):window,c=a.visualViewport,l=!Sl()&&e,h=(s.left+(l&&c?c.offsetLeft:0))/r,f=(s.top+(l&&c?c.offsetTop:0))/o,u=s.width/r,p=s.height/o;return{width:u,height:p,top:f,right:h+u,bottom:f+p,left:h,x:h,y:f}}function qr(n){var t=Rn(n),e=n.offsetWidth,s=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:s}}function Ol(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&$r(e)){var s=t;do{if(s&&n.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function pe(n){return kt(n).getComputedStyle(n)}function Au(n){return["table","td","th"].indexOf(te(n))>=0}function Ve(n){return((rn(n)?n.ownerDocument:n.document)||window.document).documentElement}function wi(n){return te(n)==="html"?n:n.assignedSlot||n.parentNode||($r(n)?n.host:null)||Ve(n)}function Ll(n){return!St(n)||pe(n).position==="fixed"?null:n.offsetParent}function Cu(n){var t=/firefox/i.test(Rr()),e=/Trident/i.test(Rr());if(e&&St(n)){var s=pe(n);if(s.position==="fixed")return null}var r=wi(n);for($r(r)&&(r=r.host);St(r)&&["html","body"].indexOf(te(r))<0;){var o=pe(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function Ns(n){for(var t=kt(n),e=Ll(n);e&&Au(e)&&pe(e).position==="static";)e=Ll(e);return e&&(te(e)==="html"||te(e)==="body"&&pe(e).position==="static")?t:e||Cu(n)||t}function Pr(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ws(n,t,e){return on(n,Ni(t,e))}function Su(n,t,e){var s=ws(n,t,e);return s>e?e:s}function Bl(){return{top:0,right:0,bottom:0,left:0}}function vl(n){return Object.assign({},Bl(),n)}function xl(n,t){return t.reduce(function(e,s){return e[s]=n,e},{})}var Ou=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,vl(typeof t!="number"?t:xl(t,Vn))};function Lu(n){var t,e=n.state,s=n.name,r=n.options,o=e.elements.arrow,a=e.modifiersData.popperOffsets,c=ee(e.placement),l=Pr(c),h=[ft,Tt].indexOf(c)>=0,f=h?"height":"width";if(!(!o||!a)){var u=Ou(r.padding,e),p=qr(o),g=l==="y"?X:ft,y=l==="y"?wt:Tt,E=e.rects.reference[f]+e.rects.reference[l]-a[l]-e.rects.popper[f],_=a[l]-e.rects.reference[l],N=Ns(o),k=N?l==="y"?N.clientHeight||0:N.clientWidth||0:0,A=E/2-_/2,S=u[g],O=k-p[f]-u[y],L=k/2-p[f]/2+A,V=ws(S,L,O),M=l;e.modifiersData[s]=(t={},t[M]=V,t.centerOffset=V-L,t)}}function Bu(n){var t=n.state,e=n.options,s=e.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Ol(t.elements.popper,r)&&(t.elements.arrow=r))}const Il={name:"arrow",enabled:!0,phase:"main",fn:Lu,effect:Bu,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qn(n){return n.split("-")[1]}var vu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xu(n,t){var e=n.x,s=n.y,r=t.devicePixelRatio||1;return{x:Mn(e*r)/r||0,y:Mn(s*r)/r||0}}function Vl(n){var t,e=n.popper,s=n.popperRect,r=n.placement,o=n.variation,a=n.offsets,c=n.position,l=n.gpuAcceleration,h=n.adaptive,f=n.roundOffsets,u=n.isFixed,p=a.x,g=p===void 0?0:p,y=a.y,E=y===void 0?0:y,_=typeof f=="function"?f({x:g,y:E}):{x:g,y:E};g=_.x,E=_.y;var N=a.hasOwnProperty("x"),k=a.hasOwnProperty("y"),A=ft,S=X,O=window;if(h){var L=Ns(e),V="clientHeight",M="clientWidth";if(L===kt(e)&&(L=Ve(e),pe(L).position!=="static"&&c==="absolute"&&(V="scrollHeight",M="scrollWidth")),L=L,r===X||(r===ft||r===Tt)&&o===Dn){S=wt;var H=u&&L===O&&O.visualViewport?O.visualViewport.height:L[V];E-=H-s.height,E*=l?1:-1}if(r===ft||(r===X||r===wt)&&o===Dn){A=Tt;var z=u&&L===O&&O.visualViewport?O.visualViewport.width:L[M];g-=z-s.width,g*=l?1:-1}}var Y=Object.assign({position:c},h&&vu),tt=f===!0?xu({x:g,y:E},kt(e)):{x:g,y:E};if(g=tt.x,E=tt.y,l){var Z;return Object.assign({},Y,(Z={},Z[S]=k?"0":"",Z[A]=N?"0":"",Z.transform=(O.devicePixelRatio||1)<=1?"translate("+g+"px, "+E+"px)":"translate3d("+g+"px, "+E+"px, 0)",Z))}return Object.assign({},Y,(t={},t[S]=k?E+"px":"",t[A]=N?g+"px":"",t.transform="",t))}function Iu(n){var t=n.state,e=n.options,s=e.gpuAcceleration,r=s===void 0?!0:s,o=e.adaptive,a=o===void 0?!0:o,c=e.roundOffsets,l=c===void 0?!0:c,h={placement:ee(t.placement),variation:qn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Vl(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Vl(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Fr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Iu,data:{}};var Ti={passive:!0};function Vu(n){var t=n.state,e=n.instance,s=n.options,r=s.scroll,o=r===void 0?!0:r,a=s.resize,c=a===void 0?!0:a,l=kt(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&h.forEach(function(f){f.addEventListener("scroll",e.update,Ti)}),c&&l.addEventListener("resize",e.update,Ti),function(){o&&h.forEach(function(f){f.removeEventListener("scroll",e.update,Ti)}),c&&l.removeEventListener("resize",e.update,Ti)}}const jr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Vu,data:{}};var Du={left:"right",right:"left",bottom:"top",top:"bottom"};function ki(n){return n.replace(/left|right|bottom|top/g,function(t){return Du[t]})}var $u={start:"end",end:"start"};function Dl(n){return n.replace(/start|end/g,function(t){return $u[t]})}function Ur(n){var t=kt(n),e=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:e,scrollTop:s}}function Hr(n){return Rn(Ve(n)).left+Ur(n).scrollLeft}function Mu(n,t){var e=kt(n),s=Ve(n),r=e.visualViewport,o=s.clientWidth,a=s.clientHeight,c=0,l=0;if(r){o=r.width,a=r.height;var h=Sl();(h||!h&&t==="fixed")&&(c=r.offsetLeft,l=r.offsetTop)}return{width:o,height:a,x:c+Hr(n),y:l}}function Ru(n){var t,e=Ve(n),s=Ur(n),r=(t=n.ownerDocument)==null?void 0:t.body,o=on(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=on(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-s.scrollLeft+Hr(n),l=-s.scrollTop;return pe(r||e).direction==="rtl"&&(c+=on(e.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:c,y:l}}function zr(n){var t=pe(n),e=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+r+s)}function $l(n){return["html","body","#document"].indexOf(te(n))>=0?n.ownerDocument.body:St(n)&&zr(n)?n:$l(wi(n))}function Ts(n,t){var e;t===void 0&&(t=[]);var s=$l(n),r=s===((e=n.ownerDocument)==null?void 0:e.body),o=kt(s),a=r?[o].concat(o.visualViewport||[],zr(s)?s:[]):s,c=t.concat(a);return r?c:c.concat(Ts(wi(a)))}function Wr(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function qu(n,t){var e=Rn(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function Ml(n,t,e){return t===Ir?Wr(Mu(n,e)):rn(t)?qu(t,e):Wr(Ru(Ve(n)))}function Pu(n){var t=Ts(wi(n)),e=["absolute","fixed"].indexOf(pe(n).position)>=0,s=e&&St(n)?Ns(n):n;return rn(s)?t.filter(function(r){return rn(r)&&Ol(r,s)&&te(r)!=="body"}):[]}function Fu(n,t,e,s){var r=t==="clippingParents"?Pu(n):[].concat(t),o=[].concat(r,[e]),a=o[0],c=o.reduce(function(l,h){var f=Ml(n,h,s);return l.top=on(f.top,l.top),l.right=Ni(f.right,l.right),l.bottom=Ni(f.bottom,l.bottom),l.left=on(f.left,l.left),l},Ml(n,a,s));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function Rl(n){var t=n.reference,e=n.element,s=n.placement,r=s?ee(s):null,o=s?qn(s):null,a=t.x+t.width/2-e.width/2,c=t.y+t.height/2-e.height/2,l;switch(r){case X:l={x:a,y:t.y-e.height};break;case wt:l={x:a,y:t.y+t.height};break;case Tt:l={x:t.x+t.width,y:c};break;case ft:l={x:t.x-e.width,y:c};break;default:l={x:t.x,y:t.y}}var h=r?Pr(r):null;if(h!=null){var f=h==="y"?"height":"width";switch(o){case sn:l[h]=l[h]-(t[f]/2-e[f]/2);break;case Dn:l[h]=l[h]+(t[f]/2-e[f]/2);break}}return l}function Pn(n,t){t===void 0&&(t={});var e=t,s=e.placement,r=s===void 0?n.placement:s,o=e.strategy,a=o===void 0?n.strategy:o,c=e.boundary,l=c===void 0?pl:c,h=e.rootBoundary,f=h===void 0?Ir:h,u=e.elementContext,p=u===void 0?$n:u,g=e.altBoundary,y=g===void 0?!1:g,E=e.padding,_=E===void 0?0:E,N=vl(typeof _!="number"?_:xl(_,Vn)),k=p===$n?gl:$n,A=n.rects.popper,S=n.elements[y?k:p],O=Fu(rn(S)?S:S.contextElement||Ve(n.elements.popper),l,f,a),L=Rn(n.elements.reference),V=Rl({reference:L,element:A,strategy:"absolute",placement:r}),M=Wr(Object.assign({},A,V)),H=p===$n?M:L,z={top:O.top-H.top+N.top,bottom:H.bottom-O.bottom+N.bottom,left:O.left-H.left+N.left,right:H.right-O.right+N.right},Y=n.modifiersData.offset;if(p===$n&&Y){var tt=Y[r];Object.keys(z).forEach(function(Z){var Mt=[Tt,wt].indexOf(Z)>=0?1:-1,Rt=[X,wt].indexOf(Z)>=0?"y":"x";z[Z]+=tt[Rt]*Mt})}return z}function ju(n,t){t===void 0&&(t={});var e=t,s=e.placement,r=e.boundary,o=e.rootBoundary,a=e.padding,c=e.flipVariations,l=e.allowedAutoPlacements,h=l===void 0?Dr:l,f=qn(s),u=f?c?Vr:Vr.filter(function(y){return qn(y)===f}):Vn,p=u.filter(function(y){return h.indexOf(y)>=0});p.length===0&&(p=u);var g=p.reduce(function(y,E){return y[E]=Pn(n,{placement:E,boundary:r,rootBoundary:o,padding:a})[ee(E)],y},{});return Object.keys(g).sort(function(y,E){return g[y]-g[E]})}function Uu(n){if(ee(n)===_i)return[];var t=ki(n);return[Dl(n),t,Dl(t)]}function Hu(n){var t=n.state,e=n.options,s=n.name;if(!t.modifiersData[s]._skip){for(var r=e.mainAxis,o=r===void 0?!0:r,a=e.altAxis,c=a===void 0?!0:a,l=e.fallbackPlacements,h=e.padding,f=e.boundary,u=e.rootBoundary,p=e.altBoundary,g=e.flipVariations,y=g===void 0?!0:g,E=e.allowedAutoPlacements,_=t.options.placement,N=ee(_),k=N===_,A=l||(k||!y?[ki(_)]:Uu(_)),S=[_].concat(A).reduce(function(Zt,q){return Zt.concat(ee(q)===_i?ju(t,{placement:q,boundary:f,rootBoundary:u,padding:h,flipVariations:y,allowedAutoPlacements:E}):q)},[]),O=t.rects.reference,L=t.rects.popper,V=new Map,M=!0,H=S[0],z=0;z<S.length;z++){var Y=S[z],tt=ee(Y),Z=qn(Y)===sn,Mt=[X,wt].indexOf(tt)>=0,Rt=Mt?"width":"height",it=Pn(t,{placement:Y,boundary:f,rootBoundary:u,altBoundary:p,padding:h}),pt=Mt?Z?Tt:ft:Z?wt:X;O[Rt]>L[Rt]&&(pt=ki(pt));var Xe=ki(pt),Xt=[];if(o&&Xt.push(it[tt]<=0),c&&Xt.push(it[pt]<=0,it[Xe]<=0),Xt.every(function(Zt){return Zt})){H=Y,M=!1;break}V.set(Y,Xt)}if(M)for(var P=y?3:1,Nn=function(q){var ce=S.find(function(Ze){var et=V.get(Ze);if(et)return et.slice(0,q).every(function(Qe){return Qe})});if(ce)return H=ce,"break"},Ce=P;Ce>0;Ce--){var ct=Nn(Ce);if(ct==="break")break}t.placement!==H&&(t.modifiersData[s]._skip=!0,t.placement=H,t.reset=!0)}}const ql={name:"flip",enabled:!0,phase:"main",fn:Hu,requiresIfExists:["offset"],data:{_skip:!1}};function Pl(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function Fl(n){return[X,Tt,wt,ft].some(function(t){return n[t]>=0})}function zu(n){var t=n.state,e=n.name,s=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,a=Pn(t,{elementContext:"reference"}),c=Pn(t,{altBoundary:!0}),l=Pl(a,s),h=Pl(c,r,o),f=Fl(l),u=Fl(h);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:f,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":u})}const jl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:zu};function Wu(n,t,e){var s=ee(n),r=[ft,X].indexOf(s)>=0?-1:1,o=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,a=o[0],c=o[1];return a=a||0,c=(c||0)*r,[ft,Tt].indexOf(s)>=0?{x:c,y:a}:{x:a,y:c}}function Ku(n){var t=n.state,e=n.options,s=n.name,r=e.offset,o=r===void 0?[0,0]:r,a=Dr.reduce(function(f,u){return f[u]=Wu(u,t.rects,o),f},{}),c=a[t.placement],l=c.x,h=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=h),t.modifiersData[s]=a}const Ul={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ku};function Gu(n){var t=n.state,e=n.name;t.modifiersData[e]=Rl({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Kr={name:"popperOffsets",enabled:!0,phase:"read",fn:Gu,data:{}};function Yu(n){return n==="x"?"y":"x"}function Xu(n){var t=n.state,e=n.options,s=n.name,r=e.mainAxis,o=r===void 0?!0:r,a=e.altAxis,c=a===void 0?!1:a,l=e.boundary,h=e.rootBoundary,f=e.altBoundary,u=e.padding,p=e.tether,g=p===void 0?!0:p,y=e.tetherOffset,E=y===void 0?0:y,_=Pn(t,{boundary:l,rootBoundary:h,padding:u,altBoundary:f}),N=ee(t.placement),k=qn(t.placement),A=!k,S=Pr(N),O=Yu(S),L=t.modifiersData.popperOffsets,V=t.rects.reference,M=t.rects.popper,H=typeof E=="function"?E(Object.assign({},t.rects,{placement:t.placement})):E,z=typeof H=="number"?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),Y=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,tt={x:0,y:0};if(L){if(o){var Z,Mt=S==="y"?X:ft,Rt=S==="y"?wt:Tt,it=S==="y"?"height":"width",pt=L[S],Xe=pt+_[Mt],Xt=pt-_[Rt],P=g?-M[it]/2:0,Nn=k===sn?V[it]:M[it],Ce=k===sn?-M[it]:-V[it],ct=t.elements.arrow,Zt=g&&ct?qr(ct):{width:0,height:0},q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Bl(),ce=q[Mt],Ze=q[Rt],et=ws(0,V[it],Zt[it]),Qe=A?V[it]/2-P-et-ce-z.mainAxis:Nn-et-ce-z.mainAxis,cs=A?-V[it]/2+P+et+Ze+z.mainAxis:Ce+et+Ze+z.mainAxis,Se=t.elements.arrow&&Ns(t.elements.arrow),wn=Se?S==="y"?Se.clientTop||0:Se.clientLeft||0:0,Tn=(Z=Y==null?void 0:Y[S])!=null?Z:0,kn=pt+Qe-Tn-wn,ds=pt+cs-Tn,Je=ws(g?Ni(Xe,kn):Xe,pt,g?on(Xt,ds):Xt);L[S]=Je,tt[S]=Je-pt}if(c){var An,ii=S==="x"?X:ft,ri=S==="x"?wt:Tt,yt=L[O],de=O==="y"?"height":"width",Cn=yt+_[ii],Sn=yt-_[ri],Et=[X,ft].indexOf(N)!==-1,Oe=(An=Y==null?void 0:Y[O])!=null?An:0,hs=Et?Cn:yt-V[de]-M[de]-Oe+z.altAxis,he=Et?yt+V[de]+M[de]-Oe-z.altAxis:Sn,Le=g&&Et?Su(hs,yt,he):ws(g?hs:Cn,yt,g?he:Sn);L[O]=Le,tt[O]=Le-yt}t.modifiersData[s]=tt}}const Hl={name:"preventOverflow",enabled:!0,phase:"main",fn:Xu,requiresIfExists:["offset"]};function Zu(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Qu(n){return n===kt(n)||!St(n)?Ur(n):Zu(n)}function Ju(n){var t=n.getBoundingClientRect(),e=Mn(t.width)/n.offsetWidth||1,s=Mn(t.height)/n.offsetHeight||1;return e!==1||s!==1}function tf(n,t,e){e===void 0&&(e=!1);var s=St(t),r=St(t)&&Ju(t),o=Ve(t),a=Rn(n,r,e),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!e)&&((te(t)!=="body"||zr(o))&&(c=Qu(t)),St(t)?(l=Rn(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Hr(o))),{x:a.left+c.scrollLeft-l.x,y:a.top+c.scrollTop-l.y,width:a.width,height:a.height}}function ef(n){var t=new Map,e=new Set,s=[];n.forEach(function(o){t.set(o.name,o)});function r(o){e.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(c){if(!e.has(c)){var l=t.get(c);l&&r(l)}}),s.push(o)}return n.forEach(function(o){e.has(o.name)||r(o)}),s}function nf(n){var t=ef(n);return Cl.reduce(function(e,s){return e.concat(t.filter(function(r){return r.phase===s}))},[])}function sf(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function rf(n){var t=n.reduce(function(e,s){var r=e[s.name];return e[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,e},{});return Object.keys(t).map(function(e){return t[e]})}var zl={placement:"bottom",modifiers:[],strategy:"absolute"};function Wl(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Ai(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,s=e===void 0?[]:e,r=t.defaultOptions,o=r===void 0?zl:r;return function(c,l,h){h===void 0&&(h=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},zl,o),modifiersData:{},elements:{reference:c,popper:l},attributes:{},styles:{}},u=[],p=!1,g={state:f,setOptions:function(N){var k=typeof N=="function"?N(f.options):N;E(),f.options=Object.assign({},o,f.options,k),f.scrollParents={reference:rn(c)?Ts(c):c.contextElement?Ts(c.contextElement):[],popper:Ts(l)};var A=nf(rf([].concat(s,f.options.modifiers)));return f.orderedModifiers=A.filter(function(S){return S.enabled}),y(),g.update()},forceUpdate:function(){if(!p){var N=f.elements,k=N.reference,A=N.popper;if(Wl(k,A)){f.rects={reference:tf(k,Ns(A),f.options.strategy==="fixed"),popper:qr(A)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(z){return f.modifiersData[z.name]=Object.assign({},z.data)});for(var S=0;S<f.orderedModifiers.length;S++){if(f.reset===!0){f.reset=!1,S=-1;continue}var O=f.orderedModifiers[S],L=O.fn,V=O.options,M=V===void 0?{}:V,H=O.name;typeof L=="function"&&(f=L({state:f,options:M,name:H,instance:g})||f)}}}},update:sf(function(){return new Promise(function(_){g.forceUpdate(),_(f)})}),destroy:function(){E(),p=!0}};if(!Wl(c,l))return g;g.setOptions(h).then(function(_){!p&&h.onFirstUpdate&&h.onFirstUpdate(_)});function y(){f.orderedModifiers.forEach(function(_){var N=_.name,k=_.options,A=k===void 0?{}:k,S=_.effect;if(typeof S=="function"){var O=S({state:f,name:N,instance:g,options:A}),L=function(){};u.push(O||L)}})}function E(){u.forEach(function(_){return _()}),u=[]}return g}}var of=Ai(),af=[jr,Kr,Fr,Mr],lf=Ai({defaultModifiers:af}),cf=[jr,Kr,Fr,Mr,Ul,ql,Hl,Il,jl],Gr=Ai({defaultModifiers:cf});const Kl=Object.freeze(Object.defineProperty({__proto__:null,afterMain:wl,afterRead:El,afterWrite:Al,applyStyles:Mr,arrow:Il,auto:_i,basePlacements:Vn,beforeMain:_l,beforeRead:bl,beforeWrite:Tl,bottom:wt,clippingParents:pl,computeStyles:Fr,createPopper:Gr,createPopperBase:of,createPopperLite:lf,detectOverflow:Pn,end:Dn,eventListeners:jr,flip:ql,hide:jl,left:ft,main:Nl,modifierPhases:Cl,offset:Ul,placements:Dr,popper:$n,popperGenerator:Ai,popperOffsets:Kr,preventOverflow:Hl,read:yl,reference:gl,right:Tt,start:sn,top:X,variationPlacements:Vr,viewport:Ir,write:kl},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const De=new Map,Yr={set(n,t,e){De.has(n)||De.set(n,new Map);const s=De.get(n);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,e)},get(n,t){return De.has(n)&&De.get(n).get(t)||null},remove(n,t){if(!De.has(n))return;const e=De.get(n);e.delete(t),e.size===0&&De.delete(n)}},df=1e6,hf=1e3,Xr="transitionend",Gl=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),n),uf=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),ff=n=>{do n+=Math.floor(Math.random()*df);while(document.getElementById(n));return n},mf=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const s=Number.parseFloat(t),r=Number.parseFloat(e);return!s&&!r?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*hf)},Yl=n=>{n.dispatchEvent(new Event(Xr))},ge=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),$e=n=>ge(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(Gl(n)):null,Fn=n=>{if(!ge(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const s=n.closest("summary");if(s&&s.parentNode!==e||s===null)return!1}return t},Me=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",Xl=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?Xl(n.parentNode):null},Ci=()=>{},ks=n=>{n.offsetHeight},Zl=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Zr=[],pf=n=>{document.readyState==="loading"?(Zr.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Zr)t()}),Zr.push(n)):n()},Ot=()=>document.documentElement.dir==="rtl",Lt=n=>{pf(()=>{const t=Zl();if(t){const e=n.NAME,s=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=s,n.jQueryInterface)}})},bt=(n,t=[],e=n)=>typeof n=="function"?n(...t):e,Ql=(n,t,e=!0)=>{if(!e){bt(n);return}const r=mf(t)+5;let o=!1;const a=({target:c})=>{c===t&&(o=!0,t.removeEventListener(Xr,a),bt(n))};t.addEventListener(Xr,a),setTimeout(()=>{o||Yl(t)},r)},Qr=(n,t,e,s)=>{const r=n.length;let o=n.indexOf(t);return o===-1?!e&&s?n[r-1]:n[0]:(o+=e?1:-1,s&&(o=(o+r)%r),n[Math.max(0,Math.min(o,r-1))])},gf=/[^.]*(?=\..*)\.|.*/,bf=/\..*/,yf=/::\d+$/,Jr={};let Jl=1;const tc={mouseenter:"mouseover",mouseleave:"mouseout"},Ef=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ec(n,t){return t&&`${t}::${Jl++}`||n.uidEvent||Jl++}function nc(n){const t=ec(n);return n.uidEvent=t,Jr[t]=Jr[t]||{},Jr[t]}function _f(n,t){return function e(s){return eo(s,{delegateTarget:n}),e.oneOff&&C.off(n,s.type,t),t.apply(n,[s])}}function Nf(n,t,e){return function s(r){const o=n.querySelectorAll(t);for(let{target:a}=r;a&&a!==this;a=a.parentNode)for(const c of o)if(c===a)return eo(r,{delegateTarget:a}),s.oneOff&&C.off(n,r.type,t,e),e.apply(a,[r])}}function sc(n,t,e=null){return Object.values(n).find(s=>s.callable===t&&s.delegationSelector===e)}function ic(n,t,e){const s=typeof t=="string",r=s?e:t||e;let o=oc(n);return Ef.has(o)||(o=n),[s,r,o]}function rc(n,t,e,s,r){if(typeof t!="string"||!n)return;let[o,a,c]=ic(t,e,s);t in tc&&(a=(y=>function(E){if(!E.relatedTarget||E.relatedTarget!==E.delegateTarget&&!E.delegateTarget.contains(E.relatedTarget))return y.call(this,E)})(a));const l=nc(n),h=l[c]||(l[c]={}),f=sc(h,a,o?e:null);if(f){f.oneOff=f.oneOff&&r;return}const u=ec(a,t.replace(gf,"")),p=o?Nf(n,e,a):_f(n,a);p.delegationSelector=o?e:null,p.callable=a,p.oneOff=r,p.uidEvent=u,h[u]=p,n.addEventListener(c,p,o)}function to(n,t,e,s,r){const o=sc(t[e],s,r);o&&(n.removeEventListener(e,o,!!r),delete t[e][o.uidEvent])}function wf(n,t,e,s){const r=t[e]||{};for(const[o,a]of Object.entries(r))o.includes(s)&&to(n,t,e,a.callable,a.delegationSelector)}function oc(n){return n=n.replace(bf,""),tc[n]||n}const C={on(n,t,e,s){rc(n,t,e,s,!1)},one(n,t,e,s){rc(n,t,e,s,!0)},off(n,t,e,s){if(typeof t!="string"||!n)return;const[r,o,a]=ic(t,e,s),c=a!==t,l=nc(n),h=l[a]||{},f=t.startsWith(".");if(typeof o<"u"){if(!Object.keys(h).length)return;to(n,l,a,o,r?e:null);return}if(f)for(const u of Object.keys(l))wf(n,l,u,t.slice(1));for(const[u,p]of Object.entries(h)){const g=u.replace(yf,"");(!c||t.includes(g))&&to(n,l,a,p.callable,p.delegationSelector)}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const s=Zl(),r=oc(t),o=t!==r;let a=null,c=!0,l=!0,h=!1;o&&s&&(a=s.Event(t,e),s(n).trigger(a),c=!a.isPropagationStopped(),l=!a.isImmediatePropagationStopped(),h=a.isDefaultPrevented());const f=eo(new Event(t,{bubbles:c,cancelable:!0}),e);return h&&f.preventDefault(),l&&n.dispatchEvent(f),f.defaultPrevented&&a&&a.preventDefault(),f}};function eo(n,t={}){for(const[e,s]of Object.entries(t))try{n[e]=s}catch{Object.defineProperty(n,e,{configurable:!0,get(){return s}})}return n}function ac(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function no(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const be={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${no(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${no(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of e){let r=s.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=ac(n.dataset[s])}return t},getDataAttribute(n,t){return ac(n.getAttribute(`data-bs-${no(t)}`))}};class As{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const s=ge(e)?be.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...ge(e)?be.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[s,r]of Object.entries(e)){const o=t[s],a=ge(o)?"element":uf(o);if(!new RegExp(r).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${a}" but expected type "${r}".`)}}}const Tf="5.3.3";class Pt extends As{constructor(t,e){super(),t=$e(t),t&&(this._element=t,this._config=this._getConfig(e),Yr.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Yr.remove(this._element,this.constructor.DATA_KEY),C.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,s=!0){Ql(t,e,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Yr.get($e(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return Tf}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const so=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>Gl(e)).join(","):null},$={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let s=n.parentNode.closest(t);for(;s;)e.push(s),s=s.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!Me(e)&&Fn(e))},getSelectorFromElement(n){const t=so(n);return t&&$.findOne(t)?t:null},getElementFromSelector(n){const t=so(n);return t?$.findOne(t):null},getMultipleElementsFromSelector(n){const t=so(n);return t?$.find(t):[]}},Si=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,s=n.NAME;C.on(document,e,`[data-bs-dismiss="${s}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Me(this))return;const o=$.getElementFromSelector(this)||this.closest(`.${s}`);n.getOrCreateInstance(o)[t]()})},kf="alert",lc=".bs.alert",Af=`close${lc}`,Cf=`closed${lc}`,Sf="fade",Of="show";class Oi extends Pt{static get NAME(){return kf}close(){if(C.trigger(this._element,Af).defaultPrevented)return;this._element.classList.remove(Of);const e=this._element.classList.contains(Sf);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),C.trigger(this._element,Cf),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=Oi.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Si(Oi,"close"),Lt(Oi);const Lf="button",Bf=".bs.button",vf=".data-api",xf="active",cc='[data-bs-toggle="button"]',If=`click${Bf}${vf}`;class Li extends Pt{static get NAME(){return Lf}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(xf))}static jQueryInterface(t){return this.each(function(){const e=Li.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}C.on(document,If,cc,n=>{n.preventDefault();const t=n.target.closest(cc);Li.getOrCreateInstance(t).toggle()}),Lt(Li);const Vf="swipe",jn=".bs.swipe",Df=`touchstart${jn}`,$f=`touchmove${jn}`,Mf=`touchend${jn}`,Rf=`pointerdown${jn}`,qf=`pointerup${jn}`,Pf="touch",Ff="pen",jf="pointer-event",Uf=40,Hf={endCallback:null,leftCallback:null,rightCallback:null},zf={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Bi extends As{constructor(t,e){super(),this._element=t,!(!t||!Bi.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Hf}static get DefaultType(){return zf}static get NAME(){return Vf}dispose(){C.off(this._element,jn)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),bt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Uf)return;const e=t/this._deltaX;this._deltaX=0,e&&bt(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(C.on(this._element,Rf,t=>this._start(t)),C.on(this._element,qf,t=>this._end(t)),this._element.classList.add(jf)):(C.on(this._element,Df,t=>this._start(t)),C.on(this._element,$f,t=>this._move(t)),C.on(this._element,Mf,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Ff||t.pointerType===Pf)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Wf="carousel",Re=".bs.carousel",dc=".data-api",Kf="ArrowLeft",Gf="ArrowRight",Yf=500,Cs="next",Un="prev",Hn="left",vi="right",Xf=`slide${Re}`,io=`slid${Re}`,Zf=`keydown${Re}`,Qf=`mouseenter${Re}`,Jf=`mouseleave${Re}`,tm=`dragstart${Re}`,em=`load${Re}${dc}`,nm=`click${Re}${dc}`,hc="carousel",xi="active",sm="slide",im="carousel-item-end",rm="carousel-item-start",om="carousel-item-next",am="carousel-item-prev",uc=".active",fc=".carousel-item",lm=uc+fc,cm=".carousel-item img",dm=".carousel-indicators",hm="[data-bs-slide], [data-bs-slide-to]",um='[data-bs-ride="carousel"]',fm={[Kf]:vi,[Gf]:Hn},mm={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},pm={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ss extends Pt{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=$.findOne(dm,this._element),this._addEventListeners(),this._config.ride===hc&&this.cycle()}static get Default(){return mm}static get DefaultType(){return pm}static get NAME(){return Wf}next(){this._slide(Cs)}nextWhenVisible(){!document.hidden&&Fn(this._element)&&this.next()}prev(){this._slide(Un)}pause(){this._isSliding&&Yl(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){C.one(this._element,io,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){C.one(this._element,io,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const r=t>s?Cs:Un;this._slide(r,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&C.on(this._element,Zf,t=>this._keydown(t)),this._config.pause==="hover"&&(C.on(this._element,Qf,()=>this.pause()),C.on(this._element,Jf,()=>this._maybeEnableCycle())),this._config.touch&&Bi.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of $.find(cm,this._element))C.on(s,tm,r=>r.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(Hn)),rightCallback:()=>this._slide(this._directionToOrder(vi)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Yf+this._config.interval))}};this._swipeHelper=new Bi(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=fm[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=$.findOne(uc,this._indicatorsElement);e.classList.remove(xi),e.removeAttribute("aria-current");const s=$.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(xi),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const s=this._getActive(),r=t===Cs,o=e||Qr(this._getItems(),s,r,this._config.wrap);if(o===s)return;const a=this._getItemIndex(o),c=g=>C.trigger(this._element,g,{relatedTarget:o,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:a});if(c(Xf).defaultPrevented||!s||!o)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=o;const f=r?rm:im,u=r?om:am;o.classList.add(u),ks(o),s.classList.add(f),o.classList.add(f);const p=()=>{o.classList.remove(f,u),o.classList.add(xi),s.classList.remove(xi,u,f),this._isSliding=!1,c(io)};this._queueCallback(p,s,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(sm)}_getActive(){return $.findOne(lm,this._element)}_getItems(){return $.find(fc,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Ot()?t===Hn?Un:Cs:t===Hn?Cs:Un}_orderToDirection(t){return Ot()?t===Un?Hn:vi:t===Un?vi:Hn}static jQueryInterface(t){return this.each(function(){const e=Ss.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}C.on(document,nm,hm,function(n){const t=$.getElementFromSelector(this);if(!t||!t.classList.contains(hc))return;n.preventDefault();const e=Ss.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){e.to(s),e._maybeEnableCycle();return}if(be.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()}),C.on(window,em,()=>{const n=$.find(um);for(const t of n)Ss.getOrCreateInstance(t)}),Lt(Ss);const gm="collapse",Os=".bs.collapse",bm=".data-api",ym=`show${Os}`,Em=`shown${Os}`,_m=`hide${Os}`,Nm=`hidden${Os}`,wm=`click${Os}${bm}`,ro="show",zn="collapse",Ii="collapsing",Tm="collapsed",km=`:scope .${zn} .${zn}`,Am="collapse-horizontal",Cm="width",Sm="height",Om=".collapse.show, .collapse.collapsing",oo='[data-bs-toggle="collapse"]',Lm={parent:null,toggle:!0},Bm={parent:"(null|element)",toggle:"boolean"};class Ls extends Pt{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const s=$.find(oo);for(const r of s){const o=$.getSelectorFromElement(r),a=$.find(o).filter(c=>c===this._element);o!==null&&a.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Lm}static get DefaultType(){return Bm}static get NAME(){return gm}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Om).filter(c=>c!==this._element).map(c=>Ls.getOrCreateInstance(c,{toggle:!1}))),t.length&&t[0]._isTransitioning||C.trigger(this._element,ym).defaultPrevented)return;for(const c of t)c.hide();const s=this._getDimension();this._element.classList.remove(zn),this._element.classList.add(Ii),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Ii),this._element.classList.add(zn,ro),this._element.style[s]="",C.trigger(this._element,Em)},a=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[s]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||C.trigger(this._element,_m).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,ks(this._element),this._element.classList.add(Ii),this._element.classList.remove(zn,ro);for(const r of this._triggerArray){const o=$.getElementFromSelector(r);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Ii),this._element.classList.add(zn),C.trigger(this._element,Nm)};this._element.style[e]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(ro)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=$e(t.parent),t}_getDimension(){return this._element.classList.contains(Am)?Cm:Sm}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(oo);for(const e of t){const s=$.getElementFromSelector(e);s&&this._addAriaAndCollapsedClass([e],this._isShown(s))}}_getFirstLevelChildren(t){const e=$.find(km,this._config.parent);return $.find(t,this._config.parent).filter(s=>!e.includes(s))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const s of t)s.classList.toggle(Tm,!e),s.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const s=Ls.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}C.on(document,wm,oo,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const t of $.getMultipleElementsFromSelector(this))Ls.getOrCreateInstance(t,{toggle:!1}).toggle()}),Lt(Ls);const mc="dropdown",an=".bs.dropdown",ao=".data-api",vm="Escape",pc="Tab",xm="ArrowUp",gc="ArrowDown",Im=2,Vm=`hide${an}`,Dm=`hidden${an}`,$m=`show${an}`,Mm=`shown${an}`,bc=`click${an}${ao}`,yc=`keydown${an}${ao}`,Rm=`keyup${an}${ao}`,Wn="show",qm="dropup",Pm="dropend",Fm="dropstart",jm="dropup-center",Um="dropdown-center",ln='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Hm=`${ln}.${Wn}`,Vi=".dropdown-menu",zm=".navbar",Wm=".navbar-nav",Km=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Gm=Ot()?"top-end":"top-start",Ym=Ot()?"top-start":"top-end",Xm=Ot()?"bottom-end":"bottom-start",Zm=Ot()?"bottom-start":"bottom-end",Qm=Ot()?"left-start":"right-start",Jm=Ot()?"right-start":"left-start",tp="top",ep="bottom",np={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},sp={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ne extends Pt{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=$.next(this._element,Vi)[0]||$.prev(this._element,Vi)[0]||$.findOne(Vi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return np}static get DefaultType(){return sp}static get NAME(){return mc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Me(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!C.trigger(this._element,$m,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Wm))for(const s of[].concat(...document.body.children))C.on(s,"mouseover",Ci);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Wn),this._element.classList.add(Wn),C.trigger(this._element,Mm,t)}}hide(){if(Me(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!C.trigger(this._element,Vm,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))C.off(s,"mouseover",Ci);this._popper&&this._popper.destroy(),this._menu.classList.remove(Wn),this._element.classList.remove(Wn),this._element.setAttribute("aria-expanded","false"),be.removeDataAttribute(this._menu,"popper"),C.trigger(this._element,Dm,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!ge(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${mc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Kl>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:ge(this._config.reference)?t=$e(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=Gr(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Wn)}_getPlacement(){const t=this._parent;if(t.classList.contains(Pm))return Qm;if(t.classList.contains(Fm))return Jm;if(t.classList.contains(jm))return tp;if(t.classList.contains(Um))return ep;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(qm)?e?Ym:Gm:e?Zm:Xm}_detectNavbar(){return this._element.closest(zm)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(be.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...bt(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const s=$.find(Km,this._menu).filter(r=>Fn(r));s.length&&Qr(s,e,t===gc,!s.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=ne.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===Im||t.type==="keyup"&&t.key!==pc)return;const e=$.find(Hm);for(const s of e){const r=ne.getInstance(s);if(!r||r._config.autoClose===!1)continue;const o=t.composedPath(),a=o.includes(r._menu);if(o.includes(r._element)||r._config.autoClose==="inside"&&!a||r._config.autoClose==="outside"&&a||r._menu.contains(t.target)&&(t.type==="keyup"&&t.key===pc||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const c={relatedTarget:r._element};t.type==="click"&&(c.clickEvent=t),r._completeHide(c)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),s=t.key===vm,r=[xm,gc].includes(t.key);if(!r&&!s||e&&!s)return;t.preventDefault();const o=this.matches(ln)?this:$.prev(this,ln)[0]||$.next(this,ln)[0]||$.findOne(ln,t.delegateTarget.parentNode),a=ne.getOrCreateInstance(o);if(r){t.stopPropagation(),a.show(),a._selectMenuItem(t);return}a._isShown()&&(t.stopPropagation(),a.hide(),o.focus())}}C.on(document,yc,ln,ne.dataApiKeydownHandler),C.on(document,yc,Vi,ne.dataApiKeydownHandler),C.on(document,bc,ne.clearMenus),C.on(document,Rm,ne.clearMenus),C.on(document,bc,ln,function(n){n.preventDefault(),ne.getOrCreateInstance(this).toggle()}),Lt(ne);const Ec="backdrop",ip="fade",_c="show",Nc=`mousedown.bs.${Ec}`,rp={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},op={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class wc extends As{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return rp}static get DefaultType(){return op}static get NAME(){return Ec}show(t){if(!this._config.isVisible){bt(t);return}this._append();const e=this._getElement();this._config.isAnimated&&ks(e),e.classList.add(_c),this._emulateAnimation(()=>{bt(t)})}hide(t){if(!this._config.isVisible){bt(t);return}this._getElement().classList.remove(_c),this._emulateAnimation(()=>{this.dispose(),bt(t)})}dispose(){this._isAppended&&(C.off(this._element,Nc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(ip),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=$e(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),C.on(t,Nc,()=>{bt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Ql(t,this._getElement(),this._config.isAnimated)}}const ap="focustrap",Di=".bs.focustrap",lp=`focusin${Di}`,cp=`keydown.tab${Di}`,dp="Tab",hp="forward",Tc="backward",up={autofocus:!0,trapElement:null},fp={autofocus:"boolean",trapElement:"element"};class kc extends As{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return up}static get DefaultType(){return fp}static get NAME(){return ap}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),C.off(document,Di),C.on(document,lp,t=>this._handleFocusin(t)),C.on(document,cp,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,C.off(document,Di))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const s=$.focusableChildren(e);s.length===0?e.focus():this._lastTabNavDirection===Tc?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===dp&&(this._lastTabNavDirection=t.shiftKey?Tc:hp)}}const Ac=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Cc=".sticky-top",$i="padding-right",Sc="margin-right";class lo{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,$i,e=>e+t),this._setElementAttributes(Ac,$i,e=>e+t),this._setElementAttributes(Cc,Sc,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,$i),this._resetElementAttributes(Ac,$i),this._resetElementAttributes(Cc,Sc)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,s){const r=this.getWidth(),o=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+r)return;this._saveInitialAttribute(a,e);const c=window.getComputedStyle(a).getPropertyValue(e);a.style.setProperty(e,`${s(Number.parseFloat(c))}px`)};this._applyManipulationCallback(t,o)}_saveInitialAttribute(t,e){const s=t.style.getPropertyValue(e);s&&be.setDataAttribute(t,e,s)}_resetElementAttributes(t,e){const s=r=>{const o=be.getDataAttribute(r,e);if(o===null){r.style.removeProperty(e);return}be.removeDataAttribute(r,e),r.style.setProperty(e,o)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,e){if(ge(t)){e(t);return}for(const s of $.find(t,this._element))e(s)}}const mp="modal",Bt=".bs.modal",pp=".data-api",gp="Escape",bp=`hide${Bt}`,yp=`hidePrevented${Bt}`,Oc=`hidden${Bt}`,Lc=`show${Bt}`,Ep=`shown${Bt}`,_p=`resize${Bt}`,Np=`click.dismiss${Bt}`,wp=`mousedown.dismiss${Bt}`,Tp=`keydown.dismiss${Bt}`,kp=`click${Bt}${pp}`,Bc="modal-open",Ap="fade",vc="show",co="modal-static",Cp=".modal.show",Sp=".modal-dialog",Op=".modal-body",Lp='[data-bs-toggle="modal"]',Bp={backdrop:!0,focus:!0,keyboard:!0},vp={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class cn extends Pt{constructor(t,e){super(t,e),this._dialog=$.findOne(Sp,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new lo,this._addEventListeners()}static get Default(){return Bp}static get DefaultType(){return vp}static get NAME(){return mp}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||C.trigger(this._element,Lc,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Bc),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||C.trigger(this._element,bp).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(vc),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){C.off(window,Bt),C.off(this._dialog,Bt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new wc({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new kc({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=$.findOne(Op,this._dialog);e&&(e.scrollTop=0),ks(this._element),this._element.classList.add(vc);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,C.trigger(this._element,Ep,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){C.on(this._element,Tp,t=>{if(t.key===gp){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),C.on(window,_p,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),C.on(this._element,wp,t=>{C.one(this._element,Np,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Bc),this._resetAdjustments(),this._scrollBar.reset(),C.trigger(this._element,Oc)})}_isAnimated(){return this._element.classList.contains(Ap)}_triggerBackdropTransition(){if(C.trigger(this._element,yp).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(co)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(co),this._queueCallback(()=>{this._element.classList.remove(co),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),s=e>0;if(s&&!t){const r=Ot()?"paddingLeft":"paddingRight";this._element.style[r]=`${e}px`}if(!s&&t){const r=Ot()?"paddingRight":"paddingLeft";this._element.style[r]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const s=cn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](e)}})}}C.on(document,kp,Lp,function(n){const t=$.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),C.one(t,Lc,r=>{r.defaultPrevented||C.one(t,Oc,()=>{Fn(this)&&this.focus()})});const e=$.findOne(Cp);e&&cn.getInstance(e).hide(),cn.getOrCreateInstance(t).toggle(this)}),Si(cn),Lt(cn);const xp="offcanvas",ye=".bs.offcanvas",xc=".data-api",Ip=`load${ye}${xc}`,Vp="Escape",Ic="show",Vc="showing",Dc="hiding",Dp="offcanvas-backdrop",$c=".offcanvas.show",$p=`show${ye}`,Mp=`shown${ye}`,Rp=`hide${ye}`,Mc=`hidePrevented${ye}`,Rc=`hidden${ye}`,qp=`resize${ye}`,Pp=`click${ye}${xc}`,Fp=`keydown.dismiss${ye}`,jp='[data-bs-toggle="offcanvas"]',Up={backdrop:!0,keyboard:!0,scroll:!1},Hp={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class qe extends Pt{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Up}static get DefaultType(){return Hp}static get NAME(){return xp}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||C.trigger(this._element,$p,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new lo().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Vc);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Ic),this._element.classList.remove(Vc),C.trigger(this._element,Mp,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||C.trigger(this._element,Rp).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Dc),this._backdrop.hide();const e=()=>{this._element.classList.remove(Ic,Dc),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new lo().reset(),C.trigger(this._element,Rc)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){C.trigger(this._element,Mc);return}this.hide()},e=!!this._config.backdrop;return new wc({className:Dp,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new kc({trapElement:this._element})}_addEventListeners(){C.on(this._element,Fp,t=>{if(t.key===Vp){if(this._config.keyboard){this.hide();return}C.trigger(this._element,Mc)}})}static jQueryInterface(t){return this.each(function(){const e=qe.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}C.on(document,Pp,jp,function(n){const t=$.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Me(this))return;C.one(t,Rc,()=>{Fn(this)&&this.focus()});const e=$.findOne($c);e&&e!==t&&qe.getInstance(e).hide(),qe.getOrCreateInstance(t).toggle(this)}),C.on(window,Ip,()=>{for(const n of $.find($c))qe.getOrCreateInstance(n).show()}),C.on(window,qp,()=>{for(const n of $.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&qe.getOrCreateInstance(n).hide()}),Si(qe),Lt(qe);const qc={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},zp=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Wp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Kp=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?zp.has(e)?!!Wp.test(n.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(e))};function Gp(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const r=new window.DOMParser().parseFromString(n,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(const a of o){const c=a.nodeName.toLowerCase();if(!Object.keys(t).includes(c)){a.remove();continue}const l=[].concat(...a.attributes),h=[].concat(t["*"]||[],t[c]||[]);for(const f of l)Kp(f,h)||a.removeAttribute(f.nodeName)}return r.body.innerHTML}const Yp="TemplateFactory",Xp={allowList:qc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Zp={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Qp={entry:"(string|element|function|null)",selector:"(string|element)"};class Jp extends As{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Xp}static get DefaultType(){return Zp}static get NAME(){return Yp}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,o]of Object.entries(this._config.content))this._setContent(t,o,r);const e=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&e.classList.add(...s.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,s]of Object.entries(t))super._typeCheckConfig({selector:e,entry:s},Qp)}_setContent(t,e,s){const r=$.findOne(s,t);if(r){if(e=this._resolvePossibleFunction(e),!e){r.remove();return}if(ge(e)){this._putElementInTemplate($e(e),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(e);return}r.textContent=e}}_maybeSanitize(t){return this._config.sanitize?Gp(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return bt(t,[this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const tg="tooltip",eg=new Set(["sanitize","allowList","sanitizeFn"]),ho="fade",ng="modal",Mi="show",sg=".tooltip-inner",Pc=`.${ng}`,Fc="hide.bs.modal",Bs="hover",uo="focus",ig="click",rg="manual",og="hide",ag="hidden",lg="show",cg="shown",dg="inserted",hg="click",ug="focusin",fg="focusout",mg="mouseenter",pg="mouseleave",gg={AUTO:"auto",TOP:"top",RIGHT:Ot()?"left":"right",BOTTOM:"bottom",LEFT:Ot()?"right":"left"},bg={allowList:qc,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},yg={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};let Ri=class Nu extends Pt{constructor(t,e){if(typeof Kl>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return bg}static get DefaultType(){return yg}static get NAME(){return tg}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),C.off(this._element.closest(Pc),Fc,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=C.trigger(this._element,this.constructor.eventName(lg)),s=(Xl(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(r),C.trigger(this._element,this.constructor.eventName(dg))),this._popper=this._createPopper(r),r.classList.add(Mi),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))C.on(c,"mouseover",Ci);const a=()=>{C.trigger(this._element,this.constructor.eventName(cg)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||C.trigger(this._element,this.constructor.eventName(og)).defaultPrevented)return;if(this._getTipElement().classList.remove(Mi),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))C.off(r,"mouseover",Ci);this._activeTrigger[ig]=!1,this._activeTrigger[uo]=!1,this._activeTrigger[Bs]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),C.trigger(this._element,this.constructor.eventName(ag)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(ho,Mi),e.classList.add(`bs-${this.constructor.NAME}-auto`);const s=ff(this.constructor.NAME).toString();return e.setAttribute("id",s),this._isAnimated()&&e.classList.add(ho),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Jp({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[sg]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ho)}_isShown(){return this.tip&&this.tip.classList.contains(Mi)}_createPopper(t){const e=bt(this._config.placement,[this,t,this._element]),s=gg[e.toUpperCase()];return Gr(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return bt(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...e,...bt(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")C.on(this._element,this.constructor.eventName(hg),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(e!==rg){const s=e===Bs?this.constructor.eventName(mg):this.constructor.eventName(ug),r=e===Bs?this.constructor.eventName(pg):this.constructor.eventName(fg);C.on(this._element,s,this._config.selector,o=>{const a=this._initializeOnDelegatedTarget(o);a._activeTrigger[o.type==="focusin"?uo:Bs]=!0,a._enter()}),C.on(this._element,r,this._config.selector,o=>{const a=this._initializeOnDelegatedTarget(o);a._activeTrigger[o.type==="focusout"?uo:Bs]=a._element.contains(o.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},C.on(this._element.closest(Pc),Fc,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=be.getDataAttributes(this._element);for(const s of Object.keys(e))eg.has(s)&&delete e[s];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:$e(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,s]of Object.entries(this._config))this.constructor.Default[e]!==s&&(t[e]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Nu.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}};Lt(Ri);const Eg="popover",_g=".popover-header",Ng=".popover-body",wg={...Ri.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Tg={...Ri.DefaultType,content:"(null|string|element|function)"};class fo extends Ri{static get Default(){return wg}static get DefaultType(){return Tg}static get NAME(){return Eg}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[_g]:this._getTitle(),[Ng]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=fo.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Lt(fo);const kg="scrollspy",mo=".bs.scrollspy",Ag=".data-api",Cg=`activate${mo}`,jc=`click${mo}`,Sg=`load${mo}${Ag}`,Og="dropdown-item",Kn="active",Lg='[data-bs-spy="scroll"]',po="[href]",Bg=".nav, .list-group",Uc=".nav-link",vg=`${Uc}, .nav-item > ${Uc}, .list-group-item`,xg=".dropdown",Ig=".dropdown-toggle",Vg={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Dg={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class qi extends Pt{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Vg}static get DefaultType(){return Dg}static get NAME(){return kg}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=$e(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(C.off(this._config.target,jc),C.on(this._config.target,jc,po,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const s=this._rootElement||window,r=e.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:r,behavior:"smooth"});return}s.scrollTop=r}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=a=>this._targetLinks.get(`#${a.target.id}`),s=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(e(a))},r=(this._rootElement||document.documentElement).scrollTop,o=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const a of t){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(a));continue}const c=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&c){if(s(a),!r)return;continue}!o&&!c&&s(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=$.find(po,this._config.target);for(const e of t){if(!e.hash||Me(e))continue;const s=$.findOne(decodeURI(e.hash),this._element);Fn(s)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Kn),this._activateParents(t),C.trigger(this._element,Cg,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Og)){$.findOne(Ig,t.closest(xg)).classList.add(Kn);return}for(const e of $.parents(t,Bg))for(const s of $.prev(e,vg))s.classList.add(Kn)}_clearActiveClass(t){t.classList.remove(Kn);const e=$.find(`${po}.${Kn}`,t);for(const s of e)s.classList.remove(Kn)}static jQueryInterface(t){return this.each(function(){const e=qi.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}C.on(window,Sg,()=>{for(const n of $.find(Lg))qi.getOrCreateInstance(n)}),Lt(qi);const $g="tab",dn=".bs.tab",Mg=`hide${dn}`,Rg=`hidden${dn}`,qg=`show${dn}`,Pg=`shown${dn}`,Fg=`click${dn}`,jg=`keydown${dn}`,Ug=`load${dn}`,Hg="ArrowLeft",Hc="ArrowRight",zg="ArrowUp",zc="ArrowDown",go="Home",Wc="End",hn="active",Kc="fade",bo="show",Wg="dropdown",Gc=".dropdown-toggle",Kg=".dropdown-menu",yo=`:not(${Gc})`,Gg='.list-group, .nav, [role="tablist"]',Yg=".nav-item, .list-group-item",Xg=`.nav-link${yo}, .list-group-item${yo}, [role="tab"]${yo}`,Yc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Eo=`${Xg}, ${Yc}`,Zg=`.${hn}[data-bs-toggle="tab"], .${hn}[data-bs-toggle="pill"], .${hn}[data-bs-toggle="list"]`;class Gn extends Pt{constructor(t){super(t),this._parent=this._element.closest(Gg),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),C.on(this._element,jg,e=>this._keydown(e)))}static get NAME(){return $g}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),s=e?C.trigger(e,Mg,{relatedTarget:t}):null;C.trigger(t,qg,{relatedTarget:e}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(hn),this._activate($.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(bo);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),C.trigger(t,Pg,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(Kc))}_deactivate(t,e){if(!t)return;t.classList.remove(hn),t.blur(),this._deactivate($.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(bo);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),C.trigger(t,Rg,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(Kc))}_keydown(t){if(![Hg,Hc,zg,zc,go,Wc].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(r=>!Me(r));let s;if([go,Wc].includes(t.key))s=e[t.key===go?0:e.length-1];else{const r=[Hc,zc].includes(t.key);s=Qr(e,t.target,r,!0)}s&&(s.focus({preventScroll:!0}),Gn.getOrCreateInstance(s).show())}_getChildren(){return $.find(Eo,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const s of e)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",e),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=$.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const s=this._getOuterElement(t);if(!s.classList.contains(Wg))return;const r=(o,a)=>{const c=$.findOne(o,s);c&&c.classList.toggle(a,e)};r(Gc,hn),r(Kg,bo),s.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,s){t.hasAttribute(e)||t.setAttribute(e,s)}_elemIsActive(t){return t.classList.contains(hn)}_getInnerElement(t){return t.matches(Eo)?t:$.findOne(Eo,t)}_getOuterElement(t){return t.closest(Yg)||t}static jQueryInterface(t){return this.each(function(){const e=Gn.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}C.on(document,Fg,Yc,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!Me(this)&&Gn.getOrCreateInstance(this).show()}),C.on(window,Ug,()=>{for(const n of $.find(Zg))Gn.getOrCreateInstance(n)}),Lt(Gn);const Qg="toast",Pe=".bs.toast",Jg=`mouseover${Pe}`,tb=`mouseout${Pe}`,eb=`focusin${Pe}`,nb=`focusout${Pe}`,sb=`hide${Pe}`,ib=`hidden${Pe}`,rb=`show${Pe}`,ob=`shown${Pe}`,ab="fade",Xc="hide",Pi="show",Fi="showing",lb={animation:"boolean",autohide:"boolean",delay:"number"},cb={animation:!0,autohide:!0,delay:5e3};class ji extends Pt{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return cb}static get DefaultType(){return lb}static get NAME(){return Qg}show(){if(C.trigger(this._element,rb).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(ab);const e=()=>{this._element.classList.remove(Fi),C.trigger(this._element,ob),this._maybeScheduleHide()};this._element.classList.remove(Xc),ks(this._element),this._element.classList.add(Pi,Fi),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||C.trigger(this._element,sb).defaultPrevented)return;const e=()=>{this._element.classList.add(Xc),this._element.classList.remove(Fi,Pi),C.trigger(this._element,ib)};this._element.classList.add(Fi),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Pi),super.dispose()}isShown(){return this._element.classList.contains(Pi)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){C.on(this._element,Jg,t=>this._onInteraction(t,!0)),C.on(this._element,tb,t=>this._onInteraction(t,!1)),C.on(this._element,eb,t=>this._onInteraction(t,!0)),C.on(this._element,nb,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=ji.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Si(ji),Lt(ji);function db(n){return{all:n=n||new Map,on:function(t,e){var s=n.get(t);s?s.push(e):n.set(t,[e])},off:function(t,e){var s=n.get(t);s&&(e?s.splice(s.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var s=n.get(t);s&&s.slice().map(function(r){r(e)}),(s=n.get("*"))&&s.slice().map(function(r){r(t,e)})}}}function Ui(n,t){for(const e in t)t[e]instanceof Object&&e in n&&Object.assign(t[e],Ui(n[e],t[e]));return Object.assign(n||{},t)}function vs(n,t,e,s){try{return typeof n=="function"?n(t,e,s):n}catch{return null}}async function xs(n){try{return{data:await n.json(),error:null}}catch(t){return{data:void 0,error:t}}}function Is(n,t){let e=[];if(t&&t.errors)for(let s of t.errors)e.push({message:s.message,timeout:3500,priority:"danger"});else n.status>=400&&n.status<=511&&e.push({message:n.status+(n.statusText?" "+n.statusText:""),timeout:3500,priority:"danger"});return e.length>0?e:null}function Fe(n,t,e){return t.options||(t.options={}),t.options.headers||(t.options.headers={}),n!="GET"&&(t.options.headers["Content-Type"]||(t.options.headers["Content-Type"]="application/json")),t.auth&&(t.auth.type=="Basic"&&t.auth.user&&(t.options.headers.Authorization="Basic "+btoa(t.auth.user+":"+t.auth.password)),t.auth.type=="Bearer"&&t.auth.token&&(t.options.headers.Authorization="Bearer "+t.auth.token),t.auth.type=="Cookie"&&(t.options.credentials="include")),t.options.body=void 0,t.options.method=n,e&&Object.assign(t.options,e),t.debug&&console.log("FETCH OPTIONS",t.options),t.options}function je(n,t,e,s){let r=!1,o=Object.assign({},s||{});return s&&(s.filter&&(o.filter=JSON.stringify(s.filter)),s.order&&(o.order=JSON.stringify(s.order)),r=Object.keys(o).length),t.url+(e?"/"+e:"")+(r?"?"+new URLSearchParams(o).toString():"")}function Vs(n,t="-"){return n.toString().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\_/g,"-").replace(/\-\-+/g,"-").replace(/\-$/g,"")}function hb(n){let t=[];for(let e of n)t.push(Hi(e));return t}function Hi(n,t="",e={}){for(let s in n){let r=t?t+"."+s:s;typeof n[s]=="object"&&!Array.isArray(n[s])?Hi(n[s],r,e):e[r]=n[s]}return e}function ub(n){let t={};for(let e in n){let s=e.split(".");s.reduce((r,o,a)=>r[o]||(r[o]=isNaN(Number(s[a+1]))?s.length-1===a?n[e]:{}:[]),t)}return t}function Ds(n,t,e,s){const r=(o,a)=>!o||!a?o:o.replace(/{\s*(.*?)\s*}/g,(c,l)=>a[l]?a[l]:"");return!t||(s=s||document.documentElement.lang,!s||!t[s])||!t[s][n]?r(n,e):r(t[s][n])}function fb(n,t,e=";"){const s=t.map(o=>o.title?o.title:o.name.charAt(0).toUpperCase()+o.name.slice(1)).join(e),r=n.map(o=>t.map(a=>{let c=o[a.name];return a.template?a.template(c,o,n):c!==void 0?c:""}).join(e));return[s,...r].join(`
`)}function mb(n,t="export.csv"){n="\uFEFF"+n;const e=new Blob([n],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=t,r.click(),URL.revokeObjectURL(s)}function pb(n){return[...new Set(n)]}function Zc(n,t){n.indexOf(t)>=0?n.splice(n.indexOf(t),1):n.push(t)}function Qc(n,t){for(let e of t)n.indexOf(e.value)<0&&n.push(e.value)}function Jc(n,t){for(let e of t)n.indexOf(e.value)<0?n.push(e.value):n.splice(n.indexOf(e.value),1)}function td(n){n.length=0}function ed(n,t){t<=0||t>=n.length||([n[t-1],n[t]]=[n[t],n[t-1]])}function nd(n,t){t<=0||t>=n.length||(console.log(n[t-1],n[t]),[n[t-1],n[t]]=[n[t],n[t-1]])}function gb(n,t){Object.keys(n).forEach(e=>{typeof n[e]=="function"&&(n[e]=n[e](t))})}var sd=typeof global=="object"&&global&&global.Object===Object&&global,bb=typeof self=="object"&&self&&self.Object===Object&&self,se=sd||bb||Function("return this")(),Ue=se.Symbol,id=Object.prototype,yb=id.hasOwnProperty,Eb=id.toString,$s=Ue?Ue.toStringTag:void 0;function _b(n){var t=yb.call(n,$s),e=n[$s];try{n[$s]=void 0;var s=!0}catch{}var r=Eb.call(n);return s&&(t?n[$s]=e:delete n[$s]),r}var Nb=Object.prototype,wb=Nb.toString;function Tb(n){return wb.call(n)}var kb="[object Null]",Ab="[object Undefined]",rd=Ue?Ue.toStringTag:void 0;function Yn(n){return n==null?n===void 0?Ab:kb:rd&&rd in Object(n)?_b(n):Tb(n)}function Ee(n){return n!=null&&typeof n=="object"}var un=Array.isArray;function He(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}function od(n){return n}var Cb="[object AsyncFunction]",Sb="[object Function]",Ob="[object GeneratorFunction]",Lb="[object Proxy]";function _o(n){if(!He(n))return!1;var t=Yn(n);return t==Sb||t==Ob||t==Cb||t==Lb}var No=se["__core-js_shared__"],ad=function(){var n=/[^.]+$/.exec(No&&No.keys&&No.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Bb(n){return!!ad&&ad in n}var vb=Function.prototype,xb=vb.toString;function fn(n){if(n!=null){try{return xb.call(n)}catch{}try{return n+""}catch{}}return""}var Ib=/[\\^$.*+?()[\]{}|]/g,Vb=/^\[object .+?Constructor\]$/,Db=Function.prototype,$b=Object.prototype,Mb=Db.toString,Rb=$b.hasOwnProperty,qb=RegExp("^"+Mb.call(Rb).replace(Ib,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pb(n){if(!He(n)||Bb(n))return!1;var t=_o(n)?qb:Vb;return t.test(fn(n))}function Fb(n,t){return n==null?void 0:n[t]}function mn(n,t){var e=Fb(n,t);return Pb(e)?e:void 0}var wo=mn(se,"WeakMap"),ld=Object.create,jb=function(){function n(){}return function(t){if(!He(t))return{};if(ld)return ld(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}();function Ub(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}function cd(n,t){var e=-1,s=n.length;for(t||(t=Array(s));++e<s;)t[e]=n[e];return t}var Hb=800,zb=16,Wb=Date.now;function Kb(n){var t=0,e=0;return function(){var s=Wb(),r=zb-(s-e);if(e=s,r>0){if(++t>=Hb)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}function Gb(n){return function(){return n}}var zi=function(){try{var n=mn(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Yb=zi?function(n,t){return zi(n,"toString",{configurable:!0,enumerable:!1,value:Gb(t),writable:!0})}:od,Xb=Kb(Yb);function Zb(n,t){for(var e=-1,s=n==null?0:n.length;++e<s&&t(n[e],e,n)!==!1;);return n}var Qb=9007199254740991,Jb=/^(?:0|[1-9]\d*)$/;function dd(n,t){var e=typeof n;return t=t??Qb,!!t&&(e=="number"||e!="symbol"&&Jb.test(n))&&n>-1&&n%1==0&&n<t}function To(n,t,e){t=="__proto__"&&zi?zi(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function Ms(n,t){return n===t||n!==n&&t!==t}var t1=Object.prototype,e1=t1.hasOwnProperty;function hd(n,t,e){var s=n[t];(!(e1.call(n,t)&&Ms(s,e))||e===void 0&&!(t in n))&&To(n,t,e)}function Rs(n,t,e,s){var r=!e;e||(e={});for(var o=-1,a=t.length;++o<a;){var c=t[o],l=void 0;l===void 0&&(l=n[c]),r?To(e,c,l):hd(e,c,l)}return e}var ud=Math.max;function n1(n,t,e){return t=ud(t===void 0?n.length-1:t,0),function(){for(var s=arguments,r=-1,o=ud(s.length-t,0),a=Array(o);++r<o;)a[r]=s[t+r];r=-1;for(var c=Array(t+1);++r<t;)c[r]=s[r];return c[t]=e(a),Ub(n,this,c)}}function s1(n,t){return Xb(n1(n,t,od),n+"")}var i1=9007199254740991;function fd(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=i1}function Wi(n){return n!=null&&fd(n.length)&&!_o(n)}function r1(n,t,e){if(!He(e))return!1;var s=typeof t;return(s=="number"?Wi(e)&&dd(t,e.length):s=="string"&&t in e)?Ms(e[t],n):!1}function o1(n){return s1(function(t,e){var s=-1,r=e.length,o=r>1?e[r-1]:void 0,a=r>2?e[2]:void 0;for(o=n.length>3&&typeof o=="function"?(r--,o):void 0,a&&r1(e[0],e[1],a)&&(o=r<3?void 0:o,r=1),t=Object(t);++s<r;){var c=e[s];c&&n(t,c,s,o)}return t})}var a1=Object.prototype;function ko(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||a1;return n===e}function l1(n,t){for(var e=-1,s=Array(n);++e<n;)s[e]=t(e);return s}var c1="[object Arguments]";function md(n){return Ee(n)&&Yn(n)==c1}var pd=Object.prototype,d1=pd.hasOwnProperty,h1=pd.propertyIsEnumerable,Ao=md(function(){return arguments}())?md:function(n){return Ee(n)&&d1.call(n,"callee")&&!h1.call(n,"callee")};function u1(){return!1}var gd=typeof W=="object"&&W&&!W.nodeType&&W,bd=gd&&typeof module=="object"&&module&&!module.nodeType&&module,f1=bd&&bd.exports===gd,yd=f1?se.Buffer:void 0,m1=yd?yd.isBuffer:void 0,qs=m1||u1,p1="[object Arguments]",g1="[object Array]",b1="[object Boolean]",y1="[object Date]",E1="[object Error]",_1="[object Function]",N1="[object Map]",w1="[object Number]",T1="[object Object]",k1="[object RegExp]",A1="[object Set]",C1="[object String]",S1="[object WeakMap]",O1="[object ArrayBuffer]",L1="[object DataView]",B1="[object Float32Array]",v1="[object Float64Array]",x1="[object Int8Array]",I1="[object Int16Array]",V1="[object Int32Array]",D1="[object Uint8Array]",$1="[object Uint8ClampedArray]",M1="[object Uint16Array]",R1="[object Uint32Array]",G={};G[B1]=G[v1]=G[x1]=G[I1]=G[V1]=G[D1]=G[$1]=G[M1]=G[R1]=!0,G[p1]=G[g1]=G[O1]=G[b1]=G[L1]=G[y1]=G[E1]=G[_1]=G[N1]=G[w1]=G[T1]=G[k1]=G[A1]=G[C1]=G[S1]=!1;function q1(n){return Ee(n)&&fd(n.length)&&!!G[Yn(n)]}function Co(n){return function(t){return n(t)}}var Ed=typeof W=="object"&&W&&!W.nodeType&&W,Ps=Ed&&typeof module=="object"&&module&&!module.nodeType&&module,P1=Ps&&Ps.exports===Ed,So=P1&&sd.process,Xn=function(){try{var n=Ps&&Ps.require&&Ps.require("util").types;return n||So&&So.binding&&So.binding("util")}catch{}}(),_d=Xn&&Xn.isTypedArray,Oo=_d?Co(_d):q1,F1=Object.prototype,j1=F1.hasOwnProperty;function Nd(n,t){var e=un(n),s=!e&&Ao(n),r=!e&&!s&&qs(n),o=!e&&!s&&!r&&Oo(n),a=e||s||r||o,c=a?l1(n.length,String):[],l=c.length;for(var h in n)(t||j1.call(n,h))&&!(a&&(h=="length"||r&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||dd(h,l)))&&c.push(h);return c}function wd(n,t){return function(e){return n(t(e))}}var U1=wd(Object.keys,Object),H1=Object.prototype,z1=H1.hasOwnProperty;function W1(n){if(!ko(n))return U1(n);var t=[];for(var e in Object(n))z1.call(n,e)&&e!="constructor"&&t.push(e);return t}function Lo(n){return Wi(n)?Nd(n):W1(n)}function K1(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var G1=Object.prototype,Y1=G1.hasOwnProperty;function X1(n){if(!He(n))return K1(n);var t=ko(n),e=[];for(var s in n)s=="constructor"&&(t||!Y1.call(n,s))||e.push(s);return e}function Fs(n){return Wi(n)?Nd(n,!0):X1(n)}var js=mn(Object,"create");function Z1(){this.__data__=js?js(null):{},this.size=0}function Q1(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var J1="__lodash_hash_undefined__",ty=Object.prototype,ey=ty.hasOwnProperty;function ny(n){var t=this.__data__;if(js){var e=t[n];return e===J1?void 0:e}return ey.call(t,n)?t[n]:void 0}var sy=Object.prototype,iy=sy.hasOwnProperty;function ry(n){var t=this.__data__;return js?t[n]!==void 0:iy.call(t,n)}var oy="__lodash_hash_undefined__";function ay(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=js&&t===void 0?oy:t,this}function pn(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var s=n[t];this.set(s[0],s[1])}}pn.prototype.clear=Z1,pn.prototype.delete=Q1,pn.prototype.get=ny,pn.prototype.has=ry,pn.prototype.set=ay;function ly(){this.__data__=[],this.size=0}function Ki(n,t){for(var e=n.length;e--;)if(Ms(n[e][0],t))return e;return-1}var cy=Array.prototype,dy=cy.splice;function hy(n){var t=this.__data__,e=Ki(t,n);if(e<0)return!1;var s=t.length-1;return e==s?t.pop():dy.call(t,e,1),--this.size,!0}function uy(n){var t=this.__data__,e=Ki(t,n);return e<0?void 0:t[e][1]}function fy(n){return Ki(this.__data__,n)>-1}function my(n,t){var e=this.__data__,s=Ki(e,n);return s<0?(++this.size,e.push([n,t])):e[s][1]=t,this}function _e(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var s=n[t];this.set(s[0],s[1])}}_e.prototype.clear=ly,_e.prototype.delete=hy,_e.prototype.get=uy,_e.prototype.has=fy,_e.prototype.set=my;var Us=mn(se,"Map");function py(){this.size=0,this.__data__={hash:new pn,map:new(Us||_e),string:new pn}}function gy(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function Gi(n,t){var e=n.__data__;return gy(t)?e[typeof t=="string"?"string":"hash"]:e.map}function by(n){var t=Gi(this,n).delete(n);return this.size-=t?1:0,t}function yy(n){return Gi(this,n).get(n)}function Ey(n){return Gi(this,n).has(n)}function _y(n,t){var e=Gi(this,n),s=e.size;return e.set(n,t),this.size+=e.size==s?0:1,this}function gn(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var s=n[t];this.set(s[0],s[1])}}gn.prototype.clear=py,gn.prototype.delete=by,gn.prototype.get=yy,gn.prototype.has=Ey,gn.prototype.set=_y;function Td(n,t){for(var e=-1,s=t.length,r=n.length;++e<s;)n[r+e]=t[e];return n}var Bo=wd(Object.getPrototypeOf,Object),Ny="[object Object]",wy=Function.prototype,Ty=Object.prototype,kd=wy.toString,ky=Ty.hasOwnProperty,Ay=kd.call(Object);function Cy(n){if(!Ee(n)||Yn(n)!=Ny)return!1;var t=Bo(n);if(t===null)return!0;var e=ky.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&kd.call(e)==Ay}function Sy(){this.__data__=new _e,this.size=0}function Oy(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function Ly(n){return this.__data__.get(n)}function By(n){return this.__data__.has(n)}var vy=200;function xy(n,t){var e=this.__data__;if(e instanceof _e){var s=e.__data__;if(!Us||s.length<vy-1)return s.push([n,t]),this.size=++e.size,this;e=this.__data__=new gn(s)}return e.set(n,t),this.size=e.size,this}function ie(n){var t=this.__data__=new _e(n);this.size=t.size}ie.prototype.clear=Sy,ie.prototype.delete=Oy,ie.prototype.get=Ly,ie.prototype.has=By,ie.prototype.set=xy;function Iy(n,t){return n&&Rs(t,Lo(t),n)}function Vy(n,t){return n&&Rs(t,Fs(t),n)}var Ad=typeof W=="object"&&W&&!W.nodeType&&W,Cd=Ad&&typeof module=="object"&&module&&!module.nodeType&&module,Dy=Cd&&Cd.exports===Ad,Sd=Dy?se.Buffer:void 0,Od=Sd?Sd.allocUnsafe:void 0;function Ld(n,t){if(t)return n.slice();var e=n.length,s=Od?Od(e):new n.constructor(e);return n.copy(s),s}function $y(n,t){for(var e=-1,s=n==null?0:n.length,r=0,o=[];++e<s;){var a=n[e];t(a,e,n)&&(o[r++]=a)}return o}function Bd(){return[]}var My=Object.prototype,Ry=My.propertyIsEnumerable,vd=Object.getOwnPropertySymbols,vo=vd?function(n){return n==null?[]:(n=Object(n),$y(vd(n),function(t){return Ry.call(n,t)}))}:Bd;function qy(n,t){return Rs(n,vo(n),t)}var Py=Object.getOwnPropertySymbols,xd=Py?function(n){for(var t=[];n;)Td(t,vo(n)),n=Bo(n);return t}:Bd;function Fy(n,t){return Rs(n,xd(n),t)}function Id(n,t,e){var s=t(n);return un(n)?s:Td(s,e(n))}function xo(n){return Id(n,Lo,vo)}function jy(n){return Id(n,Fs,xd)}var Io=mn(se,"DataView"),Vo=mn(se,"Promise"),Do=mn(se,"Set"),Vd="[object Map]",Uy="[object Object]",Dd="[object Promise]",$d="[object Set]",Md="[object WeakMap]",Rd="[object DataView]",Hy=fn(Io),zy=fn(Us),Wy=fn(Vo),Ky=fn(Do),Gy=fn(wo),Ft=Yn;(Io&&Ft(new Io(new ArrayBuffer(1)))!=Rd||Us&&Ft(new Us)!=Vd||Vo&&Ft(Vo.resolve())!=Dd||Do&&Ft(new Do)!=$d||wo&&Ft(new wo)!=Md)&&(Ft=function(n){var t=Yn(n),e=t==Uy?n.constructor:void 0,s=e?fn(e):"";if(s)switch(s){case Hy:return Rd;case zy:return Vd;case Wy:return Dd;case Ky:return $d;case Gy:return Md}return t});var Yy=Object.prototype,Xy=Yy.hasOwnProperty;function Zy(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&Xy.call(n,"index")&&(e.index=n.index,e.input=n.input),e}var Yi=se.Uint8Array;function $o(n){var t=new n.constructor(n.byteLength);return new Yi(t).set(new Yi(n)),t}function Qy(n,t){var e=t?$o(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}var Jy=/\w*$/;function tE(n){var t=new n.constructor(n.source,Jy.exec(n));return t.lastIndex=n.lastIndex,t}var qd=Ue?Ue.prototype:void 0,Pd=qd?qd.valueOf:void 0;function eE(n){return Pd?Object(Pd.call(n)):{}}function Fd(n,t){var e=t?$o(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var nE="[object Boolean]",sE="[object Date]",iE="[object Map]",rE="[object Number]",oE="[object RegExp]",aE="[object Set]",lE="[object String]",cE="[object Symbol]",dE="[object ArrayBuffer]",hE="[object DataView]",uE="[object Float32Array]",fE="[object Float64Array]",mE="[object Int8Array]",pE="[object Int16Array]",gE="[object Int32Array]",bE="[object Uint8Array]",yE="[object Uint8ClampedArray]",EE="[object Uint16Array]",_E="[object Uint32Array]";function NE(n,t,e){var s=n.constructor;switch(t){case dE:return $o(n);case nE:case sE:return new s(+n);case hE:return Qy(n,e);case uE:case fE:case mE:case pE:case gE:case bE:case yE:case EE:case _E:return Fd(n,e);case iE:return new s;case rE:case lE:return new s(n);case oE:return tE(n);case aE:return new s;case cE:return eE(n)}}function jd(n){return typeof n.constructor=="function"&&!ko(n)?jb(Bo(n)):{}}var wE="[object Map]";function TE(n){return Ee(n)&&Ft(n)==wE}var Ud=Xn&&Xn.isMap,kE=Ud?Co(Ud):TE,AE="[object Set]";function CE(n){return Ee(n)&&Ft(n)==AE}var Hd=Xn&&Xn.isSet,SE=Hd?Co(Hd):CE,OE=1,LE=2,BE=4,zd="[object Arguments]",vE="[object Array]",xE="[object Boolean]",IE="[object Date]",VE="[object Error]",Wd="[object Function]",DE="[object GeneratorFunction]",$E="[object Map]",ME="[object Number]",Kd="[object Object]",RE="[object RegExp]",qE="[object Set]",PE="[object String]",FE="[object Symbol]",jE="[object WeakMap]",UE="[object ArrayBuffer]",HE="[object DataView]",zE="[object Float32Array]",WE="[object Float64Array]",KE="[object Int8Array]",GE="[object Int16Array]",YE="[object Int32Array]",XE="[object Uint8Array]",ZE="[object Uint8ClampedArray]",QE="[object Uint16Array]",JE="[object Uint32Array]",K={};K[zd]=K[vE]=K[UE]=K[HE]=K[xE]=K[IE]=K[zE]=K[WE]=K[KE]=K[GE]=K[YE]=K[$E]=K[ME]=K[Kd]=K[RE]=K[qE]=K[PE]=K[FE]=K[XE]=K[ZE]=K[QE]=K[JE]=!0,K[VE]=K[Wd]=K[jE]=!1;function Xi(n,t,e,s,r,o){var a,c=t&OE,l=t&LE,h=t&BE;if(a!==void 0)return a;if(!He(n))return n;var f=un(n);if(f){if(a=Zy(n),!c)return cd(n,a)}else{var u=Ft(n),p=u==Wd||u==DE;if(qs(n))return Ld(n,c);if(u==Kd||u==zd||p&&!r){if(a=l||p?{}:jd(n),!c)return l?Fy(n,Vy(a,n)):qy(n,Iy(a,n))}else{if(!K[u])return r?n:{};a=NE(n,u,c)}}o||(o=new ie);var g=o.get(n);if(g)return g;o.set(n,a),SE(n)?n.forEach(function(_){a.add(Xi(_,t,e,_,n,o))}):kE(n)&&n.forEach(function(_,N){a.set(N,Xi(_,t,e,N,n,o))});var y=h?l?jy:xo:l?Fs:Lo,E=f?void 0:y(n);return Zb(E||n,function(_,N){E&&(N=_,_=n[N]),hd(a,N,Xi(_,t,e,N,n,o))}),a}var t0=1,e0=4;function Zn(n){return Xi(n,t0|e0)}var n0="__lodash_hash_undefined__";function s0(n){return this.__data__.set(n,n0),this}function i0(n){return this.__data__.has(n)}function Zi(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new gn;++t<e;)this.add(n[t])}Zi.prototype.add=Zi.prototype.push=s0,Zi.prototype.has=i0;function r0(n,t){for(var e=-1,s=n==null?0:n.length;++e<s;)if(t(n[e],e,n))return!0;return!1}function o0(n,t){return n.has(t)}var a0=1,l0=2;function Gd(n,t,e,s,r,o){var a=e&a0,c=n.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;var h=o.get(n),f=o.get(t);if(h&&f)return h==t&&f==n;var u=-1,p=!0,g=e&l0?new Zi:void 0;for(o.set(n,t),o.set(t,n);++u<c;){var y=n[u],E=t[u];if(s)var _=a?s(E,y,u,t,n,o):s(y,E,u,n,t,o);if(_!==void 0){if(_)continue;p=!1;break}if(g){if(!r0(t,function(N,k){if(!o0(g,k)&&(y===N||r(y,N,e,s,o)))return g.push(k)})){p=!1;break}}else if(!(y===E||r(y,E,e,s,o))){p=!1;break}}return o.delete(n),o.delete(t),p}function c0(n){var t=-1,e=Array(n.size);return n.forEach(function(s,r){e[++t]=[r,s]}),e}function d0(n){var t=-1,e=Array(n.size);return n.forEach(function(s){e[++t]=s}),e}var h0=1,u0=2,f0="[object Boolean]",m0="[object Date]",p0="[object Error]",g0="[object Map]",b0="[object Number]",y0="[object RegExp]",E0="[object Set]",_0="[object String]",N0="[object Symbol]",w0="[object ArrayBuffer]",T0="[object DataView]",Yd=Ue?Ue.prototype:void 0,Mo=Yd?Yd.valueOf:void 0;function k0(n,t,e,s,r,o,a){switch(e){case T0:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case w0:return!(n.byteLength!=t.byteLength||!o(new Yi(n),new Yi(t)));case f0:case m0:case b0:return Ms(+n,+t);case p0:return n.name==t.name&&n.message==t.message;case y0:case _0:return n==t+"";case g0:var c=c0;case E0:var l=s&h0;if(c||(c=d0),n.size!=t.size&&!l)return!1;var h=a.get(n);if(h)return h==t;s|=u0,a.set(n,t);var f=Gd(c(n),c(t),s,r,o,a);return a.delete(n),f;case N0:if(Mo)return Mo.call(n)==Mo.call(t)}return!1}var A0=1,C0=Object.prototype,S0=C0.hasOwnProperty;function O0(n,t,e,s,r,o){var a=e&A0,c=xo(n),l=c.length,h=xo(t),f=h.length;if(l!=f&&!a)return!1;for(var u=l;u--;){var p=c[u];if(!(a?p in t:S0.call(t,p)))return!1}var g=o.get(n),y=o.get(t);if(g&&y)return g==t&&y==n;var E=!0;o.set(n,t),o.set(t,n);for(var _=a;++u<l;){p=c[u];var N=n[p],k=t[p];if(s)var A=a?s(k,N,p,t,n,o):s(N,k,p,n,t,o);if(!(A===void 0?N===k||r(N,k,e,s,o):A)){E=!1;break}_||(_=p=="constructor")}if(E&&!_){var S=n.constructor,O=t.constructor;S!=O&&"constructor"in n&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof O=="function"&&O instanceof O)&&(E=!1)}return o.delete(n),o.delete(t),E}var L0=1,Xd="[object Arguments]",Zd="[object Array]",Qi="[object Object]",B0=Object.prototype,Qd=B0.hasOwnProperty;function v0(n,t,e,s,r,o){var a=un(n),c=un(t),l=a?Zd:Ft(n),h=c?Zd:Ft(t);l=l==Xd?Qi:l,h=h==Xd?Qi:h;var f=l==Qi,u=h==Qi,p=l==h;if(p&&qs(n)){if(!qs(t))return!1;a=!0,f=!1}if(p&&!f)return o||(o=new ie),a||Oo(n)?Gd(n,t,e,s,r,o):k0(n,t,l,e,s,r,o);if(!(e&L0)){var g=f&&Qd.call(n,"__wrapped__"),y=u&&Qd.call(t,"__wrapped__");if(g||y){var E=g?n.value():n,_=y?t.value():t;return o||(o=new ie),r(E,_,e,s,o)}}return p?(o||(o=new ie),O0(n,t,e,s,r,o)):!1}function Jd(n,t,e,s,r){return n===t?!0:n==null||t==null||!Ee(n)&&!Ee(t)?n!==n&&t!==t:v0(n,t,e,s,Jd,r)}function x0(n){return function(t,e,s){for(var r=-1,o=Object(t),a=s(t),c=a.length;c--;){var l=a[++r];if(e(o[l],l,o)===!1)break}return t}}var I0=x0();function Ro(n,t,e){(e!==void 0&&!Ms(n[t],e)||e===void 0&&!(t in n))&&To(n,t,e)}function V0(n){return Ee(n)&&Wi(n)}function qo(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}function D0(n){return Rs(n,Fs(n))}function $0(n,t,e,s,r,o,a){var c=qo(n,e),l=qo(t,e),h=a.get(l);if(h){Ro(n,e,h);return}var f=o?o(c,l,e+"",n,t,a):void 0,u=f===void 0;if(u){var p=un(l),g=!p&&qs(l),y=!p&&!g&&Oo(l);f=l,p||g||y?un(c)?f=c:V0(c)?f=cd(c):g?(u=!1,f=Ld(l,!0)):y?(u=!1,f=Fd(l,!0)):f=[]:Cy(l)||Ao(l)?(f=c,Ao(c)?f=D0(c):(!He(c)||_o(c))&&(f=jd(l))):u=!1}u&&(a.set(l,f),r(f,l,s,o,a),a.delete(l)),Ro(n,e,f)}function th(n,t,e,s,r){n!==t&&I0(t,function(o,a){if(r||(r=new ie),He(o))$0(n,t,a,e,th,s,r);else{var c=s?s(qo(n,a),o,a+"",n,t,r):void 0;c===void 0&&(c=o),Ro(n,a,c)}},Fs)}function Po(n,t){return Jd(n,t)}var ze=o1(function(n,t,e){th(n,t,e)}),I=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(I||{});class re{constructor(t,e,s={}){this.attrName=t,this.keyName=e;const r=I.TYPE&I.ATTRIBUTE;this.scope=s.scope!=null?s.scope&I.LEVEL|r:I.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class Qn extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const eh=class fl{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let s=null;try{s=t.parentNode}catch{return null}return this.find(s,e)}return null}create(t,e,s){const r=this.query(e);if(r==null)throw new Qn(`Unable to create ${e} blot`);const o=r,a=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:o.create(s),c=new o(t,a,s);return fl.blots.set(c.domNode,c),c}find(t,e=!1){return fl.find(t,e)}query(t,e=I.ANY){let s;return typeof t=="string"?s=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?s=this.types.text:typeof t=="number"?t&I.LEVEL&I.BLOCK?s=this.types.block:t&I.LEVEL&I.INLINE&&(s=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(r=>(s=this.classes[r],!!s)),s=s||this.tags[t.tagName]),s==null?null:"scope"in s&&e&I.LEVEL&s.scope&&e&I.TYPE&s.scope?s:null}register(...t){return t.map(e=>{const s="blotName"in e,r="attrName"in e;if(!s&&!r)throw new Qn("Invalid definition");if(s&&e.blotName==="abstract")throw new Qn("Cannot register abstract class");const o=s?e.blotName:r?e.attrName:void 0;return this.types[o]=e,r?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):s&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(a=>a.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(a=>{(this.tags[a]==null||e.className==null)&&(this.tags[a]=e)}))),e})}};eh.blots=new WeakMap;let Jn=eh;function nh(n,t){return(n.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}class M0 extends re{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){nh(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const e=(nh(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}const jt=M0;function Fo(n){const t=n.split("-"),e=t.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return t[0]+e}class R0 extends re{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[Fo(this.keyName)]=e,!0):!1}remove(t){t.style[Fo(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[Fo(this.keyName)];return this.canAdd(t,e)?e:""}}const We=R0;class q0{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=Jn.find(this.domNode);if(t==null)return;const e=re.keys(this.domNode),s=jt.keys(this.domNode),r=We.keys(this.domNode);e.concat(s).concat(r).forEach(o=>{const a=t.scroll.query(o,I.ATTRIBUTE);a instanceof re&&(this.attributes[a.attrName]=a)})}copy(t){Object.keys(this.attributes).forEach(e=>{const s=this.attributes[e].value(this.domNode);t.format(e,s)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const Ji=q0,sh=class{constructor(t,e){this.scroll=t,this.domNode=e,Jn.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new Qn("Blot definition missing tagName");let e,s;return Array.isArray(this.tagName)?(typeof t=="string"?(s=t.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof t=="number"&&(s=t),typeof s=="number"?e=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?e=document.createElement(s):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),Jn.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,s,r){const o=this.isolate(t,e);if(this.scroll.query(s,I.BLOT)!=null&&r)o.wrap(s,r);else if(this.scroll.query(s,I.ATTRIBUTE)!=null){const a=this.scroll.create(this.statics.scope);o.wrap(a),a.format(s,r)}}insertAt(t,e,s){const r=s==null?this.scroll.create("text",e):this.scroll.create(e,s),o=this.split(t);this.parent.insertBefore(r,o||void 0)}isolate(t,e){const s=this.split(t);if(s==null)throw new Error("Attempt to isolate at end");return s.split(e),s}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const s=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){const s=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new Qn(`Cannot wrap ${t}`);return s.appendChild(this),s}};sh.blotName="abstract";let ih=sh;const rh=class extends ih{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};rh.scope=I.INLINE_BLOT;const at=rh;class P0{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let s=e();for(;s&&t>0;)t-=1,s=e();return s}contains(t){const e=this.iterator();let s=e();for(;s;){if(s===t)return!0;s=e()}return!1}indexOf(t){const e=this.iterator();let s=e(),r=0;for(;s;){if(s===t)return r;r+=1,s=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,s=this.head;for(;s!=null;){if(s===t)return e;e+=s.length(),s=s.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){const s=this.iterator();let r=s();for(;r;){const o=r.length();if(t<o||e&&t===o&&(r.next==null||r.next.length()!==0))return[r,t];t-=o,r=s()}return[null,0]}forEach(t){const e=this.iterator();let s=e();for(;s;)t(s),s=e()}forEachAt(t,e,s){if(e<=0)return;const[r,o]=this.find(t);let a=t-o;const c=this.iterator(r);let l=c();for(;l&&a<t+e;){const h=l.length();t>a?s(l,t-a,Math.min(e,a+h-t)):s(l,0,Math.min(h,t+e-a)),a+=h,l=c()}}map(t){return this.reduce((e,s)=>(e.push(t(s)),e),[])}reduce(t,e){const s=this.iterator();let r=s();for(;r;)e=t(e,r),r=s();return e}}function oh(n,t){const e=t.find(n);if(e)return e;try{return t.create(n)}catch{const s=t.create(I.INLINE);return Array.from(n.childNodes).forEach(r=>{s.domNode.appendChild(r)}),n.parentNode&&n.parentNode.replaceChild(s.domNode,n),s.attach(),s}}const ah=class nn extends ih{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,nn.uiClass&&this.uiNode.classList.add(nn.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new P0,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=oh(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof Qn)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(s,r,o)=>{s.deleteAt(r,o)})}descendant(t,e=0){const[s,r]=this.children.find(e);return t.blotName==null&&t(s)||t.blotName!=null&&s instanceof t?[s,r]:s instanceof nn?s.descendant(t,r):[null,-1]}descendants(t,e=0,s=Number.MAX_VALUE){let r=[],o=s;return this.children.forEachAt(e,s,(a,c,l)=>{(t.blotName==null&&t(a)||t.blotName!=null&&a instanceof t)&&r.push(a),a instanceof nn&&(r=r.concat(a.descendants(t,c,o))),o-=l}),r}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(s=>e instanceof s)||(e.statics.scope===I.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof nn?e.unwrap():e.remove())})}formatAt(t,e,s,r){this.children.forEachAt(t,e,(o,a,c)=>{o.formatAt(a,c,s,r)})}insertAt(t,e,s){const[r,o]=this.children.find(t);if(r)r.insertAt(o,e,s);else{const a=s==null?this.scroll.create("text",e):this.scroll.create(e,s);this.appendChild(a)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let s=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(s=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(t.domNode,s),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(s=>{t.insertBefore(s,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){const[s,r]=this.children.find(t,e),o=[[this,t]];return s instanceof nn?o.concat(s.path(r,e)):(s!=null&&o.push([s,r]),o)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const s=typeof t=="string"?this.scroll.create(t,e):t;return s instanceof nn&&this.moveChildren(s),super.replaceWith(s)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(t,this.length(),(r,o,a)=>{const c=r.split(o,e);c!=null&&s.appendChild(c)}),s}splitAfter(t){const e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const s=[],r=[];t.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(s.push(...o.addedNodes),r.push(...o.removedNodes))}),r.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const a=this.scroll.find(o);a!=null&&(a.domNode.parentNode==null||a.domNode.parentNode===this.domNode)&&a.detach()}),s.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,a)=>o===a?0:o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let a=null;o.nextSibling!=null&&(a=this.scroll.find(o.nextSibling));const c=oh(o,this.scroll);(c.next!==a||c.next==null)&&(c.parent!=null&&c.parent.removeChild(this),this.insertBefore(c,a||void 0))}),this.enforceAllowedChildren()}};ah.uiClass="";const Ut=ah;function F0(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(n[e]!==t[e])return!1;return!0}const ts=class _s extends Ut{static create(t){return super.create(t)}static formats(t,e){const s=e.query(_s.blotName);if(!(s!=null&&t.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Ji(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(s=>{s instanceof _s||(s=s.wrap(_s.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(t,I.INLINE);if(s==null)return;s instanceof re?this.attributes.attribute(s,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,r){this.formats()[s]!=null||this.scroll.query(s,I.ATTRIBUTE)?this.isolate(t,e).format(s,r):super.formatAt(t,e,s,r)}optimize(t){super.optimize(t);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const s=this.next;s instanceof _s&&s.prev===this&&F0(e,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(t,e){const s=super.replaceWith(t,e);return this.attributes.copy(s),s}update(t,e){super.update(t,e),t.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(t,e){const s=super.wrap(t,e);return s instanceof _s&&this.attributes.move(s),s}};ts.allowedChildren=[ts,at],ts.blotName="inline",ts.scope=I.INLINE_BLOT,ts.tagName="SPAN";const jo=ts,es=class ml extends Ut{static create(t){return super.create(t)}static formats(t,e){const s=e.query(ml.blotName);if(!(s!=null&&t.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Ji(this.domNode)}format(t,e){const s=this.scroll.query(t,I.BLOCK);s!=null&&(s instanceof re?this.attributes.attribute(s,e):t===this.statics.blotName&&!e?this.replaceWith(ml.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,r){this.scroll.query(s,I.BLOCK)!=null?this.format(s,r):super.formatAt(t,e,s,r)}insertAt(t,e,s){if(s==null||this.scroll.query(e,I.INLINE)!=null)super.insertAt(t,e,s);else{const r=this.split(t);if(r!=null){const o=this.scroll.create(e,s);r.parent.insertBefore(o,r)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){const s=super.replaceWith(t,e);return this.attributes.copy(s),s}update(t,e){super.update(t,e),t.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};es.blotName="block",es.scope=I.BLOCK_BLOT,es.tagName="P",es.allowedChildren=[jo,es,at];const Hs=es,Uo=class extends Ut{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,s,r){super.formatAt(t,e,s,r),this.enforceAllowedChildren()}insertAt(t,e,s){super.insertAt(t,e,s),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Uo.blotName="container",Uo.scope=I.BLOCK_BLOT;const tr=Uo;class j0 extends at{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,s,r){t===0&&e===this.length()?this.format(s,r):super.formatAt(t,e,s,r)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const At=j0,U0={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},H0=100,ns=class extends Ut{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,U0),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const s=this.registry.find(t,e);return s?s.scroll===this?s:e?this.find(s.scroll.domNode.parentNode,!0):null:null}query(t,e=I.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(t,e)}formatAt(t,e,s,r){this.update(),super.formatAt(t,e,s,r)}insertAt(t,e,s){this.update(),super.insertAt(t,e,s)}optimize(t=[],e={}){super.optimize(e);const s=e.mutationsMap||new WeakMap;let r=Array.from(this.observer.takeRecords());for(;r.length>0;)t.push(r.pop());const o=(l,h=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(s.has(l.domNode)||s.set(l.domNode,[]),h&&o(l.parent))},a=l=>{s.has(l.domNode)&&(l instanceof Ut&&l.children.forEach(a),s.delete(l.domNode),l.optimize(e))};let c=t;for(let l=0;c.length>0;l+=1){if(l>=H0)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(h=>{const f=this.find(h.target,!0);f!=null&&(f.domNode===h.target&&(h.type==="childList"?(o(this.find(h.previousSibling,!1)),Array.from(h.addedNodes).forEach(u=>{const p=this.find(u,!1);o(p,!1),p instanceof Ut&&p.children.forEach(g=>{o(g,!1)})})):h.type==="attributes"&&o(f.prev)),o(f))}),this.children.forEach(a),c=Array.from(this.observer.takeRecords()),r=c.slice();r.length>0;)t.push(r.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const s=new WeakMap;t.map(r=>{const o=this.find(r.target,!0);return o==null?null:s.has(o.domNode)?(s.get(o.domNode).push(r),null):(s.set(o.domNode,[r]),o)}).forEach(r=>{r!=null&&r!==this&&s.has(r.domNode)&&r.update(s.get(r.domNode)||[],e)}),e.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),e),this.optimize(t,e)}};ns.blotName="scroll",ns.defaultChild=Hs,ns.allowedChildren=[Hs,tr],ns.scope=I.BLOCK_BLOT,ns.tagName="DIV";const Ho=ns,zo=class wu extends at{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,s){s==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,s)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof wu&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(t,e){t.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};zo.blotName="text",zo.scope=I.INLINE_BLOT;const er=zo,z0=Object.freeze(Object.defineProperty({__proto__:null,Attributor:re,AttributorStore:Ji,BlockBlot:Hs,ClassAttributor:jt,ContainerBlot:tr,EmbedBlot:At,InlineBlot:jo,LeafBlot:at,ParentBlot:Ut,Registry:Jn,Scope:I,ScrollBlot:Ho,StyleAttributor:We,TextBlot:er},Symbol.toStringTag,{value:"Module"}));var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wo={exports:{}},Ct=-1,mt=1,J=0;function zs(n,t,e,s,r){if(n===t)return n?[[J,n]]:[];if(e!=null){var o=t_(n,t,e);if(o)return o}var a=Ko(n,t),c=n.substring(0,a);n=n.substring(a),t=t.substring(a),a=nr(n,t);var l=n.substring(n.length-a);n=n.substring(0,n.length-a),t=t.substring(0,t.length-a);var h=W0(n,t);return c&&h.unshift([J,c]),l&&h.push([J,l]),Go(h,r),s&&Y0(h),h}function W0(n,t){var e;if(!n)return[[mt,t]];if(!t)return[[Ct,n]];var s=n.length>t.length?n:t,r=n.length>t.length?t:n,o=s.indexOf(r);if(o!==-1)return e=[[mt,s.substring(0,o)],[J,r],[mt,s.substring(o+r.length)]],n.length>t.length&&(e[0][0]=e[2][0]=Ct),e;if(r.length===1)return[[Ct,n],[mt,t]];var a=G0(n,t);if(a){var c=a[0],l=a[1],h=a[2],f=a[3],u=a[4],p=zs(c,h),g=zs(l,f);return p.concat([[J,u]],g)}return K0(n,t)}function K0(n,t){for(var e=n.length,s=t.length,r=Math.ceil((e+s)/2),o=r,a=2*r,c=new Array(a),l=new Array(a),h=0;h<a;h++)c[h]=-1,l[h]=-1;c[o+1]=0,l[o+1]=0;for(var f=e-s,u=f%2!==0,p=0,g=0,y=0,E=0,_=0;_<r;_++){for(var N=-_+p;N<=_-g;N+=2){var k=o+N,A;N===-_||N!==_&&c[k-1]<c[k+1]?A=c[k+1]:A=c[k-1]+1;for(var S=A-N;A<e&&S<s&&n.charAt(A)===t.charAt(S);)A++,S++;if(c[k]=A,A>e)g+=2;else if(S>s)p+=2;else if(u){var O=o+f-N;if(O>=0&&O<a&&l[O]!==-1){var L=e-l[O];if(A>=L)return ch(n,t,A,S)}}}for(var V=-_+y;V<=_-E;V+=2){var O=o+V,L;V===-_||V!==_&&l[O-1]<l[O+1]?L=l[O+1]:L=l[O-1]+1;for(var M=L-V;L<e&&M<s&&n.charAt(e-L-1)===t.charAt(s-M-1);)L++,M++;if(l[O]=L,L>e)E+=2;else if(M>s)y+=2;else if(!u){var k=o+f-V;if(k>=0&&k<a&&c[k]!==-1){var A=c[k],S=o+A-k;if(L=e-L,A>=L)return ch(n,t,A,S)}}}}return[[Ct,n],[mt,t]]}function ch(n,t,e,s){var r=n.substring(0,e),o=t.substring(0,s),a=n.substring(e),c=t.substring(s),l=zs(r,o),h=zs(a,c);return l.concat(h)}function Ko(n,t){if(!n||!t||n.charAt(0)!==t.charAt(0))return 0;for(var e=0,s=Math.min(n.length,t.length),r=s,o=0;e<r;)n.substring(o,r)==t.substring(o,r)?(e=r,o=e):s=r,r=Math.floor((s-e)/2+e);return mh(n.charCodeAt(r-1))&&r--,r}function dh(n,t){var e=n.length,s=t.length;if(e==0||s==0)return 0;e>s?n=n.substring(e-s):e<s&&(t=t.substring(0,e));var r=Math.min(e,s);if(n==t)return r;for(var o=0,a=1;;){var c=n.substring(r-a),l=t.indexOf(c);if(l==-1)return o;a+=l,(l==0||n.substring(r-a)==t.substring(0,a))&&(o=a,a++)}}function nr(n,t){if(!n||!t||n.slice(-1)!==t.slice(-1))return 0;for(var e=0,s=Math.min(n.length,t.length),r=s,o=0;e<r;)n.substring(n.length-r,n.length-o)==t.substring(t.length-r,t.length-o)?(e=r,o=e):s=r,r=Math.floor((s-e)/2+e);return ph(n.charCodeAt(n.length-r))&&r--,r}function G0(n,t){var e=n.length>t.length?n:t,s=n.length>t.length?t:n;if(e.length<4||s.length*2<e.length)return null;function r(g,y,E){for(var _=g.substring(E,E+Math.floor(g.length/4)),N=-1,k="",A,S,O,L;(N=y.indexOf(_,N+1))!==-1;){var V=Ko(g.substring(E),y.substring(N)),M=nr(g.substring(0,E),y.substring(0,N));k.length<M+V&&(k=y.substring(N-M,N)+y.substring(N,N+V),A=g.substring(0,E-M),S=g.substring(E+V),O=y.substring(0,N-M),L=y.substring(N+V))}return k.length*2>=g.length?[A,S,O,L,k]:null}var o=r(e,s,Math.ceil(e.length/4)),a=r(e,s,Math.ceil(e.length/2)),c;if(!o&&!a)return null;a?o?c=o[4].length>a[4].length?o:a:c=a:c=o;var l,h,f,u;n.length>t.length?(l=c[0],h=c[1],f=c[2],u=c[3]):(f=c[0],u=c[1],l=c[2],h=c[3]);var p=c[4];return[l,h,f,u,p]}function Y0(n){for(var t=!1,e=[],s=0,r=null,o=0,a=0,c=0,l=0,h=0;o<n.length;)n[o][0]==J?(e[s++]=o,a=l,c=h,l=0,h=0,r=n[o][1]):(n[o][0]==mt?l+=n[o][1].length:h+=n[o][1].length,r&&r.length<=Math.max(a,c)&&r.length<=Math.max(l,h)&&(n.splice(e[s-1],0,[Ct,r]),n[e[s-1]+1][0]=mt,s--,s--,o=s>0?e[s-1]:-1,a=0,c=0,l=0,h=0,r=null,t=!0)),o++;for(t&&Go(n),Q0(n),o=1;o<n.length;){if(n[o-1][0]==Ct&&n[o][0]==mt){var f=n[o-1][1],u=n[o][1],p=dh(f,u),g=dh(u,f);p>=g?(p>=f.length/2||p>=u.length/2)&&(n.splice(o,0,[J,u.substring(0,p)]),n[o-1][1]=f.substring(0,f.length-p),n[o+1][1]=u.substring(p),o++):(g>=f.length/2||g>=u.length/2)&&(n.splice(o,0,[J,f.substring(0,g)]),n[o-1][0]=mt,n[o-1][1]=u.substring(0,u.length-g),n[o+1][0]=Ct,n[o+1][1]=f.substring(g),o++),o++}o++}}var hh=/[^a-zA-Z0-9]/,uh=/\s/,fh=/[\r\n]/,X0=/\n\r?\n$/,Z0=/^\r?\n\r?\n/;function Q0(n){function t(g,y){if(!g||!y)return 6;var E=g.charAt(g.length-1),_=y.charAt(0),N=E.match(hh),k=_.match(hh),A=N&&E.match(uh),S=k&&_.match(uh),O=A&&E.match(fh),L=S&&_.match(fh),V=O&&g.match(X0),M=L&&y.match(Z0);return V||M?5:O||L?4:N&&!A&&S?3:A||S?2:N||k?1:0}for(var e=1;e<n.length-1;){if(n[e-1][0]==J&&n[e+1][0]==J){var s=n[e-1][1],r=n[e][1],o=n[e+1][1],a=nr(s,r);if(a){var c=r.substring(r.length-a);s=s.substring(0,s.length-a),r=c+r.substring(0,r.length-a),o=c+o}for(var l=s,h=r,f=o,u=t(s,r)+t(r,o);r.charAt(0)===o.charAt(0);){s+=r.charAt(0),r=r.substring(1)+o.charAt(0),o=o.substring(1);var p=t(s,r)+t(r,o);p>=u&&(u=p,l=s,h=r,f=o)}n[e-1][1]!=l&&(l?n[e-1][1]=l:(n.splice(e-1,1),e--),n[e][1]=h,f?n[e+1][1]=f:(n.splice(e+1,1),e--))}e++}}function Go(n,t){n.push([J,""]);for(var e=0,s=0,r=0,o="",a="",c;e<n.length;){if(e<n.length-1&&!n[e][1]){n.splice(e,1);continue}switch(n[e][0]){case mt:r++,a+=n[e][1],e++;break;case Ct:s++,o+=n[e][1],e++;break;case J:var l=e-r-s-1;if(t){if(l>=0&&bh(n[l][1])){var h=n[l][1].slice(-1);if(n[l][1]=n[l][1].slice(0,-1),o=h+o,a=h+a,!n[l][1]){n.splice(l,1),e--;var f=l-1;n[f]&&n[f][0]===mt&&(r++,a=n[f][1]+a,f--),n[f]&&n[f][0]===Ct&&(s++,o=n[f][1]+o,f--),l=f}}if(gh(n[e][1])){var h=n[e][1].charAt(0);n[e][1]=n[e][1].slice(1),o+=h,a+=h}}if(e<n.length-1&&!n[e][1]){n.splice(e,1);break}if(o.length>0||a.length>0){o.length>0&&a.length>0&&(c=Ko(a,o),c!==0&&(l>=0?n[l][1]+=a.substring(0,c):(n.splice(0,0,[J,a.substring(0,c)]),e++),a=a.substring(c),o=o.substring(c)),c=nr(a,o),c!==0&&(n[e][1]=a.substring(a.length-c)+n[e][1],a=a.substring(0,a.length-c),o=o.substring(0,o.length-c)));var u=r+s;o.length===0&&a.length===0?(n.splice(e-u,u),e=e-u):o.length===0?(n.splice(e-u,u,[mt,a]),e=e-u+1):a.length===0?(n.splice(e-u,u,[Ct,o]),e=e-u+1):(n.splice(e-u,u,[Ct,o],[mt,a]),e=e-u+2)}e!==0&&n[e-1][0]===J?(n[e-1][1]+=n[e][1],n.splice(e,1)):e++,r=0,s=0,o="",a="";break}}n[n.length-1][1]===""&&n.pop();var p=!1;for(e=1;e<n.length-1;)n[e-1][0]===J&&n[e+1][0]===J&&(n[e][1].substring(n[e][1].length-n[e-1][1].length)===n[e-1][1]?(n[e][1]=n[e-1][1]+n[e][1].substring(0,n[e][1].length-n[e-1][1].length),n[e+1][1]=n[e-1][1]+n[e+1][1],n.splice(e-1,1),p=!0):n[e][1].substring(0,n[e+1][1].length)==n[e+1][1]&&(n[e-1][1]+=n[e+1][1],n[e][1]=n[e][1].substring(n[e+1][1].length)+n[e+1][1],n.splice(e+1,1),p=!0)),e++;p&&Go(n,t)}function mh(n){return n>=55296&&n<=56319}function ph(n){return n>=56320&&n<=57343}function gh(n){return ph(n.charCodeAt(0))}function bh(n){return mh(n.charCodeAt(n.length-1))}function J0(n){for(var t=[],e=0;e<n.length;e++)n[e][1].length>0&&t.push(n[e]);return t}function Yo(n,t,e,s){return bh(n)||gh(s)?null:J0([[J,n],[Ct,t],[mt,e],[J,s]])}function t_(n,t,e){var s=typeof e=="number"?{index:e,length:0}:e.oldRange,r=typeof e=="number"?null:e.newRange,o=n.length,a=t.length;if(s.length===0&&(r===null||r.length===0)){var c=s.index,l=n.slice(0,c),h=n.slice(c),f=r?r.index:null;t:{var u=c+a-o;if(f!==null&&f!==u||u<0||u>a)break t;var p=t.slice(0,u),g=t.slice(u);if(g!==h)break t;var y=Math.min(c,u),E=l.slice(0,y),_=p.slice(0,y);if(E!==_)break t;var N=l.slice(y),k=p.slice(y);return Yo(E,N,k,h)}t:{if(f!==null&&f!==c)break t;var A=c,p=t.slice(0,A),g=t.slice(A);if(p!==l)break t;var S=Math.min(o-A,a-A),O=h.slice(h.length-S),L=g.slice(g.length-S);if(O!==L)break t;var N=h.slice(0,h.length-S),k=g.slice(0,g.length-S);return Yo(l,N,k,O)}}if(s.length>0&&r&&r.length===0)t:{var E=n.slice(0,s.index),O=n.slice(s.index+s.length),y=E.length,S=O.length;if(a<y+S)break t;var _=t.slice(0,y),L=t.slice(a-S);if(E!==_||O!==L)break t;var N=n.slice(y,o-S),k=t.slice(y,a-S);return Yo(E,N,k,O)}return null}function sr(n,t,e,s){return zs(n,t,e,s,!0)}sr.INSERT=mt,sr.DELETE=Ct,sr.EQUAL=J;var e_=sr,ir={exports:{}};ir.exports,function(n,t){var e=200,s="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",a="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",f="[object Function]",u="[object GeneratorFunction]",p="[object Map]",g="[object Number]",y="[object Object]",E="[object Promise]",_="[object RegExp]",N="[object Set]",k="[object String]",A="[object Symbol]",S="[object WeakMap]",O="[object ArrayBuffer]",L="[object DataView]",V="[object Float32Array]",M="[object Float64Array]",H="[object Int8Array]",z="[object Int16Array]",Y="[object Int32Array]",tt="[object Uint8Array]",Z="[object Uint8ClampedArray]",Mt="[object Uint16Array]",Rt="[object Uint32Array]",it=/[\\^$.*+?()[\]{}|]/g,pt=/\w*$/,Xe=/^\[object .+?Constructor\]$/,Xt=/^(?:0|[1-9]\d*)$/,P={};P[o]=P[a]=P[O]=P[L]=P[c]=P[l]=P[V]=P[M]=P[H]=P[z]=P[Y]=P[p]=P[g]=P[y]=P[_]=P[N]=P[k]=P[A]=P[tt]=P[Z]=P[Mt]=P[Rt]=!0,P[h]=P[f]=P[S]=!1;var Nn=typeof Ke=="object"&&Ke&&Ke.Object===Object&&Ke,Ce=typeof self=="object"&&self&&self.Object===Object&&self,ct=Nn||Ce||Function("return this")(),Zt=t&&!t.nodeType&&t,q=Zt&&!0&&n&&!n.nodeType&&n,ce=q&&q.exports===Zt;function Ze(d,m){return d.set(m[0],m[1]),d}function et(d,m){return d.add(m),d}function Qe(d,m){for(var b=-1,w=d?d.length:0;++b<w&&m(d[b],b,d)!==!1;);return d}function cs(d,m){for(var b=-1,w=m.length,R=d.length;++b<w;)d[R+b]=m[b];return d}function Se(d,m,b,w){for(var R=-1,D=d?d.length:0;++R<D;)b=m(b,d[R],R,d);return b}function wn(d,m){for(var b=-1,w=Array(d);++b<d;)w[b]=m(b);return w}function Tn(d,m){return d==null?void 0:d[m]}function kn(d){var m=!1;if(d!=null&&typeof d.toString!="function")try{m=!!(d+"")}catch{}return m}function ds(d){var m=-1,b=Array(d.size);return d.forEach(function(w,R){b[++m]=[R,w]}),b}function Je(d,m){return function(b){return d(m(b))}}function An(d){var m=-1,b=Array(d.size);return d.forEach(function(w){b[++m]=w}),b}var ii=Array.prototype,ri=Function.prototype,yt=Object.prototype,de=ct["__core-js_shared__"],Cn=function(){var d=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Sn=ri.toString,Et=yt.hasOwnProperty,Oe=yt.toString,hs=RegExp("^"+Sn.call(Et).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=ce?ct.Buffer:void 0,Le=ct.Symbol,oi=ct.Uint8Array,qt=Je(Object.getPrototypeOf,Object),br=Object.create,yr=yt.propertyIsEnumerable,La=ii.splice,ai=Object.getOwnPropertySymbols,us=he?he.isBuffer:void 0,Er=Je(Object.keys,Object),fs=Jt(ct,"DataView"),On=Jt(ct,"Map"),Qt=Jt(ct,"Promise"),ms=Jt(ct,"Set"),li=Jt(ct,"WeakMap"),Ln=Jt(Object,"create"),ci=gt(fs),Bn=gt(On),di=gt(Qt),hi=gt(ms),ui=gt(li),tn=Le?Le.prototype:void 0,_r=tn?tn.valueOf:void 0;function Be(d){var m=-1,b=d?d.length:0;for(this.clear();++m<b;){var w=d[m];this.set(w[0],w[1])}}function Ba(){this.__data__=Ln?Ln(null):{}}function va(d){return this.has(d)&&delete this.__data__[d]}function xa(d){var m=this.__data__;if(Ln){var b=m[d];return b===s?void 0:b}return Et.call(m,d)?m[d]:void 0}function Nr(d){var m=this.__data__;return Ln?m[d]!==void 0:Et.call(m,d)}function fi(d,m){var b=this.__data__;return b[d]=Ln&&m===void 0?s:m,this}Be.prototype.clear=Ba,Be.prototype.delete=va,Be.prototype.get=xa,Be.prototype.has=Nr,Be.prototype.set=fi;function rt(d){var m=-1,b=d?d.length:0;for(this.clear();++m<b;){var w=d[m];this.set(w[0],w[1])}}function Ia(){this.__data__=[]}function Va(d){var m=this.__data__,b=gs(m,d);if(b<0)return!1;var w=m.length-1;return b==w?m.pop():La.call(m,b,1),!0}function Da(d){var m=this.__data__,b=gs(m,d);return b<0?void 0:m[b][1]}function $a(d){return gs(this.__data__,d)>-1}function Ma(d,m){var b=this.__data__,w=gs(b,d);return w<0?b.push([d,m]):b[w][1]=m,this}rt.prototype.clear=Ia,rt.prototype.delete=Va,rt.prototype.get=Da,rt.prototype.has=$a,rt.prototype.set=Ma;function dt(d){var m=-1,b=d?d.length:0;for(this.clear();++m<b;){var w=d[m];this.set(w[0],w[1])}}function Ra(){this.__data__={hash:new Be,map:new(On||rt),string:new Be}}function qa(d){return xn(this,d).delete(d)}function Pa(d){return xn(this,d).get(d)}function Fa(d){return xn(this,d).has(d)}function ja(d,m){return xn(this,d).set(d,m),this}dt.prototype.clear=Ra,dt.prototype.delete=qa,dt.prototype.get=Pa,dt.prototype.has=Fa,dt.prototype.set=ja;function _t(d){this.__data__=new rt(d)}function Ua(){this.__data__=new rt}function Ha(d){return this.__data__.delete(d)}function za(d){return this.__data__.get(d)}function Wa(d){return this.__data__.has(d)}function Ka(d,m){var b=this.__data__;if(b instanceof rt){var w=b.__data__;if(!On||w.length<e-1)return w.push([d,m]),this;b=this.__data__=new dt(w)}return b.set(d,m),this}_t.prototype.clear=Ua,_t.prototype.delete=Ha,_t.prototype.get=za,_t.prototype.has=Wa,_t.prototype.set=Ka;function ps(d,m){var b=bi(d)||ys(d)?wn(d.length,String):[],w=b.length,R=!!w;for(var D in d)Et.call(d,D)&&!(R&&(D=="length"||al(D,w)))&&b.push(D);return b}function wr(d,m,b){var w=d[m];(!(Et.call(d,m)&&Sr(w,b))||b===void 0&&!(m in d))&&(d[m]=b)}function gs(d,m){for(var b=d.length;b--;)if(Sr(d[b][0],m))return b;return-1}function ue(d,m){return d&&gi(m,Ei(m),d)}function mi(d,m,b,w,R,D,j){var F;if(w&&(F=D?w(d,R,D,j):w(d)),F!==void 0)return F;if(!me(d))return d;var Q=bi(d);if(Q){if(F=rl(d),!m)return nl(d,F)}else{var U=xe(d),ht=U==f||U==u;if(Or(d))return bs(d,m);if(U==y||U==o||ht&&!D){if(kn(d))return D?d:{};if(F=fe(ht?{}:d),!m)return sl(d,ue(F,d))}else{if(!P[U])return D?d:{};F=ol(d,U,mi,m)}}j||(j=new _t);var Nt=j.get(d);if(Nt)return Nt;if(j.set(d,F),!Q)var nt=b?il(d):Ei(d);return Qe(nt||d,function(ut,ot){nt&&(ot=ut,ut=d[ot]),wr(F,ot,mi(ut,m,b,w,ot,d,j))}),F}function Ga(d){return me(d)?br(d):{}}function Ya(d,m,b){var w=m(d);return bi(d)?w:cs(w,b(d))}function Xa(d){return Oe.call(d)}function Za(d){if(!me(d)||cl(d))return!1;var m=yi(d)||kn(d)?hs:Xe;return m.test(gt(d))}function Qa(d){if(!Ar(d))return Er(d);var m=[];for(var b in Object(d))Et.call(d,b)&&b!="constructor"&&m.push(b);return m}function bs(d,m){if(m)return d.slice();var b=new d.constructor(d.length);return d.copy(b),b}function pi(d){var m=new d.constructor(d.byteLength);return new oi(m).set(new oi(d)),m}function vn(d,m){var b=m?pi(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.byteLength)}function Tr(d,m,b){var w=m?b(ds(d),!0):ds(d);return Se(w,Ze,new d.constructor)}function kr(d){var m=new d.constructor(d.source,pt.exec(d));return m.lastIndex=d.lastIndex,m}function Ja(d,m,b){var w=m?b(An(d),!0):An(d);return Se(w,et,new d.constructor)}function tl(d){return _r?Object(_r.call(d)):{}}function el(d,m){var b=m?pi(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.length)}function nl(d,m){var b=-1,w=d.length;for(m||(m=Array(w));++b<w;)m[b]=d[b];return m}function gi(d,m,b,w){b||(b={});for(var R=-1,D=m.length;++R<D;){var j=m[R],F=void 0;wr(b,j,F===void 0?d[j]:F)}return b}function sl(d,m){return gi(d,ve(d),m)}function il(d){return Ya(d,Ei,ve)}function xn(d,m){var b=d.__data__;return ll(m)?b[typeof m=="string"?"string":"hash"]:b.map}function Jt(d,m){var b=Tn(d,m);return Za(b)?b:void 0}var ve=ai?Je(ai,Object):hl,xe=Xa;(fs&&xe(new fs(new ArrayBuffer(1)))!=L||On&&xe(new On)!=p||Qt&&xe(Qt.resolve())!=E||ms&&xe(new ms)!=N||li&&xe(new li)!=S)&&(xe=function(d){var m=Oe.call(d),b=m==y?d.constructor:void 0,w=b?gt(b):void 0;if(w)switch(w){case ci:return L;case Bn:return p;case di:return E;case hi:return N;case ui:return S}return m});function rl(d){var m=d.length,b=d.constructor(m);return m&&typeof d[0]=="string"&&Et.call(d,"index")&&(b.index=d.index,b.input=d.input),b}function fe(d){return typeof d.constructor=="function"&&!Ar(d)?Ga(qt(d)):{}}function ol(d,m,b,w){var R=d.constructor;switch(m){case O:return pi(d);case c:case l:return new R(+d);case L:return vn(d,w);case V:case M:case H:case z:case Y:case tt:case Z:case Mt:case Rt:return el(d,w);case p:return Tr(d,w,b);case g:case k:return new R(d);case _:return kr(d);case N:return Ja(d,w,b);case A:return tl(d)}}function al(d,m){return m=m??r,!!m&&(typeof d=="number"||Xt.test(d))&&d>-1&&d%1==0&&d<m}function ll(d){var m=typeof d;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?d!=="__proto__":d===null}function cl(d){return!!Cn&&Cn in d}function Ar(d){var m=d&&d.constructor,b=typeof m=="function"&&m.prototype||yt;return d===b}function gt(d){if(d!=null){try{return Sn.call(d)}catch{}try{return d+""}catch{}}return""}function Cr(d){return mi(d,!0,!0)}function Sr(d,m){return d===m||d!==d&&m!==m}function ys(d){return dl(d)&&Et.call(d,"callee")&&(!yr.call(d,"callee")||Oe.call(d)==o)}var bi=Array.isArray;function Es(d){return d!=null&&Lr(d.length)&&!yi(d)}function dl(d){return Br(d)&&Es(d)}var Or=us||ul;function yi(d){var m=me(d)?Oe.call(d):"";return m==f||m==u}function Lr(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=r}function me(d){var m=typeof d;return!!d&&(m=="object"||m=="function")}function Br(d){return!!d&&typeof d=="object"}function Ei(d){return Es(d)?ps(d):Qa(d)}function hl(){return[]}function ul(){return!1}n.exports=Cr}(ir,ir.exports);var yh=ir.exports,rr={exports:{}};rr.exports,function(n,t){var e=200,s="__lodash_hash_undefined__",r=1,o=2,a=9007199254740991,c="[object Arguments]",l="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",u="[object Date]",p="[object Error]",g="[object Function]",y="[object GeneratorFunction]",E="[object Map]",_="[object Number]",N="[object Null]",k="[object Object]",A="[object Promise]",S="[object Proxy]",O="[object RegExp]",L="[object Set]",V="[object String]",M="[object Symbol]",H="[object Undefined]",z="[object WeakMap]",Y="[object ArrayBuffer]",tt="[object DataView]",Z="[object Float32Array]",Mt="[object Float64Array]",Rt="[object Int8Array]",it="[object Int16Array]",pt="[object Int32Array]",Xe="[object Uint8Array]",Xt="[object Uint8ClampedArray]",P="[object Uint16Array]",Nn="[object Uint32Array]",Ce=/[\\^$.*+?()[\]{}|]/g,ct=/^\[object .+?Constructor\]$/,Zt=/^(?:0|[1-9]\d*)$/,q={};q[Z]=q[Mt]=q[Rt]=q[it]=q[pt]=q[Xe]=q[Xt]=q[P]=q[Nn]=!0,q[c]=q[l]=q[Y]=q[f]=q[tt]=q[u]=q[p]=q[g]=q[E]=q[_]=q[k]=q[O]=q[L]=q[V]=q[z]=!1;var ce=typeof Ke=="object"&&Ke&&Ke.Object===Object&&Ke,Ze=typeof self=="object"&&self&&self.Object===Object&&self,et=ce||Ze||Function("return this")(),Qe=t&&!t.nodeType&&t,cs=Qe&&!0&&n&&!n.nodeType&&n,Se=cs&&cs.exports===Qe,wn=Se&&ce.process,Tn=function(){try{return wn&&wn.binding&&wn.binding("util")}catch{}}(),kn=Tn&&Tn.isTypedArray;function ds(d,m){for(var b=-1,w=d==null?0:d.length,R=0,D=[];++b<w;){var j=d[b];m(j,b,d)&&(D[R++]=j)}return D}function Je(d,m){for(var b=-1,w=m.length,R=d.length;++b<w;)d[R+b]=m[b];return d}function An(d,m){for(var b=-1,w=d==null?0:d.length;++b<w;)if(m(d[b],b,d))return!0;return!1}function ii(d,m){for(var b=-1,w=Array(d);++b<d;)w[b]=m(b);return w}function ri(d){return function(m){return d(m)}}function yt(d,m){return d.has(m)}function de(d,m){return d==null?void 0:d[m]}function Cn(d){var m=-1,b=Array(d.size);return d.forEach(function(w,R){b[++m]=[R,w]}),b}function Sn(d,m){return function(b){return d(m(b))}}function Et(d){var m=-1,b=Array(d.size);return d.forEach(function(w){b[++m]=w}),b}var Oe=Array.prototype,hs=Function.prototype,he=Object.prototype,Le=et["__core-js_shared__"],oi=hs.toString,qt=he.hasOwnProperty,br=function(){var d=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),yr=he.toString,La=RegExp("^"+oi.call(qt).replace(Ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ai=Se?et.Buffer:void 0,us=et.Symbol,Er=et.Uint8Array,fs=he.propertyIsEnumerable,On=Oe.splice,Qt=us?us.toStringTag:void 0,ms=Object.getOwnPropertySymbols,li=ai?ai.isBuffer:void 0,Ln=Sn(Object.keys,Object),ci=ve(et,"DataView"),Bn=ve(et,"Map"),di=ve(et,"Promise"),hi=ve(et,"Set"),ui=ve(et,"WeakMap"),tn=ve(Object,"create"),_r=gt(ci),Be=gt(Bn),Ba=gt(di),va=gt(hi),xa=gt(ui),Nr=us?us.prototype:void 0,fi=Nr?Nr.valueOf:void 0;function rt(d){var m=-1,b=d==null?0:d.length;for(this.clear();++m<b;){var w=d[m];this.set(w[0],w[1])}}function Ia(){this.__data__=tn?tn(null):{},this.size=0}function Va(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m}function Da(d){var m=this.__data__;if(tn){var b=m[d];return b===s?void 0:b}return qt.call(m,d)?m[d]:void 0}function $a(d){var m=this.__data__;return tn?m[d]!==void 0:qt.call(m,d)}function Ma(d,m){var b=this.__data__;return this.size+=this.has(d)?0:1,b[d]=tn&&m===void 0?s:m,this}rt.prototype.clear=Ia,rt.prototype.delete=Va,rt.prototype.get=Da,rt.prototype.has=$a,rt.prototype.set=Ma;function dt(d){var m=-1,b=d==null?0:d.length;for(this.clear();++m<b;){var w=d[m];this.set(w[0],w[1])}}function Ra(){this.__data__=[],this.size=0}function qa(d){var m=this.__data__,b=bs(m,d);if(b<0)return!1;var w=m.length-1;return b==w?m.pop():On.call(m,b,1),--this.size,!0}function Pa(d){var m=this.__data__,b=bs(m,d);return b<0?void 0:m[b][1]}function Fa(d){return bs(this.__data__,d)>-1}function ja(d,m){var b=this.__data__,w=bs(b,d);return w<0?(++this.size,b.push([d,m])):b[w][1]=m,this}dt.prototype.clear=Ra,dt.prototype.delete=qa,dt.prototype.get=Pa,dt.prototype.has=Fa,dt.prototype.set=ja;function _t(d){var m=-1,b=d==null?0:d.length;for(this.clear();++m<b;){var w=d[m];this.set(w[0],w[1])}}function Ua(){this.size=0,this.__data__={hash:new rt,map:new(Bn||dt),string:new rt}}function Ha(d){var m=Jt(this,d).delete(d);return this.size-=m?1:0,m}function za(d){return Jt(this,d).get(d)}function Wa(d){return Jt(this,d).has(d)}function Ka(d,m){var b=Jt(this,d),w=b.size;return b.set(d,m),this.size+=b.size==w?0:1,this}_t.prototype.clear=Ua,_t.prototype.delete=Ha,_t.prototype.get=za,_t.prototype.has=Wa,_t.prototype.set=Ka;function ps(d){var m=-1,b=d==null?0:d.length;for(this.__data__=new _t;++m<b;)this.add(d[m])}function wr(d){return this.__data__.set(d,s),this}function gs(d){return this.__data__.has(d)}ps.prototype.add=ps.prototype.push=wr,ps.prototype.has=gs;function ue(d){var m=this.__data__=new dt(d);this.size=m.size}function mi(){this.__data__=new dt,this.size=0}function Ga(d){var m=this.__data__,b=m.delete(d);return this.size=m.size,b}function Ya(d){return this.__data__.get(d)}function Xa(d){return this.__data__.has(d)}function Za(d,m){var b=this.__data__;if(b instanceof dt){var w=b.__data__;if(!Bn||w.length<e-1)return w.push([d,m]),this.size=++b.size,this;b=this.__data__=new _t(w)}return b.set(d,m),this.size=b.size,this}ue.prototype.clear=mi,ue.prototype.delete=Ga,ue.prototype.get=Ya,ue.prototype.has=Xa,ue.prototype.set=Za;function Qa(d,m){var b=ys(d),w=!b&&Sr(d),R=!b&&!w&&Es(d),D=!b&&!w&&!R&&Br(d),j=b||w||R||D,F=j?ii(d.length,String):[],Q=F.length;for(var U in d)qt.call(d,U)&&!(j&&(U=="length"||R&&(U=="offset"||U=="parent")||D&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||ol(U,Q)))&&F.push(U);return F}function bs(d,m){for(var b=d.length;b--;)if(Cr(d[b][0],m))return b;return-1}function pi(d,m,b){var w=m(d);return ys(d)?w:Je(w,b(d))}function vn(d){return d==null?d===void 0?H:N:Qt&&Qt in Object(d)?xe(d):Ar(d)}function Tr(d){return me(d)&&vn(d)==c}function kr(d,m,b,w,R){return d===m?!0:d==null||m==null||!me(d)&&!me(m)?d!==d&&m!==m:Ja(d,m,b,w,kr,R)}function Ja(d,m,b,w,R,D){var j=ys(d),F=ys(m),Q=j?l:fe(d),U=F?l:fe(m);Q=Q==c?k:Q,U=U==c?k:U;var ht=Q==k,Nt=U==k,nt=Q==U;if(nt&&Es(d)){if(!Es(m))return!1;j=!0,ht=!1}if(nt&&!ht)return D||(D=new ue),j||Br(d)?gi(d,m,b,w,R,D):sl(d,m,Q,b,w,R,D);if(!(b&r)){var ut=ht&&qt.call(d,"__wrapped__"),ot=Nt&&qt.call(m,"__wrapped__");if(ut||ot){var en=ut?d.value():d,Ie=ot?m.value():m;return D||(D=new ue),R(en,Ie,b,w,D)}}return nt?(D||(D=new ue),il(d,m,b,w,R,D)):!1}function tl(d){if(!Lr(d)||ll(d))return!1;var m=Or(d)?La:ct;return m.test(gt(d))}function el(d){return me(d)&&yi(d.length)&&!!q[vn(d)]}function nl(d){if(!cl(d))return Ln(d);var m=[];for(var b in Object(d))qt.call(d,b)&&b!="constructor"&&m.push(b);return m}function gi(d,m,b,w,R,D){var j=b&r,F=d.length,Q=m.length;if(F!=Q&&!(j&&Q>F))return!1;var U=D.get(d);if(U&&D.get(m))return U==m;var ht=-1,Nt=!0,nt=b&o?new ps:void 0;for(D.set(d,m),D.set(m,d);++ht<F;){var ut=d[ht],ot=m[ht];if(w)var en=j?w(ot,ut,ht,m,d,D):w(ut,ot,ht,d,m,D);if(en!==void 0){if(en)continue;Nt=!1;break}if(nt){if(!An(m,function(Ie,In){if(!yt(nt,In)&&(ut===Ie||R(ut,Ie,b,w,D)))return nt.push(In)})){Nt=!1;break}}else if(!(ut===ot||R(ut,ot,b,w,D))){Nt=!1;break}}return D.delete(d),D.delete(m),Nt}function sl(d,m,b,w,R,D,j){switch(b){case tt:if(d.byteLength!=m.byteLength||d.byteOffset!=m.byteOffset)return!1;d=d.buffer,m=m.buffer;case Y:return!(d.byteLength!=m.byteLength||!D(new Er(d),new Er(m)));case f:case u:case _:return Cr(+d,+m);case p:return d.name==m.name&&d.message==m.message;case O:case V:return d==m+"";case E:var F=Cn;case L:var Q=w&r;if(F||(F=Et),d.size!=m.size&&!Q)return!1;var U=j.get(d);if(U)return U==m;w|=o,j.set(d,m);var ht=gi(F(d),F(m),w,R,D,j);return j.delete(d),ht;case M:if(fi)return fi.call(d)==fi.call(m)}return!1}function il(d,m,b,w,R,D){var j=b&r,F=xn(d),Q=F.length,U=xn(m),ht=U.length;if(Q!=ht&&!j)return!1;for(var Nt=Q;Nt--;){var nt=F[Nt];if(!(j?nt in m:qt.call(m,nt)))return!1}var ut=D.get(d);if(ut&&D.get(m))return ut==m;var ot=!0;D.set(d,m),D.set(m,d);for(var en=j;++Nt<Q;){nt=F[Nt];var Ie=d[nt],In=m[nt];if(w)var _u=j?w(In,Ie,nt,m,d,D):w(Ie,In,nt,d,m,D);if(!(_u===void 0?Ie===In||R(Ie,In,b,w,D):_u)){ot=!1;break}en||(en=nt=="constructor")}if(ot&&!en){var vr=d.constructor,xr=m.constructor;vr!=xr&&"constructor"in d&&"constructor"in m&&!(typeof vr=="function"&&vr instanceof vr&&typeof xr=="function"&&xr instanceof xr)&&(ot=!1)}return D.delete(d),D.delete(m),ot}function xn(d){return pi(d,Ei,rl)}function Jt(d,m){var b=d.__data__;return al(m)?b[typeof m=="string"?"string":"hash"]:b.map}function ve(d,m){var b=de(d,m);return tl(b)?b:void 0}function xe(d){var m=qt.call(d,Qt),b=d[Qt];try{d[Qt]=void 0;var w=!0}catch{}var R=yr.call(d);return w&&(m?d[Qt]=b:delete d[Qt]),R}var rl=ms?function(d){return d==null?[]:(d=Object(d),ds(ms(d),function(m){return fs.call(d,m)}))}:hl,fe=vn;(ci&&fe(new ci(new ArrayBuffer(1)))!=tt||Bn&&fe(new Bn)!=E||di&&fe(di.resolve())!=A||hi&&fe(new hi)!=L||ui&&fe(new ui)!=z)&&(fe=function(d){var m=vn(d),b=m==k?d.constructor:void 0,w=b?gt(b):"";if(w)switch(w){case _r:return tt;case Be:return E;case Ba:return A;case va:return L;case xa:return z}return m});function ol(d,m){return m=m??a,!!m&&(typeof d=="number"||Zt.test(d))&&d>-1&&d%1==0&&d<m}function al(d){var m=typeof d;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?d!=="__proto__":d===null}function ll(d){return!!br&&br in d}function cl(d){var m=d&&d.constructor,b=typeof m=="function"&&m.prototype||he;return d===b}function Ar(d){return yr.call(d)}function gt(d){if(d!=null){try{return oi.call(d)}catch{}try{return d+""}catch{}}return""}function Cr(d,m){return d===m||d!==d&&m!==m}var Sr=Tr(function(){return arguments}())?Tr:function(d){return me(d)&&qt.call(d,"callee")&&!fs.call(d,"callee")},ys=Array.isArray;function bi(d){return d!=null&&yi(d.length)&&!Or(d)}var Es=li||ul;function dl(d,m){return kr(d,m)}function Or(d){if(!Lr(d))return!1;var m=vn(d);return m==g||m==y||m==h||m==S}function yi(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=a}function Lr(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function me(d){return d!=null&&typeof d=="object"}var Br=kn?ri(kn):el;function Ei(d){return bi(d)?Qa(d):nl(d)}function hl(){return[]}function ul(){return!1}n.exports=dl}(rr,rr.exports);var Eh=rr.exports,Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});const n_=yh,s_=Eh;var Zo;(function(n){function t(o={},a={},c=!1){typeof o!="object"&&(o={}),typeof a!="object"&&(a={});let l=n_(a);c||(l=Object.keys(l).reduce((h,f)=>(l[f]!=null&&(h[f]=l[f]),h),{}));for(const h in o)o[h]!==void 0&&a[h]===void 0&&(l[h]=o[h]);return Object.keys(l).length>0?l:void 0}n.compose=t;function e(o={},a={}){typeof o!="object"&&(o={}),typeof a!="object"&&(a={});const c=Object.keys(o).concat(Object.keys(a)).reduce((l,h)=>(s_(o[h],a[h])||(l[h]=a[h]===void 0?null:a[h]),l),{});return Object.keys(c).length>0?c:void 0}n.diff=e;function s(o={},a={}){o=o||{};const c=Object.keys(a).reduce((l,h)=>(a[h]!==o[h]&&o[h]!==void 0&&(l[h]=a[h]),l),{});return Object.keys(o).reduce((l,h)=>(o[h]!==a[h]&&a[h]===void 0&&(l[h]=null),l),c)}n.invert=s;function r(o,a,c=!1){if(typeof o!="object")return a;if(typeof a!="object")return;if(!c)return a;const l=Object.keys(a).reduce((h,f)=>(o[f]===void 0&&(h[f]=a[f]),h),{});return Object.keys(l).length>0?l:void 0}n.transform=r})(Zo||(Zo={})),Xo.default=Zo;var or={};Object.defineProperty(or,"__esModule",{value:!0});var Qo;(function(n){function t(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.retain=="object"&&e.retain!==null?1:typeof e.insert=="string"?e.insert.length:1}n.length=t})(Qo||(Qo={})),or.default=Qo;var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});const _h=or;class i_{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const e=this.ops[this.index];if(e){const s=this.offset,r=_h.default.length(e);if(t>=r-s?(t=r-s,this.index+=1,this.offset=0):this.offset+=t,typeof e.delete=="number")return{delete:t};{const o={};return e.attributes&&(o.attributes=e.attributes),typeof e.retain=="number"?o.retain=t:typeof e.retain=="object"&&e.retain!==null?o.retain=e.retain:typeof e.insert=="string"?o.insert=e.insert.substr(s,t):o.insert=e.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?_h.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const t=this.offset,e=this.index,s=this.next(),r=this.ops.slice(this.index);return this.offset=t,this.index=e,[s].concat(r)}}else return[]}}Jo.default=i_,function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const e=e_,s=yh,r=Eh,o=Xo;t.AttributeMap=o.default;const a=or;t.Op=a.default;const c=Jo;t.OpIterator=c.default;const l="\0",h=(u,p)=>{if(typeof u!="object"||u===null)throw new Error(`cannot retain a ${typeof u}`);if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);const g=Object.keys(u)[0];if(!g||g!==Object.keys(p)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(p)[0]}`);return[g,u[g],p[g]]};class f{constructor(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]}static registerEmbed(p,g){this.handlers[p]=g}static unregisterEmbed(p){delete this.handlers[p]}static getHandler(p){const g=this.handlers[p];if(!g)throw new Error(`no handlers for embed type "${p}"`);return g}insert(p,g){const y={};return typeof p=="string"&&p.length===0?this:(y.insert=p,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(y.attributes=g),this.push(y))}delete(p){return p<=0?this:this.push({delete:p})}retain(p,g){if(typeof p=="number"&&p<=0)return this;const y={retain:p};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(y.attributes=g),this.push(y)}push(p){let g=this.ops.length,y=this.ops[g-1];if(p=s(p),typeof y=="object"){if(typeof p.delete=="number"&&typeof y.delete=="number")return this.ops[g-1]={delete:y.delete+p.delete},this;if(typeof y.delete=="number"&&p.insert!=null&&(g-=1,y=this.ops[g-1],typeof y!="object"))return this.ops.unshift(p),this;if(r(p.attributes,y.attributes)){if(typeof p.insert=="string"&&typeof y.insert=="string")return this.ops[g-1]={insert:y.insert+p.insert},typeof p.attributes=="object"&&(this.ops[g-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof y.retain=="number")return this.ops[g-1]={retain:y.retain+p.retain},typeof p.attributes=="object"&&(this.ops[g-1].attributes=p.attributes),this}}return g===this.ops.length?this.ops.push(p):this.ops.splice(g,0,p),this}chop(){const p=this.ops[this.ops.length-1];return p&&typeof p.retain=="number"&&!p.attributes&&this.ops.pop(),this}filter(p){return this.ops.filter(p)}forEach(p){this.ops.forEach(p)}map(p){return this.ops.map(p)}partition(p){const g=[],y=[];return this.forEach(E=>{(p(E)?g:y).push(E)}),[g,y]}reduce(p,g){return this.ops.reduce(p,g)}changeLength(){return this.reduce((p,g)=>g.insert?p+a.default.length(g):g.delete?p-g.delete:p,0)}length(){return this.reduce((p,g)=>p+a.default.length(g),0)}slice(p=0,g=1/0){const y=[],E=new c.default(this.ops);let _=0;for(;_<g&&E.hasNext();){let N;_<p?N=E.next(p-_):(N=E.next(g-_),y.push(N)),_+=a.default.length(N)}return new f(y)}compose(p){const g=new c.default(this.ops),y=new c.default(p.ops),E=[],_=y.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){let k=_.retain;for(;g.peekType()==="insert"&&g.peekLength()<=k;)k-=g.peekLength(),E.push(g.next());_.retain-k>0&&y.next(_.retain-k)}const N=new f(E);for(;g.hasNext()||y.hasNext();)if(y.peekType()==="insert")N.push(y.next());else if(g.peekType()==="delete")N.push(g.next());else{const k=Math.min(g.peekLength(),y.peekLength()),A=g.next(k),S=y.next(k);if(S.retain){const O={};if(typeof A.retain=="number")O.retain=typeof S.retain=="number"?k:S.retain;else if(typeof S.retain=="number")A.retain==null?O.insert=A.insert:O.retain=A.retain;else{const V=A.retain==null?"insert":"retain",[M,H,z]=h(A[V],S.retain),Y=f.getHandler(M);O[V]={[M]:Y.compose(H,z,V==="retain")}}const L=o.default.compose(A.attributes,S.attributes,typeof A.retain=="number");if(L&&(O.attributes=L),N.push(O),!y.hasNext()&&r(N.ops[N.ops.length-1],O)){const V=new f(g.rest());return N.concat(V).chop()}}else typeof S.delete=="number"&&(typeof A.retain=="number"||typeof A.retain=="object"&&A.retain!==null)&&N.push(S)}return N.chop()}concat(p){const g=new f(this.ops.slice());return p.ops.length>0&&(g.push(p.ops[0]),g.ops=g.ops.concat(p.ops.slice(1))),g}diff(p,g){if(this.ops===p.ops)return new f;const y=[this,p].map(A=>A.map(S=>{if(S.insert!=null)return typeof S.insert=="string"?S.insert:l;const O=A===p?"on":"with";throw new Error("diff() called "+O+" non-document")}).join("")),E=new f,_=e(y[0],y[1],g,!0),N=new c.default(this.ops),k=new c.default(p.ops);return _.forEach(A=>{let S=A[1].length;for(;S>0;){let O=0;switch(A[0]){case e.INSERT:O=Math.min(k.peekLength(),S),E.push(k.next(O));break;case e.DELETE:O=Math.min(S,N.peekLength()),N.next(O),E.delete(O);break;case e.EQUAL:O=Math.min(N.peekLength(),k.peekLength(),S);const L=N.next(O),V=k.next(O);r(L.insert,V.insert)?E.retain(O,o.default.diff(L.attributes,V.attributes)):E.push(V).delete(O);break}S-=O}}),E.chop()}eachLine(p,g=`
`){const y=new c.default(this.ops);let E=new f,_=0;for(;y.hasNext();){if(y.peekType()!=="insert")return;const N=y.peek(),k=a.default.length(N)-y.peekLength(),A=typeof N.insert=="string"?N.insert.indexOf(g,k)-k:-1;if(A<0)E.push(y.next());else if(A>0)E.push(y.next(A));else{if(p(E,y.next(1).attributes||{},_)===!1)return;_+=1,E=new f}}E.length()>0&&p(E,{},_)}invert(p){const g=new f;return this.reduce((y,E)=>{if(E.insert)g.delete(a.default.length(E));else{if(typeof E.retain=="number"&&E.attributes==null)return g.retain(E.retain),y+E.retain;if(E.delete||typeof E.retain=="number"){const _=E.delete||E.retain;return p.slice(y,y+_).forEach(k=>{E.delete?g.push(k):E.retain&&E.attributes&&g.retain(a.default.length(k),o.default.invert(E.attributes,k.attributes))}),y+_}else if(typeof E.retain=="object"&&E.retain!==null){const _=p.slice(y,y+1),N=new c.default(_.ops).next(),[k,A,S]=h(E.retain,N.insert),O=f.getHandler(k);return g.retain({[k]:O.invert(A,S)},o.default.invert(E.attributes,N.attributes)),y+1}}return y},0),g.chop()}transform(p,g=!1){if(g=!!g,typeof p=="number")return this.transformPosition(p,g);const y=p,E=new c.default(this.ops),_=new c.default(y.ops),N=new f;for(;E.hasNext()||_.hasNext();)if(E.peekType()==="insert"&&(g||_.peekType()!=="insert"))N.retain(a.default.length(E.next()));else if(_.peekType()==="insert")N.push(_.next());else{const k=Math.min(E.peekLength(),_.peekLength()),A=E.next(k),S=_.next(k);if(A.delete)continue;if(S.delete)N.push(S);else{const O=A.retain,L=S.retain;let V=typeof L=="object"&&L!==null?L:k;if(typeof O=="object"&&O!==null&&typeof L=="object"&&L!==null){const M=Object.keys(O)[0];if(M===Object.keys(L)[0]){const H=f.getHandler(M);H&&(V={[M]:H.transform(O[M],L[M],g)})}}N.retain(V,o.default.transform(A.attributes,S.attributes,g))}}return N.chop()}transformPosition(p,g=!1){g=!!g;const y=new c.default(this.ops);let E=0;for(;y.hasNext()&&E<=p;){const _=y.peekLength(),N=y.peekType();if(y.next(),N==="delete"){p-=Math.min(_,p-E);continue}else N==="insert"&&(E<p||!g)&&(p+=_);E+=_}return p}}f.Op=a.default,f.OpIterator=c.default,f.AttributeMap=o.default,f.handlers={},t.default=f,n.exports=f,n.exports.default=f}(Wo,Wo.exports);var vt=Wo.exports;const x=lh(vt);class Ht extends At{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Ht.blotName="break",Ht.tagName="BR";let zt=class extends er{};function ar(n){return n.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])}const le=class le extends jo{static compare(t,e){const s=le.order.indexOf(t),r=le.order.indexOf(e);return s>=0||r>=0?s-r:t===e?0:t<e?-1:1}formatAt(t,e,s,r){if(le.compare(this.statics.blotName,s)<0&&this.scroll.query(s,I.BLOT)){const o=this.isolate(t,e);r&&o.wrap(s,r)}else super.formatAt(t,e,s,r)}optimize(t){if(super.optimize(t),this.parent instanceof le&&le.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}};B(le,"allowedChildren",[le,Ht,At,zt]),B(le,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let oe=le;const Nh=1;class st extends Hs{constructor(){super(...arguments);B(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=wh(this)),this.cache.delta}deleteAt(e,s){super.deleteAt(e,s),this.cache={}}formatAt(e,s,r,o){s<=0||(this.scroll.query(r,I.BLOCK)?e+s===this.length()&&this.format(r,o):super.formatAt(e,Math.min(s,this.length()-e-1),r,o),this.cache={})}insertAt(e,s,r){if(r!=null){super.insertAt(e,s,r),this.cache={};return}if(s.length===0)return;const o=s.split(`
`),a=o.shift();a.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let c=this;o.reduce((l,h)=>(c=c.split(l,!0),c.insertAt(0,h),h.length),e+a.length)}insertBefore(e,s){const{head:r}=this.children;super.insertBefore(e,s),r instanceof Ht&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Nh),this.cache.length}moveChildren(e,s){super.moveChildren(e,s),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s&&(e===0||e>=this.length()-Nh)){const o=this.clone();return e===0?(this.parent.insertBefore(o,this),this):(this.parent.insertBefore(o,this.next),o)}const r=super.split(e,s);return this.cache={},r}}st.blotName="block",st.tagName="P",st.defaultChild=Ht,st.allowedChildren=[Ht,oe,At,zt];class xt extends At{attach(){super.attach(),this.attributes=new Ji(this.domNode)}delta(){return new x().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const s=this.scroll.query(t,I.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,e)}formatAt(t,e,s,r){this.format(s,r)}insertAt(t,e,s){if(s!=null){super.insertAt(t,e,s);return}const r=e.split(`
`),o=r.pop(),a=r.map(l=>{const h=this.scroll.create(st.blotName);return h.insertAt(0,l),h}),c=this.split(t);a.forEach(l=>{this.parent.insertBefore(l,c)}),o&&this.parent.insertBefore(this.scroll.create("text",o),c)}}xt.scope=I.BLOCK_BLOT;function wh(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(at).reduce((e,s)=>s.length()===0?e:e.insert(s.value(),It(s,{},t)),new x).insert(`
`,It(n))}function It(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(t={...t,...n.formats()},e&&delete t["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?t:It(n.parent,t,e)}const $t=class $t extends At{static value(){}constructor(t,e,s){super(t,e),this.selection=s,this.textNode=document.createTextNode($t.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let s=this,r=0;for(;s!=null&&s.statics.scope!==I.BLOCK_BLOT;)r+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=$t.CONTENTS.length,s.optimize(),s.formatAt(r,$t.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof zt?this.prev:null,s=e?e.length():0,r=this.next instanceof zt?this.next:null,o=r?r.text:"",{textNode:a}=this,c=a.data.split($t.CONTENTS).join("");a.data=$t.CONTENTS;let l;if(e)l=e,(c||r)&&(e.insertAt(e.length(),c+o),r&&r.remove());else if(r)l=r,r.insertAt(0,c);else{const h=document.createTextNode(c);l=this.scroll.create(h),this.parent.insertBefore(l,this)}if(this.remove(),t){const h=(p,g)=>e&&p===e.domNode?g:p===a?s+g-1:r&&p===r.domNode?s+c.length+g:null,f=h(t.start.node,t.start.offset),u=h(t.end.node,t.end.offset);if(f!==null&&u!==null)return{startNode:l.domNode,startOffset:f,endNode:l.domNode,endOffset:u}}return null}update(t,e){if(t.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(e.range=s)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=$t.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}};B($t,"blotName","cursor"),B($t,"className","ql-cursor"),B($t,"tagName","span"),B($t,"CONTENTS","\uFEFF");let ss=$t;var Th={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(l,h,f){this.fn=l,this.context=h,this.once=f||!1}function o(l,h,f,u,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new r(f,u||l,p),y=e?e+h:h;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new s:delete l._events[h]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],f,u;if(this._eventsCount===0)return h;for(u in f=this._events)t.call(f,u)&&h.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},c.prototype.listeners=function(h){var f=e?e+h:h,u=this._events[f];if(!u)return[];if(u.fn)return[u.fn];for(var p=0,g=u.length,y=new Array(g);p<g;p++)y[p]=u[p].fn;return y},c.prototype.listenerCount=function(h){var f=e?e+h:h,u=this._events[f];return u?u.fn?1:u.length:0},c.prototype.emit=function(h,f,u,p,g,y){var E=e?e+h:h;if(!this._events[E])return!1;var _=this._events[E],N=arguments.length,k,A;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),N){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,u),!0;case 4:return _.fn.call(_.context,f,u,p),!0;case 5:return _.fn.call(_.context,f,u,p,g),!0;case 6:return _.fn.call(_.context,f,u,p,g,y),!0}for(A=1,k=new Array(N-1);A<N;A++)k[A-1]=arguments[A];_.fn.apply(_.context,k)}else{var S=_.length,O;for(A=0;A<S;A++)switch(_[A].once&&this.removeListener(h,_[A].fn,void 0,!0),N){case 1:_[A].fn.call(_[A].context);break;case 2:_[A].fn.call(_[A].context,f);break;case 3:_[A].fn.call(_[A].context,f,u);break;case 4:_[A].fn.call(_[A].context,f,u,p);break;default:if(!k)for(O=1,k=new Array(N-1);O<N;O++)k[O-1]=arguments[O];_[A].fn.apply(_[A].context,k)}}return!0},c.prototype.on=function(h,f,u){return o(this,h,f,u,!1)},c.prototype.once=function(h,f,u){return o(this,h,f,u,!0)},c.prototype.removeListener=function(h,f,u,p){var g=e?e+h:h;if(!this._events[g])return this;if(!f)return a(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!p||y.once)&&(!u||y.context===u)&&a(this,g);else{for(var E=0,_=[],N=y.length;E<N;E++)(y[E].fn!==f||p&&!y[E].once||u&&y[E].context!==u)&&_.push(y[E]);_.length?this._events[g]=_.length===1?_[0]:_:a(this,g)}return this},c.prototype.removeAllListeners=function(h){var f;return h?(f=e?e+h:h,this._events[f]&&a(this,f)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c})(Th);var r_=Th.exports;const o_=lh(r_),ta=new WeakMap,ea=["error","warn","log","info"];let na="warn";function kh(n){if(na&&ea.indexOf(n)<=ea.indexOf(na)){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];console[n](...e)}}function Ne(n){return ea.reduce((t,e)=>(t[e]=kh.bind(console,e,n),t),{})}Ne.level=n=>{na=n},kh.level=Ne.level;const sa=Ne("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(n=>{document.addEventListener(n,function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(r=>{const o=ta.get(r);o&&o.emitter&&o.emitter.handleDOM(...e)})})});class v extends o_{constructor(){super(),this.domListeners={},this.on("error",sa.error)}emit(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return sa.log.call(sa,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),r=1;r<e;r++)s[r-1]=arguments[r];(this.domListeners[t.type]||[]).forEach(o=>{let{node:a,handler:c}=o;(t.target===a||a.contains(t.target))&&c(t,...s)})}listenDOM(t,e,s){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:s})}}B(v,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),B(v,"sources",{API:"api",SILENT:"silent",USER:"user"});const ia=Ne("quill:selection");class bn{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}}class a_{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new bn(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,v.sources.USER),1)}),this.emitter.on(v.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(v.events.SCROLL_UPDATE,(r,o)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const a=o.some(c=>c.type==="characterData"||c.type==="childList"||c.type==="attributes"&&c.target===this.root);this.update(a?v.sources.SILENT:r)}catch{}})}),this.emitter.on(v.events.SCROLL_OPTIMIZE,(s,r)=>{if(r.range){const{startNode:o,startOffset:a,endNode:c,endOffset:l}=r.range;this.setNativeRange(o,a,c,l),this.update(v.sources.SILENT)}}),this.update(v.sources.SILENT)}handleComposition(){this.emitter.on(v.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(v.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(v.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(t,I.BLOCK))){if(s.start.node!==this.cursor.textNode){const r=this.scroll.find(s.start.node,!1);if(r==null)return;if(r instanceof at){const o=r.split(s.start.offset);r.parent.insertBefore(this.cursor,o)}else r.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();t=Math.min(t,s-1),e=Math.min(t+e,s-1)-t;let r,[o,a]=this.scroll.leaf(t);if(o==null)return null;if(e>0&&a===o.length()){const[f]=this.scroll.leaf(t+1);if(f){const[u]=this.scroll.line(t),[p]=this.scroll.line(t+1);u===p&&(o=f,a=0)}}[r,a]=o.position(a,!0);const c=document.createRange();if(e>0)return c.setStart(r,a),[o,a]=this.scroll.leaf(t+e),o==null?null:([r,a]=o.position(a,!0),c.setEnd(r,a),c.getBoundingClientRect());let l="left",h;if(r instanceof Text){if(!r.data.length)return null;a<r.data.length?(c.setStart(r,a),c.setEnd(r,a+1)):(c.setStart(r,a-1),c.setEnd(r,a),l="right"),h=c.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;h=o.domNode.getBoundingClientRect(),a>0&&(l="right")}return{bottom:h.top+h.height,height:h.height,left:h[l],right:h[l],top:h.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(e==null)return null;const s=this.normalizeNative(e);return ia.info("getNativeRange",s),s}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&ra(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const s=e.map(a=>{const[c,l]=a,h=this.scroll.find(c,!0),f=h.offset(this.scroll);return l===0?f:h instanceof at?f+h.index(c,l):f+h.length()}),r=Math.min(Math.max(...s),this.scroll.length()-1),o=Math.min(r,...s);return new bn(o,r-o)}normalizeNative(t){if(!ra(this.root,t.startContainer)||!t.collapsed&&!ra(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(s=>{let{node:r,offset:o}=s;for(;!(r instanceof Text)&&r.childNodes.length>0;)if(r.childNodes.length>o)r=r.childNodes[o],o=0;else if(r.childNodes.length===o)r=r.lastChild,r instanceof Text?o=r.data.length:r.childNodes.length>0?o=r.childNodes.length:o=r.childNodes.length+1;else break;s.node=r,s.offset=o}),e}rangeToNative(t){const e=this.scroll.length(),s=(r,o)=>{r=Math.min(e-1,r);const[a,c]=this.scroll.leaf(r);return a?a.position(c,o):[null,-1]};return[...s(t.index,!1),...s(t.index+t.length,!0)]}setNativeRange(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(ia.info("setNativeRange",t,e,s,r),t!=null&&(this.root.parentNode==null||t.parentNode==null||s.parentNode==null))return;const a=document.getSelection();if(a!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:c}=this.getNativeRange()||{};if(c==null||o||t!==c.startContainer||e!==c.startOffset||s!==c.endContainer||r!==c.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),s instanceof Element&&s.tagName==="BR"&&(r=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const l=document.createRange();l.setStart(t,e),l.setEnd(s,r),a.removeAllRanges(),a.addRange(l)}}else a.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.sources.API;if(typeof e=="string"&&(s=e,e=!1),ia.info("setRange",t),t!=null){const r=this.rangeToNative(t);this.setNativeRange(...r,e)}else this.setNativeRange(null);this.update(s)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v.sources.USER;const e=this.lastRange,[s,r]=this.getRange();if(this.lastRange=s,this.lastNative=r,this.lastRange!=null&&(this.savedRange=this.lastRange),!Po(e,this.lastRange)){if(!this.composing&&r!=null&&r.native.collapsed&&r.start.node!==this.cursor.textNode){const a=this.cursor.restore();a&&this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)}const o=[v.events.SELECTION_CHANGE,Zn(this.lastRange),Zn(e),t];this.emitter.emit(v.events.EDITOR_CHANGE,...o),t!==v.sources.SILENT&&this.emitter.emit(...o)}}}function ra(n,t){try{t.parentNode}catch{return!1}return n.contains(t)}const l_=/^[ -~]*$/;class c_{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const s=Ah(t),r=new x;return h_(s.ops.slice()).reduce((a,c)=>{const l=vt.Op.length(c);let h=c.attributes||{},f=!1,u=!1;if(c.insert!=null){if(r.retain(l),typeof c.insert=="string"){const y=c.insert;u=!y.endsWith(`
`)&&(e<=a||!!this.scroll.descendant(xt,a)[0]),this.scroll.insertAt(a,y);const[E,_]=this.scroll.line(a);let N=ze({},It(E));if(E instanceof st){const[k]=E.descendant(at,_);k&&(N=ze(N,It(k)))}h=vt.AttributeMap.diff(N,h)||{}}else if(typeof c.insert=="object"){const y=Object.keys(c.insert)[0];if(y==null)return a;const E=this.scroll.query(y,I.INLINE)!=null;if(E)(e<=a||this.scroll.descendant(xt,a)[0])&&(u=!0);else if(a>0){const[_,N]=this.scroll.descendant(at,a-1);_ instanceof zt?_.value()[N]!==`
`&&(f=!0):_ instanceof At&&_.statics.scope===I.INLINE_BLOT&&(f=!0)}if(this.scroll.insertAt(a,y,c.insert[y]),E){const[_]=this.scroll.descendant(at,a);if(_){const N=ze({},It(_));h=vt.AttributeMap.diff(N,h)||{}}}}e+=l}else if(r.push(c),c.retain!==null&&typeof c.retain=="object"){const y=Object.keys(c.retain)[0];if(y==null)return a;this.scroll.updateEmbedAt(a,y,c.retain[y])}Object.keys(h).forEach(y=>{this.scroll.formatAt(a,l,y,h[y])});const p=f?1:0,g=u?1:0;return e+=p+g,r.retain(p),r.delete(g),a+l+p+g},0),r.reduce((a,c)=>typeof c.delete=="number"?(this.scroll.deleteAt(a,c.delete),a):a+vt.Op.length(c),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new x().retain(t).delete(e))}formatLine(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(o=>{this.scroll.lines(t,Math.max(e,1)).forEach(a=>{a.format(o,s[o])})}),this.scroll.optimize();const r=new x().retain(t).retain(e,Zn(s));return this.update(r)}formatText(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(o=>{this.scroll.formatAt(t,e,o,s[o])});const r=new x().retain(t).retain(e,Zn(s));return this.update(r)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new x)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],r=[];e===0?this.scroll.path(t).forEach(c=>{const[l]=c;l instanceof st?s.push(l):l instanceof at&&r.push(l)}):(s=this.scroll.lines(t,e),r=this.scroll.descendants(at,t,e));const[o,a]=[s,r].map(c=>{const l=c.shift();if(l==null)return{};let h=It(l);for(;Object.keys(h).length>0;){const f=c.shift();if(f==null)return h;h=d_(It(f),h)}return h});return{...o,...a}}getHTML(t,e){const[s,r]=this.scroll.line(t);if(s){const o=s.length();return s.length()>=r+e&&!(r===0&&e===o)?Ws(s,r,e,!0):Ws(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(t,e){const s=Ah(e),r=new x().retain(t).concat(s);return this.scroll.insertContents(t,s),this.update(r)}insertEmbed(t,e,s){return this.scroll.insertAt(t,e,s),this.update(new x().retain(t).insert({[e]:s}))}insertText(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(s).forEach(r=>{this.scroll.formatAt(t,e.length,r,s[r])}),this.update(new x().retain(t).insert(e,Zn(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==st.blotName)return!1;const e=t;return e.children.length>1?!1:e.children.head instanceof Ht}removeFormat(t,e){const s=this.getText(t,e),[r,o]=this.scroll.line(t+e);let a=0,c=new x;r!=null&&(a=r.length()-o,c=r.delta().slice(o,o+a-1).insert(`
`));const h=this.getContents(t,e+a).diff(new x().insert(s).concat(c)),f=new x().retain(t).concat(h);return this.applyDelta(f)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const r=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(l_)&&this.scroll.find(e[0].target)){const o=this.scroll.find(e[0].target),a=It(o),c=o.offset(this.scroll),l=e[0].oldValue.replace(ss.CONTENTS,""),h=new x().insert(l),f=new x().insert(o.value()),u=s&&{oldRange:Ch(s.oldRange,-c),newRange:Ch(s.newRange,-c)};t=new x().retain(c).concat(h.diff(f,u)).reduce((g,y)=>y.insert?g.insert(y.insert,a):g.push(y),new x),this.delta=r.compose(t)}else this.delta=this.getDelta(),(!t||!Po(r.compose(t),this.delta))&&(t=r.diff(this.delta,s));return t}}function is(n,t,e){if(n.length===0){const[g]=oa(e.pop());return t<=0?`</li></${g}>`:`</li></${g}>${is([],t-1,e)}`}const[{child:s,offset:r,length:o,indent:a,type:c},...l]=n,[h,f]=oa(c);if(a>t)return e.push(c),a===t+1?`<${h}><li${f}>${Ws(s,r,o)}${is(l,a,e)}`:`<${h}><li>${is(n,t+1,e)}`;const u=e[e.length-1];if(a===t&&c===u)return`</li><li${f}>${Ws(s,r,o)}${is(l,a,e)}`;const[p]=oa(e.pop());return`</li></${p}>${is(n,t-1,e)}`}function Ws(n,t,e){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(t,e);if(n instanceof zt)return ar(n.value().slice(t,t+e));if(n instanceof Ut){if(n.statics.blotName==="list-container"){const h=[];return n.children.forEachAt(t,e,(f,u,p)=>{const g="formats"in f&&typeof f.formats=="function"?f.formats():{};h.push({child:f,offset:u,length:p,indent:g.indent||0,type:g.list})}),is(h,-1,[])}const r=[];if(n.children.forEachAt(t,e,(h,f,u)=>{r.push(Ws(h,f,u))}),s||n.statics.blotName==="list")return r.join("");const{outerHTML:o,innerHTML:a}=n.domNode,[c,l]=o.split(`>${a}<`);return c==="<table"?`<table style="border: 1px solid #000;">${r.join("")}<${l}`:`${c}>${r.join("")}<${l}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function d_(n,t){return Object.keys(t).reduce((e,s)=>{if(n[s]==null)return e;const r=t[s];return r===n[s]?e[s]=r:Array.isArray(r)?r.indexOf(n[s])<0?e[s]=r.concat([n[s]]):e[s]=r:e[s]=[r,n[s]],e},{})}function oa(n){const t=n==="ordered"?"ol":"ul";switch(n){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function Ah(n){return n.reduce((t,e)=>{if(typeof e.insert=="string"){const s=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(s,e.attributes)}return t.push(e)},new x)}function Ch(n,t){let{index:e,length:s}=n;return new bn(e+t,s)}function h_(n){const t=[];return n.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((r,o)=>{o&&t.push({insert:`
`,attributes:e.attributes}),r&&t.push({insert:r,attributes:e.attributes})}):t.push(e)}),t}class Wt{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}}B(Wt,"DEFAULTS",{});const lr="\uFEFF";class aa extends At{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(lr),this.rightGuard=document.createTextNode(lr),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,s;const r=t.data.split(lr).join("");if(t===this.leftGuard)if(this.prev instanceof zt){const o=this.prev.length();this.prev.insertAt(o,r),e={startNode:this.prev.domNode,startOffset:o+r.length}}else s=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(s),this),e={startNode:s,startOffset:r.length};else t===this.rightGuard&&(this.next instanceof zt?(this.next.insertAt(0,r),e={startNode:this.next.domNode,startOffset:r.length}):(s=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(s),this.next),e={startNode:s,startOffset:r.length}));return t.data=lr,e}update(t,e){t.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const r=this.restore(s.target);r&&(e.range=r)}})}}class u_{constructor(t,e){B(this,"isComposing",!1);this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof aa)&&(this.emitter.emit(v.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(v.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(v.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(v.events.COMPOSITION_END,t),this.isComposing=!1}}const ni=class ni{constructor(t,e){B(this,"modules",{});this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}};B(ni,"DEFAULTS",{modules:{}}),B(ni,"themes",{default:ni});let rs=ni;const f_=n=>n.parentElement||n.getRootNode().host||null,m_=n=>{const t=n.getBoundingClientRect(),e="offsetWidth"in n&&Math.abs(t.width)/n.offsetWidth||1,s="offsetHeight"in n&&Math.abs(t.height)/n.offsetHeight||1;return{top:t.top,right:t.left+n.clientWidth*e,bottom:t.top+n.clientHeight*s,left:t.left}},cr=n=>{const t=parseInt(n,10);return Number.isNaN(t)?0:t},Sh=(n,t,e,s,r,o)=>n<e&&t>s?0:n<e?-(e-n+r):t>s?t-n>s-e?n+r-e:t-s+o:0,p_=(n,t)=>{var o,a,c;const e=n.ownerDocument;let s=t,r=n;for(;r;){const l=r===e.body,h=l?{top:0,right:((o=window.visualViewport)==null?void 0:o.width)??e.documentElement.clientWidth,bottom:((a=window.visualViewport)==null?void 0:a.height)??e.documentElement.clientHeight,left:0}:m_(r),f=getComputedStyle(r),u=Sh(s.left,s.right,h.left,h.right,cr(f.scrollPaddingLeft),cr(f.scrollPaddingRight)),p=Sh(s.top,s.bottom,h.top,h.bottom,cr(f.scrollPaddingTop),cr(f.scrollPaddingBottom));if(u||p)if(l)(c=e.defaultView)==null||c.scrollBy(u,p);else{const{scrollLeft:g,scrollTop:y}=r;p&&(r.scrollTop+=p),u&&(r.scrollLeft+=u);const E=r.scrollLeft-g,_=r.scrollTop-y;s={left:s.left-E,top:s.top-_,right:s.right-E,bottom:s.bottom-_}}r=l||f.position==="fixed"?null:f_(r)}},g_=100,b_=["block","break","cursor","inline","scroll","text"],y_=(n,t,e)=>{const s=new Jn;return b_.forEach(r=>{const o=t.query(r);o&&s.register(o)}),n.forEach(r=>{let o=t.query(r);o||e.error(`Cannot register "${r}" specified in "formats" config. Are you sure it was registered?`);let a=0;for(;o;)if(s.register(o),o="blotName"in o?o.requiredContainer??null:null,a+=1,a>g_){e.error(`Cycle detected in registering blot requiredContainer: "${r}"`);break}}),s},os=Ne("quill"),dr=new Jn;Ut.uiClass="ql-ui";const Yt=class Yt{static debug(t){t===!0&&(t="log"),Ne.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ta.get(t)||dr.find(t,e)}static import(t){return this.imports[t]==null&&os.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in t?t.attrName:t.blotName;typeof s=="string"?this.register(`formats/${s}`,t,e):Object.keys(t).forEach(r=>{this.register(r,t[r],e)})}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!s&&os.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&dr.register(e),typeof e.register=="function"&&e.register(dr)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=E_(t,e),this.container=this.options.container,this.container==null){os.error("Invalid Quill container",t);return}this.options.debug&&Yt.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",ta.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new v;const r=Ho.blotName,o=this.options.registry.query(r);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${r}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new c_(this.scroll),this.selection=new a_(this.scroll,this.emitter),this.composition=new u_(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(v.events.EDITOR_CHANGE,a=>{a===v.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(v.events.SCROLL_UPDATE,(a,c)=>{const l=this.selection.lastRange,[h]=this.selection.getRange(),f=l&&h?{oldRange:l,newRange:h}:void 0;Kt.call(this,()=>this.editor.update(null,c,f),a)}),this.emitter.on(v.events.SCROLL_EMBED_UPDATE,(a,c)=>{const l=this.selection.lastRange,[h]=this.selection.getRange(),f=l&&h?{oldRange:l,newRange:h}:void 0;Kt.call(this,()=>{const u=new x().retain(a.offset(this)).retain({[a.statics.blotName]:c});return this.editor.update(u,[],f)},Yt.sources.USER)}),s){const a=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(a)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const s=t;t=document.createElement("div"),t.classList.add(s)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,s){return[t,e,,s]=we(t,e,s),Kt.call(this,()=>this.editor.deleteText(t,e),s,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.sources.API;return Kt.call(this,()=>{const r=this.getSelection(!0);let o=new x;if(r==null)return o;if(this.scroll.query(t,I.BLOCK))o=this.editor.formatLine(r.index,r.length,{[t]:e});else{if(r.length===0)return this.selection.format(t,e),o;o=this.editor.formatText(r.index,r.length,{[t]:e})}return this.setSelection(r,v.sources.SILENT),o},s)}formatLine(t,e,s,r,o){let a;return[t,e,a,o]=we(t,e,s,r,o),Kt.call(this,()=>this.editor.formatLine(t,e,a),o,t,0)}formatText(t,e,s,r,o){let a;return[t,e,a,o]=we(t,e,s,r,o),Kt.call(this,()=>this.editor.formatText(t,e,a),o,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof t=="number"?s=this.selection.getBounds(t,e):s=this.selection.getBounds(t.index,t.length),!s)return null;const r=this.container.getBoundingClientRect();return{bottom:s.bottom-r.top,height:s.height,left:s.left-r.left,right:s.right-r.left,top:s.top-r.top,width:s.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=we(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=we(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=we(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Yt.sources.API;return Kt.call(this,()=>this.editor.insertEmbed(t,e,s),r,t)}insertText(t,e,s,r,o){let a;return[t,,a,o]=we(t,0,s,r,o),Kt.call(this,()=>this.editor.insertText(t,e,a),o,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,s){return[t,e,,s]=we(t,e,s),Kt.call(this,()=>this.editor.removeFormat(t,e),s,t)}scrollRectIntoView(t){p_(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v.sources.API;return Kt.call(this,()=>{t=new x(t);const s=this.getLength(),r=this.editor.deleteText(0,s),o=this.editor.insertContents(0,t),a=this.editor.deleteText(this.getLength()-1,1);return r.compose(o).compose(a)},e)}setSelection(t,e,s){t==null?this.selection.setRange(null,e||Yt.sources.API):([t,e,,s]=we(t,e,s),this.selection.setRange(new bn(Math.max(0,t),e),s),s!==v.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v.sources.API;const s=new x().insert(t);return this.setContents(s,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v.sources.API;return Kt.call(this,()=>(t=new x(t),this.editor.applyDelta(t)),e,!0)}};B(Yt,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:dr,theme:"default"}),B(Yt,"events",v.events),B(Yt,"sources",v.sources),B(Yt,"version","2.0.2"),B(Yt,"imports",{delta:x,parchment:z0,"core/module":Wt,"core/theme":rs});let T=Yt;function Oh(n){return typeof n=="string"?document.querySelector(n):n}function la(n){return Object.entries(n??{}).reduce((t,e)=>{let[s,r]=e;return{...t,[s]:r===!0?{}:r}},{})}function Lh(n){return Object.fromEntries(Object.entries(n).filter(t=>t[1]!==void 0))}function E_(n,t){const e=Oh(n);if(!e)throw new Error("Invalid Quill container");const r=!t.theme||t.theme===T.DEFAULTS.theme?rs:T.import(`themes/${t.theme}`);if(!r)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:o,...a}=T.DEFAULTS,{modules:c,...l}=r.DEFAULTS;let h=la(t.modules);h!=null&&h.toolbar&&h.toolbar.constructor!==Object&&(h={...h,toolbar:{container:h.toolbar}});const f=ze({},la(o),la(c),h),u={...a,...Lh(l),...Lh(t)};let p=t.registry;return p?t.formats&&os.warn('Ignoring "formats" option because "registry" is specified'):p=t.formats?y_(t.formats,u.registry,os):u.registry,{...u,registry:p,container:e,theme:r,modules:Object.entries(f).reduce((g,y)=>{let[E,_]=y;if(!_)return g;const N=T.import(`modules/${E}`);return N==null?(os.error(`Cannot load ${E} module. Are you sure you registered it?`),g):{...g,[E]:ze({},N.DEFAULTS||{},_)}},{}),bounds:Oh(u.bounds)}}function Kt(n,t,e,s){if(!this.isEnabled()&&t===v.sources.USER&&!this.allowReadOnlyEdits)return new x;let r=e==null?null:this.getSelection();const o=this.editor.delta,a=n();if(r!=null&&(e===!0&&(e=r.index),s==null?r=Bh(r,a,t):s!==0&&(r=Bh(r,e,s,t)),this.setSelection(r,v.sources.SILENT)),a.length()>0){const c=[v.events.TEXT_CHANGE,a,o,t];this.emitter.emit(v.events.EDITOR_CHANGE,...c),t!==v.sources.SILENT&&this.emitter.emit(...c)}return a}function we(n,t,e,s,r){let o={};return typeof n.index=="number"&&typeof n.length=="number"?typeof t!="number"?(r=s,s=e,e=t,t=n.length,n=n.index):(t=n.length,n=n.index):typeof t!="number"&&(r=s,s=e,e=t,t=0),typeof e=="object"?(o=e,r=s):typeof e=="string"&&(s!=null?o[e]=s:r=e),r=r||v.sources.API,[n,t,o,r]}function Bh(n,t,e,s){const r=typeof e=="number"?e:0;if(n==null)return null;let o,a;return t&&typeof t.transformPosition=="function"?[o,a]=[n.index,n.index+n.length].map(c=>t.transformPosition(c,s!==v.sources.USER)):[o,a]=[n.index,n.index+n.length].map(c=>c<t||c===t&&s===v.sources.USER?c:r>=0?c+r:Math.max(t,c+r)),new bn(o,a-o)}class yn extends tr{}function vh(n){return n instanceof st||n instanceof xt}function xh(n){return typeof n.updateContent=="function"}class as extends Ho{constructor(t,e,s){let{emitter:r}=s;super(t,e),this.emitter=r,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(v.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(v.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(v.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[s,r]=this.line(t),[o]=this.line(t+e);if(super.deleteAt(t,e),o!=null&&s!==o&&r>0){if(s instanceof xt||o instanceof xt){this.optimize();return}const a=o.children.head instanceof Ht?null:o.children.head;s.moveChildren(o,a),s.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,s,r){super.formatAt(t,e,s,r),this.optimize()}insertAt(t,e,s){if(t>=this.length())if(s==null||this.scroll.query(e,I.BLOCK)==null){const r=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(r),s==null&&e.endsWith(`
`)?r.insertAt(0,e.slice(0,-1),s):r.insertAt(0,e,s)}else{const r=this.scroll.create(e,s);this.appendChild(r)}else super.insertAt(t,e,s);this.optimize()}insertBefore(t,e){if(t.statics.scope===I.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(t),super.insertBefore(s,e)}else super.insertBefore(t,e)}insertContents(t,e){const s=this.deltaToRenderBlocks(e.concat(new x().insert(`
`))),r=s.pop();if(r==null)return;this.batchStart();const o=s.shift();if(o){const l=o.type==="block"&&(o.delta.length()===0||!this.descendant(xt,t)[0]&&t<this.length()),h=o.type==="block"?o.delta:new x().insert({[o.key]:o.value});ca(this,t,h);const f=o.type==="block"?1:0,u=t+h.length()+f;l&&this.insertAt(u-1,`
`);const p=It(this.line(t)[0]),g=vt.AttributeMap.diff(p,o.attributes)||{};Object.keys(g).forEach(y=>{this.formatAt(u-1,1,y,g[y])}),t=u}let[a,c]=this.children.find(t);if(s.length&&(a&&(a=a.split(c),c=0),s.forEach(l=>{if(l.type==="block"){const h=this.createBlock(l.attributes,a||void 0);ca(h,0,l.delta)}else{const h=this.create(l.key,l.value);this.insertBefore(h,a||void 0),Object.keys(l.attributes).forEach(f=>{h.format(f,l.attributes[f])})}})),r.type==="block"&&r.delta.length()){const l=a?a.offset(a.scroll)+c:this.length();ca(this,l,r.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[s,r]=e;return s instanceof at?[s,r]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(vh,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(r,o,a)=>{let c=[],l=a;return r.children.forEachAt(o,a,(h,f,u)=>{vh(h)?c.push(h):h instanceof tr&&(c=c.concat(s(h,f,l))),l-=u}),c};return s(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(v.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=v.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(s=>{let{target:r}=s;const o=this.find(r,!0);return o&&!xh(o)}),t.length>0&&this.emitter.emit(v.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(v.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,s){const[r]=this.descendant(o=>o instanceof xt,t);r&&r.statics.blotName===e&&xh(r)&&r.updateContent(s)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let s=new x;return t.forEach(r=>{const o=r==null?void 0:r.insert;if(o)if(typeof o=="string"){const a=o.split(`
`);a.slice(0,-1).forEach(l=>{s.insert(l,r.attributes),e.push({type:"block",delta:s,attributes:r.attributes??{}}),s=new x});const c=a[a.length-1];c&&s.insert(c,r.attributes)}else{const a=Object.keys(o)[0];if(!a)return;this.query(a,I.INLINE)?s.push(r):(s.length()&&e.push({type:"block",delta:s,attributes:{}}),s=new x,e.push({type:"blockEmbed",key:a,value:o[a],attributes:r.attributes??{}}))}}),s.length()&&e.push({type:"block",delta:s,attributes:{}}),e}createBlock(t,e){let s;const r={};Object.entries(t).forEach(c=>{let[l,h]=c;this.query(l,I.BLOCK&I.BLOT)!=null?s=l:r[l]=h});const o=this.create(s||this.statics.defaultChild.blotName,s?t[s]:void 0);this.insertBefore(o,e||void 0);const a=o.length();return Object.entries(r).forEach(c=>{let[l,h]=c;o.formatAt(0,a,l,h)}),o}}B(as,"blotName","scroll"),B(as,"className","ql-editor"),B(as,"tagName","DIV"),B(as,"defaultChild",st),B(as,"allowedChildren",[st,xt,yn]);function ca(n,t,e){e.reduce((s,r)=>{const o=vt.Op.length(r);let a=r.attributes||{};if(r.insert!=null){if(typeof r.insert=="string"){const c=r.insert;n.insertAt(s,c);const[l]=n.descendant(at,s),h=It(l);a=vt.AttributeMap.diff(h,a)||{}}else if(typeof r.insert=="object"){const c=Object.keys(r.insert)[0];if(c==null)return s;if(n.insertAt(s,c,r.insert[c]),n.scroll.query(c,I.INLINE)!=null){const[h]=n.descendant(at,s),f=It(h);a=vt.AttributeMap.diff(f,a)||{}}}}return Object.keys(a).forEach(c=>{n.formatAt(s,o,c,a[c])}),s+o},t)}const da={scope:I.BLOCK,whitelist:["right","center","justify"]},__=new re("align","align",da),Ih=new jt("align","ql-align",da),Vh=new We("align","text-align",da);class Dh extends We{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(r=>`00${parseInt(r,10).toString(16)}`.slice(-2)).join("")}`):e}}const N_=new jt("color","ql-color",{scope:I.INLINE}),ha=new Dh("color","color",{scope:I.INLINE}),w_=new jt("background","ql-bg",{scope:I.INLINE}),ua=new Dh("background","background-color",{scope:I.INLINE});class En extends yn{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${ar(this.code(t,e))}
</pre>`}}class lt extends st{static register(){T.register(En)}}B(lt,"TAB","  ");class fa extends oe{}fa.blotName="code",fa.tagName="CODE",lt.blotName="code-block",lt.className="ql-code-block",lt.tagName="DIV",En.blotName="code-block-container",En.className="ql-code-block-container",En.tagName="DIV",En.allowedChildren=[lt],lt.allowedChildren=[zt,Ht,ss],lt.requiredContainer=En;const ma={scope:I.BLOCK,whitelist:["rtl"]},$h=new re("direction","dir",ma),Mh=new jt("direction","ql-direction",ma),Rh=new We("direction","direction",ma),qh={scope:I.INLINE,whitelist:["serif","monospace"]},Ph=new jt("font","ql-font",qh);class T_ extends We{value(t){return super.value(t).replace(/["']/g,"")}}const Fh=new T_("font","font-family",qh),jh=new jt("size","ql-size",{scope:I.INLINE,whitelist:["small","large","huge"]}),Uh=new We("size","font-size",{scope:I.INLINE,whitelist:["10px","18px","32px"]}),k_=Ne("quill:keyboard"),A_=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class hr extends Wt{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!e[s]!==t[s]&&e[s]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=S_(t);if(r==null){k_.warn("Attempted to add invalid keyboard binding",r);return}typeof e=="function"&&(e={handler:e}),typeof s=="function"&&(s={handler:s}),(Array.isArray(r.key)?r.key:[r.key]).forEach(a=>{const c={...r,key:a,...e,...s};this.bindings[c.key]=this.bindings[c.key]||[],this.bindings[c.key].push(c)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const r=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(N=>hr.match(t,N));if(r.length===0)return;const o=T.find(t.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const a=this.quill.getSelection();if(a==null||!this.quill.hasFocus())return;const[c,l]=this.quill.getLine(a.index),[h,f]=this.quill.getLeaf(a.index),[u,p]=a.length===0?[h,f]:this.quill.getLeaf(a.index+a.length),g=h instanceof er?h.value().slice(0,f):"",y=u instanceof er?u.value().slice(p):"",E={collapsed:a.length===0,empty:a.length===0&&c.length()<=1,format:this.quill.getFormat(a),line:c,offset:l,prefix:g,suffix:y,event:t};r.some(N=>{if(N.collapsed!=null&&N.collapsed!==E.collapsed||N.empty!=null&&N.empty!==E.empty||N.offset!=null&&N.offset!==E.offset)return!1;if(Array.isArray(N.format)){if(N.format.every(k=>E.format[k]==null))return!1}else if(typeof N.format=="object"&&!Object.keys(N.format).every(k=>N.format[k]===!0?E.format[k]!=null:N.format[k]===!1?E.format[k]==null:Po(N.format[k],E.format[k])))return!1;return N.prefix!=null&&!N.prefix.test(E.prefix)||N.suffix!=null&&!N.suffix.test(E.suffix)?!1:N.handler.call(this,a,E,N)!==!0})&&t.preventDefault()})}handleBackspace(t,e){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let r={};const[o]=this.quill.getLine(t.index);let a=new x().retain(t.index-s).delete(s);if(e.offset===0){const[c]=this.quill.getLine(t.index-1);if(c&&!(c.statics.blotName==="block"&&c.length()<=1)){const h=o.formats(),f=this.quill.getFormat(t.index-1,1);if(r=vt.AttributeMap.diff(h,f)||{},Object.keys(r).length>0){const u=new x().retain(t.index+o.length()-2).retain(1,r);a=a.compose(u)}}}this.quill.updateContents(a,T.sources.USER),this.quill.focus()}handleDelete(t,e){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-s)return;let r={};const[o]=this.quill.getLine(t.index);let a=new x().retain(t.index).delete(s);if(e.offset>=o.length()-1){const[c]=this.quill.getLine(t.index+1);if(c){const l=o.formats(),h=this.quill.getFormat(t.index,1);r=vt.AttributeMap.diff(l,h)||{},Object.keys(r).length>0&&(a=a.retain(c.length()-1).retain(1,r))}}this.quill.updateContents(a,T.sources.USER),this.quill.focus()}handleDeleteRange(t){ga({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const s=Object.keys(e.format).reduce((o,a)=>(this.quill.scroll.query(a,I.BLOCK)&&!Array.isArray(e.format[a])&&(o[a]=e.format[a]),o),{}),r=new x().retain(t.index).delete(t.length).insert(`
`,s);this.quill.updateContents(r,T.sources.USER),this.quill.setSelection(t.index+1,T.sources.SILENT),this.quill.focus()}}const C_={bindings:{bold:pa("bold"),italic:pa("italic"),underline:pa("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",T.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",T.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,t){t.format.indent!=null?this.quill.format("indent","-1",T.sources.USER):t.format.list!=null&&this.quill.format("list",!1,T.sources.USER)}},"indent code-block":Hh(!0),"outdent code-block":Hh(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,T.sources.USER)}},tab:{key:"Tab",handler(n,t){if(t.format.table)return!0;this.quill.history.cutoff();const e=new x().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(e,T.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,T.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,T.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,t){const e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(n.index,n.length,e,T.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[t,e]=this.quill.getLine(n.index),s={...t.formats(),list:"checked"},r=new x().retain(n.index).insert(`
`,s).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,T.sources.USER),this.quill.setSelection(n.index+1,T.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,t){const[e,s]=this.quill.getLine(n.index),r=new x().retain(n.index).insert(`
`,t.format).retain(e.length()-s-1).retain(1,{header:null});this.quill.updateContents(r,T.sources.USER),this.quill.setSelection(n.index+1,T.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const t=this.quill.getModule("table");if(t){const[e,s,r,o]=t.getTable(n),a=O_(e,s,r,o);if(a==null)return;let c=e.offset();if(a<0){const l=new x().retain(c).insert(`
`);this.quill.updateContents(l,T.sources.USER),this.quill.setSelection(n.index+1,n.length,T.sources.SILENT)}else if(a>0){c+=e.length();const l=new x().retain(c).insert(`
`);this.quill.updateContents(l,T.sources.USER),this.quill.setSelection(c,T.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,t){const{event:e,line:s}=t,r=s.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(r-1,T.sources.USER):this.quill.setSelection(r+s.length(),T.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,t){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=t.prefix,[s,r]=this.quill.getLine(n.index);if(r>e)return!0;let o;switch(t.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(n.index," ",T.sources.USER),this.quill.history.cutoff();const a=new x().retain(n.index-r).delete(e+1).retain(s.length()-2-r).retain(1,{list:o});return this.quill.updateContents(a,T.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-e,T.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[t,e]=this.quill.getLine(n.index);let s=2,r=t;for(;r!=null&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,s-=1,s<=0){const o=new x().retain(n.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,T.sources.USER),this.quill.setSelection(n.index-1,T.sources.SILENT),!1}return!0}},"embed left":ur("ArrowLeft",!1),"embed left shift":ur("ArrowLeft",!0),"embed right":ur("ArrowRight",!1),"embed right shift":ur("ArrowRight",!0),"table down":zh(!1),"table up":zh(!0)}};hr.DEFAULTS=C_;function Hh(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(t,e){let{event:s}=e;const r=this.quill.scroll.query("code-block"),{TAB:o}=r;if(t.length===0&&!s.shiftKey){this.quill.insertText(t.index,o,T.sources.USER),this.quill.setSelection(t.index+o.length,T.sources.SILENT);return}const a=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:c,length:l}=t;a.forEach((h,f)=>{n?(h.insertAt(0,o),f===0?c+=o.length:l+=o.length):h.domNode.textContent.startsWith(o)&&(h.deleteAt(0,o.length),f===0?c-=o.length:l-=o.length)}),this.quill.update(T.sources.USER),this.quill.setSelection(c,l,T.sources.SILENT)}}}function ur(n,t){return{key:n,shiftKey:t,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:r}=s;n==="ArrowRight"&&(r+=s.length+1);const[o]=this.quill.getLeaf(r);return o instanceof At?(n==="ArrowLeft"?t?this.quill.setSelection(s.index-1,s.length+1,T.sources.USER):this.quill.setSelection(s.index-1,T.sources.USER):t?this.quill.setSelection(s.index,s.length+1,T.sources.USER):this.quill.setSelection(s.index+s.length+1,T.sources.USER),!1):!0}}}function pa(n){return{key:n[0],shortKey:!0,handler(t,e){this.quill.format(n,!e.format[n],T.sources.USER)}}}function zh(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){const s=n?"prev":"next",r=e.line,o=r.parent[s];if(o!=null){if(o.statics.blotName==="table-row"){let a=o.children.head,c=r;for(;c.prev!=null;)c=c.prev,a=a.next;const l=a.offset(this.quill.scroll)+Math.min(e.offset,a.length()-1);this.quill.setSelection(l,0,T.sources.USER)}}else{const a=r.table()[s];a!=null&&(n?this.quill.setSelection(a.offset(this.quill.scroll)+a.length()-1,0,T.sources.USER):this.quill.setSelection(a.offset(this.quill.scroll),0,T.sources.USER))}return!1}}}function S_(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=Zn(n);else return null;return n.shortKey&&(n[A_]=n.shortKey,delete n.shortKey),n}function ga(n){let{quill:t,range:e}=n;const s=t.getLines(e);let r={};if(s.length>1){const o=s[0].formats(),a=s[s.length-1].formats();r=vt.AttributeMap.diff(a,o)||{}}t.deleteText(e,T.sources.USER),Object.keys(r).length>0&&t.formatLine(e.index,1,r,T.sources.USER),t.setSelection(e.index,T.sources.SILENT)}function O_(n,t,e,s){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?s===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const L_=/font-weight:\s*normal/,B_=["P","OL","UL"],Wh=n=>n&&B_.includes(n.tagName),v_=n=>{Array.from(n.querySelectorAll("br")).filter(t=>Wh(t.previousElementSibling)&&Wh(t.nextElementSibling)).forEach(t=>{var e;(e=t.parentNode)==null||e.removeChild(t)})},x_=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var e;return(e=t.getAttribute("style"))==null?void 0:e.match(L_)}).forEach(t=>{var s;const e=n.createDocumentFragment();e.append(...t.childNodes),(s=t.parentNode)==null||s.replaceChild(e,t)})};function I_(n){n.querySelector('[id^="docs-internal-guid-"]')&&(x_(n),v_(n))}const V_=/\bmso-list:[^;]*ignore/i,D_=/\bmso-list:[^;]*\bl(\d+)/i,$_=/\bmso-list:[^;]*\blevel(\d+)/i,M_=(n,t)=>{const e=n.getAttribute("style"),s=e==null?void 0:e.match(D_);if(!s)return null;const r=Number(s[1]),o=e==null?void 0:e.match($_),a=o?Number(o[1]):1,c=new RegExp(`@list l${r}:level${a}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=t.match(c),h=l&&l[1]==="bullet"?"bullet":"ordered";return{id:r,indent:a,type:h,element:n}},R_=n=>{var a,c;const t=Array.from(n.querySelectorAll("[style*=mso-list]")),e=[],s=[];t.forEach(l=>{(l.getAttribute("style")||"").match(V_)?e.push(l):s.push(l)}),e.forEach(l=>{var h;return(h=l.parentNode)==null?void 0:h.removeChild(l)});const r=n.documentElement.innerHTML,o=s.map(l=>M_(l,r)).filter(l=>l);for(;o.length;){const l=[];let h=o.shift();for(;h;)l.push(h),h=o.length&&((a=o[0])==null?void 0:a.element)===h.element.nextElementSibling&&o[0].id===h.id?o.shift():null;const f=document.createElement("ul");l.forEach(g=>{const y=document.createElement("li");y.setAttribute("data-list",g.type),g.indent>1&&y.setAttribute("class",`ql-indent-${g.indent-1}`),y.innerHTML=g.element.innerHTML,f.appendChild(y)});const u=(c=l[0])==null?void 0:c.element,{parentNode:p}=u??{};u&&(p==null||p.replaceChild(f,u)),l.slice(1).forEach(g=>{let{element:y}=g;p==null||p.removeChild(y)})}};function q_(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&R_(n)}const P_=[q_,I_],F_=n=>{n.documentElement&&P_.forEach(t=>{t(n)})},j_=Ne("quill:clipboard"),U_=[[Node.TEXT_NODE,eN],[Node.TEXT_NODE,Xh],["br",G_],[Node.ELEMENT_NODE,Xh],[Node.ELEMENT_NODE,K_],[Node.ELEMENT_NODE,W_],[Node.ELEMENT_NODE,J_],["li",Z_],["ol, ul",Q_],["pre",Y_],["tr",tN],["b",ya("bold")],["i",ya("italic")],["strike",ya("strike")],["style",X_]],H_=[__,$h].reduce((n,t)=>(n[t.keyName]=t,n),{}),Kh=[Vh,ua,ha,Rh,Fh,Uh].reduce((n,t)=>(n[t.keyName]=t,n),{});class Gh extends Wt{constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],U_.concat(this.options.matchers??[]).forEach(s=>{let[r,o]=s;this.addMatcher(r,o)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r[lt.blotName])return new x().insert(s||"",{[lt.blotName]:r[lt.blotName]});if(!e)return new x().insert(s||"",r);const o=this.convertHTML(e);return Ks(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||r.table)?o.compose(new x().retain(o.length()-1).delete(1)):o}normalizeHTML(t){F_(t)}convertHTML(t){const e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);const s=e.body,r=new WeakMap,[o,a]=this.prepareMatching(s,r);return ba(this.quill.scroll,s,o,a,r)}dangerouslyPasteHTML(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.sources.API;if(typeof t=="string"){const r=this.convert({html:t,text:""});this.quill.setContents(r,e),this.quill.setSelection(0,T.sources.SILENT)}else{const r=this.convert({html:e,text:""});this.quill.updateContents(new x().retain(t).concat(r),s),this.quill.setSelection(t+r.length(),T.sources.SILENT)}}onCaptureCopy(t){var a,c;let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:r,text:o}=this.onCopy(s,e);(a=t.clipboardData)==null||a.setData("text/plain",o),(c=t.clipboardData)==null||c.setData("text/html",r),e&&ga({range:s,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){var a,c,l,h,f;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const s=(a=t.clipboardData)==null?void 0:a.getData("text/html");let r=(c=t.clipboardData)==null?void 0:c.getData("text/plain");if(!s&&!r){const u=(l=t.clipboardData)==null?void 0:l.getData("text/uri-list");u&&(r=this.normalizeURIList(u))}const o=Array.from(((h=t.clipboardData)==null?void 0:h.files)||[]);if(!s&&o.length>0){this.quill.uploader.upload(e,o);return}if(s&&o.length>0){const u=new DOMParser().parseFromString(s,"text/html");if(u.body.childElementCount===1&&((f=u.body.firstElementChild)==null?void 0:f.tagName)==="IMG"){this.quill.uploader.upload(e,o);return}}this.onPaste(e,{html:s,text:r})}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:s,html:r}=e;const o=this.quill.getFormat(t.index),a=this.convert({text:s,html:r},o);j_.log("onPaste",a,{text:s,html:r});const c=new x().retain(t.index).delete(t.length).concat(a);this.quill.updateContents(c,T.sources.USER),this.quill.setSelection(c.length()-t.length,T.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const s=[],r=[];return this.matchers.forEach(o=>{const[a,c]=o;switch(a){case Node.TEXT_NODE:r.push(c);break;case Node.ELEMENT_NODE:s.push(c);break;default:Array.from(t.querySelectorAll(a)).forEach(l=>{if(e.has(l)){const h=e.get(l);h==null||h.push(c)}else e.set(l,[c])});break}}),[s,r]}}B(Gh,"DEFAULTS",{matchers:[]});function _n(n,t,e,s){return s.query(t)?n.reduce((r,o)=>{if(!o.insert)return r;if(o.attributes&&o.attributes[t])return r.push(o);const a=e?{[t]:e}:{};return r.insert(o.insert,{...a,...o.attributes})},new x):n}function Ks(n,t){let e="";for(let s=n.ops.length-1;s>=0&&e.length<t.length;--s){const r=n.ops[s];if(typeof r.insert!="string")break;e=r.insert+e}return e.slice(-1*t.length)===t}function Ge(n,t){if(!(n instanceof Element))return!1;const e=t.query(n);return e&&e.prototype instanceof At?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function z_(n,t){return n.previousElementSibling&&n.nextElementSibling&&!Ge(n.previousElementSibling,t)&&!Ge(n.nextElementSibling,t)}const fr=new WeakMap;function Yh(n){return n==null?!1:(fr.has(n)||(n.tagName==="PRE"?fr.set(n,!0):fr.set(n,Yh(n.parentNode))),fr.get(n))}function ba(n,t,e,s,r){return t.nodeType===t.TEXT_NODE?s.reduce((o,a)=>a(t,o,n),new x):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((o,a)=>{let c=ba(n,a,e,s,r);return a.nodeType===t.ELEMENT_NODE&&(c=e.reduce((l,h)=>h(a,l,n),c),c=(r.get(a)||[]).reduce((l,h)=>h(a,l,n),c)),o.concat(c)},new x):new x}function ya(n){return(t,e,s)=>_n(e,n,!0,s)}function W_(n,t,e){const s=re.keys(n),r=jt.keys(n),o=We.keys(n),a={};return s.concat(r).concat(o).forEach(c=>{let l=e.query(c,I.ATTRIBUTE);l!=null&&(a[l.attrName]=l.value(n),a[l.attrName])||(l=H_[c],l!=null&&(l.attrName===c||l.keyName===c)&&(a[l.attrName]=l.value(n)||void 0),l=Kh[c],l!=null&&(l.attrName===c||l.keyName===c)&&(l=Kh[c],a[l.attrName]=l.value(n)||void 0))}),Object.entries(a).reduce((c,l)=>{let[h,f]=l;return _n(c,h,f,e)},t)}function K_(n,t,e){const s=e.query(n);if(s==null)return t;if(s.prototype instanceof At){const r={},o=s.value(n);if(o!=null)return r[s.blotName]=o,new x().insert(r,s.formats(n,e))}else if(s.prototype instanceof Hs&&!Ks(t,`
`)&&t.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return _n(t,s.blotName,s.formats(n,e),e);return t}function G_(n,t){return Ks(t,`
`)||t.insert(`
`),t}function Y_(n,t,e){const s=e.query("code-block"),r=s&&"formats"in s&&typeof s.formats=="function"?s.formats(n,e):!0;return _n(t,"code-block",r,e)}function X_(){return new x}function Z_(n,t,e){const s=e.query(n);if(s==null||s.blotName!=="list"||!Ks(t,`
`))return t;let r=-1,o=n.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(r+=1),o=o.parentNode;return r<=0?t:t.reduce((a,c)=>c.insert?c.attributes&&typeof c.attributes.indent=="number"?a.push(c):a.insert(c.insert,{indent:r,...c.attributes||{}}):a,new x)}function Q_(n,t,e){const s=n;let r=s.tagName==="OL"?"ordered":"bullet";const o=s.getAttribute("data-checked");return o&&(r=o==="true"?"checked":"unchecked"),_n(t,"list",r,e)}function Xh(n,t,e){if(!Ks(t,`
`)){if(Ge(n,e)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&n.nextSibling){let s=n.nextSibling;for(;s!=null;){if(Ge(s,e))return t.insert(`
`);const r=e.query(s);if(r&&r.prototype instanceof xt)return t.insert(`
`);s=s.firstChild}}}return t}function J_(n,t,e){var o;const s={},r=n.style||{};return r.fontStyle==="italic"&&(s.italic=!0),r.textDecoration==="underline"&&(s.underline=!0),r.textDecoration==="line-through"&&(s.strike=!0),((o=r.fontWeight)!=null&&o.startsWith("bold")||parseInt(r.fontWeight,10)>=700)&&(s.bold=!0),t=Object.entries(s).reduce((a,c)=>{let[l,h]=c;return _n(a,l,h,e)},t),parseFloat(r.textIndent||0)>0?new x().insert("	").concat(t):t}function tN(n,t,e){var r,o;const s=((r=n.parentElement)==null?void 0:r.tagName)==="TABLE"?n.parentElement:(o=n.parentElement)==null?void 0:o.parentElement;if(s!=null){const c=Array.from(s.querySelectorAll("tr")).indexOf(n)+1;return _n(t,"table",c,e)}return t}function eN(n,t,e){var r;let s=n.data;if(((r=n.parentElement)==null?void 0:r.tagName)==="O:P")return t.insert(s.trim());if(!Yh(n)){if(s.trim().length===0&&s.includes(`
`)&&!z_(n,e))return t;const o=(a,c)=>{const l=c.replace(/[^\u00a0]/g,"");return l.length<1&&a?" ":l};s=s.replace(/\r\n/g," ").replace(/\n/g," "),s=s.replace(/\s\s+/g,o.bind(o,!0)),(n.previousSibling==null&&n.parentElement!=null&&Ge(n.parentElement,e)||n.previousSibling instanceof Element&&Ge(n.previousSibling,e))&&(s=s.replace(/^\s+/,o.bind(o,!1))),(n.nextSibling==null&&n.parentElement!=null&&Ge(n.parentElement,e)||n.nextSibling instanceof Element&&Ge(n.nextSibling,e))&&(s=s.replace(/\s+$/,o.bind(o,!1)))}return t.insert(s)}class Zh extends Wt{constructor(e,s){super(e,s);B(this,"lastRecorded",0);B(this,"ignoreChange",!1);B(this,"stack",{undo:[],redo:[]});B(this,"currentRange",null);this.quill.on(T.events.EDITOR_CHANGE,(r,o,a,c)=>{r===T.events.SELECTION_CHANGE?o&&c!==T.sources.SILENT&&(this.currentRange=o):r===T.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||c===T.sources.USER?this.record(o,a):this.transform(o)),this.currentRange=Ea(this.currentRange,o))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(e,s){if(this.stack[e].length===0)return;const r=this.stack[e].pop();if(!r)return;const o=this.quill.getContents(),a=r.delta.invert(o);this.stack[s].push({delta:a,range:Ea(r.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,T.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,s){if(e.ops.length===0)return;this.stack.redo=[];let r=e.invert(s),o=this.currentRange;const a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){const c=this.stack.undo.pop();c&&(r=r.compose(c.delta),o=c.range)}else this.lastRecorded=a;r.length()!==0&&(this.stack.undo.push({delta:r,range:o}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){Qh(this.stack.undo,e),Qh(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,T.sources.USER);else{const s=sN(this.quill.scroll,e.delta);this.quill.setSelection(s,T.sources.USER)}}}B(Zh,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Qh(n,t){let e=t;for(let s=n.length-1;s>=0;s-=1){const r=n[s];n[s]={delta:e.transform(r.delta,!0),range:r.range&&Ea(r.range,e)},e=r.delta.transform(e),n[s].delta.length()===0&&n.splice(s,1)}}function nN(n,t){const e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(s=>n.query(s,I.BLOCK)!=null):!1}function sN(n,t){const e=t.reduce((r,o)=>r+(o.delete||0),0);let s=t.length()-e;return nN(n,t)&&(s-=1),s}function Ea(n,t){if(!n)return n;const e=t.transformPosition(n.index),s=t.transformPosition(n.index+n.length);return{index:e,length:s-e}}class Jh extends Wt{constructor(t,e){super(t,e),t.root.addEventListener("drop",s=>{var a;s.preventDefault();let r=null;if(document.caretRangeFromPoint)r=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const c=document.caretPositionFromPoint(s.clientX,s.clientY);r=document.createRange(),r.setStart(c.offsetNode,c.offset),r.setEnd(c.offsetNode,c.offset)}const o=r&&t.selection.normalizeNative(r);if(o){const c=t.selection.normalizedToRange(o);(a=s.dataTransfer)!=null&&a.files&&this.upload(c,s.dataTransfer.files)}})}upload(t,e){const s=[];Array.from(e).forEach(r=>{var o;r&&((o=this.options.mimetypes)!=null&&o.includes(r.type))&&s.push(r)}),s.length>0&&this.options.handler.call(this,t,s)}}Jh.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,t){if(!this.quill.scroll.query("image"))return;const e=t.map(s=>new Promise(r=>{const o=new FileReader;o.onload=()=>{r(o.result)},o.readAsDataURL(s)}));Promise.all(e).then(s=>{const r=s.reduce((o,a)=>o.insert({image:a}),new x().retain(n.index).delete(n.length));this.quill.updateContents(r,v.sources.USER),this.quill.setSelection(n.index+s.length,v.sources.SILENT)})}};const iN=["insertText","insertReplacementText"];class rN extends Wt{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||t.on(T.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){ga({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){const s=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new x().retain(t.index).insert(e,s),T.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,T.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!iN.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const s=oN(t);if(s==null)return;const r=this.quill.selection.normalizeNative(e),o=r?this.quill.selection.normalizedToRange(r):null;o&&this.replaceText(o,s)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function oN(n){var t;return typeof n.data=="string"?n.data:(t=n.dataTransfer)!=null&&t.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const aN=/Mac/i.test(navigator.platform),lN=100,cN=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||aN&&n.key==="a"&&n.ctrlKey===!0);class dN extends Wt{constructor(e,s){super(e,s);B(this,"isListening",!1);B(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,s){let{line:r,event:o}=s;if(!(r instanceof Ut)||!r.uiNode)return!0;const a=getComputedStyle(r.domNode).direction==="rtl";return a&&o.key!=="ArrowRight"||!a&&o.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(o.shiftKey?1:0),T.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&cN(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+lN,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const s=e.getRangeAt(0);if(s.collapsed!==!0||s.startOffset!==0)return;const r=this.quill.scroll.find(s.startContainer);if(!(r instanceof Ut)||!r.uiNode)return;const o=document.createRange();o.setStartAfter(r.uiNode),o.setEndAfter(r.uiNode),e.removeAllRanges(),e.addRange(o)}}T.register({"blots/block":st,"blots/block/embed":xt,"blots/break":Ht,"blots/container":yn,"blots/cursor":ss,"blots/embed":aa,"blots/inline":oe,"blots/scroll":as,"blots/text":zt,"modules/clipboard":Gh,"modules/history":Zh,"modules/keyboard":hr,"modules/uploader":Jh,"modules/input":rN,"modules/uiNode":dN});class hN extends jt{add(t,e){let s=0;if(e==="+1"||e==="-1"){const r=this.value(t)||0;s=e==="+1"?r+1:r-1}else typeof e=="number"&&(s=e);return s===0?(this.remove(t),!0):super.add(t,s.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}const uN=new hN("indent","ql-indent",{scope:I.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class _a extends st{}B(_a,"blotName","blockquote"),B(_a,"tagName","blockquote");class Na extends st{static formats(t){return this.tagName.indexOf(t.tagName)+1}}B(Na,"blotName","header"),B(Na,"tagName",["H1","H2","H3","H4","H5","H6"]);class Gs extends yn{}Gs.blotName="list-container",Gs.tagName="OL";class Ys extends st{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){T.register(Gs)}constructor(t,e){super(t,e);const s=e.ownerDocument.createElement("span"),r=o=>{if(!t.isEnabled())return;const a=this.statics.formats(e,t);a==="checked"?(this.format("list","unchecked"),o.preventDefault()):a==="unchecked"&&(this.format("list","checked"),o.preventDefault())};s.addEventListener("mousedown",r),s.addEventListener("touchstart",r),this.attachUI(s)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}Ys.blotName="list",Ys.tagName="LI",Gs.allowedChildren=[Ys],Ys.requiredContainer=Gs;class Xs extends oe{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}B(Xs,"blotName","bold"),B(Xs,"tagName",["STRONG","B"]);class wa extends Xs{}B(wa,"blotName","italic"),B(wa,"tagName",["EM","I"]);class Ye extends oe{static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return tu(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}B(Ye,"blotName","link"),B(Ye,"tagName","A"),B(Ye,"SANITIZED_URL","about:blank"),B(Ye,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function tu(n,t){const e=document.createElement("a");e.href=n;const s=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(s)>-1}class Ta extends oe{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}B(Ta,"blotName","script"),B(Ta,"tagName",["SUB","SUP"]);class ka extends Xs{}B(ka,"blotName","strike"),B(ka,"tagName",["S","STRIKE"]);class Aa extends oe{}B(Aa,"blotName","underline"),B(Aa,"tagName","U");class mr extends aa{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}B(mr,"blotName","formula"),B(mr,"className","ql-formula"),B(mr,"tagName","SPAN");const eu=["alt","height","width"];class Ca extends At{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return eu.reduce((e,s)=>(t.hasAttribute(s)&&(e[s]=t.getAttribute(s)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return tu(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){eu.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}}B(Ca,"blotName","image"),B(Ca,"tagName","IMG");const nu=["height","width"];class pr extends xt{static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return nu.reduce((e,s)=>(t.hasAttribute(s)&&(e[s]=t.getAttribute(s)),e),{})}static sanitize(t){return Ye.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){nu.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}B(pr,"blotName","video"),B(pr,"className","ql-video"),B(pr,"tagName","IFRAME");const Zs=new jt("code-token","hljs",{scope:I.INLINE});class Te extends oe{static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains(lt.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,s){super(t,e,s),Zs.add(this.domNode,s)}format(t,e){t!==Te.blotName?super.format(t,e):e?Zs.add(this.domNode,e):(Zs.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Zs.value(this.domNode)||this.unwrap()}}Te.blotName="code-token",Te.className="ql-token";class Vt extends lt{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),Te.blotName,!1),super.replaceWith(t,e)}}class Qs extends En{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===Vt.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(t,e)}))}formatAt(t,e,s,r){s===Vt.blotName&&(this.forceNext=!0),super.formatAt(t,e,s,r)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const r=`${Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).map(a=>a.textContent).join(`
`)}
`,o=Vt.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==r){if(r.trim().length>0||this.cachedText==null){const a=this.children.reduce((l,h)=>l.concat(wh(h,!1)),new x),c=t(r,o);a.diff(c).reduce((l,h)=>{let{retain:f,attributes:u}=h;return f?(u&&Object.keys(u).forEach(p=>{[Vt.blotName,Te.blotName].includes(p)&&this.formatAt(l,f,p,u[p])}),l+f):l},0)}this.cachedText=r,this.forceNext=!1}}html(t,e){const[s]=this.children.find(t);return`<pre data-language="${s?Vt.formats(s.domNode):"plain"}">
${ar(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const e=Vt.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}Qs.allowedChildren=[Vt],Vt.requiredContainer=Qs,Vt.allowedChildren=[Te,ss,zt,Ht];const fN=(n,t,e)=>{if(typeof n.versionString=="string"){const s=n.versionString.split(".")[0];if(parseInt(s,10)>=11)return n.highlight(e,{language:t}).value}return n.highlight(t,e).value};class su extends Wt{static register(){T.register(Te,!0),T.register(Vt,!0),T.register(Qs,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,r)=>{let{key:o}=r;return s[o]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(T.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof Qs))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:r,label:o}=s;const a=e.ownerDocument.createElement("option");a.textContent=o,a.setAttribute("value",r),e.appendChild(a)}),e.addEventListener("change",()=>{t.format(Vt.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=Vt.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(T.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(T.sources.USER);const s=this.quill.getSelection();(t==null?this.quill.scroll.descendants(Qs):[t]).forEach(o=>{o.highlight(this.highlightBlot,e)}),this.quill.update(T.sources.SILENT),s!=null&&this.quill.setSelection(s,T.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return ar(t).split(`
`).reduce((r,o,a)=>(a!==0&&r.insert(`
`,{[lt.blotName]:e}),r.insert(o)),new x);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(lt.className),s.innerHTML=fN(this.options.hljs,e,t),ba(this.quill.scroll,s,[(r,o)=>{const a=Zs.value(r);return a?o.compose(new x().retain(o.length(),{[Te.blotName]:a})):o}],[(r,o)=>r.data.split(`
`).reduce((a,c,l)=>(l!==0&&a.insert(`
`,{[lt.blotName]:e}),a.insert(c)),o)],new WeakMap)}}su.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const si=class si extends st{static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",Sa()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===si.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};B(si,"blotName","table"),B(si,"tagName","TD");let Gt=si;class ke extends yn{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),e=this.children.tail.formats(),s=this.next.children.head.formats(),r=this.next.children.tail.formats();return t.table===e.table&&t.table===s.table&&t.table===r.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;const s=e.formats(),r=e.next.formats();if(s.table!==r.table){const o=this.splitAfter(e);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}B(ke,"blotName","table-row"),B(ke,"tagName","TR");class ae extends yn{}B(ae,"blotName","table-body"),B(ae,"tagName","TBODY");class ls extends yn{balanceCells(){const t=this.descendants(ke),e=t.reduce((s,r)=>Math.max(r.children.length,s),0);t.forEach(s=>{new Array(e-s.children.length).fill(0).forEach(()=>{let r;s.children.head!=null&&(r=Gt.formats(s.children.head.domNode));const o=this.scroll.create(Gt.blotName,r);s.appendChild(o),o.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){const[e]=this.descendant(ae);e==null||e.children.head==null||e.children.forEach(s=>{const r=s.children.at(t);r!=null&&r.remove()})}insertColumn(t){const[e]=this.descendant(ae);e==null||e.children.head==null||e.children.forEach(s=>{const r=s.children.at(t),o=Gt.formats(s.children.head.domNode),a=this.scroll.create(Gt.blotName,o);s.insertBefore(a,r)})}insertRow(t){const[e]=this.descendant(ae);if(e==null||e.children.head==null)return;const s=Sa(),r=this.scroll.create(ke.blotName);e.children.head.children.forEach(()=>{const a=this.scroll.create(Gt.blotName,s);r.appendChild(a)});const o=e.children.at(t);e.insertBefore(r,o)}rows(){const t=this.children.head;return t==null?[]:t.children.map(e=>e)}}B(ls,"blotName","table-container"),B(ls,"tagName","TABLE"),ls.allowedChildren=[ae],ae.requiredContainer=ls,ae.allowedChildren=[ke],ke.requiredContainer=ae,ke.allowedChildren=[Gt],Gt.requiredContainer=ke;function Sa(){return`row-${Math.random().toString(36).slice(2,6)}`}class mN extends Wt{static register(){T.register(Gt),T.register(ke),T.register(ae),T.register(ls)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(ls).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(T.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(T.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const e=t.offset();t.remove(),this.quill.update(T.sources.USER),this.quill.setSelection(e,T.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[e,s]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==Gt.blotName)return[null,null,null,-1];const r=e.parent;return[r.parent.parent,r,e,s]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[s,r,o]=this.getTable(e);if(o==null)return;const a=o.cellOffset();s.insertColumn(a+t),this.quill.update(T.sources.USER);let c=r.rowOffset();t===0&&(c+=1),this.quill.setSelection(e.index+c,e.length,T.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[s,r,o]=this.getTable(e);if(o==null)return;const a=r.rowOffset();s.insertRow(a+t),this.quill.update(T.sources.USER),t>0?this.quill.setSelection(e,T.sources.SILENT):this.quill.setSelection(e.index+r.children.length,e.length,T.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const s=this.quill.getSelection();if(s==null)return;const r=new Array(t).fill(0).reduce(o=>{const a=new Array(e).fill(`
`).join("");return o.insert(a,{table:Sa()})},new x().retain(s.index));this.quill.updateContents(r,T.sources.USER),this.quill.setSelection(s.index,T.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(T.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(T.events.TEXT_CHANGE,(s,r,o)=>{o===T.sources.USER&&this.balanceTables()}),!0):!1)})}}const iu=Ne("quill:toolbar");class Oa extends Wt{constructor(t,e){var s,r;if(super(t,e),Array.isArray(this.options.container)){const o=document.createElement("div");o.setAttribute("role","toolbar"),pN(o,this.options.container),(r=(s=t.container)==null?void 0:s.parentNode)==null||r.insertBefore(o,t.container),this.container=o}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){iu.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(o=>{var c;const a=(c=this.options.handlers)==null?void 0:c[o];a&&this.addHandler(o,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(o=>{this.attach(o)}),this.quill.on(T.events.EDITOR_CHANGE,()=>{const[o]=this.quill.selection.getRange();this.update(o)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(r=>r.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){iu.warn("ignoring attaching to nonexistent format",e,t);return}const s=t.tagName==="SELECT"?"change":"click";t.addEventListener(s,r=>{let o;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const c=t.options[t.selectedIndex];c.hasAttribute("selected")?o=!1:o=c.value||!1}else t.classList.contains("ql-active")?o=!1:o=t.value||!t.hasAttribute("value"),r.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,o);else if(this.quill.scroll.query(e).prototype instanceof At){if(o=prompt(`Enter ${e}`),!o)return;this.quill.updateContents(new x().retain(a.index).delete(a.length).insert({[e]:o}),T.sources.USER)}else this.quill.format(e,o,T.sources.USER);this.update(a)}),this.controls.push([e,t])}update(t){const e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(s=>{const[r,o]=s;if(o.tagName==="SELECT"){let a=null;if(t==null)a=null;else if(e[r]==null)a=o.querySelector("option[selected]");else if(!Array.isArray(e[r])){let c=e[r];typeof c=="string"&&(c=c.replace(/"/g,'\\"')),a=o.querySelector(`option[value="${c}"]`)}a==null?(o.value="",o.selectedIndex=-1):a.selected=!0}else if(t==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const a=e[r],c=a===o.getAttribute("value")||a!=null&&a.toString()===o.getAttribute("value")||a==null&&!o.getAttribute("value");o.classList.toggle("ql-active",c),o.setAttribute("aria-pressed",c.toString())}else{const a=e[r]!=null;o.classList.toggle("ql-active",a),o.setAttribute("aria-pressed",a.toString())}})}}Oa.DEFAULTS={};function ru(n,t,e){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${t}`),s.setAttribute("aria-pressed","false"),e!=null?(s.value=e,s.setAttribute("aria-label",`${t}: ${e}`)):s.setAttribute("aria-label",t),n.appendChild(s)}function pN(n,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{const s=document.createElement("span");s.classList.add("ql-formats"),e.forEach(r=>{if(typeof r=="string")ru(s,r);else{const o=Object.keys(r)[0],a=r[o];Array.isArray(a)?gN(s,o,a):ru(s,o,a)}}),n.appendChild(s)})}function gN(n,t,e){const s=document.createElement("select");s.classList.add(`ql-${t}`),e.forEach(r=>{const o=document.createElement("option");r!==!1?o.setAttribute("value",String(r)):o.setAttribute("selected","selected"),s.appendChild(o)}),n.appendChild(s)}Oa.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,I.INLINE)!=null&&this.quill.format(e,!1,T.sources.USER)})}else this.quill.removeFormat(n.index,n.length,T.sources.USER)},direction(n){const{align:t}=this.quill.getFormat();n==="rtl"&&t==null?this.quill.format("align","right",T.sources.USER):!n&&t==="right"&&this.quill.format("align",!1,T.sources.USER),this.quill.format("direction",n,T.sources.USER)},indent(n){const t=this.quill.getSelection(),e=this.quill.getFormat(t),s=parseInt(e.indent||0,10);if(n==="+1"||n==="-1"){let r=n==="+1"?1:-1;e.direction==="rtl"&&(r*=-1),this.quill.format("indent",s+r,T.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,T.sources.USER)},list(n){const t=this.quill.getSelection(),e=this.quill.getFormat(t);n==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,T.sources.USER):this.quill.format("list","unchecked",T.sources.USER):this.quill.format("list",n,T.sources.USER)}}};const bN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',yN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',EN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',_N='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',NN='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',wN='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',TN='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',kN='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',ou='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Js={align:{"":bN,center:yN,right:EN,justify:_N},background:NN,blockquote:wN,bold:TN,clean:kN,code:ou,"code-block":ou,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'},AN='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let au=0;function lu(n,t){n.setAttribute(t,`${n.getAttribute(t)!=="true"}`)}class gr{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),lu(this.label,"aria-expanded"),lu(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const s=t.getAttribute("value");return s&&e.setAttribute("data-value",s),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",r=>{switch(r.key){case"Enter":this.selectItem(e,!0),r.preventDefault();break;case"Escape":this.escape(),r.preventDefault();break}}),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=AN,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${au}`,au+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{const s=this.buildItem(e);t.appendChild(s),e.selected===!0&&this.selectItem(s)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");t!==s&&(s!=null&&s.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class cu extends gr{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const s=this.label.querySelector(".ql-color-label"),r=t&&t.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=r:s.style.fill=r)}}class du extends gr{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=e[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const s=t||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const CN=n=>{const{overflowY:t}=getComputedStyle(n,null);return t!=="visible"&&t!=="clip"};class hu{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,CN(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,s=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const r=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let a=0;if(o.right>r.right&&(a=r.right-o.right,this.root.style.left=`${e+a}px`),o.left<r.left&&(a=r.left-o.left,this.root.style.left=`${e+a}px`),o.bottom>r.bottom){const c=o.bottom-o.top,l=t.bottom-t.top+c;this.root.style.top=`${s-l}px`,this.root.classList.add("ql-flip")}return a}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const SN=[!1,"center","right","justify"],ON=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],LN=[!1,"serif","monospace"],BN=["1","2","3",!1],vN=["small",!1,"large","huge"];class ti extends rs{constructor(t,e){super(t,e);const s=r=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(r.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(r.target)||o.close()})};t.emitter.listenDOM("click",document.body,s)}addModule(t){const e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(o.startsWith("ql-")&&(o=o.slice(3),e[o]!=null))if(o==="direction")s.innerHTML=e[o][""]+e[o].rtl;else if(typeof e[o]=="string")s.innerHTML=e[o];else{const a=s.value||"";a!=null&&e[o][a]&&(s.innerHTML=e[o][a])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(r=>{if(r.classList.contains("ql-align")&&(r.querySelector("option")==null&&ei(r,SN),typeof e.align=="object"))return new du(r,e.align);if(r.classList.contains("ql-background")||r.classList.contains("ql-color")){const o=r.classList.contains("ql-background")?"background":"color";return r.querySelector("option")==null&&ei(r,ON,o==="background"?"#ffffff":"#000000"),new cu(r,e[o])}return r.querySelector("option")==null&&(r.classList.contains("ql-font")?ei(r,LN):r.classList.contains("ql-header")?ei(r,BN):r.classList.contains("ql-size")&&ei(r,vN)),new gr(r)});const s=()=>{this.pickers.forEach(r=>{r.update()})};this.quill.on(v.events.EDITOR_CHANGE,s)}}ti.DEFAULTS=ze({},rs.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class uu extends hu{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,v.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,v.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=xN(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(e!=null){const s=e.index+e.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),t,v.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",v.sources.USER),this.quill.setSelection(s+2,v.sources.USER)}break}}this.textbox.value="",this.hide()}}function xN(n){let t=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:n}function ei(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(s=>{const r=document.createElement("option");s===e?r.setAttribute("selected","selected"):r.setAttribute("value",String(s)),n.appendChild(r)})}const IN=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class fu extends uu{constructor(t,e){super(t,e),this.quill.on(v.events.EDITOR_CHANGE,(s,r,o,a)=>{if(s===v.events.SELECTION_CHANGE)if(r!=null&&r.length>0&&a===v.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const c=this.quill.getLines(r.index,r.length);if(c.length===1){const l=this.quill.getBounds(r);l!=null&&this.position(l)}else{const l=c[c.length-1],h=this.quill.getIndex(l),f=Math.min(l.length()-1,r.index+r.length-h),u=this.quill.getBounds(new bn(h,f));u!=null&&this.position(u)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(v.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){const e=super.position(t),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",e!==0&&(s.style.marginLeft=`${-1*e-s.offsetWidth/2}px`),e}}B(fu,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class mu extends ti{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=IN),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new fu(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Js),this.buildPickers(t.container.querySelectorAll("select"),Js))}}mu.DEFAULTS=ze({},ti.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,T.sources.USER)}}}}});const VN=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class pu extends uu{constructor(){super(...arguments);B(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const s=this.linkRange;this.restoreFocus(),this.quill.formatText(s,"link",!1,v.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(v.events.SELECTION_CHANGE,(e,s,r)=>{if(e!=null){if(e.length===0&&r===v.sources.USER){const[o,a]=this.quill.scroll.descendant(Ye,e.index);if(o!=null){this.linkRange=new bn(e.index-a,o.length());const c=Ye.formats(o.domNode);this.preview.textContent=c,this.preview.setAttribute("href",c),this.show();const l=this.quill.getBounds(this.linkRange);l!=null&&this.position(l);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}B(pu,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class gu extends ti{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=VN),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Js),this.buildPickers(t.container.querySelectorAll("select"),Js),this.tooltip=new pu(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,s)=>{t.handlers.link.call(t,!s.format.link)}))}}gu.DEFAULTS=ze({},ti.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:s}=this.quill.theme;s.edit("link",e)}else this.quill.format("link",!1,T.sources.USER)}}}}}),T.register({"attributors/attribute/direction":$h,"attributors/class/align":Ih,"attributors/class/background":w_,"attributors/class/color":N_,"attributors/class/direction":Mh,"attributors/class/font":Ph,"attributors/class/size":jh,"attributors/style/align":Vh,"attributors/style/background":ua,"attributors/style/color":ha,"attributors/style/direction":Rh,"attributors/style/font":Fh,"attributors/style/size":Uh},!0),T.register({"formats/align":Ih,"formats/direction":Mh,"formats/indent":uN,"formats/background":ua,"formats/color":ha,"formats/font":Ph,"formats/size":jh,"formats/blockquote":_a,"formats/code-block":lt,"formats/header":Na,"formats/list":Ys,"formats/bold":Xs,"formats/code":fa,"formats/italic":wa,"formats/link":Ye,"formats/script":Ta,"formats/strike":ka,"formats/underline":Aa,"formats/formula":mr,"formats/image":Ca,"formats/video":pr,"modules/syntax":su,"modules/table":mN,"modules/toolbar":Oa,"themes/bubble":mu,"themes/snow":gu,"ui/icons":Js,"ui/picker":gr,"ui/icon-picker":du,"ui/color-picker":cu,"ui/tooltip":hu},!0);const Ae=(n,t)=>{const e=n.__vccOpts||n;for(const[s,r]of t)e[s]=r;return e},DN={props:["modelValue"],mounted(){this.initQuillEditor()},watch:{modelValue(n){n||(n=""),this.quill.root.innerHTML!=n&&(this.quill.root.innerHTML=n)}},methods:{initQuillEditor(){this.quill=new T(this.$refs.editor,{theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["link","image"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["clean"]]},formats:["bold","italic","underline","strike","link","image","list","indent","align"]}),this.modelValue?this.quill.root.innerHTML=this.modelValue:this.quill.root.innerHTML="",this.quill.on("text-change",()=>{this.$emit("update:modelValue",this.quill.root.innerHTML)})}}},$N={class:"ql-editor-container"},MN={class:"",ref:"editor"};function RN(n,t,e,s,r,o){return i.openBlock(),i.createElementBlock("div",$N,[i.createElementVNode("div",MN,null,512)])}const qN=Ae(DN,[["render",RN],["__scopeId","data-v-443c4edc"]]),Dt={image:{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif"},video:{mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",mpeg:"video/mpeg",mov:"video/quicktime"},document:{txt:"text/plain",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rtf:"application/rtf"}},PN={props:{modelValue:Array,field:Object,settings:Object},data:function(){return{files:[],editfile:null,count:0,bytes:0,wait:!1,uploadEvent:null}},created(){let n=Math.round(Math.random()*1e5);this.uploadId="image_upload_"+n,this.params=this.field.params},mounted(){this.editfile=this.modelValue,this.editfile||(this.editfile=[])},watch:{modelValue(n){if(n==null)this.reset();else{for(let t of n)this.setDefaults(t);this.files=n}}},methods:{roundFileSize(n,t){return n<1024?n+(t?" Byte":""):n<1048576?(n/1024).toFixed(0)+(t?'<span class="text-muted fw-light"> KB</span>':""):n<1073741824?(n/1048576).toFixed(2)+(t?'<span class="text-muted fw-light"> MB</span>':""):(n/1073741824).toFixed(2)+(t?'<span class="text-muted fw-light"> GB</span>':"")},extensionByFilename(n){return n.split(".").reverse()[0]},getAcceptMimeTypes(n){let t=[];for(const e in Dt)if(Dt.hasOwnProperty(e)){const s=Dt[e];n.forEach(r=>{s[r]&&t.push(s[r])})}return t.join(",")},setDefaults(n){this.params.tags&&!n.tags&&(n.tags=[])},detect(n){this.setDefaults(n),n.bytes=0,n.types={default:{}},n.title=n.name.split(".").slice(0,-1).join("."),n.uid=Math.round(Math.random()*9999999).toString(32)+Date.now().toString(32),n.slug=Vs(n.title),n.timestamp=Math.round(Date.now()/1e3),n.original={bytes:n.size,mime:n.type,name:n.name,modified:n.lastModified,extension:this.extensionByFilename(n.name)},Object.values(Dt.video).indexOf(n.original.mime)>=0?n.isVideo=!0:Object.values(Dt.image).indexOf(n.original.mime)>=0?n.isImage=!0:Object.values(Dt.document).indexOf(n.original.mime)>=0?n.isDocument=!0:n.isUnknown=!0,(n.isVideo||n.isImage&&!this.params.presets.default)&&(this.params.presets.default={width:1920,height:1920,extension:"webp",quality:.9})},async createThumbnail(n,t){const e=document.createElement("video"),s=new FileReader;s.onload=r=>{e.src=r.target.result,e.addEventListener("loadeddata",()=>{e.currentTime=e.duration*Math.random(),n.video=e}),e.addEventListener("seeked",()=>{this.forEachPresets(n,e),n.loaded=!0,this.bytes+=n.bytes})},s.readAsDataURL(n)},seekRandom(n){n.video&&(n.video.currentTime=n.video.duration*Math.random())},async handleFileChange(n){this.uploadEvent=n,this.count=this.files?this.files.length:0,this.wait=!0;for(let t of n.target.files)if(this.count++,this.count<=this.params.limit){if(this.files.push(t),this.detect(t),t.isVideo)await this.createThumbnail(t);else if(t.isImage)await this.resizeImage(t);else if(t.isDocument){const e=new FileReader;e.addEventListener("load",s=>{t.types.default={extension:t.original.extension,mime:t.original.mime,slug:Vs(t.title)+"-"+t.uid,bytes:t.size,data:s.target.result},t.loaded=!0,t.bytes+=t.size,this.bytes+=t.bytes}),e.readAsDataURL(t)}}this.$emit("update:modelValue",this.files),this.wait=!1,this.uploadEvent.target.value=""},async forEachPresets(n,t,e){const s=document.createElement("canvas"),r=s.getContext("2d");let o=!!t.videoWidth,a,c;o?(a=t.videoWidth,c=t.videoHeight):(a=t.width,c=t.height),n.original.width=a,n.original.height=c;for(let l in this.params.presets){let h=this.params.presets[l];h.key=l,h.width=h.width?h.width:1920,h.height=h.height?h.height:1080;let f=h.width,u=h.height;if(h.crop==="fit"){let p=Math.max(f/a,u/c),g=a*p,y=c*p,E=(g-f)/2,_=(y-u)/2;s.width=f,s.height=u,r.drawImage(t,-E,-_,g,y)}else if(h.crop==="contain"){let p=Math.min(f/a,u/c),g=a*p,y=c*p,E=(f-g)/2,_=(u-y)/2;s.width=f,s.height=u,r.clearRect(0,0,f,u),r.drawImage(t,E,_,g,y)}else a>f&&(c=Math.round(c*(f/a)),a=f),c>u&&(a=Math.round(a*(u/c)),c=u),s.width=a,s.height=c,r.drawImage(t,0,0,a,c);n.types[h.key]={width:s.width,height:s.height,extension:h.extension?h.extension:this.getExtensionByMimeType(n.type),quality:h.quality?h.quality:.9,crop:h.crop?h.crop:null},n.types[h.key].slug=Vs(n.title)+"-"+s.width+"x"+s.height+"-"+n.uid,n.types[h.key].mime=this.getMimeTypeByExtension(n.types[h.key].extension),n.types[h.key].data=s.toDataURL(n.types[h.key].mime,n.types[h.key].quality),n.types[h.key].blob=await this.getBlob(s,n.types[h.key].mime,n.types[h.key].quality),n.types[h.key].blob&&(n.types[h.key].bytes=n.types[h.key].blob.size),n.types[h.key].bytes&&(n.bytes+=n.types[h.key].bytes),e&&e(h,n)}},getBlob(n,t,e){return new Promise((s,r)=>{n.toBlob(function(o){o?s(o):r(new Error("Failed to convert canvas to Blob"))},t,e)})},async resizeImage(n){const t=await this.fileToBlob(n),e=await createImageBitmap(t);await this.forEachPresets(n,e),n.loaded=!0,this.bytes+=n.bytes},fileToBlob(n){return new Promise(t=>{const e=new FileReader;e.onload=s=>{t(new Blob([s.target.result],{type:n.mime}))},e.readAsArrayBuffer(n)})},slug(n){if(!n.uploaded){n.slug=Vs(n.title);for(let t in n.types){let e=this.params.presets[t];n.types[t].slug=Vs(n.title)+"-"+e.width+"x"+e.height}this.$forceUpdate()}},download(n,t){let e=this.files[n].types[t.download],s=document.createElement("a");s.href=e.url,s.download=e.slug+"."+e.extension,s.click()},remove(n){confirm("Are you sure you want to remove?")&&(this.bytes-=this.files[n].bytes,this.files.splice(n,1),this.count=this.files.length)},resetConfirm(){confirm("Are you sure you want to remove all?")&&this.reset()},reset(){this.files=[],this.editfile={},this.count=0,this.bytes=0,this.wait=!1,this.$emit("update:modelValue",this.files)},toggleView(){this.params.ui=this.params.ui=="list"?"grid":"list"},dateFormat(n){return new Date(n).toLocaleDateString("hu-HU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},getMimeTypeByExtension(n){for(const t in Dt)if(Dt.hasOwnProperty(t)){const e=Dt[t];if(e[n])return e[n]}return null},getExtensionByMimeType(n){for(const t in Dt)if(Dt.hasOwnProperty(t)){const e=Dt[t];for(const s in e)if(e[s]===n)return s}return null},translate(n,t,e){return Ds(n,this.settings.translate,t,e||this.settings.language)},dropdownSelectToggleOne(n,t){Zc(n,t),this.$forceUpdate()},dropdownSelectAll(n,t){Qc(n,t),this.$forceUpdate()},dropdownSelectInvert(n,t){Jc(n,t),this.$forceUpdate()},dropdownSelectClear(n){typeof n!="object"?n.value=null:td(n),this.$forceUpdate()}}},FN={class:""},jN={key:0,class:"vsa-image-editor p-2 text-center text-light"},UN={class:"row"},HN={class:"badge bg-dark text-light fw-light mx-1 text-uppercase"},zN={class:"badge bg-dark text-light fw-light mx-1"},WN={class:"badge bg-dark text-light fw-light mx-1"},KN=["src"],GN={class:"row g-1"},YN={class:"col-md-6"},XN={class:"col-md-6"},ZN={class:"col-md-6"},QN=["href"],JN={key:1,class:"row g-2 mb-1"},tw={key:0},ew={class:"table table-sm table-responsive table-borderless"},nw={class:"align-middle text-center ps-0"},sw={class:"align-middle px-0"},iw={class:"input-group border rounded"},rw={key:0,class:"fs-5 ms-2"},ow={key:1,class:"fs-5 ms-2"},aw={key:2,class:"fs-5 ms-2"},lw=["onUpdate:modelValue","onInput"],cw={key:3,class:"mx-1"},dw=["href"],hw=["src","alt"],uw=["src","alt"],fw={key:4,class:"dropdown rounded-bottom"},mw={class:"btn btn-sm bg-light text-dark w-100",type:"button","data-bs-auto-close":"outside","data-bs-toggle":"dropdown","aria-expanded":"false"},pw={class:"dropdown-menu"},gw=["onClick"],bw={key:0,class:"bi bi-check-square"},yw={key:1,class:"bi bi-square"},Ew={class:"dropdown"},_w={class:"dropdown-menu"},Nw=["onClick"],ww={key:0},Tw=["onClick"],kw={key:1},Aw={class:"dropdown-item py-0 d-flex justify-content-between"},Cw={key:2},Sw={class:"dropdown-item py-0 d-flex justify-content-between"},Ow=["innerHTML"],Lw={class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},Bw={key:0},vw={key:1},xw={class:"dropdown-item py-0 d-flex justify-content-between"},Iw={class:"text-muted fw-light me-4"},Vw={class:"text-primary"},Dw={key:0,class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},$w={class:"dropdown-item py-0 d-flex justify-content-between"},Mw={class:"text-muted fw-light me-1"},Rw={key:0,class:"text-primary"},qw=["innerHTML"],Pw={class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},Fw={key:3},jw={class:"dropdown-item py-0 d-flex justify-content-between"},Uw={class:"dropdown-item py-0 d-flex justify-content-between"},Hw={class:"text-muted fw-light me-3"},zw=["innerHTML"],Ww={class:"dropdown-item py-0 d-flex justify-content-between"},Kw={class:"text-muted fw-light me-3"},Gw={class:"vsa-image-container h-100 position-relative border p-1 rounded"},Yw={key:0,class:"w-100 h-100 d-flex align-items-center flex-column"},Xw={key:1,class:"vsa-image-frame mb-auto text-center"},Zw={key:0},Qw=["src","alt"],Jw=["src","alt"],tT={key:2,class:"display-3 w-100 h-100 text-center mb-auto d-flex align-items-center justify-content-center"},eT=["onUpdate:modelValue","onInput"],nT={class:"w-100 d-flex justify-content-around align-items-center"},sT={class:"dropdown rounded-bottom border w-100"},iT={class:"dropdown-menu"},rT=["onClick"],oT={key:0},aT=["onClick"],lT={key:1},cT={class:"dropdown-item py-0 d-flex justify-content-between"},dT={key:2},hT={class:"dropdown-item py-0 d-flex justify-content-between"},uT=["innerHTML"],fT={class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},mT={key:0},pT={key:1},gT={class:"dropdown-item py-0 d-flex justify-content-between"},bT={class:"text-muted fw-light me-4"},yT={class:"text-primary"},ET={key:0,class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},_T={class:"dropdown-item py-0 d-flex justify-content-between"},NT={class:"text-muted fw-light me-1"},wT={key:0,class:"text-primary"},TT=["innerHTML"],kT={class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},AT={key:3},CT={class:"dropdown-item py-0 d-flex justify-content-between"},ST={class:"dropdown-item py-0 d-flex justify-content-between"},OT={class:"text-muted fw-light me-3"},LT=["innerHTML"],BT={class:"dropdown-item py-0 d-flex justify-content-between"},vT={class:"text-muted fw-light me-3"},xT={key:0,class:"dropdown rounded-bottom border w-100"},IT={class:"btn btn-sm bg-light text-dark w-100",type:"button","data-bs-auto-close":"outside","data-bs-toggle":"dropdown","aria-expanded":"false"},VT={class:"dropdown-menu"},DT=["onClick"],$T={key:0,class:"bi bi-check-square"},MT={key:1,class:"bi bi-square"},RT=["onClick"],qT=["onClick"],PT=["onClick"],FT={key:1,class:"w-100 h-100 vsa-image-loading d-flex align-items-center justify-content-center"},jT={class:"row g-1"},UT={class:"col-12 d-flex align-items-center justify-content-center"},HT=["for"],zT={key:0},WT={key:0},KT={class:""},GT={class:""},YT={key:1,class:"fs-6"},XT={key:0,class:"bi bi-list-ol"},ZT={key:1,class:"bi bi-grid"},QT=["disabled"],JT={class:"col-12 text-center"},tk={key:0},ek=["id","accept"];function nk(n,t,e,s,r,o){return i.openBlock(),i.createElementBlock("div",FN,[i.createElementVNode("div",{class:i.normalizeClass(["vsa-upload",{wait:n.wait}])},[n.editfile&&n.editfile.presets?(i.openBlock(),i.createElementBlock("div",jN,[i.createElementVNode("div",UN,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.editfile.types,(a,c)=>(i.openBlock(),i.createElementBlock("div",{class:"col-md-3",key:c},[i.createElementVNode("span",HN,i.toDisplayString(a.extension),1),i.createElementVNode("span",zN,i.toDisplayString(a.width)+" x "+i.toDisplayString(a.height),1),i.createElementVNode("span",WN,"~"+i.toDisplayString(n.roundFileSize(a.bytes)),1),a?(i.openBlock(),i.createElementBlock("img",{key:0,class:"img-thumbnail rounded",src:a.url?a.url:a.data},null,8,KN)):i.createCommentVNode("",!0)]))),128))]),i.withDirectives(i.createElementVNode("input",{type:"text",class:"form-control form-control-sm w-100 mt-1","onUpdate:modelValue":t[0]||(t[0]=a=>n.editfile.title=a)},null,512),[[i.vModelText,n.editfile.title]]),i.createElementVNode("div",GN,[i.createElementVNode("div",YN,[i.createElementVNode("button",{type:"button",class:"btn btn-sm btn-outline-danger mt-1 w-100",onClick:t[1]||(t[1]=a=>n.editfile=null)}," Close ")]),i.createElementVNode("div",XN,[i.createElementVNode("button",{type:"button",class:"btn btn-sm btn-outline-danger mt-1 w-100",onClick:t[2]||(t[2]=a=>n.remove(n.index))}," Remove ")]),i.createElementVNode("div",ZN,[n.type&&!n.type.url?(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",class:"btn btn-sm btn-outline-light mt-1 w-100",onClick:t[3]||(t[3]=a=>n.download(n.index,n.params))}," Download ")):i.createCommentVNode("",!0),n.type&&n.type.url?(i.openBlock(),i.createElementBlock("a",{key:1,type:"button",class:"btn btn-sm btn-outline-light mt-1 w-100",href:n.type.url}," Download ",8,QN)):i.createCommentVNode("",!0)])])])):i.createCommentVNode("",!0),n.files&&n.files.length?(i.openBlock(),i.createElementBlock("div",JN,[n.params.ui==="list"?(i.openBlock(),i.createElementBlock("div",tw,[i.createElementVNode("table",ew,[i.createElementVNode("tbody",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.files,(a,c)=>(i.openBlock(),i.createElementBlock("tr",{key:c},[i.createElementVNode("td",nw,[i.createElementVNode("small",null,i.toDisplayString(c+1),1)]),i.createElementVNode("td",sw,[i.createElementVNode("div",iw,[a.isDocument?(i.openBlock(),i.createElementBlock("span",rw,[i.createElementVNode("i",{class:i.normalizeClass(["bi bi-filetype-"+a.types.default.extension])},null,2)])):a.isImage?(i.openBlock(),i.createElementBlock("span",ow,t[9]||(t[9]=[i.createElementVNode("i",{class:"bi bi-file-image"},null,-1)]))):a.isVideo?(i.openBlock(),i.createElementBlock("span",aw,t[10]||(t[10]=[i.createElementVNode("i",{class:"bi bi-file-play"},null,-1)]))):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{required:"text",class:"form-control py-1 px-2 border-0 fw-light","onUpdate:modelValue":l=>a.title=l,onInput:l=>n.slug(a),onKeydown:t[4]||(t[4]=i.withKeys(i.withModifiers(()=>{},["prevent"]),["enter"]))},null,40,lw),[[i.vModelText,a.title]]),!a.isDocument&&a.types&&a.types[n.params.thumbnail]?(i.openBlock(),i.createElementBlock("span",cw,[a.types[n.params.thumbnail].url?(i.openBlock(),i.createElementBlock("a",{key:0,target:"_blank",href:a.types[n.params.thumbnail].url},[i.createElementVNode("img",{height:"32",width:"auto",class:"rounded border",src:a.types[n.params.thumbnail].url,alt:a.name},null,8,hw)],8,dw)):(i.openBlock(),i.createElementBlock("img",{key:1,height:"32",width:"auto",class:"",src:a.types[n.params.thumbnail].data,alt:a.name},null,8,uw))])):i.createCommentVNode("",!0),n.params.tags?(i.openBlock(),i.createElementBlock("div",fw,[i.createElementVNode("button",mw,i.toDisplayString(a.tags?a.tags.length:0)+" tag(s) ",1),i.createElementVNode("ul",pw,[i.createElementVNode("li",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.params.tags,l=>(i.openBlock(),i.createElementBlock("span",{key:l,class:"dropdown-item cursor-pointer",onClick:h=>n.dropdownSelectToggleOne(a.tags,l.value)},[a.tags&&a.tags.indexOf(l.value)>=0?(i.openBlock(),i.createElementBlock("i",bw)):(i.openBlock(),i.createElementBlock("i",yw)),i.createTextVNode(" "+i.toDisplayString(n.translate(l.label?l.label:l.value)),1)],8,gw))),128))])])])):i.createCommentVNode("",!0),i.createElementVNode("div",Ew,[t[24]||(t[24]=i.createElementVNode("button",{class:"btn btn-sm bg-light text-dark dropdown-toggle h-100",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},null,-1)),i.createElementVNode("ul",_w,[i.createElementVNode("li",null,[i.createElementVNode("button",{class:"dropdown-item text-danger py-1",onClick:l=>n.remove(c),type:"button"},t[11]||(t[11]=[i.createElementVNode("i",{class:"bi bi-x-circle"},null,-1),i.createTextVNode(" Remove ")]),8,Nw)]),a.uploaded?(i.openBlock(),i.createElementBlock("li",ww,[i.createElementVNode("button",{class:"dropdown-item text-primary py-1",onClick:l=>n.download(c,n.params),type:"button"},t[12]||(t[12]=[i.createElementVNode("i",{class:"bi bi-download"},null,-1),i.createTextVNode(" Download ")]),8,Tw)])):i.createCommentVNode("",!0),t[22]||(t[22]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),a.original.width?(i.openBlock(),i.createElementBlock("li",kw,[i.createElementVNode("small",Aw,[t[13]||(t[13]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"original resolution",-1)),i.createTextVNode(" "+i.toDisplayString(a.original.width)+" x "+i.toDisplayString(a.original.height),1)])])):i.createCommentVNode("",!0),a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("li",Cw,[i.createElementVNode("small",Sw,[t[14]||(t[14]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"original size & extension",-1)),i.createElementVNode("span",null,[i.createElementVNode("span",{innerHTML:n.roundFileSize(a.original.bytes,!0)},null,8,Ow),i.createElementVNode("small",Lw,i.toDisplayString(a.original.extension),1)])])])),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(a.types,(l,h)=>(i.openBlock(),i.createElementBlock(i.Fragment,{key:l},[a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("li",Bw,t[15]||(t[15]=[i.createElementVNode("hr",{class:"dropdown-divider"},null,-1)]))),a.original.width?(i.openBlock(),i.createElementBlock("li",vw,[i.createElementVNode("small",xw,[i.createElementVNode("span",Iw,[i.createElementVNode("span",Vw,i.toDisplayString(h),1),t[16]||(t[16]=i.createTextVNode(" resolution & crop"))]),i.createElementVNode("span",null,[i.createTextVNode(i.toDisplayString(l.width)+" x "+i.toDisplayString(l.height)+" ",1),l.crop?(i.openBlock(),i.createElementBlock("small",Dw,i.toDisplayString(l.crop),1)):i.createCommentVNode("",!0)])])])):i.createCommentVNode("",!0),i.createElementVNode("li",null,[i.createElementVNode("small",$w,[i.createElementVNode("span",Mw,[a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("span",Rw,i.toDisplayString(h),1)),t[17]||(t[17]=i.createTextVNode(" size & extension"))]),i.createElementVNode("span",null,[i.createElementVNode("span",{class:i.normalizeClass({"text-danger":l.bytes>a.original.bytes}),innerHTML:n.roundFileSize(l.bytes,!0)},null,10,qw),i.createElementVNode("small",Pw,i.toDisplayString(l.extension),1)])])])],64))),128)),t[23]||(t[23]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),a.uploaded?(i.openBlock(),i.createElementBlock("li",Fw,[i.createElementVNode("small",jw,[t[18]||(t[18]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"uploaded at",-1)),t[19]||(t[19]=i.createTextVNode()),i.createElementVNode("span",null,i.toDisplayString(n.dateFormat(a.timestamp*1e3)),1)])])):i.createCommentVNode("",!0),i.createElementVNode("li",null,[i.createElementVNode("small",Uw,[i.createElementVNode("span",Hw,i.toDisplayString(a.uploaded?"uploaded":"uploading")+" bytes",1),t[20]||(t[20]=i.createTextVNode()),i.createElementVNode("span",{innerHTML:n.roundFileSize(a.bytes,!0)},null,8,zw)])]),i.createElementVNode("li",null,[i.createElementVNode("small",Ww,[i.createElementVNode("span",Kw,i.toDisplayString(a.uploaded?"uploaded":"uploading")+" filename",1),t[21]||(t[21]=i.createTextVNode()),i.createElementVNode("span",null,i.toDisplayString(a.slug),1)])])])])])])]))),128))])])])):(i.openBlock(!0),i.createElementBlock(i.Fragment,{key:1},i.renderList(n.files,(a,c)=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([n.params.colclass?n.params.colclass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3"]),key:c},[i.createElementVNode("div",Gw,[a.loaded?(i.openBlock(),i.createElementBlock("div",Yw,[i.createCommentVNode("",!0),a.types&&a.types[n.params.thumbnail]?(i.openBlock(),i.createElementBlock("div",Xw,[a.types[n.params.thumbnail].url?(i.openBlock(),i.createElementBlock("a",Zw,[i.createElementVNode("img",{class:"img-fluid rounded transparent-background",src:a.types[n.params.thumbnail].url,alt:a.name},null,8,Qw)])):(i.openBlock(),i.createElementBlock("img",{key:1,class:"img-fluid rounded transparent-background",src:a.types[n.params.thumbnail].data,alt:a.name},null,8,Jw))])):i.createCommentVNode("",!0),a.isDocument?(i.openBlock(),i.createElementBlock("div",tT,[i.createElementVNode("i",{class:i.normalizeClass(["bi bi-filetype-"+a.types.default.extension])},null,2)])):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{required:"text",class:"form-control rounded-0 rounded-top py-1 px-2 fw-light mt-1","onUpdate:modelValue":l=>a.title=l,onInput:l=>n.slug(a),onKeydown:t[5]||(t[5]=i.withKeys(i.withModifiers(()=>{},["prevent"]),["enter"]))},null,40,eT),[[i.vModelText,a.title]]),i.createElementVNode("div",nT,[i.createElementVNode("div",sT,[t[41]||(t[41]=i.createElementVNode("button",{class:"btn btn-sm bg-light text-dark dropdown-toggle w-100",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Menu ",-1)),i.createElementVNode("ul",iT,[i.createElementVNode("li",null,[i.createElementVNode("button",{class:"dropdown-item text-danger py-1",onClick:l=>n.remove(c),type:"button"},t[28]||(t[28]=[i.createElementVNode("i",{class:"bi bi-x-circle"},null,-1),i.createTextVNode(" Remove ")]),8,rT)]),a.uploaded?(i.openBlock(),i.createElementBlock("li",oT,[i.createElementVNode("button",{class:"dropdown-item text-primary py-1",onClick:l=>n.download(c,n.params),type:"button"},t[29]||(t[29]=[i.createElementVNode("i",{class:"bi bi-download"},null,-1),i.createTextVNode(" Download ")]),8,aT)])):i.createCommentVNode("",!0),t[39]||(t[39]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),a.original.width?(i.openBlock(),i.createElementBlock("li",lT,[i.createElementVNode("small",cT,[t[30]||(t[30]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"original resolution",-1)),i.createTextVNode(" "+i.toDisplayString(a.original.width)+" x "+i.toDisplayString(a.original.height),1)])])):i.createCommentVNode("",!0),a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("li",dT,[i.createElementVNode("small",hT,[t[31]||(t[31]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"original size & extension",-1)),i.createElementVNode("span",null,[i.createElementVNode("span",{innerHTML:n.roundFileSize(a.original.bytes,!0)},null,8,uT),i.createElementVNode("small",fT,i.toDisplayString(a.original.extension),1)])])])),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(a.types,(l,h)=>(i.openBlock(),i.createElementBlock(i.Fragment,{key:l},[a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("li",mT,t[32]||(t[32]=[i.createElementVNode("hr",{class:"dropdown-divider"},null,-1)]))),a.original.width?(i.openBlock(),i.createElementBlock("li",pT,[i.createElementVNode("small",gT,[i.createElementVNode("span",bT,[i.createElementVNode("span",yT,i.toDisplayString(h),1),t[33]||(t[33]=i.createTextVNode(" resolution & crop"))]),i.createElementVNode("span",null,[i.createTextVNode(i.toDisplayString(l.width)+" x "+i.toDisplayString(l.height)+" ",1),l.crop?(i.openBlock(),i.createElementBlock("small",ET,i.toDisplayString(l.crop),1)):i.createCommentVNode("",!0)])])])):i.createCommentVNode("",!0),i.createElementVNode("li",null,[i.createElementVNode("small",_T,[i.createElementVNode("span",NT,[a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("span",wT,i.toDisplayString(h),1)),t[34]||(t[34]=i.createTextVNode(" size & extension"))]),i.createElementVNode("span",null,[i.createElementVNode("span",{class:i.normalizeClass({"text-danger":l.bytes>a.original.bytes}),innerHTML:n.roundFileSize(l.bytes,!0)},null,10,TT),i.createElementVNode("small",kT,i.toDisplayString(l.extension),1)])])])],64))),128)),t[40]||(t[40]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),a.uploaded?(i.openBlock(),i.createElementBlock("li",AT,[i.createElementVNode("small",CT,[t[35]||(t[35]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"uploaded at",-1)),t[36]||(t[36]=i.createTextVNode()),i.createElementVNode("span",null,i.toDisplayString(n.dateFormat(a.timestamp*1e3)),1)])])):i.createCommentVNode("",!0),i.createElementVNode("li",null,[i.createElementVNode("small",ST,[i.createElementVNode("span",OT,i.toDisplayString(a.uploaded?"uploaded":"uploading")+" bytes",1),t[37]||(t[37]=i.createTextVNode()),i.createElementVNode("span",{innerHTML:n.roundFileSize(a.bytes,!0)},null,8,LT)])]),i.createElementVNode("li",null,[i.createElementVNode("small",BT,[i.createElementVNode("span",vT,i.toDisplayString(a.uploaded?"uploaded":"uploading")+" filename",1),t[38]||(t[38]=i.createTextVNode()),i.createElementVNode("span",null,i.toDisplayString(a.slug),1)])])])]),n.params.tags?(i.openBlock(),i.createElementBlock("div",xT,[i.createElementVNode("button",IT,i.toDisplayString(a.tags?a.tags.length:0)+" tag(s) ",1),i.createElementVNode("ul",VT,[i.createElementVNode("li",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.params.tags,l=>(i.openBlock(),i.createElementBlock("span",{key:l,class:"dropdown-item cursor-pointer",onClick:h=>n.dropdownSelectToggleOne(a.tags,l.value)},[a.tags&&a.tags.indexOf(l.value)>=0?(i.openBlock(),i.createElementBlock("i",$T)):(i.openBlock(),i.createElementBlock("i",MT)),i.createTextVNode(" "+i.toDisplayString(n.translate(l.label?l.label:l.value)),1)],8,DT))),128))]),t[42]||(t[42]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:l=>n.dropdownSelectAll(a.tags,n.params.tags)},i.toDisplayString(n.translate("Select all")),9,RT)]),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:l=>n.dropdownSelectClear(a.tags)},i.toDisplayString(n.translate("Unselect all")),9,qT)]),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:l=>n.dropdownSelectInvert(a.tags,n.params.tags)},i.toDisplayString(n.translate("Invert all")),9,PT)])])])):i.createCommentVNode("",!0)])])):(i.openBlock(),i.createElementBlock("div",FT,t[43]||(t[43]=[i.createElementVNode("span",null,null,-1)])))])],2))),128))])):i.createCommentVNode("",!0),i.createElementVNode("div",jT,[i.createElementVNode("div",UT,[i.createElementVNode("label",{for:n.uploadId,class:i.normalizeClass([{"disabled bg-secondary":n.files&&n.params.limit<=n.files.length},"btn btn-light border border-dark cursor-pointer w-100"])},[n.files&&n.params.limit>n.files.length?(i.openBlock(),i.createElementBlock("span",zT,[t[47]||(t[47]=i.createElementVNode("i",{class:"bi bi-upload me-2"},null,-1)),i.createTextVNode(" "+i.toDisplayString(n.params.text)+" ",1),n.params.limit?(i.openBlock(),i.createElementBlock("small",WT,[t[44]||(t[44]=i.createTextVNode(" ( ")),i.createElementVNode("strong",KT,i.toDisplayString(n.files.length),1),t[45]||(t[45]=i.createTextVNode(" / ")),i.createElementVNode("span",GT,i.toDisplayString(n.params.limit),1),t[46]||(t[46]=i.createTextVNode(" ) "))])):i.createCommentVNode("",!0)])):(i.openBlock(),i.createElementBlock("span",YT,t[48]||(t[48]=[i.createElementVNode("i",{class:"bi bi-exclamation-circle"},null,-1),i.createTextVNode(" You've reached the upload limit ")])))],10,HT),i.createElementVNode("button",{type:"button",class:"btn btn-outline-primary ms-1",onClick:t[6]||(t[6]=a=>n.toggleView())},[n.params.ui!="list"?(i.openBlock(),i.createElementBlock("i",XT)):i.createCommentVNode("",!0),n.params.ui=="list"?(i.openBlock(),i.createElementBlock("i",ZT)):i.createCommentVNode("",!0)]),i.createElementVNode("button",{disabled:!n.files.length,type:"button",class:"btn btn-outline-danger ms-1",onClick:t[7]||(t[7]=a=>n.resetConfirm())},t[49]||(t[49]=[i.createElementVNode("i",{class:"bi bi-trash"},null,-1)]),8,QT)]),i.createElementVNode("div",JT,[i.createElementVNode("small",null,[n.params.accept?(i.openBlock(),i.createElementBlock("div",tk,[t[50]||(t[50]=i.createElementVNode("span",{class:"text-secondary"},"accept only",-1)),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.params.accept,a=>(i.openBlock(),i.createElementBlock("strong",{class:"ms-1 text-muted",key:a},i.toDisplayString(a),1))),128))])):i.createCommentVNode("",!0),i.createCommentVNode("",!0)])])]),n.uploadId?(i.openBlock(),i.createElementBlock("input",{key:2,multiple:"",style:{opacity:"0",height:"1px",width:"1px"},id:n.uploadId,type:"file",accept:n.getAcceptMimeTypes(n.params.accept),onChange:t[8]||(t[8]=(...a)=>n.handleFileChange&&n.handleFileChange(...a))},null,40,ek)):i.createCommentVNode("",!0)],2)])}const sk=Ae(PN,[["render",nk],["__scopeId","data-v-5461024e"]]),ik={props:{modelValue:String|Object|Number,optionValue:String,field:Object,item:Object,settings:Object,formId:String},data:function(){return{newitem:null,options:[]}},created(){},mounted(){this.loadOptions(),this.setNewItem(this.modelValue)},watch:{modelValue(n){this.setNewItem(n)}},methods:{setNewItem(n){this.optionValue==="object"?this.newitem=n&&n.value:this.newitem=n},async loadOptions(){this.options=await this.selectOptions(this.field.options,this.field)},getValueOrFunction(n,t){return vs(n,t,this.settings,this)},async selectOptions(n,t){return typeof n=="function"?await n(this.item,t,this):n},handleChange(n){if(this.optionValue==="object"){const t=this.options.find(e=>e.value===this.newitem);t&&this.$emit("update:modelValue",t)}else this.$emit("update:modelValue",this.newitem)}},components:{}},rk=["name","id","disabled","readonly","required"],ok=["value"];function ak(n,t,e,s,r,o){return i.withDirectives((i.openBlock(),i.createElementBlock("select",{class:i.normalizeClass(["form-select",n.getValueOrFunction(n.field.inputclass?n.field.inputclass:"",{field:n.field,item:n.item})]),name:n.field.name,id:n.formId+"_"+n.field.name,onChange:t[0]||(t[0]=a=>n.handleChange(a)),"onUpdate:modelValue":t[1]||(t[1]=a=>n.newitem=a),disabled:n.field.disabled,readonly:n.field.readonly,required:n.field.required},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.options,a=>(i.openBlock(),i.createElementBlock("option",{class:i.normalizeClass(n.getValueOrFunction(n.field.optionclass?n.field.optionclass:"",{field:n.field,item:n.item,option:a})),key:a,value:a.value},i.toDisplayString(a.label?a.label:a.value),11,ok))),128))],42,rk)),[[i.vModelSelect,n.newitem]])}const bu=Ae(ik,[["render",ak]]),lk={props:{modelValue:Array,field:Object,item:Object,settings:Object,formId:String},data:function(){return{value:[]}},created(){},mounted(){},watch:{modelValue(n){this.value=n,(!this.value||typeof this.value!="object")&&(this.value=[])}},methods:{getValueOrFunction(n,t){return vs(n,t,this.settings,this)},selectOptions(n,t){return typeof n=="function"?n(this.item,t,this):n},arrayAddNewItem(n,t){let e={};for(let s in n.elements){let r=Object.assign({},n.elements[s]),o=r.value?r.value:null;if(o!=null)e[s]=o;else return}this.value.push(e),this.$emit("update:modelValue",this.value);for(let s in n.elements)n.elements[s].value=null},arrayRemoveItem(n,t){n.splice(t,1)},arrayItemMoveUp(n,t){ed(n,t)},arrayItemMoveDown(n,t){nd(n,t)}},components:{VuAdminFormSelect:bu}},ck={class:"row g-1 d-flex align-items-center justify-content-between mb-1"},dk={class:"col-10"},hk={class:"row g-1 d-flex align-items-center justify-content-between"},uk={class:"col-10"},fk={class:"row g-1 d-flex align-items-center justify-content-between"},mk=["innerHTML"],pk={key:1,class:"input-group input-group-sm"},gk=["type","required","placeholder","onUpdate:modelValue"],bk={class:"col-2 text-nowrap text-end"},yk=["onClick"],Ek=["onClick"],_k=["onClick"],Nk={key:0},wk={class:"row g-1 d-flex align-items-center justify-content-between"},Tk={class:"col-10"},kk={class:"row g-1 d-flex align-items-center justify-content-between"},Ak={class:"input-group input-group-sm"},Ck={key:0,class:"input-group-text"},Sk=["type","placeholder","onUpdate:modelValue"],Ok={key:3,class:"input-group-text"},Lk={class:"col-2"};function Bk(n,t,e,s,r,o){const a=i.resolveComponent("VuAdminFormSelect");return i.openBlock(),i.createElementBlock("div",null,[i.createElementVNode("div",ck,[i.createElementVNode("div",dk,[i.createElementVNode("div",hk,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.field.elements,c=>(i.openBlock(),i.createElementBlock("div",{key:c,class:i.normalizeClass(c.class||"col")},[i.createElementVNode("small",null,i.toDisplayString(c.placeholder?c.placeholder:c.prefix?c.prefix:""),1)],2))),128))])]),t[1]||(t[1]=i.createElementVNode("div",{class:"col-2 text-nowrap text-end"},null,-1))]),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.value,(c,l)=>(i.openBlock(),i.createElementBlock("div",{class:"row g-1 d-flex align-items-center justify-content-between mb-1",key:l},[i.createElementVNode("div",uk,[i.createElementVNode("div",fk,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(c,(h,f)=>(i.openBlock(),i.createElementBlock("div",{key:f,class:i.normalizeClass(n.field.elements[f].class||"col")},[n.field.elements[f].template?(i.openBlock(),i.createElementBlock("span",{key:0,innerHTML:n.getValueOrFunction(n.field.elements[f].template,n.value[l])},null,8,mk)):(i.openBlock(),i.createElementBlock("div",pk,[n.field.elements[f].type=="select"&&n.value[l][f]?(i.openBlock(),i.createBlock(a,{key:0,modelValue:n.value[l][f],"onUpdate:modelValue":u=>n.value[l][f]=u,field:n.field.elements[f],item:n.item,settings:n.settings,formId:n.formId,optionValue:"object"},null,8,["modelValue","onUpdate:modelValue","field","item","settings","formId"])):i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:1,type:n.field.elements[f].type,required:n.field.elements[f].required,placeholder:n.field.elements[f].placeholder||f,class:"form-control","onUpdate:modelValue":u=>n.value[l][f]=u},null,8,gk)),[[i.vModelDynamic,n.value[l][f]]])]))],2))),128))])]),i.createElementVNode("div",bk,[n.field.sortable?(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",class:"btn btn-sm btn-outline-secondary p-1 me-1",onClick:h=>n.arrayItemMoveUp(n.value,l)},t[2]||(t[2]=[i.createElementVNode("i",{class:"bi bi-arrow-up"},null,-1)]),8,yk)):i.createCommentVNode("",!0),n.field.sortable?(i.openBlock(),i.createElementBlock("button",{key:1,type:"button",class:"btn btn-sm btn-outline-secondary p-1 me-1",onClick:h=>n.arrayItemMoveDown(n.value,l+1)},t[3]||(t[3]=[i.createElementVNode("i",{class:"bi bi-arrow-down"},null,-1)]),8,Ek)):i.createCommentVNode("",!0),i.createElementVNode("button",{type:"button",class:"btn btn-sm btn-outline-danger p-1 me-1",onClick:h=>n.arrayRemoveItem(n.value,l)},t[4]||(t[4]=[i.createElementVNode("i",{class:"bi bi-trash"},null,-1)]),8,_k)])]))),128)),n.item[n.field.name]&&n.item[n.field.name].length?(i.openBlock(),i.createElementBlock("hr",Nk)):i.createCommentVNode("",!0),i.createElementVNode("div",wk,[i.createElementVNode("div",Tk,[i.createElementVNode("div",kk,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.field.elements,c=>(i.openBlock(),i.createElementBlock("div",{key:c,class:i.normalizeClass(c.class||"col")},[i.createElementVNode("div",Ak,[c.prefix?(i.openBlock(),i.createElementBlock("span",Ck,i.toDisplayString(c.prefix),1)):i.createCommentVNode("",!0),c.type=="select"&&(!c.relation||c.relation&&c.relation.items)?(i.openBlock(),i.createBlock(a,{key:1,modelValue:c.value,"onUpdate:modelValue":l=>c.value=l,field:c,item:n.item,settings:n.settings,formId:n.formId,optionValue:"object"},null,8,["modelValue","onUpdate:modelValue","field","item","settings","formId"])):i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:2,type:c.type,placeholder:c.placeholder||c.name,class:"form-control form-control-sm","onUpdate:modelValue":l=>c.value=l},null,8,Sk)),[[i.vModelDynamic,c.value]]),c.suffix?(i.openBlock(),i.createElementBlock("span",Ok,i.toDisplayString(c.suffix),1)):i.createCommentVNode("",!0)]),i.createCommentVNode("",!0)],2))),128))])]),i.createElementVNode("div",Lk,[i.createElementVNode("button",{type:"button",class:"btn btn-sm btn-outline-primary my-1 w-100",onClick:t[0]||(t[0]=c=>n.arrayAddNewItem(n.field,n.item))},t[5]||(t[5]=[i.createElementVNode("i",{class:"bi bi-plus"},null,-1)]))])])])}const vk={props:{modelValue:Object,group:Object,formId:String,settings:Object},data:function(){return{item:{}}},created(){},mounted(){this.item=this.modelValue},watch:{modelValue(n){this.item=this.modelValue}},methods:{getValueOrFunction(n,t){return vs(n,t,this.settings,this)},translate(n,t,e){return Ds(n,this.settings.translate,t,e||this.settings.language)},selectOptions(n,t){return typeof n=="function"?n(this.item,t,this):n},renderOptions(n,t,e){let s=[];if(!n||!n.length)return[];for(let r of n)s.push({value:r[t],label:r[e]?r[e]:r[t]});return s},arrayAddNewItem(n,t){(!t[n.name]||typeof t[n.name]!="object")&&(t[n.name]=[]);let e={};for(let s in n.elements){let r=n.elements[s];e[s]=r.value,r.value=void 0}t[n.name].push(e)},arrayRemoveItem(n,t){n.splice(t,1)},arrayItemMoveUp(n,t){ed(n,t)},arrayItemMoveDown(n,t){nd(n,t)},insertAddress(n){this.item[n]||(this.item[n]=[]),this.item[n].push({country:void 0,zipcode:void 0,city:void 0,street_name:void 0,street_type:void 0,house_number:void 0})}},components:{HtmlEditor:qN,FileUpload:sk,VuAdminFormSelect:bu,VuAdminFormList:Ae(lk,[["render",Bk]])}},xk={class:"row m-1"},Ik=["innerHTML"],Vk={key:1,class:"row"},Dk={class:"form-group pb-3"},$k={key:0},Mk={key:0,class:"badge text-secondary fw-light"},Rk=["for","innerHTML"],qk={key:1,class:"input-group"},Pk=["innerHTML"],Fk=["name","id","onUpdate:modelValue","minlength","maxlength","placeholder","disabled","readonly","required"],jk=["name","id","onUpdate:modelValue","min","max","step","placeholder","disabled","readonly","required"],Uk=["type","name","id","onUpdate:modelValue","min","max","disabled","readonly","required"],Hk={key:4,class:"form-check"},zk=["name","id","true-value","false-value","onUpdate:modelValue","disabled","readonly","required"],Wk=["for"],Kk=["name","id","onUpdate:modelValue","minlength","maxlength","placeholder","readonly","disabled","required"],Gk=["name","id","onUpdate:modelValue","rows","minlength","maxlength","placeholder","disabled","readonly","required"],Yk=["innerHTML"],Xk={key:5},Zk={key:0},Qk=["for"],Jk=["name","id","onUpdate:modelValue"],tA=["onClick"],eA=["innerHTML"],nA={key:7,class:"p-1"},sA=["innerHTML"];function iA(n,t,e,s,r,o){const a=i.resolveComponent("VuAdminFormSelect"),c=i.resolveComponent("HtmlEditor"),l=i.resolveComponent("FileUpload"),h=i.resolveComponent("VuAdminFormList");return i.openBlock(),i.createElementBlock("div",xk,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.settings.form.groups,f=>(i.openBlock(),i.createElementBlock("div",{key:f,class:i.normalizeClass([f.class?f.class:"col-md-12"])},[f.title?(i.openBlock(),i.createElementBlock("h2",{key:0,class:"form-row-title mb-4 fw-lighter",innerHTML:f.title?f.title:""},null,8,Ik)):i.createCommentVNode("",!0),n.item&&f.fields?(i.openBlock(),i.createElementBlock("div",Vk,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(f.fields,u=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([n.getValueOrFunction(u.class?u.class:"col-md-12"),"input_type_"+u.type]),key:u},[i.createElementVNode("div",Dk,[u.label?(i.openBlock(),i.createElementBlock("span",$k,[["html","image","upload"].indexOf(u.type)>=0?(i.openBlock(),i.createElementBlock("label",{key:0,class:i.normalizeClass([{required:u.required},"form-label text-secondary mb-1"])},[i.createTextVNode(i.toDisplayString(u.label?u.label:n.translate(u.name))+" ",1),u.maxlength?(i.openBlock(),i.createElementBlock("span",Mk,i.toDisplayString(n.item[u.name]?n.item[u.name].length:0)+" / "+i.toDisplayString(u.maxlength),1)):i.createCommentVNode("",!0)],2)):(i.openBlock(),i.createElementBlock("label",{key:1,class:i.normalizeClass([{required:u.required},"form-label text-secondary mb-1"]),for:n.formId+"_"+u.name,innerHTML:n.getValueOrFunction(u.label?u.label:n.translate(u.name),{field:u,item:n.item})},null,10,Rk))])):i.createCommentVNode("",!0),["html","image","list","addresses","template"].indexOf(u.type)<0?(i.openBlock(),i.createElementBlock("div",qk,[u.prefix?(i.openBlock(),i.createElementBlock("span",{key:0,class:"input-group-text",innerHTML:n.getValueOrFunction(u.prefix,{field:u,item:n.item})},null,8,Pk)):i.createCommentVNode("",!0),u.type=="text"?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:1,class:i.normalizeClass(["form-control",n.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:n.item})]),type:"text",name:u.name,id:n.formId+"_"+u.name,"onUpdate:modelValue":p=>n.item[u.name]=p,minlength:u.minlength,maxlength:u.maxlength,placeholder:u.placeholder?u.placeholder:"",disabled:u.disabled,readonly:u.readonly,required:u.required},null,10,Fk)),[[i.vModelText,n.item[u.name]]]):i.createCommentVNode("",!0),u.type=="number"?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:2,class:i.normalizeClass(["form-control",n.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:n.item})]),type:"number",name:u.name,id:n.formId+"_"+u.name,"onUpdate:modelValue":p=>n.item[u.name]=p,min:u.min,max:u.max,step:u.step,placeholder:u.placeholder?u.placeholder:"",disabled:u.disabled,readonly:u.readonly,required:u.required},null,10,jk)),[[i.vModelText,n.item[u.name]]]):i.createCommentVNode("",!0),["date","datetime","datetime-local"].indexOf(u.type)>=0?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:3,class:i.normalizeClass(["form-control",n.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:n.item})]),type:u.type,name:u.name,id:n.formId+"_"+u.name,"onUpdate:modelValue":p=>n.item[u.name]=p,min:u.min,max:u.max,disabled:u.disabled,readonly:u.readonly,required:u.required},null,10,Uk)),[[i.vModelDynamic,n.item[u.name]]]):i.createCommentVNode("",!0),u.type=="checkbox"?(i.openBlock(),i.createElementBlock("div",Hk,[i.withDirectives(i.createElementVNode("input",{class:i.normalizeClass(["form-check-input",n.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:n.item})]),type:"checkbox",name:u.name,id:n.formId+"_"+u.name,"true-value":u.true!=null?u.true:!0,"false-value":u.false!=null?u.false:!1,"onUpdate:modelValue":p=>n.item[u.name]=p,disabled:u.disabled,readonly:u.readonly,required:u.required},null,10,zk),[[i.vModelCheckbox,n.item[u.name]]]),i.createElementVNode("label",{class:"form-check-label cursor-pointer",for:n.formId+"_"+u.name},i.toDisplayString(u.checkbox),9,Wk)])):i.createCommentVNode("",!0),u.type=="email"?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:5,autocomplete:"on",class:i.normalizeClass(["form-control",n.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:n.item})]),type:"email",name:u.name,id:n.formId+"_"+u.name,"onUpdate:modelValue":p=>n.item[u.name]=p,minlength:u.minlength,maxlength:u.maxlength,placeholder:u.placeholder?u.placeholder:"",readonly:u.readonly,disabled:u.disabled,required:u.required},null,10,Kk)),[[i.vModelText,n.item[u.name]]]):i.createCommentVNode("",!0),u.type=="select"&&(!u.relation||u.relation&&u.relation.items)?(i.openBlock(),i.createBlock(a,{key:6,modelValue:n.item[u.name],"onUpdate:modelValue":p=>n.item[u.name]=p,field:u,item:n.item,settings:n.settings,formId:n.formId},null,8,["modelValue","onUpdate:modelValue","field","item","settings","formId"])):i.createCommentVNode("",!0),u.type=="textarea"?i.withDirectives((i.openBlock(),i.createElementBlock("textarea",{key:7,class:i.normalizeClass(["form-control",n.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:n.item})]),name:u.name,id:n.formId+"_"+u.name,"onUpdate:modelValue":p=>n.item[u.name]=p,rows:u.rows,minlength:u.minlength,maxlength:u.maxlength,placeholder:u.placeholder?u.placeholder:"",disabled:u.disabled,readonly:u.readonly,required:u.required},"              ",10,Gk)),[[i.vModelText,n.item[u.name]]]):i.createCommentVNode("",!0),u.suffix?(i.openBlock(),i.createElementBlock("span",{key:8,class:"input-group-text",innerHTML:n.getValueOrFunction(u.suffix,{field:u,item:n.item})},null,8,Yk)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),u.type=="html"?(i.openBlock(),i.createBlock(c,{key:2,modelValue:n.item[u.name],"onUpdate:modelValue":p=>n.item[u.name]=p,class:i.normalizeClass([u.class])},null,8,["modelValue","onUpdate:modelValue","class"])):i.createCommentVNode("",!0),u.type=="image"||u.type=="upload"?(i.openBlock(),i.createBlock(l,{key:3,modelValue:n.item[u.name],"onUpdate:modelValue":p=>n.item[u.name]=p,class:i.normalizeClass([u.class]),field:u,settings:n.settings},null,8,["modelValue","onUpdate:modelValue","class","field","settings"])):i.createCommentVNode("",!0),u.type=="list"&&(!u.relation||u.relation&&u.relation.items)?(i.openBlock(),i.createBlock(h,{key:4,modelValue:n.item[u.name],"onUpdate:modelValue":p=>n.item[u.name]=p,field:u,item:n.item,settings:n.settings,formId:n.formId},null,8,["modelValue","onUpdate:modelValue","field","item","settings","formId"])):i.createCommentVNode("",!0),u.type=="addresses"?(i.openBlock(),i.createElementBlock("span",Xk,[n.item[u.name]?(i.openBlock(),i.createElementBlock("div",Zk,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.item[u.name],p=>(i.openBlock(),i.createElementBlock("div",{key:p},[i.createTextVNode(i.toDisplayString(p)+" ",1),i.createElementVNode("label",{class:"form-label text-secondary mb-1",for:n.formId+"_"+u.name},i.toDisplayString(u.label),9,Qk),i.withDirectives(i.createElementVNode("input",{class:"form-control",type:"text",name:u.name,id:n.formId+"_"+u.name,"onUpdate:modelValue":g=>p.country=g},null,8,Jk),[[i.vModelText,p.country]])]))),128))])):i.createCommentVNode("",!0),i.createElementVNode("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:p=>n.insertAddress(u.name)}," Add ",8,tA)])):i.createCommentVNode("",!0),u.type=="template"?(i.openBlock(),i.createElementBlock("div",{key:6,innerHTML:n.getValueOrFunction(u.template,{field:u,item:n.item})},null,8,eA)):i.createCommentVNode("",!0),u.description?(i.openBlock(),i.createElementBlock("div",nA,[i.createElementVNode("small",null,[i.createElementVNode("i",{class:"text-muted",innerHTML:n.getValueOrFunction(u.description,{field:u,item:n.item})},null,8,sA)])])):i.createCommentVNode("",!0)])],2))),128))])):i.createCommentVNode("",!0)],2))),128))])}const rA={props:{modelValue:Object,modalWindow:Object,saveItem:Function,reloadTable:Function,fetchRelation:Function,group:Object,formId:String,settings:Object},data:function(){return{item:{},loaded:!1,ui:{wait:{table:!1,form:!1},block:{table:!1,form:!1}},messages:{table:[],form:[]},message:{table:null,form:null},messageTimeOut:null}},created(){},mounted(){this.item=this.modelValue;let n=this.item[this.settings.pkey];this.fetchItem(n,this.settings)},watch:{modelValue(n){this.item=this.modelValue}},methods:{translate(n,t,e){return Ds(n,this.settings.translate,t,e||this.settings.language)},getValueOrFunction(n,t){return vs(n,t,this.settings,this)},formWait(n){this.ui.wait.form=!0,this.ui.block.form=n},formNoWait(){this.ui.wait.form=!1,this.ui.block.form=!1},addFormMessage(n,t,e,s){this.addMessage("form",n,t,e,s)},addMessage(n,t,e,s,r){clearTimeout(this.messageTimeout);const o=Date.now()+Math.random().toString(36).substring(2,9);this.message[n]={uid:o,msg:t,timeout:e!==void 0?e:2500,datetime:new Date().toLocaleString("hu-HU"),priority:s||"secondary",details:r},this.messages[n].unshift(this.message[n]),clearTimeout(this.messageTimeOut),this.messageTimeOut=setTimeout(()=>{this.message[n]=null,this.messages[n].length>10&&this.messages[n].splice(10)},this.message[n].timeout)},createItem(){this.item=this.settings.form.default?this.settings.form.default:{},setTimeout(()=>{this.itemOriginal=Object.assign({},this.item)},100)},copyItem(){this.item[this.settings.pkey]=void 0,setTimeout(()=>{this.itemOriginal=Object.assign({},this.item)},100)},reloadItem(){let n=this.item[this.settings.pkey];this.fetchItem(n)},async fetchItem(n,t){try{if(t=t||this.settings,!t.form||!t.form.api)return!1;this.formWait(!0);const e=await fetch(je("GET",t.form.api,n),Fe("GET",t.api)).catch(a=>{}),s=await xs(e);if(Is(e,s.data,"form")||!s.data)return this.formNoWait(),!1;t.form.default&&(s.data=Object.assign({},t.form.default,s.data)),t.events&&t.events.afterItemLoad&&t.events.afterItemLoad(s.data,e);let o;t.form.api.input.item?o=typeof t.form.api.input.item=="string"?s.data[t.form.api.input.item]:t.form.api.input.item(s.data,e):o=s.data;for(let a of t.form.groups)for(let c of a.fields)c.relation&&t.relations[c.relation.config]&&(c.relation=Ui(t.relations[c.relation.config],c.relation),await this.fetchRelation(c,[o]));this.item=Hi(o),this.itemOriginal=Object.assign({},o),this.loaded=!0,this.formNoWait()}catch(e){console.error(e),this.formNoWait()}},async submit(){let n=this.$refs.form;n.checkValidity()?this.submitItem():n.reportValidity()},async submitAndClose(){let n=this.$refs.form;n.checkValidity()?this.submitItem(!0):n.reportValidity()},async submitItem(n){this.saveItem(this.item,t=>{let e={};this.settings.form.api.input.item?e=typeof this.settings.form.api.input.item=="string"?t[this.settings.form.api.input.item]:this.settings.form.api.input.item(t,response):e=t,e&&(this.addFormMessage(this.translate("Saved")+` <small>( ${this.settings.pkey}:  ${e[this.settings.pkey]} )</small>`,2500),this.item=Hi(e),this.itemOriginal=Object.assign({},e)),n===!0&&this.modalWindow.hide(),this.reloadTable()},t=>{console.log(t),this.addFormMessage(t.message,14500,"danger")})},async deleteItem(n,t){try{n||(n=this.item);let e=n[this.settings.pkey];if(!e||!confirm("Are you sure you want to delete this item?"))return;this.formWait(!0),this.settings.events&&this.settings.events.beforeItemDelete&&this.settings.events.beforeItemDelete(n);const r=await fetch(je("DELETE",this.settings.form.api,e,t),Fe("DELETE",this.settings.api));if(r.status!==200)throw new Error(this.translate("Response status: "+r.status));this.item&&(this.item={},this.modalWindow.hide());const o=await r.json();this.settings.events&&this.settings.events.afterItemDelete&&this.settings.events.afterItemDelete(o,r),this.reloadTable(),this.formNoWait()}catch(e){console.error(e.message),this.formNoWait()}},formAction(n,t){t.$event&&t.$event.stopPropagation();let e=n.action?n.action:n.click?n.click:null;if(e&&typeof e!="string"){e(t.item,t,this);return}switch(e){case"FORM_RELOAD":if(!this.item[this.settings.pkey])return;this.reloadItem();break;case"FORM_NEW":this.createItem();break;case"FORM_COPY":this.copyItem();break;case"FORM_DELETE":if(!this.item[this.settings.pkey])return;this.deleteItem();break;case"FORM_CLOSE":this.modalWindow.hide();break;case"FORM_SAVE":this.submit();break;case"FORM_SAVE_AND_CLOSE":this.submitAndClose();break}}},components:{VuAdminFormGroup:Ae(vk,[["render",iA],["__scopeId","data-v-1803ff01"]])}},oA=["id","data-bs-theme"],aA={class:"modal-header"},lA={key:0,class:"modal-title"},cA=["innerHTML"],dA={key:1},hA={key:2},uA={key:3,class:"rounded border ms-2 px-2 py-0 fs-6"},fA={key:1,class:"d-inline-block ms-3 mt-1"},mA=["innerHTML"],pA={class:"spinner-border spinner-border-sm mx-2",role:"status"},gA={key:0,class:"modal-header bg-body sticky-top"},bA={key:0,class:"d-inline-block m-1"},yA={class:"dropdown d-inline-block"},EA=["innerHTML"],_A={class:"dropdown-menu text-start"},NA={class:"me-2 text-muted"},wA=["innerHTML"],TA=["disabled","onClick"],kA={key:1,class:"dropdown d-inline-block"},AA={class:"mx-1"},CA={class:"dropdown-menu px-2"},SA=["onClick"],OA={key:1,class:"modal-body custom-scroll"},LA={key:2,class:"modal-footer d-flex justify-content-between"},BA={key:3,class:"bg-light text-dark"};function vA(n,t,e,s,r,o){const a=i.resolveComponent("VuAdminFormGroup");return n.item?(i.openBlock(),i.createElementBlock("form",{key:0,ref:"form",id:n.formId,class:i.normalizeClass(["form",[n.settings.form.class,{wait:n.ui.wait.form}]]),onSubmit:t[1]||(t[1]=i.withModifiers((...c)=>n.submitItem&&n.submitItem(...c),["prevent"])),"data-bs-theme":[n.settings.theme]},[i.createElementVNode("div",{class:i.normalizeClass(["vua-overlay",{blocked:n.ui.block.form}])},null,2),i.createElementVNode("div",aA,[n.loaded?(i.openBlock(),i.createElementBlock("h5",lA,[n.settings.form.title&&typeof n.settings.form.title=="function"?(i.openBlock(),i.createElementBlock("span",{key:0,innerHTML:n.settings.form.title(n.item,n.settings)},null,8,cA)):i.createCommentVNode("",!0),n.settings.form.title&&typeof n.settings.form.title=="string"?(i.openBlock(),i.createElementBlock("span",dA,i.toDisplayString(n.translate(n.settings.form.title)),1)):i.createCommentVNode("",!0),n.settings.form.title?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("span",hA,i.toDisplayString(n.translate("Edit")),1)),n.item[n.settings.pkey]?(i.openBlock(),i.createElementBlock("small",uA,[t[2]||(t[2]=i.createElementVNode("span",{class:"text-muted fw-light"},"id",-1)),i.createTextVNode(" "+i.toDisplayString(n.item[n.settings.pkey]),1)])):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),n.message.form?(i.openBlock(),i.createElementBlock("span",fA,[i.createElementVNode("span",{class:i.normalizeClass(["text-"+n.message.form.priority])},[t[3]||(t[3]=i.createElementVNode("i",{class:"bi bi-envelope-fill me-2"},null,-1)),i.createElementVNode("span",{innerHTML:n.message.form.msg},null,8,mA)],2)])):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("span",pA,t[4]||(t[4]=[i.createElementVNode("span",{class:"visually-hidden"},"Loading...",-1)]),512),[[i.vShow,n.ui.wait.form]]),t[5]||(t[5]=i.createElementVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),n.item?(i.openBlock(),i.createElementBlock("div",gA,[n.settings.form.control?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(["w-100",n.settings.form.control.class==null?"d-flex justify-content-center":n.settings.form.control.class])},[n.messages.form.length?(i.openBlock(),i.createElementBlock("span",bA,[i.createElementVNode("div",yA,[i.createElementVNode("button",{class:i.normalizeClass(["btn btn-sm dropdown-toggle",["btn-"+n.messages.form[0].priority]]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",innerHTML:n.messages.form.length+" "+(n.messages.form.length>1?n.translate("messages"):n.translate("message"))},null,10,EA),i.createElementVNode("ul",_A,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.messages.form,c=>(i.openBlock(),i.createElementBlock("li",{key:c},[i.createElementVNode("span",{class:i.normalizeClass(["dropdown-item disabled",["text-"+c.priority]])},[i.createElementVNode("small",NA,i.toDisplayString(c.datetime),1),i.createElementVNode("span",{innerHTML:c.msg},null,8,wA)],2)]))),128))])])])):i.createCommentVNode("",!0),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.settings.form.control.buttons,c=>(i.openBlock(),i.createElementBlock("span",{key:c.action},[c.dropdowns?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",disabled:c.disabled!==void 0?n.getValueOrFunction(c.disabled,{button:c,item:n.item,form:this}):!1,class:i.normalizeClass([c.class?c.class:n.getButtonClassByAction(c.action)]),onClick:l=>n.formAction(c,{button:c,item:n.item,form:this,$event:l})},[i.createElementVNode("i",{class:i.normalizeClass([c.icon!==void 0?n.getValueOrFunction(c.icon,{button:c,item:n.item,form:this}):n.getButtonIconClassByAction(c.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(n.translate(c.title)),1)],10,TA)),c.dropdowns?(i.openBlock(),i.createElementBlock("div",kA,[i.createElementVNode("button",{type:"button",class:i.normalizeClass([[c.class],"dropdown-toggle"]),"data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false"},[i.createElementVNode("span",AA,[i.createElementVNode("i",{class:i.normalizeClass([c.icon!==void 0?n.getValueOrFunction(c.icon,{button:c,table:this}):n.getButtonIconClassByAction(c.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(n.translate(c.title)),1)])],2),i.createElementVNode("ul",CA,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(c.dropdowns,l=>(i.openBlock(),i.createElementBlock("li",{key:l},[i.createElementVNode("span",{class:i.normalizeClass([l.class?l.class:""]),onClick:h=>n.formAction(l,{button:c,item:n.item,form:this,$event:h})},[l.icon?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass([l.icon])},null,2)):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(n.translate(l.title)),1)],10,SA)]))),128))])])):i.createCommentVNode("",!0)]))),128))],2)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),n.settings.form?(i.openBlock(),i.createElementBlock("div",OA,[n.settings.form.visible&&n.settings.form.groups?(i.openBlock(),i.createBlock(a,{key:0,modelValue:n.item,"onUpdate:modelValue":t[0]||(t[0]=c=>n.item=c),formid:n.formId,settings:n.settings},null,8,["modelValue","formid","settings"])):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),n.item?(i.openBlock(),i.createElementBlock("div",LA)):i.createCommentVNode("",!0),n.settings.debug>1?(i.openBlock(),i.createElementBlock("pre",BA,"        "+i.toDisplayString(n.item)+`
    `,1)):i.createCommentVNode("",!0)],42,oA)):i.createCommentVNode("",!0)}const xA=Ae(rA,[["render",vA],["__scopeId","data-v-4016e47a"]]),IA={name:"VuAdminTablePagination",emits:["setPage","setPageLimit","translate"],props:{config:Object,settings:Object,ui:Object},methods:{setPage(n){this.$emit("setPage",n)},setPageLimit(n){this.$emit("setPageLimit",n)},translate(n,t,e){return Ds(n,this.settings.translate,t,e||this.settings.language)},firstDisabled(){return this.config.pagination.page<=1},prevDisabled(){return this.config.pagination.page<=1},nextDisabled(){return this.config.pagination.pages?this.config.pagination.page+1>this.config.pagination.pages:this.config.pagination.items<this.config.pagination.limit},lastDisabled(){return this.config.pagination.page==this.config.pagination.pages}},components:{}},VA={key:0,"aria-label":"Page navigation",class:"mt-2 d-flex align-items-center justify-content-between"},DA={class:"dropdown d-inline-block m-1"},$A={class:"mx-1"},MA={key:0},RA={key:0,class:"dropdown-menu text-end"},qA=["onClick"],PA={class:"ms-2"},FA={key:0,class:"bi bi-check-circle-fill ms-2"},jA={key:1,class:"bi bi-circle ms-2"},UA={class:"spinner-border spinner-border-sm mx-2",role:"status"},HA={class:"pagination pagination-sm m-1"},zA={class:"page-item"},WA=["innerHTML"],KA={class:"page-item"},GA=["innerHTML"],YA=["onClick"],XA={class:"page-item"},ZA=["innerHTML"],QA={key:0,class:"page-item"},JA=["innerHTML"];function tC(n,t,e,s,r,o){return e.config.pagination.hidden?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("nav",VA,[i.createElementVNode("div",null,[i.createElementVNode("div",DA,[i.createElementVNode("button",{type:"button",class:i.normalizeClass(["btn btn-sm btn-secondary",{"dropdown-toggle":e.config.pagination.limits}]),"data-bs-toggle":"dropdown","aria-expanded":"false"},[i.withDirectives(i.createElementVNode("span",$A,[i.createElementVNode("strong",null,i.toDisplayString(e.config.pagination.from)+"-"+i.toDisplayString(e.config.pagination.to),1),e.config.pagination.total?(i.openBlock(),i.createElementBlock("span",MA," / "+i.toDisplayString(e.config.pagination.total),1)):i.createCommentVNode("",!0)],512),[[i.vShow,e.config.pagination.from>0]])],2),e.config.pagination.limits?(i.openBlock(),i.createElementBlock("ul",RA,[i.createElementVNode("li",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(e.config.pagination.limits,a=>(i.openBlock(),i.createElementBlock("span",{class:i.normalizeClass(["dropdown-item cursor-pointer",{selected:e.config.pagination.limit==a}]),key:a,onClick:c=>o.setPageLimit(a)},[i.createElementVNode("strong",null,i.toDisplayString(a),1),i.createElementVNode("small",PA,i.toDisplayString(o.translate("row"))+"/"+i.toDisplayString(o.translate("page")),1),e.config.pagination.limit==a?(i.openBlock(),i.createElementBlock("i",FA)):i.createCommentVNode("",!0),e.config.pagination.limit!=a?(i.openBlock(),i.createElementBlock("i",jA)):i.createCommentVNode("",!0)],10,qA))),128))])])):i.createCommentVNode("",!0)]),i.withDirectives(i.createElementVNode("div",UA,t[4]||(t[4]=[i.createElementVNode("span",{class:"visually-hidden"},"Loading...",-1)]),512),[[i.vShow,e.ui&&e.ui.wait.table]])]),i.createElementVNode("ul",HA,[i.createElementVNode("li",zA,[i.createElementVNode("a",{class:i.normalizeClass(["page-link cursor-pointer",{disabled:o.firstDisabled()}]),onClick:t[0]||(t[0]=a=>o.setPage(1)),"aria-label":"{{  translate('First')  }}"},[i.createElementVNode("span",{"aria-hidden":"true",innerHTML:o.translate("First")},null,8,WA)],2)]),i.createElementVNode("li",KA,[i.createElementVNode("a",{class:i.normalizeClass(["page-link cursor-pointer",{disabled:o.prevDisabled()}]),onClick:t[1]||(t[1]=a=>o.setPage(e.config.pagination.page-1)),"aria-label":"{{ translate('Prev')  }}"},[i.createElementVNode("span",{"aria-hidden":"true",innerHTML:o.translate("Prev")},null,8,GA)],2)]),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(e.config.pagination.numbers,a=>(i.openBlock(),i.createElementBlock("li",{key:a,class:"page-item"},[i.createElementVNode("a",{class:i.normalizeClass(["page-link cursor-pointer",{disabled:a>e.config.pagination.pages,current:a==e.config.pagination.page}]),onClick:c=>o.setPage(a)},i.toDisplayString(a),11,YA)]))),128)),i.createElementVNode("li",XA,[i.createElementVNode("a",{class:i.normalizeClass(["page-link cursor-pointer",{disabled:o.nextDisabled()}]),onClick:t[2]||(t[2]=a=>o.setPage(e.config.pagination.page+1)),"aria-label":"{{  translate('Next')  }}"},[i.createElementVNode("span",{"aria-hidden":"true",innerHTML:o.translate("Next")},null,8,ZA)],2)]),e.config.pagination.total?(i.openBlock(),i.createElementBlock("li",QA,[i.createElementVNode("a",{class:i.normalizeClass(["page-link cursor-pointer",{disabled:o.lastDisabled()}]),onClick:t[3]||(t[3]=a=>o.setPage(e.config.pagination.total)),"aria-label":"{{  translate('Last')  }}"},[i.createElementVNode("span",{"aria-hidden":"true",innerHTML:o.translate("Last")},null,8,JA)],2)])):i.createCommentVNode("",!0)])]))}const eC=Ae(IA,[["render",tC],["__scopeId","data-v-a7fb8960"]]),yu=db(),nC={name:"VuAdminTable",props:{settings:Object},components:{VuAdminForm:xA,VuAdminTablePagination:eC},data(){return{item:{},items:{},selected:[],details:[],bulkitem:{},bulkinputs:[],config:{pagination:{total:void 0,page:1,skip:0,limit:10,limits:[10,20,50,100],size:5,items:null,pages:null,numbers:[]},order:{},filter:{},orderIndex:1},ui:{wait:{table:!1,form:!1},block:{table:!1,form:!1}},formId:null,formData:null,modalId:null,modalElement:null,modalWindow:null,messages:{table:[],form:[]},message:{table:null,form:null},messageTimeOut:null}},created(){if(!this.settings.table)return!1;this.settings.table.pagination&&(this.config.pagination=Object.assign({},this.config.pagination,this.settings.table.pagination)),this.setPage(this.config.pagination.page,!1),this.settings.table.order&&(this.config.order=Object.assign({},this.config.order,this.settings.table.order)),this.settings.table.header||(this.settings.table.header={}),this.settings.api||(this.settings.api={}),this.settings.api=Object.assign({url:null,input:{},output:{},options:{}},this.settings.api),this.settings.table.api||(this.settings.table.api={}),this.settings.form||(this.settings.form={}),this.settings.form.api||(this.settings.form.api={}),this.settings.table.api=Object.assign({},this.settings.api,this.settings.table.api),this.settings.form.api=Object.assign({},this.settings.api,this.settings.form.api);let n=Math.round(Math.random()*1e5);this.formId="form_"+this.settings.entity+"_"+n,this.modalId="modal_"+this.settings.entity+"_"+n,this.resetTable()},mounted(){this.modalElement=document.getElementById(this.modalId),this.modalWindow=new cn(this.modalElement),this.modalElement.addEventListener("hidden.bs.modal",n=>{this.settings.form.visible=!1}),this.modalElement.addEventListener("show.bs.modal",n=>{this.settings.form.visible=!0}),this.listenEvent()},methods:{sendEvent(n,t,e){yu.emit(n+"-"+t,{from:this.settings.entity,payload:e})},listenEvent(){yu.on(`EDIT-${this.settings.entity}`,n=>{this.editItem(n.payload.item)})},tableWait(n){this.ui.wait.table=!0,this.ui.block.table=n},tableNoWait(){this.ui.wait.table=!1,this.ui.block.table=!1},countFilters(){return this.settings.table.columns.filter(n=>n.filter&&!n.hidden).length},resetTable(){this.settings.table.pagination&&(this.config.pagination.limit=this.settings.table.pagination.limit),this.resetFilter(),this.resetOrder(!0)},resetFilter(n){if(this.settings.table.columns){for(let t of this.settings.table.columns)t.filter&&(t.filter.value=t.filter.default_value!==void 0?t.filter.default_value:t.filter.multiple?[]:void 0,t.filter.operator=t.filter.default_operator!==void 0?t.filter.default_operator:void 0);n&&(this.reloadTable(),this.calcPage())}},resetOrder(n){this.settings.table.order?this.config.order=Object.assign({},this.settings.table.order):this.config.order={},n&&(this.reloadTable(),this.calcPage())},reloadTable(n){this.fetchTable(n)},calcPage(){if(!(this.config.pagination.items===null||this.config.pagination.items===void 0)){if(this.config.pagination.total!==null&&this.config.pagination.total!==void 0&&(this.config.pagination.pages=Math.ceil(this.config.pagination.total/this.config.pagination.limit)),this.config.pagination.pages!==null){let n=Math.floor((this.config.pagination.size-1)/2),t=this.config.pagination.page-n;this.config.pagination.page>this.config.pagination.pages&&(this.config.pagination.page=this.config.pagination.pages),this.config.pagination.page<1&&(this.config.pagination.page=1),t+this.config.pagination.size>this.config.pagination.pages&&(t=this.config.pagination.pages-this.config.pagination.size+1),t<1&&(t=1),this.config.pagination.numbers=Array.from({length:this.config.pagination.size},(e,s)=>t+s)}this.config.pagination.from=this.config.pagination.skip+1,this.config.pagination.to=this.config.pagination.skip+(this.config.pagination.items!==null?this.config.pagination.items:this.config.pagination.limit)}},setPage(n,t){t=t!==void 0?t:!0,n<1&&(n=1),this.config.pagination.pages!==null&&this.config.pagination.pages!==void 0&&n>this.config.pagination.pages&&(n=this.config.pagination.pages),this.config.pagination.skip=(n-1)*this.config.pagination.limit,this.config.pagination.page!=n&&t&&(this.config.pagination.page=n,this.reloadTable())},setPageLimit(n){n!=this.config.pagination.limit&&(this.config.pagination.limit=n,this.setPage(1),this.calcPage(),this.reloadTable())},getValueOrFunction(n,t){return vs(n,t,this.settings,this)},getButtonClassByAction(n){switch(n){case"TABLE_RESET_ORDERS":case"TABLE_RESET_FILTERS":return"btn btn-sm btn-outline-secondary text-nowrap mx-1";case"TABLE_CLOSE_DETAILS":return"btn btn-sm btn-outline-secondary text-nowrap mx-1";case"TABLE_ROW_EDIT":return"btn btn-sm btn-secondary text-nowrap mx-1";case"FORM_SUBMIT":case"TABLE_ROW_SAVE":case"TABLE_BULK_SAVE":return"btn btn-sm btn-primary text-nowrap mx-1";case"FORM_DELETE":case"TABLE_ROW_DELETE":case"TABLE_BULK_DELETE":return"btn btn-sm btn-danger text-nowrap mx-1";case"TABLE_ROW_DETAIL":return"btn btn-sm btn-outline-secondary text-nowrap mx-1";case"TABLE_COLUMNS":return"btn btn-sm btn-outline-dark text-nowrap mx-1";case"TABLE_EXPORT":return"btn btn-sm btn-primary text-nowrap mx-1";default:return"btn btn-sm btn-outline-primary text-nowrap mx-1"}},getButtonIconClassByAction(n){switch(n){case"TABLE_RESET_ORDERS":case"TABLE_RESET_FILTERS":return"bi bi-x";case"TABLE_CLOSE_DETAILS":return"bi bi-chevron-compact-up";case"TABLE_ROW_EDIT":return"bi bi-pencil-square";case"FORM_SUBMIT":case"TABLE_ROW_SAVE":case"TABLE_BULK_SAVE":return"bi bi-save";case"FORM_DELETE":case"TABLE_ROW_DELETE":case"TABLE_BULK_DELETE":return"bi bi-trash";case"TABLE_ROW_DETAIL":return"bi bi-chevron-compact-down";case"TABLE_COLUMNS":return"bi bi-table";case"TABLE_EXPORT":return"bi bi-download";default:return"bi bi-question"}},tableCellValue(n,t,e,s){try{return n===void 0||t===void 0?void 0:s.value?s.value(n,t,e,s):t[n]!==void 0||!n.includes(".")?t[n]:n.split(".").reduce((r,o)=>r&&r[o],t)}catch(r){return r.message}},tableCellTemplate(n,t,e,s){try{return typeof n=="string"?n:n(t[s.name],t,e,s)}catch(r){return r.message}},tableAction(n,t){t.$event&&t.$event.stopPropagation();let e=n.action?n.action:n.click?n.click:null;if(e&&typeof e!="string"){e(t.item,t,this);return}switch(e){case"TABLE_ROW_SELECT":this.toggleSelected(t.item[this.settings.pkey]);break;case"TABLE_ROW_DETAIL":this.toggleDetail(t.item[this.settings.pkey]);break;case"TABLE_CLOSE_DETAILS":this.details=[];break;case"TABLE_RESET_ORDERS":this.resetOrder(!0);break;case"TABLE_RESET_FILTERS":this.resetFilter(!0);break;case"TABLE_ROW_EDIT":this.editItem(t.item);break;case"TABLE_ROW_SAVE":this.tableRowSave(t.item,n.params);break;case"FORM_SUBMIT":this.saveForm(t.item);break;case"___save":this.saveItem(item,()=>{this.addTableMessage(this.translate("Saved")+` <small>( ${this.settings.pkey}:  ${t.item[this.settings.pkey]} )</small>`,2500)},s=>{this.addTableMessage(s.message,3500,"danger")},n.params);break;case"FORM_CREATE":this.createItem(t.item,n.params);break;case"TABLE_ROW_DELETE":this.deleteItem(t.item,n.params);break;case"FORM_DELETE":this.deleteItem(t.item,n.params);break;case"TABLE_RELOAD":this.reloadTable(n.params);break;case"TABLE_EXPORT":this.exportTable(n.params);break}},tableBulkAction(n,t,e,s){if(s&&s.stopPropagation(),n&&typeof n!="string"){n(item,this);return}switch(n){case"TABLE_BULK_SAVE":this.saveBulk(()=>{this.addTableMessage(this.translate("Saved all selected items"),2500)});break;case"TABLE_BULK_DELETE":this.deleteItems(this.selected,r=>{this.selected=[]});break}},isSortable(n){return n.sortable===void 0||n.sortable},sortTable(n){if(this.config.order[n.name]&&this.config.order[n.name].fixed||!this.isSortable(n))return;this.config.order[n.name]===void 0||this.config.order[n.name]===null?this.config.order[n.name]={dir:"ASC",idx:this.config.orderIndex++}:this.config.order[n.name].dir==="ASC"?this.config.order[n.name]={dir:"DESC",idx:this.config.orderIndex++}:delete this.config.order[n.name],Object.entries(this.config.order).sort((e,s)=>e[1].idx-s[1].idx).forEach((e,s)=>{e[1].idx=s}),this.reloadTable()},getOrdersForFetch(){let n=[],t=!1;for(let e of Object.keys(this.config.order))t=!0,n[this.config.order[e].idx]={key:e,dir:this.config.order[e].dir};return t?n:null},getFiltersForFetch(){let n={},t=!1;for(let e of this.settings.table.columns)e.filter&&e.filter.value!==void 0&&(t=!0,n[e.name]={type:e.filter.type,value:e.filter.onchange?e.filter.onchange(e.filter):e.filter.value,operator:e.filter.operator});return t?n:null},async fetchTableRelations(n){for(let t of this.settings.table.columns)if(t.relation&&this.settings.relations[t.relation.config]){let e=[];t.relation=Ui(this.settings.relations[t.relation.config],t.relation);for(let s of n)s[t.relation.local]&&e.push(s[t.relation.local]);t.relation.ids=pb(e),await this.fetchRelation(t,n)}},async fetchTable(n){try{this.tableWait(!0),n=n||{},n.filter=this.getFiltersForFetch(),n.order=this.getOrdersForFetch(),this.config.pagination.page!==null&&this.config.pagination.page!==void 0&&(n.page=this.config.pagination.page),this.config.pagination.limit!==null&&this.config.pagination.limit!==void 0&&(n.limit=this.config.pagination.limit),n.page&&n.limit&&(n.skip=(n.page-1)*n.limit);let t=await this.fetchItems(this.settings,n,this.config);if(t===!1)return this.tableNoWait(),!1;await this.fetchTableRelations(t),this.items=t,this.tableNoWait()}catch(t){console.error(t.message),this.addTableMessage(t.message,3500,"danger"),this.tableNoWait()}},async fetchItems(n,t,e){n.events&&n.events.beforeItemsLoad&&n.events.beforeItemsLoad(t,n);const s=await fetch(je("GET",n.table.api,null,t),Fe("GET",n.table.api)),r=await xs(s),o=Is(s,r.data);if(o){this.handleTableErrors(o);return}if(r.error){this.handleTableErrors(r.error);return}n.events&&n.events.afterItemsLoad&&n.events.afterItemsLoad(r.data,s);let a;n.table.api.input.items?a=typeof n.table.api.input.items=="string"?r.data[n.table.api.input.items]:n.table.api.input.items(r.data,s):a=r.data,e&&(n.table.api.input.total?e.pagination.total=typeof n.table.api.input.total=="string"?r.data[n.table.api.input.total]:n.table.api.input.total(r.data,s):r.data.total&&(e.pagination.total=r.data.total),e.pagination.items=a.length,this.calcPage());let c=hb(a);return this.convertIn(n.table.columns,c),c},async fetchRelation(n,t){try{let e=n.relation.params?n.relation.params:{};n.relation.columns&&(e.columns=JSON.stringify(n.relation.columns));let s={};if(n.relation.ids&&n.relation.ids.length){let l=(typeof n.relation.ids[0]=="string"?"text":"number")==="string"?"'"+n.relation.ids.join("','")+"'":n.relation.ids.join(",");s[n.relation.foreign]={type:"array",value:l,operator:"IN"}}e.filter=JSON.stringify(s),gb(e,{column:n});const r=await fetch(je("GET",n.relation.api,null,e),Fe("GET",n.relation.api));if(r.status!==200)throw new Error(this.translate("Response status: "+r.status));const o=await xs(r);if(Is(r,o.data)||!o.data)return;if(n.relation.api.input.items?n.relation.items=typeof n.relation.api.input.items=="string"?o.data[n.relation.api.input.items]:n.relation.api.input.items(o.data,r):n.relation.items=o.data,t&&t[0])for(let c of t)c[n.relation.local]&&(c[n.relation.entity]=n.relation.items.find((l,h,f)=>l[n.relation.foreign]===c[n.relation.local]))}catch(e){console.error(e.message)}},async editItem(n){if(!this.settings.form||!this.settings.form.api)return!1;this.item=n,this.message.form=null,this.messages.form=[],this.modalWindow.show()},async deleteItem(n,t){try{n||(n=this.item);let e=n[this.settings.pkey];if(!e||!confirm("Are you sure you want to delete this item"))return;this.tableWait(!0),this.settings.events&&this.settings.events.beforeItemDelete&&this.settings.events.beforeItemDelete(n);const r=await fetch(je("DELETE",this.settings.form.api,e,t),Fe("DELETE",this.settings.api));if(r.status!==200)throw new Error(this.translate("Response status: "+r.status));let o=this.items.find(c=>c[this.settings.pkey]===e);o>=0&&this.items.splice(o,1),this.item&&(this.item={});const a=await r.json();this.settings.events&&this.settings.events.afterItemDelete&&this.settings.events.afterItemDelete(a,r),this.reloadTable()}catch(e){console.error(e.message),this.tableNoWait()}},async deleteItems(n,t){try{if(!n||!confirm(this.translate("Are you sure you want to delete all selected items?")))return;this.tableWait(!0);const s=await fetch(je("DELETE",this.settings.table.api),Fe("DELETE",this.settings.api,{body:JSON.stringify({ids:n})}));if(s.status!==200)throw new Error(this.translate("Response status: "+s.status));t&&t(s),this.reloadTable(),this.tableNoWait()}catch(e){console.error(e.message),this.tableNoWait()}},tableRowSave(n,t){this.tableWait(),this.saveItem(n,()=>{this.tableNoWait(),this.addTableMessage(this.translate("Saved")+` <small>( ${this.settings.pkey}:  ${n[this.settings.pkey]} )</small>`,2500)},(e,s,r,o)=>{this.tableNoWait(),this.handleTableErrors(e)},t)},handleTableErrors(n){if(console.log(n),n==null)return;const t=3500,e="danger";if(typeof n=="string"){this.addTableMessage(n,t,e);return}if(n.length>0)for(let s of n)this.addTableMessage(s.message,s.timeout,s.priority)},handleFormErrors(){if(errors==null)return;const n=3500,t="danger";if(typeof errors=="string"){this.addTableMessage(errors,n,t);return}if(errors.length>0)for(let e of errors)this.addTableMessage(e.message,e.timeout,e.priority)},getColumnByName(n){return this.settings.table.columns.find(t=>t.name===n)},createItem(){this.item=this.settings.form.default?this.settings.form.default:{},this.modalWindow.show(),setTimeout(()=>{this.itemOriginal=Object.assign({},this.item)},100)},async saveItem(n,t,e,s){try{s=s||{};let r={},o=n[this.settings.pkey];if(this.settings.form.api.output&&this.settings.form.api.output.fields)for(let u in n)this.settings.form.api.output.fields.includes(u)&&(r[u]=n[u]);else Object.assign(r,n);let a,c;if(this.convertOut(this.settings.table.columns,[r]),(!this.settings.form.api.output.flatten||!o)&&(r=ub(r)),this.settings.events&&this.settings.events.beforeItemSave&&this.settings.events.beforeItemSave(r,s,n),!this.settings.form.api.output.item)a=JSON.stringify(r);else if(typeof this.settings.form.api.output.item=="string"){let u={};u[this.settings.form.api.output.item]=r,a=JSON.stringify(u)}else a=JSON.stringify(this.settings.form.api.output.item(r,options));const l=o?"PUT":"POST";c=await fetch(je(l,this.settings.form.api,o,s),Fe(l,this.settings.form.api,{body:a}));const h=await xs(c),f=Is(c,h.data);if(f){e&&e(f,n,s,c);return}if(h.error){e&&e(h.error,n,s,c);return}this.settings.events&&this.settings.events.afterItemSave&&this.settings.events.afterItemSave(h.data,s),t&&t(h.data,c)}catch(r){e&&e(r,n,s)}},async saveBulk(n){try{this.tableWait(!0);let t={};this.settings.events&&this.settings.events.beforeBulkSave&&this.settings.events.beforeBulkSave(this.bulkitem);for(let o in this.bulkitem)this.bulkinputs.indexOf(o)>=0&&this.settings.table.api.output.fields.includes(o)&&(t[o]=this.bulkitem[o]);this.convertOut(this.settings.table.columns,[t]);const e=await fetch(je("PUT",this.settings.table.api),Fe("PUT",this.settings.table.api,{body:JSON.stringify({item:t,ids:this.selected})})).catch(o=>{console.error(o.message),this.addTableMessage(o.message,3500,"danger",o)}),s=await xs(e),r=Is(e,s.data);if(this.tableNoWait(),r)return;n&&n(s.data),this.reloadTable()}catch(t){console.error(t.message),this.addTableMessage(t.message,3500,"danger",t),this.tableNoWait()}},countHiddenColumns(){return this.settings.table.columns.filter(n=>n.hidden===!0).length},toggleColumn(n){n===!0?this.settings.table.columns.map(t=>{t.hidden=!1}):n===!1?this.settings.table.columns.map(t=>{t.hidden=!0}):n.hidden=!n.hidden},toggleSelectedAll(){this.selected.length?this.selected=[]:this.selected=this.items.map(n=>n[this.settings.pkey])},toggleSelected(n){let t=this.selected.indexOf(n);t>=0?this.selected.splice(t,1):this.selected.push(n)},toggleSelectedRowInPage(){if(this.haveSelectedRowInPage())for(let n of this.items){let t=this.selected.indexOf(n[this.settings.pkey]);t>=0&&this.selected.splice(t,1)}else for(let n of this.items)this.selected.indexOf(n[this.settings.pkey])<0&&this.selected.push(n[this.settings.pkey]);this.selected.length||(this.bulkitem={})},haveSelectedRowInPage(){if(!this.items||!this.items.length)return!1;for(let n of this.items)if(this.selected.indexOf(n[this.settings.pkey])>=0)return!0;return!1},toggleDetail(n){let t=this.details.indexOf(n);t>=0?this.details.splice(t,1):this.details.push(n)},dropdownSelectToggleOne(n,t){let e=t.value;n.multiple?Zc(n.value,e):n.value=n.value===e?null:e,this.reloadTable()},dropdownSelectAll(n,t){Qc(n,t),this.reloadTable()},dropdownSelectInvert(n,t){Jc(n,t),this.reloadTable()},dropdownSelectClear(n){typeof n!="object"?n.value=null:td(n),this.reloadTable()},async exportTable(n){try{n.limit=this.config.pagination.total?this.config.pagination.total:0;let t=this.getFiltersForFetch(),e=this.getOrdersForFetch();this.selected.length>0&&(t[this.settings.pkey]={type:"string",value:this.selected,operator:"in"}),n.filter=t,n.order=e;let s=await this.fetchItems(this.settings,n,null,()=>{});this.settings.events&&this.settings.events.beforeItemsExport&&this.settings.events.beforeItemsExport(s);let r=fb(s,this.settings.table.exports[n.type].fields);mb(r,this.settings.entity+".csv")}catch(t){console.error(t.message),this.addTableMessage(t.message,3500,"danger")}},onRowInputChange(n,t,e,s){!t||!t.input||(t.input.onchange&&t.input.onchange(n,t,e),t.input.autosave&&(this.tableWait(),this.saveItem(e,()=>{this.tableNoWait(),this.addTableMessage(this.translate("Saved")+` <small>( ${this.settings.pkey}:  ${e[this.settings.pkey]} )</small>`,2500)},(r,o,a,c)=>{this.tableNoWait(),this.handleTableErrors(r)})))},onBulkInputChange(n,t,e){!e||!e.input||e.input.onchange&&e.input.onchange(n,e)},ifBulkInputClick(n){let t=this.bulkinputs.indexOf(n.name);t<0?this.bulkinputs.push(n.name):this.bulkinputs.splice(t,1),this.bulkitem[n.name]===void 0?this.bulkitem[n.name]=null:this.bulkitem[n.name]=void 0},addTableMessage(n,t,e,s){this.addMessage("table",n,t,e,s)},addMessage(n,t,e,s,r){clearTimeout(this.messageTimeout);const o=Date.now()+Math.random().toString(36).substring(2,9);this.message[n]={uid:o,msg:t,timeout:e!==void 0?e:2500,datetime:new Date().toLocaleString("hu-HU"),priority:s||"secondary",details:r},this.messages[n].unshift(this.message[n]),clearTimeout(this.messageTimeOut),this.messageTimeOut=setTimeout(()=>{this.message[n]=null,this.messages[n].length>10&&this.messages[n].splice(10)},this.message[n].timeout)},translate(n,t,e){return Ds(n,this.settings.translate,t,e||this.settings.language)},convertIn(n,t){for(let e of n)if(e.convert&&e.convert.in)for(let s of t)s[e.name]=e.convert.in(s[e.name],s,e)},convertOut(n,t){for(let e of n)if(e.convert&&e.convert.out)for(let s of t)s[e.name]=e.convert.out(s[e.name],s,e)}}},sC={key:0},iC=["data-bs-theme"],rC={class:"vua-table-title"},oC={class:"d-flex align-items-center justify-content-between"},aC={class:"d-inline-block"},lC={key:0,class:"card-title d-inline-block mb-2"},cC={class:"spinner-border spinner-border-sm mx-2",role:"status"},dC={key:0,class:"d-inline-block"},hC={key:0,class:"d-inline-block px-1 mx-1"},uC=["innerHTML"],fC={class:"dropdown d-inline-block"},mC=["innerHTML"],pC={class:"dropdown-menu text-start"},gC={class:"me-2 text-muted"},bC=["innerHTML"],yC=["onClick"],EC={key:1,class:"dropdown d-inline-block"},_C={class:"mx-1"},NC={key:0},wC={class:"dropdown-menu"},TC=["onClick"],kC={key:0,class:"bi bi-check-square-fill me-2"},AC={key:1,class:"bi bi-x-square me-2 text-danger"},CC={class:"badge text-secondary fw-normal"},SC={key:2,class:"dropdown d-inline-block"},OC={class:"mx-1"},LC={class:"dropdown-menu"},BC=["onClick"],vC={class:"vua-table-header"},xC=["width"],IC=["onClick"],VC=["innerHTML"],DC={key:0,class:"bi bi-arrow-down"},$C={key:1,class:"bi bi-arrow-up"},MC={key:0},RC=["disabled","onClick"],qC={key:0,class:"vua-table-filter"},PC=["width"],FC={key:0,class:"d-inline-block w-100 px-1"},jC={class:"bi bi-check-all"},UC={class:"bi bi-x-lg"},HC={key:1,class:"input-group input-group-sm my-1"},zC=["onUpdate:modelValue"],WC=["disabled","onClick"],KC={key:2,class:"input-group input-group-sm my-1"},GC=["onUpdate:modelValue","disabled"],YC={value:"="},XC={value:">"},ZC={value:">="},QC={value:"<"},JC={value:"<="},tS=["onUpdate:modelValue","disabled"],eS=["value"],nS=["onUpdate:modelValue","disabled","min","max"],sS=["disabled","onClick"],iS={key:3},rS={key:0,class:"dropdown"},oS={class:"btn btn-sm btn-secondary dropdown-toggle my-1",type:"button","data-bs-auto-close":"outside","data-bs-toggle":"dropdown","aria-expanded":"false"},aS={class:"dropdown-menu"},lS=["onClick"],cS={key:0,class:"bi bi-check-square"},dS={key:1,class:"bi bi-square"},hS={key:0},uS={key:1},fS=["onClick"],mS={key:2},pS=["onClick"],gS={key:3},bS=["onClick"],yS={key:1,class:"input-group input-group-sm my-1"},ES=["onUpdate:modelValue","multiple"],_S=["value"],NS=["disabled","onClick"],wS={key:4,class:"input-group input-group-sm my-1"},TS=["onUpdate:modelValue"],kS={value:"="},AS={value:">"},CS={value:">="},SS={value:"<"},OS={value:"<="},LS=["onUpdate:modelValue"],BS=["value"],vS=["type","onUpdate:modelValue"],xS=["disabled","onClick"],IS=["disabled","onClick"],VS={class:"align-middle"},DS=["data-label","width","onClick"],$S={key:0,class:"d-inline-block w-100 px-1"},MS=["innerHTML"],RS={key:1},qS=["innerHTML"],PS=["aria-valuenow","aria-valuemax"],FS={key:0},jS={key:4,class:"input-group input-group-sm"},US=["innerHTML"],HS=["type","onChange","onUpdate:modelValue"],zS=["onChange","onUpdate:modelValue"],WS=["value"],KS=["innerHTML"],GS={key:5},YS=["disabled","onClick"],XS=["innerHTML"],ZS={key:2},QS={key:0},JS=["colspan"],tO={class:"row g-3 align-items-center"},eO={class:"col-form-label"},nO=["type","onUpdate:modelValue","onChange"],sO=["onUpdate:modelValue","onChange"],iO=["onUpdate:modelValue","onChange"],rO=["value"],oO=["innerHTML"],aO={key:0,class:"bg-light text-dark"},lO={key:0,class:"vua-table-bulk border-info"},cO=["data-label","width"],dO={key:0,class:"d-inline-block w-100 px-1"},hO={key:1,class:"input-group input-group-sm my-1"},uO=["type","disabled","onChange","onUpdate:modelValue"],fO=["disabled","onChange","onUpdate:modelValue"],mO=["value"],pO=["onClick"],gO={key:0,class:"bi bi-square text-secondary"},bO={key:1,class:"bi bi-check-square"},yO={key:2},EO=["disabled","onClick"],_O=["innerHTML"],NO={key:2},wO=["id"],TO={class:"modal-dialog modal-xl"},kO={class:"modal-content h-100"};function AO(n,t,e,s,r,o){const a=i.resolveComponent("VuAdminTablePagination"),c=i.resolveComponent("VuAdminForm");return e.settings&&e.settings.table?(i.openBlock(),i.createElementBlock("div",sC,[i.createElementVNode("div",{class:i.normalizeClass(["vua-table-container",[e.settings.class]]),"data-bs-theme":[e.settings.theme]},[i.createElementVNode("div",{class:i.normalizeClass(["vua-overlay",{blocked:r.ui.block.table}])},null,2),i.createElementVNode("div",rC,[i.createElementVNode("div",oC,[i.createElementVNode("div",aC,[e.settings.table.title?(i.openBlock(),i.createElementBlock("h5",lC,i.toDisplayString(e.settings.table.title),1)):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("div",cC,t[15]||(t[15]=[i.createElementVNode("span",{class:"visually-hidden"},"Loading...",-1)]),512),[[i.vShow,r.ui.wait.table&&e.settings.table.title]])]),r.messages.table.length?(i.openBlock(),i.createElementBlock("div",dC,[r.message.table?(i.openBlock(),i.createElementBlock("small",hC,[i.createElementVNode("span",{class:i.normalizeClass(["text-"+r.message.table.priority])},[i.createElementVNode("span",{class:"fw-bold",innerHTML:r.message.table.msg},null,8,uC)],2)])):i.createCommentVNode("",!0),i.createElementVNode("div",fC,[i.createElementVNode("button",{class:i.normalizeClass(["btn btn-sm dropdown-toggle",["btn-"+r.messages.table[0].priority]]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",innerHTML:r.messages.table.length+" "+(r.messages.table.length>1?o.translate("messages"):o.translate("message"))},null,10,mC),i.createElementVNode("ul",pC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(r.messages.table,l=>(i.openBlock(),i.createElementBlock("li",{key:l},[i.createElementVNode("span",{class:i.normalizeClass(["dropdown-item",["text-"+l.priority]])},[i.createElementVNode("small",gC,i.toDisplayString(l.datetime),1),i.createElementVNode("span",{class:"fw-bold",innerHTML:l.msg},null,8,bC)],2)]))),128))])])])):i.createCommentVNode("",!0)])]),e.settings.table.control?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(["vua-table-control",[e.settings.table.control.class]])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(e.settings.table.control.buttons,l=>(i.openBlock(),i.createElementBlock("span",{key:l.action},[l.action!=="TABLE_COLUMNS"&&!l.dropdowns?(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",class:i.normalizeClass([l.class?l.class:o.getButtonClassByAction(l.action)]),onClick:h=>o.tableAction(l,{items:r.items,$event:h})},[i.createElementVNode("i",{class:i.normalizeClass([l.icon!==void 0?o.getValueOrFunction(l.icon,{button:l,table:this}):o.getButtonIconClassByAction(l.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(o.translate(l.title)),1)],10,yC)):i.createCommentVNode("",!0),l.action==="TABLE_COLUMNS"?(i.openBlock(),i.createElementBlock("div",EC,[i.createElementVNode("button",{type:"button",class:i.normalizeClass([[l.class?l.class:o.getButtonClassByAction(l.action)],"dropdown-toggle"]),"data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false"},[i.withDirectives(i.createElementVNode("span",_C,[i.createElementVNode("i",{class:i.normalizeClass([l.icon!==void 0?o.getValueOrFunction(l.icon,{button:l,table:this}):o.getButtonIconClassByAction(l.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(o.translate(l.title))+" ",1),o.countHiddenColumns()?(i.openBlock(),i.createElementBlock("span",NC," ( "+i.toDisplayString(o.countHiddenColumns())+" "+i.toDisplayString(o.translate("hidden"))+" ) ",1)):i.createCommentVNode("",!0)],512),[[i.vShow,e.settings.table.columns.length>0]])],2),i.createElementVNode("ul",wC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(e.settings.table.columns,h=>(i.openBlock(),i.createElementBlock("li",{key:h},[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:f=>o.toggleColumn(h)},[h.hidden?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("i",kC)),h.hidden?(i.openBlock(),i.createElementBlock("i",AC)):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(h.title)+" ",1),i.createElementVNode("small",CC,i.toDisplayString(h.name),1)],8,TC)]))),128)),t[16]||(t[16]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:t[0]||(t[0]=h=>o.toggleColumn(!0))},i.toDisplayString(o.translate("Visible all")),1)]),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:t[1]||(t[1]=h=>o.toggleColumn(!1))},i.toDisplayString(o.translate("Hidden all")),1)])])])):i.createCommentVNode("",!0),l.dropdowns?(i.openBlock(),i.createElementBlock("div",SC,[i.createElementVNode("button",{type:"button",class:i.normalizeClass([[l.class],"dropdown-toggle"]),"data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false"},[i.createElementVNode("span",OC,[i.createElementVNode("i",{class:i.normalizeClass([l.icon!==void 0?o.getValueOrFunction(l.icon,{button:l,table:this}):o.getButtonIconClassByAction(l.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(o.translate(l.title)),1)])],2),i.createElementVNode("ul",LC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.dropdowns,h=>(i.openBlock(),i.createElementBlock("li",{key:h},[i.createElementVNode("span",{class:i.normalizeClass(["dropdown-item cursor-pointer",[h.class]]),onClick:f=>o.tableAction(h,{items:r.items,$event:f})},[h.icon?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass([h.icon])},null,2)):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(o.translate(h.title)),1)],10,BC)]))),128))])])):i.createCommentVNode("",!0)]))),128))],2)):i.createCommentVNode("",!0),e.settings.table?(i.openBlock(),i.createElementBlock("table",{key:1,class:i.normalizeClass(["table vua-table mb-0",[e.settings.table.class]])},[i.createElementVNode("thead",null,[i.createElementVNode("tr",vC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(e.settings.table.columns,l=>(i.openBlock(),i.createElementBlock("th",{class:i.normalizeClass(["",[l.header?l.header.class:""]]),style:i.normalizeStyle([l.hidden?"display: none":""]),key:l,width:l.width},[i.createElementVNode("span",{class:i.normalizeClass(["d-inline-block no-select text-nowrap",{"cursor-pointer":o.isSortable(l)}]),onClick:h=>o.sortTable(l)},[i.createElementVNode("span",{innerHTML:l.header&&l.header.title!==void 0?o.translate(l.header.title):l.title?o.translate(l.title):o.translate(l.name)},null,8,VC),r.config.order[l.name]?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(["badge text-bg-light ms-1 p-badge",{"opacity-50":r.config.order[l.name].fixed}])},[r.config.order[l.name].dir==="ASC"?(i.openBlock(),i.createElementBlock("i",DC)):i.createCommentVNode("",!0),r.config.order[l.name].dir==="DESC"?(i.openBlock(),i.createElementBlock("i",$C)):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(r.config.order[l.name].idx+1),1)],2)):i.createCommentVNode("",!0)],10,IC),l.header&&l.header.buttons?(i.openBlock(),i.createElementBlock("span",MC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.header.buttons,h=>(i.openBlock(),i.createElementBlock("button",{key:h.action,type:"button",disabled:h.disabled!==void 0?o.getValueOrFunction(h.disabled):null,class:i.normalizeClass([h.class?h.class:o.getButtonClassByAction(h.action)]),onClick:f=>o.tableAction(h,{items:r.items,$event:f})},[i.createElementVNode("i",{class:i.normalizeClass([h.icon!==void 0?o.getValueOrFunction(h.icon,{button:h,column:l,table:this}):o.getButtonIconClassByAction(h.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(o.translate(h.title)),1)],10,RC))),128))])):i.createCommentVNode("",!0)],14,xC))),128))]),o.countFilters()?(i.openBlock(),i.createElementBlock("tr",qC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(e.settings.table.columns,l=>(i.openBlock(),i.createElementBlock("th",{style:i.normalizeStyle([l.hidden?"display: none":""]),key:l,width:l.width,class:i.normalizeClass([l.filter?l.filter.class:""])},[l.index&&l.click?(i.openBlock(),i.createElementBlock("div",FC,[i.createElementVNode("span",{class:i.normalizeClass(["cursor-pointer badge border badge-index-toggle py-1 px-2 me-1 my-2 w-100",{active:o.haveSelectedRowInPage()}]),onClick:t[2]||(t[2]=h=>o.toggleSelectedRowInPage())},[i.withDirectives(i.createElementVNode("i",jC,null,512),[[i.vShow,!o.haveSelectedRowInPage()]]),i.withDirectives(i.createElementVNode("i",UC,null,512),[[i.vShow,o.haveSelectedRowInPage()]])],2)])):i.createCommentVNode("",!0),l.filter&&l.filter.type=="text"?(i.openBlock(),i.createElementBlock("div",HC,[i.withDirectives(i.createElementVNode("input",{type:"text",class:i.normalizeClass([{fixed:l.filter.fixed},"form-control form-control-sm"]),"onUpdate:modelValue":h=>l.filter.value=h,onKeyup:t[3]||(t[3]=i.withKeys(h=>o.reloadTable(),["enter"]))},null,42,zC),[[i.vModelText,l.filter.value]]),l.filter.buttonx&&l.filter.buttonx!=!1?(i.openBlock(),i.createElementBlock("button",{key:0,class:i.normalizeClass(["btn btn-outline-secondary",{"opacity-25":l.filter.value==null}]),disabled:l.filter.value==null,onClick:h=>{l.filter.value=void 0,o.reloadTable()}},t[17]||(t[17]=[i.createElementVNode("i",{class:"bi bi-x"},null,-1)]),10,WC)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),l.filter&&l.filter.type=="number"?(i.openBlock(),i.createElementBlock("div",KC,[l.filter.operators==!0?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:0,"onUpdate:modelValue":h=>l.filter.operator=h,disabled:l.filter.fixed,onChange:t[4]||(t[4]=h=>o.reloadTable()),class:"form-select form-select-sm pe-0"},[i.createElementVNode("option",YC,i.toDisplayString(o.translate("=")),1),i.createElementVNode("option",XC,i.toDisplayString(o.translate(">")),1),i.createElementVNode("option",ZC,i.toDisplayString(o.translate(">=")),1),i.createElementVNode("option",QC,i.toDisplayString(o.translate("<")),1),i.createElementVNode("option",JC,i.toDisplayString(o.translate("<=")),1)],40,GC)),[[i.vModelSelect,l.filter.operator]]):i.createCommentVNode("",!0),l.filter.operators&&l.filter.operators.length>0?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:1,"onUpdate:modelValue":h=>l.filter.operator=h,disabled:l.filter.fixed,onChange:t[5]||(t[5]=h=>o.reloadTable()),class:"form-select form-select-sm pe-0"},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.filter.operators,h=>(i.openBlock(),i.createElementBlock("option",{key:h,value:h.value},i.toDisplayString(h.label),9,eS))),128))],40,tS)),[[i.vModelSelect,l.filter.operator]]):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{type:"number",class:i.normalizeClass(["form-control",{fixed:l.filter.fixed}]),"onUpdate:modelValue":h=>l.filter.value=h,disabled:l.filter.fixed,min:l.filter.min,max:l.filter.max,onChange:t[6]||(t[6]=h=>o.reloadTable()),onKeyup:t[7]||(t[7]=i.withKeys(h=>o.reloadTable(),["enter"]))},null,42,nS),[[i.vModelText,l.filter.value]]),!l.filter.fixed&&l.filter.buttonx&&l.filter.buttonx!=!1?(i.openBlock(),i.createElementBlock("button",{key:2,class:i.normalizeClass(["btn btn-outline-secondary",{"opacity-25":l.filter.value==null}]),disabled:l.filter.value==null,onClick:h=>{l.filter.value=void 0,o.reloadTable()}},t[18]||(t[18]=[i.createElementVNode("i",{class:"bi bi-x"},null,-1)]),10,sS)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),l.filter&&l.filter.type=="select"?(i.openBlock(),i.createElementBlock("div",iS,[l.filter.dropdown?(i.openBlock(),i.createElementBlock("div",rS,[i.createElementVNode("button",oS,i.toDisplayString(l.filter.multiple?l.filter.value.length+" selected":l.filter.value?l.filter.value:"not selected"),1),i.createElementVNode("ul",aS,[i.createElementVNode("li",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.filter.options,h=>(i.openBlock(),i.createElementBlock("span",{key:h,class:i.normalizeClass(["dropdown-item cursor-pointer",{selected:l.filter.multiple?l.filter.value.indexOf(h.value)>=0:l.filter.value===h.value}]),onClick:f=>o.dropdownSelectToggleOne(l.filter,h)},[(l.filter.multiple?l.filter.value.indexOf(h.value)>=0:l.filter.value===h.value)?(i.openBlock(),i.createElementBlock("i",cS)):(i.openBlock(),i.createElementBlock("i",dS)),i.createTextVNode(" "+i.toDisplayString(o.translate(h.label?h.label:h.value)),1)],10,lS))),128))]),l.filter.multiple?(i.openBlock(),i.createElementBlock("li",hS,t[19]||(t[19]=[i.createElementVNode("hr",{class:"dropdown-divider"},null,-1)]))):i.createCommentVNode("",!0),l.filter.multiple?(i.openBlock(),i.createElementBlock("li",uS,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:h=>o.dropdownSelectAll(l.filter.value,l.filter.options)},i.toDisplayString(o.translate("Select all")),9,fS)])):i.createCommentVNode("",!0),l.filter.multiple?(i.openBlock(),i.createElementBlock("li",mS,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:h=>o.dropdownSelectClear(l.filter.value)},i.toDisplayString(o.translate("Unselect all")),9,pS)])):i.createCommentVNode("",!0),l.filter.multiple?(i.openBlock(),i.createElementBlock("li",gS,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:h=>o.dropdownSelectInvert(l.filter.value,l.filter.options)},i.toDisplayString(o.translate("Invert all")),9,bS)])):i.createCommentVNode("",!0)])])):(i.openBlock(),i.createElementBlock("div",yS,[i.withDirectives(i.createElementVNode("select",{"onUpdate:modelValue":h=>l.filter.value=h,onChange:t[8]||(t[8]=h=>o.reloadTable()),multiple:l.filter.multiple,class:"form-select form-select-sm pe-0"},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.filter.options,h=>(i.openBlock(),i.createElementBlock("option",{key:h,value:h.value},i.toDisplayString(o.translate(h.label?h.label:h.value)),9,_S))),128))],40,ES),[[i.vModelSelect,l.filter.value]]),l.filter.buttonx&&l.filter.buttonx!=!1?(i.openBlock(),i.createElementBlock("button",{key:0,class:i.normalizeClass(["btn btn-outline-secondary",{"opacity-25":l.filter.value==null}]),disabled:l.filter.value==null,onClick:h=>{l.filter.value=void 0,o.reloadTable()}},t[20]||(t[20]=[i.createElementVNode("i",{class:"bi bi-x"},null,-1)]),10,NS)):i.createCommentVNode("",!0)]))])):i.createCommentVNode("",!0),l.filter&&(l.filter.type=="datetime-local"||l.filter.type=="date")?(i.openBlock(),i.createElementBlock("div",wS,[l.filter.operators==!0?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:0,"onUpdate:modelValue":h=>l.filter.operator=h,onChange:t[9]||(t[9]=h=>o.reloadTable()),class:"form-select form-select-sm pe-0"},[i.createElementVNode("option",kS,i.toDisplayString(o.translate("=")),1),i.createElementVNode("option",AS,i.toDisplayString(o.translate(">")),1),i.createElementVNode("option",CS,i.toDisplayString(o.translate(">=")),1),i.createElementVNode("option",SS,i.toDisplayString(o.translate("<")),1),i.createElementVNode("option",OS,i.toDisplayString(o.translate("<=")),1)],40,TS)),[[i.vModelSelect,l.filter.operator]]):i.createCommentVNode("",!0),l.filter.operators&&l.filter.operators.length>0?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:1,"onUpdate:modelValue":h=>l.filter.operator=h,onChange:t[10]||(t[10]=h=>o.reloadTable()),class:"form-select form-select-sm pe-0"},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.filter.operators,h=>(i.openBlock(),i.createElementBlock("option",{key:h,value:h.value},i.toDisplayString(o.translate(h.label)),9,BS))),128))],40,LS)),[[i.vModelSelect,l.filter.operator]]):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{type:l.filter.type,class:i.normalizeClass([{fixed:l.filter.fixed},"form-control form-control-sm"]),"onUpdate:modelValue":h=>l.filter.value=h,onChange:t[11]||(t[11]=h=>o.reloadTable()),onKeyup:t[12]||(t[12]=i.withKeys(h=>o.reloadTable(),["enter"]))},null,42,vS),[[i.vModelDynamic,l.filter.value]]),i.createElementVNode("button",{class:i.normalizeClass(["btn btn-outline-secondary",{"opacity-25":!l.filter.value}]),disabled:!l.filter.value,onClick:h=>{l.filter.value=void 0,o.reloadTable()}},t[21]||(t[21]=[i.createElementVNode("i",{class:"bi bi-x"},null,-1)]),10,xS)])):i.createCommentVNode("",!0),l.filter&&l.filter.buttons?(i.openBlock(),i.createElementBlock("span",{key:5,class:i.normalizeClass(o.getValueOrFunction(l.filter.buttons,{column:l}))},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.filter.buttons,h=>(i.openBlock(),i.createElementBlock("span",{key:h.action},[i.createElementVNode("button",{type:"button",disabled:h.disabled!==void 0?o.getValueOrFunction(h.disabled):null,class:i.normalizeClass([h.class?h.class:o.getButtonClassByAction(h.action)]),onClick:f=>o.tableAction(h,{items:r.items,$event:f})},[i.createElementVNode("i",{class:i.normalizeClass([h.icon!==void 0?o.getValueOrFunction(h.icon,{button:h,column:l,table:this}):o.getButtonIconClassByAction(h.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(o.translate(h.title)),1)],10,IS)]))),128))],2)):i.createCommentVNode("",!0)],14,PC))),128))])):i.createCommentVNode("",!0)]),i.createElementVNode("tbody",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(this.items,(l,h)=>(i.openBlock(),i.createElementBlock(i.Fragment,{key:l.id},[i.createElementVNode("tr",VS,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(e.settings.table.columns,f=>(i.openBlock(),i.createElementBlock("td",{style:i.normalizeStyle([f.hidden?"display: none":""]),key:f.name,"data-label":f.title?f.title:o.translate(f.name),width:f.width,class:i.normalizeClass(o.getValueOrFunction(f.class,{column:f,item:l})),onClick:u=>o.tableAction(f,{item:l,index:h,$event:u})},[f.index?(i.openBlock(),i.createElementBlock("div",$S,[i.createElementVNode("span",{class:i.normalizeClass(["cursor-pointer badge border badge-index p-1 w-100",{selected:r.selected.indexOf(l[e.settings.pkey])>=0}]),innerHTML:h+1+(r.config.pagination.page-1)*r.config.pagination.limit},null,10,MS)])):i.createCommentVNode("",!0),!f.template&&!f.input&&!f.progressbar?(i.openBlock(),i.createElementBlock("span",RS,i.toDisplayString(o.tableCellValue(f.name,l,h,f)),1)):i.createCommentVNode("",!0),f.template?(i.openBlock(),i.createElementBlock("span",{key:2,innerHTML:o.tableCellTemplate(f.template,l,h,f)},null,8,qS)):i.createCommentVNode("",!0),f.progressbar?(i.openBlock(),i.createElementBlock("div",{key:3,class:"progress",role:"progressbar","aria-label":"Warning example","aria-valuenow":l[f.name],"aria-valuemax":f.progressbar.max},[i.createElementVNode("div",{class:i.normalizeClass(["progress-bar",[f.progressbar.class]]),style:i.normalizeStyle({width:Math.round(l[f.name]/f.progressbar.max*100)+"%"})},[f.progressbar.value?(i.openBlock(),i.createElementBlock("span",FS,i.toDisplayString(l[f.name]),1)):i.createCommentVNode("",!0)],6)],8,PS)):i.createCommentVNode("",!0),f.input?(i.openBlock(),i.createElementBlock("div",jS,[f.input.prefix?(i.openBlock(),i.createElementBlock("span",{key:0,class:"input-group-text",innerHTML:o.getValueOrFunction(f.input.prefix,{column:f,item:l})},null,8,US)):i.createCommentVNode("",!0),["text","number","date","datetime-local"].indexOf(f.input.type)>=0?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:1,type:f.input.type,class:i.normalizeClass(["form-control form-control-sm",o.getValueOrFunction(f.input.class,{column:f,item:l})]),onChange:u=>o.onRowInputChange(l[f.name],f,l,h),"onUpdate:modelValue":u=>l[f.name]=u},null,42,HS)),[[i.vModelDynamic,l[f.name]]]):i.createCommentVNode("",!0),f.input.type=="select"?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:2,class:i.normalizeClass(["form-select form-select-sm pe-0",o.getValueOrFunction(f.input.class,{column:f,item:l})]),onChange:u=>o.onRowInputChange(l[f.name],f,l,h),"onUpdate:modelValue":u=>l[f.name]=u},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(f.input.options,u=>(i.openBlock(),i.createElementBlock("option",{value:u.value,key:u},i.toDisplayString(o.translate(u.label)),9,WS))),128))],42,zS)),[[i.vModelSelect,l[f.name]]]):i.createCommentVNode("",!0),f.input.suffix?(i.openBlock(),i.createElementBlock("span",{key:3,class:"input-group-text",innerHTML:o.getValueOrFunction(f.input.suffix,{column:f,item:l})},null,8,KS)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),f.buttons?(i.openBlock(),i.createElementBlock("span",GS,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(f.buttons,u=>(i.openBlock(),i.createElementBlock("span",{key:u.action},[u.hidden?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",disabled:u.disabled!==void 0?o.getValueOrFunction(u.disabled):null,class:i.normalizeClass([u.class?o.getValueOrFunction(u.class,{button:u,column:f,item:l,table:this}):o.getButtonClassByAction(u.action)]),onClick:p=>o.tableAction(u,{column:f,item:l,index:h,$event:p})},[u.icon!==null?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass([u.icon!==void 0?o.getValueOrFunction(u.icon,{button:u,column:f,item:l,table:this}):o.getButtonIconClassByAction(u.action)])},null,2)):i.createCommentVNode("",!0),u.template?(i.openBlock(),i.createElementBlock("span",{key:1,innerHTML:o.tableCellTemplate(u.template,l,h,f)},null,8,XS)):(i.openBlock(),i.createElementBlock("span",ZS,i.toDisplayString(o.translate(u.title)),1))],10,YS))]))),128))])):i.createCommentVNode("",!0)],14,DS))),128))]),e.settings.table.details&&r.details.indexOf(l[e.settings.pkey])>=0?(i.openBlock(),i.createElementBlock("tr",QS,[i.createElementVNode("td",{class:i.normalizeClass([e.settings.table.details.class]),colspan:e.settings.table.columns.length},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(e.settings.table.details.fields,f=>(i.openBlock(),i.createElementBlock("div",{class:"m-0",key:f},[i.createElementVNode("div",tO,[i.createElementVNode("div",{class:i.normalizeClass(["col text-end",[f.class]])},[i.createElementVNode("label",eO,i.toDisplayString(f.label),1)],2),i.createElementVNode("div",{class:i.normalizeClass(["col",[f.input.class]])},[["select","textarea"].indexOf(f.input.type)<0?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:0,type:f.input.type,class:"form-control form-control-sm","onUpdate:modelValue":u=>l[f.name]=u,onChange:u=>o.onRowInputChange(l[f.name],f,l,h)},null,40,nO)),[[i.vModelDynamic,l[f.name]]]):i.createCommentVNode("",!0),f.input.type=="textarea"?i.withDirectives((i.openBlock(),i.createElementBlock("textarea",{key:1,class:"form-control form-control-sm",rows:"3","onUpdate:modelValue":u=>l[f.name]=u,onChange:u=>o.onRowInputChange(l[f.name],f,l,h)},`\r
                    `,40,sO)),[[i.vModelText,l[f.name]]]):i.createCommentVNode("",!0),f.input.type=="select"?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:2,class:"form-select form-select-sm pe-0","onUpdate:modelValue":u=>l[f.name]=u,onChange:u=>o.onRowInputChange(l[f.name],f,l,h)},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(f.input.options,u=>(i.openBlock(),i.createElementBlock("option",{value:u.value,key:u},i.toDisplayString(o.translate(u.label)),9,rO))),128))],40,iO)),[[i.vModelSelect,l[f.name]]]):i.createCommentVNode("",!0)],2)])]))),128)),i.createElementVNode("span",{innerHTML:e.settings.table.details.raw(l)},null,8,oO),e.settings.debug>1?(i.openBlock(),i.createElementBlock("pre",aO,"                  "+i.toDisplayString(l)+`
                `,1)):i.createCommentVNode("",!0)],10,JS)])):i.createCommentVNode("",!0)],64))),128))]),i.createElementVNode("tfoot",null,[r.selected.length>0?(i.openBlock(),i.createElementBlock("tr",lO,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(e.settings.table.columns,l=>(i.openBlock(),i.createElementBlock("td",{style:i.normalizeStyle([l.hidden?"display: none":""]),key:l.name,"data-label":l.title,width:l.width,class:i.normalizeClass(l.class)},[l.index?(i.openBlock(),i.createElementBlock("div",dO,[i.createElementVNode("span",{class:"cursor-pointer d-inline-block badge border badge-index-toggle active py-1 px-2 me-1 my-2 w-100",onClick:t[13]||(t[13]=h=>o.toggleSelectedAll())},i.toDisplayString(r.selected.length),1)])):i.createCommentVNode("",!0),l.input&&l.bulk&&l.bulk.enabled?(i.openBlock(),i.createElementBlock("div",hO,[["text","number","date","datetime-local"].indexOf(l.input.type)>=0?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:0,type:l.input.type,class:i.normalizeClass(["form-control form-control-sm",l.input.class]),disabled:r.bulkinputs.indexOf(l.name)<0,onChange:h=>o.onBulkInputChange(r.bulkitem[l.name],r.bulkitem,l),"onUpdate:modelValue":h=>r.bulkitem[l.name]=h},null,42,uO)),[[i.vModelDynamic,r.bulkitem[l.name]]]):i.createCommentVNode("",!0),l.input.type=="select"?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:1,class:i.normalizeClass(["form-select form-select-sm pe-0",l.input.class]),disabled:r.bulkinputs.indexOf(l.name)<0,onChange:h=>o.onBulkInputChange(r.bulkitem[l.name],r.bulkitem,l),"onUpdate:modelValue":h=>r.bulkitem[l.name]=h},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.input.options,h=>(i.openBlock(),i.createElementBlock("option",{value:h.value,key:h},i.toDisplayString(o.translate(h.label)),9,mO))),128))],42,fO)),[[i.vModelSelect,r.bulkitem[l.name]]]):i.createCommentVNode("",!0),i.createElementVNode("span",{class:"input-group-text cursor-pointer",onClick:h=>o.ifBulkInputClick(l)},[r.bulkitem[l.name]===void 0?(i.openBlock(),i.createElementBlock("i",gO)):(i.openBlock(),i.createElementBlock("i",bO))],8,pO)])):i.createCommentVNode("",!0),l.bulk?(i.openBlock(),i.createElementBlock("span",yO,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.bulk.buttons,h=>(i.openBlock(),i.createElementBlock("span",{key:h.action},[i.createElementVNode("button",{type:"button",class:i.normalizeClass([h.class?h.class:o.getButtonClassByAction(h.action)]),disabled:h.action==="save"&&!this.bulkinputs.length,onClick:f=>o.tableBulkAction(h.action,r.bulkitem,l,f)},[h.icon!==null?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass([h.icon!==void 0?o.getValueOrFunction(h.icon,{button:h,column:l,table:this}):o.getButtonIconClassByAction(h.action)])},null,2)):i.createCommentVNode("",!0),h.template?(i.openBlock(),i.createElementBlock("span",{key:1,innerHTML:o.tableCellTemplate(h.template,r.bulkitem,null,l)},null,8,_O)):(i.openBlock(),i.createElementBlock("span",NO,i.toDisplayString(o.translate(h.title)),1))],10,EO)]))),128))])):i.createCommentVNode("",!0)],14,cO))),128))])):i.createCommentVNode("",!0)])],2)):i.createCommentVNode("",!0),i.createVNode(a,{settings:e.settings,config:r.config,ui:r.ui,onSetPage:o.setPage,onSetPageLimit:o.setPageLimit,onTranslate:o.translate},null,8,["settings","config","ui","onSetPage","onSetPageLimit","onTranslate"]),i.createElementVNode("div",{class:"modal shadow",id:r.modalId,tabindex:"-1"},[i.createElementVNode("div",TO,[i.createElementVNode("div",kO,[e.settings.form.visible&&e.settings.form.groups?(i.openBlock(),i.createBlock(c,{key:0,modelValue:r.item,"onUpdate:modelValue":t[14]||(t[14]=l=>r.item=l),formid:r.formId,settings:e.settings,modalWindow:r.modalWindow,saveItem:o.saveItem,deleteItem:o.deleteItem,reloadTable:o.reloadTable,fetchRelation:o.fetchRelation},null,8,["modelValue","formid","settings","modalWindow","saveItem","deleteItem","reloadTable","fetchRelation"])):i.createCommentVNode("",!0)])])],8,wO)],10,iC)])):i.createCommentVNode("",!0)}const CO={name:"VuAdmin",props:{entity:{type:String,required:!0}},init:n=>{},data(){return{settings:void 0,defaults:{pkey:"id",theme:void 0,class:"my-1 p-3 rounded",init:null,language:document.documentElement?document.documentElement.lang:"hu",api:{auth:void 0,options:{},input:{item:void 0,items:void 0,total:void 0},output:{item:void 0,flatten:!0,fields:void 0}},translate:{hu:{Columns:"Oszlopok",All:"Mind",page:"oldal",row:"sor",hidden:"rejtett",First:"Első",Next:"Következő",Prev:"Előző",Last:"Utolsó",Reload:"Újratöltés",New:"Új",Active:"Aktív",Deleted:"Törölt",Copy:"Másolás",Delete:"Törlés",Close:"Bezár",Save:"Mentés",Send:"Küldés",Export:"Exportálás","Select all":"Mind kiválaszt","Unselect all":"Mind töröl","Invert all":"Kijelölések megfordítása","Visible all":"Mind látható","Hidden all":"Mind rejtett","Save and close":"Ment és bezár","=":"Egyenlő",">":"Nagyobb",">=":"Nagyobb vagy egyenlő","<":"Kisebb","<=":"Kisebb vagy egyenlő","Are you sure you want to delete all selected items?":"Biztos hogy törölni akarod az összes kiválasztott elemet?"}},events:{afterSettingsInit:void 0,beforeItemsLoad:void 0,afterItemsLoad:void 0,afterItemLoad:void 0,beforeItemSave:void 0,afterItemSave:void 0,beforeItemDelete:void 0,afterItemDelete:void 0,beforeBulkSave:void 0,afterBulkSave:void 0,beforeItemsExport:void 0},relations:{},table:{title:null,columns:[],pagination:{size:10,limit:10,limits:[10,20,50,100]},order:{},control:{},details:{},exports:{}},form:{}}}},created(){if(window.VuEntities&&window.VuEntities[this.entity]){if(this.settings=Ui(this.defaults,window.VuEntities[this.entity]),this.settings.entity=this.entity,this.settings.preset=this.preset?this.preset:"default",!this.settings.theme){const n=document.documentElement.getAttribute("data-bs-theme");this.settings.theme=n||"light"}this.settings.events.afterSettingsInit&&this.settings.events.afterSettingsInit(this.settings),this.settings.debug&&(console.log("vu-admin ","1.2.48"),console.log(`Entity config (${this.entity}) initialized`),this.settings.debug>1&&console.log(this.settings))}else console.log("vu-admin ","1.2.48"),console.error(`Entity config (${this.entity}) not found`)},mounted(){},methods:{},components:{VuAdminTable:Ae(nC,[["render",AO],["__scopeId","data-v-dbf03bec"]])}},SO={key:0},OO=["data-bs-theme"];function LO(n,t,e,s,r,o){const a=i.resolveComponent("vu-admin-table");return e.entity&&r.settings?(i.openBlock(),i.createElementBlock("div",SO,[i.createElementVNode("div",{class:"vu-admin","data-bs-theme":[r.settings.theme]},[i.createVNode(a,{settings:r.settings},null,8,["settings"])],8,OO)])):i.createCommentVNode("",!0)}const Eu=Ae(CO,[["render",LO]]),BO={install(n){n.component("VuAdmin",Eu)}};W.VuAdmin=Eu,W.default=BO,Object.defineProperties(W,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
