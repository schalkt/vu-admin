(function(H,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],i):(H=typeof globalThis<"u"?globalThis:H||self,i(H.VuAdmin={},H.Vue))})(this,function(H,i){"use strict";var vL=Object.defineProperty;var xL=(H,i,X)=>i in H?vL(H,i,{enumerable:!0,configurable:!0,writable:!0,value:X}):H[i]=X;var B=(H,i,X)=>xL(H,typeof i!="symbol"?i+"":i,X);var X="top",Ne="bottom",ke="right",fe="left",_i="auto",xn=[X,Ne,ke,fe],sn="start",Dn="end",gl="clippingParents",vr="viewport",$n="popper",bl="reference",xr=xn.reduce(function(t,e){return t.concat([e+"-"+sn,e+"-"+Dn])},[]),Dr=[].concat(xn,[_i]).reduce(function(t,e){return t.concat([e,e+"-"+sn,e+"-"+Dn])},[]),yl="beforeRead",El="read",_l="afterRead",wl="beforeMain",Nl="main",kl="afterMain",Tl="beforeWrite",Al="write",Cl="afterWrite",Sl=[yl,El,_l,wl,Nl,kl,Tl,Al,Cl];function tt(t){return t?(t.nodeName||"").toLowerCase():null}function Te(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function rn(t){var e=Te(t).Element;return t instanceof e||t instanceof Element}function Se(t){var e=Te(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function $r(t){if(typeof ShadowRoot>"u")return!1;var e=Te(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Cu(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var s=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!Se(o)||!tt(o)||(Object.assign(o.style,s),Object.keys(r).forEach(function(a){var c=r[a];c===!1?o.removeAttribute(a):o.setAttribute(a,c===!0?"":c)}))})}function Su(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(s){var r=e.elements[s],o=e.attributes[s]||{},a=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:n[s]),c=a.reduce(function(l,h){return l[h]="",l},{});!Se(r)||!tt(r)||(Object.assign(r.style,c),Object.keys(o).forEach(function(l){r.removeAttribute(l)}))})}}const Mr={name:"applyStyles",enabled:!0,phase:"write",fn:Cu,effect:Su,requires:["computeStyles"]};function nt(t){return t.split("-")[0]}var on=Math.max,wi=Math.min,Mn=Math.round;function Rr(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ol(){return!/^((?!chrome|android).)*safari/i.test(Rr())}function Rn(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),r=1,o=1;e&&Se(t)&&(r=t.offsetWidth>0&&Mn(s.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Mn(s.height)/t.offsetHeight||1);var a=rn(t)?Te(t):window,c=a.visualViewport,l=!Ol()&&n,h=(s.left+(l&&c?c.offsetLeft:0))/r,f=(s.top+(l&&c?c.offsetTop:0))/o,u=s.width/r,p=s.height/o;return{width:u,height:p,top:f,right:h+u,bottom:f+p,left:h,x:h,y:f}}function qr(t){var e=Rn(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function Ll(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&$r(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function gt(t){return Te(t).getComputedStyle(t)}function Ou(t){return["table","td","th"].indexOf(tt(t))>=0}function $t(t){return((rn(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ni(t){return tt(t)==="html"?t:t.assignedSlot||t.parentNode||($r(t)?t.host:null)||$t(t)}function Bl(t){return!Se(t)||gt(t).position==="fixed"?null:t.offsetParent}function Lu(t){var e=/firefox/i.test(Rr()),n=/Trident/i.test(Rr());if(n&&Se(t)){var s=gt(t);if(s.position==="fixed")return null}var r=Ni(t);for($r(r)&&(r=r.host);Se(r)&&["html","body"].indexOf(tt(r))<0;){var o=gt(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function ks(t){for(var e=Te(t),n=Bl(t);n&&Ou(n)&&gt(n).position==="static";)n=Bl(n);return n&&(tt(n)==="html"||tt(n)==="body"&&gt(n).position==="static")?e:n||Lu(t)||e}function Pr(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ts(t,e,n){return on(t,wi(e,n))}function Bu(t,e,n){var s=Ts(t,e,n);return s>n?n:s}function Vl(){return{top:0,right:0,bottom:0,left:0}}function Il(t){return Object.assign({},Vl(),t)}function vl(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var Vu=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Il(typeof e!="number"?e:vl(e,xn))};function Iu(t){var e,n=t.state,s=t.name,r=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,c=nt(n.placement),l=Pr(c),h=[fe,ke].indexOf(c)>=0,f=h?"height":"width";if(!(!o||!a)){var u=Vu(r.padding,n),p=qr(o),g=l==="y"?X:fe,y=l==="y"?Ne:ke,E=n.rects.reference[f]+n.rects.reference[l]-a[l]-n.rects.popper[f],_=a[l]-n.rects.reference[l],w=ks(o),T=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,A=E/2-_/2,S=u[g],O=T-p[f]-u[y],L=T/2-p[f]/2+A,x=Ts(S,L,O),M=l;n.modifiersData[s]=(e={},e[M]=x,e.centerOffset=x-L,e)}}function vu(t){var e=t.state,n=t.options,s=n.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||Ll(e.elements.popper,r)&&(e.elements.arrow=r))}const xl={name:"arrow",enabled:!0,phase:"main",fn:Iu,effect:vu,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qn(t){return t.split("-")[1]}var xu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Du(t,e){var n=t.x,s=t.y,r=e.devicePixelRatio||1;return{x:Mn(n*r)/r||0,y:Mn(s*r)/r||0}}function Dl(t){var e,n=t.popper,s=t.popperRect,r=t.placement,o=t.variation,a=t.offsets,c=t.position,l=t.gpuAcceleration,h=t.adaptive,f=t.roundOffsets,u=t.isFixed,p=a.x,g=p===void 0?0:p,y=a.y,E=y===void 0?0:y,_=typeof f=="function"?f({x:g,y:E}):{x:g,y:E};g=_.x,E=_.y;var w=a.hasOwnProperty("x"),T=a.hasOwnProperty("y"),A=fe,S=X,O=window;if(h){var L=ks(n),x="clientHeight",M="clientWidth";if(L===Te(n)&&(L=$t(n),gt(L).position!=="static"&&c==="absolute"&&(x="scrollHeight",M="scrollWidth")),L=L,r===X||(r===fe||r===ke)&&o===Dn){S=Ne;var z=u&&L===O&&O.visualViewport?O.visualViewport.height:L[x];E-=z-s.height,E*=l?1:-1}if(r===fe||(r===X||r===Ne)&&o===Dn){A=ke;var W=u&&L===O&&O.visualViewport?O.visualViewport.width:L[M];g-=W-s.width,g*=l?1:-1}}var Y=Object.assign({position:c},h&&xu),ee=f===!0?Du({x:g,y:E},Te(n)):{x:g,y:E};if(g=ee.x,E=ee.y,l){var Z;return Object.assign({},Y,(Z={},Z[S]=T?"0":"",Z[A]=w?"0":"",Z.transform=(O.devicePixelRatio||1)<=1?"translate("+g+"px, "+E+"px)":"translate3d("+g+"px, "+E+"px, 0)",Z))}return Object.assign({},Y,(e={},e[S]=T?E+"px":"",e[A]=w?g+"px":"",e.transform="",e))}function $u(t){var e=t.state,n=t.options,s=n.gpuAcceleration,r=s===void 0?!0:s,o=n.adaptive,a=o===void 0?!0:o,c=n.roundOffsets,l=c===void 0?!0:c,h={placement:nt(e.placement),variation:qn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Dl(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Dl(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const jr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$u,data:{}};var ki={passive:!0};function Mu(t){var e=t.state,n=t.instance,s=t.options,r=s.scroll,o=r===void 0?!0:r,a=s.resize,c=a===void 0?!0:a,l=Te(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&h.forEach(function(f){f.addEventListener("scroll",n.update,ki)}),c&&l.addEventListener("resize",n.update,ki),function(){o&&h.forEach(function(f){f.removeEventListener("scroll",n.update,ki)}),c&&l.removeEventListener("resize",n.update,ki)}}const Fr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Mu,data:{}};var Ru={left:"right",right:"left",bottom:"top",top:"bottom"};function Ti(t){return t.replace(/left|right|bottom|top/g,function(e){return Ru[e]})}var qu={start:"end",end:"start"};function $l(t){return t.replace(/start|end/g,function(e){return qu[e]})}function Ur(t){var e=Te(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Hr(t){return Rn($t(t)).left+Ur(t).scrollLeft}function Pu(t,e){var n=Te(t),s=$t(t),r=n.visualViewport,o=s.clientWidth,a=s.clientHeight,c=0,l=0;if(r){o=r.width,a=r.height;var h=Ol();(h||!h&&e==="fixed")&&(c=r.offsetLeft,l=r.offsetTop)}return{width:o,height:a,x:c+Hr(t),y:l}}function ju(t){var e,n=$t(t),s=Ur(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=on(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=on(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-s.scrollLeft+Hr(t),l=-s.scrollTop;return gt(r||n).direction==="rtl"&&(c+=on(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:c,y:l}}function zr(t){var e=gt(t),n=e.overflow,s=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+s)}function Ml(t){return["html","body","#document"].indexOf(tt(t))>=0?t.ownerDocument.body:Se(t)&&zr(t)?t:Ml(Ni(t))}function As(t,e){var n;e===void 0&&(e=[]);var s=Ml(t),r=s===((n=t.ownerDocument)==null?void 0:n.body),o=Te(s),a=r?[o].concat(o.visualViewport||[],zr(s)?s:[]):s,c=e.concat(a);return r?c:c.concat(As(Ni(a)))}function Wr(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Fu(t,e){var n=Rn(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Rl(t,e,n){return e===vr?Wr(Pu(t,n)):rn(e)?Fu(e,n):Wr(ju($t(t)))}function Uu(t){var e=As(Ni(t)),n=["absolute","fixed"].indexOf(gt(t).position)>=0,s=n&&Se(t)?ks(t):t;return rn(s)?e.filter(function(r){return rn(r)&&Ll(r,s)&&tt(r)!=="body"}):[]}function Hu(t,e,n,s){var r=e==="clippingParents"?Uu(t):[].concat(e),o=[].concat(r,[n]),a=o[0],c=o.reduce(function(l,h){var f=Rl(t,h,s);return l.top=on(f.top,l.top),l.right=wi(f.right,l.right),l.bottom=wi(f.bottom,l.bottom),l.left=on(f.left,l.left),l},Rl(t,a,s));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function ql(t){var e=t.reference,n=t.element,s=t.placement,r=s?nt(s):null,o=s?qn(s):null,a=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,l;switch(r){case X:l={x:a,y:e.y-n.height};break;case Ne:l={x:a,y:e.y+e.height};break;case ke:l={x:e.x+e.width,y:c};break;case fe:l={x:e.x-n.width,y:c};break;default:l={x:e.x,y:e.y}}var h=r?Pr(r):null;if(h!=null){var f=h==="y"?"height":"width";switch(o){case sn:l[h]=l[h]-(e[f]/2-n[f]/2);break;case Dn:l[h]=l[h]+(e[f]/2-n[f]/2);break}}return l}function Pn(t,e){e===void 0&&(e={});var n=e,s=n.placement,r=s===void 0?t.placement:s,o=n.strategy,a=o===void 0?t.strategy:o,c=n.boundary,l=c===void 0?gl:c,h=n.rootBoundary,f=h===void 0?vr:h,u=n.elementContext,p=u===void 0?$n:u,g=n.altBoundary,y=g===void 0?!1:g,E=n.padding,_=E===void 0?0:E,w=Il(typeof _!="number"?_:vl(_,xn)),T=p===$n?bl:$n,A=t.rects.popper,S=t.elements[y?T:p],O=Hu(rn(S)?S:S.contextElement||$t(t.elements.popper),l,f,a),L=Rn(t.elements.reference),x=ql({reference:L,element:A,strategy:"absolute",placement:r}),M=Wr(Object.assign({},A,x)),z=p===$n?M:L,W={top:O.top-z.top+w.top,bottom:z.bottom-O.bottom+w.bottom,left:O.left-z.left+w.left,right:z.right-O.right+w.right},Y=t.modifiersData.offset;if(p===$n&&Y){var ee=Y[r];Object.keys(W).forEach(function(Z){var Me=[ke,Ne].indexOf(Z)>=0?1:-1,Re=[X,Ne].indexOf(Z)>=0?"y":"x";W[Z]+=ee[Re]*Me})}return W}function zu(t,e){e===void 0&&(e={});var n=e,s=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,c=n.flipVariations,l=n.allowedAutoPlacements,h=l===void 0?Dr:l,f=qn(s),u=f?c?xr:xr.filter(function(y){return qn(y)===f}):xn,p=u.filter(function(y){return h.indexOf(y)>=0});p.length===0&&(p=u);var g=p.reduce(function(y,E){return y[E]=Pn(t,{placement:E,boundary:r,rootBoundary:o,padding:a})[nt(E)],y},{});return Object.keys(g).sort(function(y,E){return g[y]-g[E]})}function Wu(t){if(nt(t)===_i)return[];var e=Ti(t);return[$l(t),e,$l(e)]}function Ku(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,a=n.altAxis,c=a===void 0?!0:a,l=n.fallbackPlacements,h=n.padding,f=n.boundary,u=n.rootBoundary,p=n.altBoundary,g=n.flipVariations,y=g===void 0?!0:g,E=n.allowedAutoPlacements,_=e.options.placement,w=nt(_),T=w===_,A=l||(T||!y?[Ti(_)]:Wu(_)),S=[_].concat(A).reduce(function(Qe,q){return Qe.concat(nt(q)===_i?zu(e,{placement:q,boundary:f,rootBoundary:u,padding:h,flipVariations:y,allowedAutoPlacements:E}):q)},[]),O=e.rects.reference,L=e.rects.popper,x=new Map,M=!0,z=S[0],W=0;W<S.length;W++){var Y=S[W],ee=nt(Y),Z=qn(Y)===sn,Me=[X,Ne].indexOf(ee)>=0,Re=Me?"width":"height",ie=Pn(e,{placement:Y,boundary:f,rootBoundary:u,altBoundary:p,padding:h}),pe=Me?Z?ke:fe:Z?Ne:X;O[Re]>L[Re]&&(pe=Ti(pe));var Xt=Ti(pe),Ze=[];if(o&&Ze.push(ie[ee]<=0),c&&Ze.push(ie[pe]<=0,ie[Xt]<=0),Ze.every(function(Qe){return Qe})){z=Y,M=!1;break}x.set(Y,Ze)}if(M)for(var P=y?3:1,wn=function(q){var dt=S.find(function(Zt){var te=x.get(Zt);if(te)return te.slice(0,q).every(function(Qt){return Qt})});if(dt)return z=dt,"break"},Ot=P;Ot>0;Ot--){var ce=wn(Ot);if(ce==="break")break}e.placement!==z&&(e.modifiersData[s]._skip=!0,e.placement=z,e.reset=!0)}}const Pl={name:"flip",enabled:!0,phase:"main",fn:Ku,requiresIfExists:["offset"],data:{_skip:!1}};function jl(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Fl(t){return[X,ke,Ne,fe].some(function(e){return t[e]>=0})}function Gu(t){var e=t.state,n=t.name,s=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,a=Pn(e,{elementContext:"reference"}),c=Pn(e,{altBoundary:!0}),l=jl(a,s),h=jl(c,r,o),f=Fl(l),u=Fl(h);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:f,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":u})}const Ul={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Gu};function Yu(t,e,n){var s=nt(t),r=[fe,X].indexOf(s)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=o[0],c=o[1];return a=a||0,c=(c||0)*r,[fe,ke].indexOf(s)>=0?{x:c,y:a}:{x:a,y:c}}function Xu(t){var e=t.state,n=t.options,s=t.name,r=n.offset,o=r===void 0?[0,0]:r,a=Dr.reduce(function(f,u){return f[u]=Yu(u,e.rects,o),f},{}),c=a[e.placement],l=c.x,h=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=h),e.modifiersData[s]=a}const Hl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Xu};function Zu(t){var e=t.state,n=t.name;e.modifiersData[n]=ql({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Kr={name:"popperOffsets",enabled:!0,phase:"read",fn:Zu,data:{}};function Qu(t){return t==="x"?"y":"x"}function Ju(t){var e=t.state,n=t.options,s=t.name,r=n.mainAxis,o=r===void 0?!0:r,a=n.altAxis,c=a===void 0?!1:a,l=n.boundary,h=n.rootBoundary,f=n.altBoundary,u=n.padding,p=n.tether,g=p===void 0?!0:p,y=n.tetherOffset,E=y===void 0?0:y,_=Pn(e,{boundary:l,rootBoundary:h,padding:u,altBoundary:f}),w=nt(e.placement),T=qn(e.placement),A=!T,S=Pr(w),O=Qu(S),L=e.modifiersData.popperOffsets,x=e.rects.reference,M=e.rects.popper,z=typeof E=="function"?E(Object.assign({},e.rects,{placement:e.placement})):E,W=typeof z=="number"?{mainAxis:z,altAxis:z}:Object.assign({mainAxis:0,altAxis:0},z),Y=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ee={x:0,y:0};if(L){if(o){var Z,Me=S==="y"?X:fe,Re=S==="y"?Ne:ke,ie=S==="y"?"height":"width",pe=L[S],Xt=pe+_[Me],Ze=pe-_[Re],P=g?-M[ie]/2:0,wn=T===sn?x[ie]:M[ie],Ot=T===sn?-M[ie]:-x[ie],ce=e.elements.arrow,Qe=g&&ce?qr(ce):{width:0,height:0},q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Vl(),dt=q[Me],Zt=q[Re],te=Ts(0,x[ie],Qe[ie]),Qt=A?x[ie]/2-P-te-dt-W.mainAxis:wn-te-dt-W.mainAxis,hs=A?-x[ie]/2+P+te+Zt+W.mainAxis:Ot+te+Zt+W.mainAxis,Lt=e.elements.arrow&&ks(e.elements.arrow),Nn=Lt?S==="y"?Lt.clientTop||0:Lt.clientLeft||0:0,kn=(Z=Y==null?void 0:Y[S])!=null?Z:0,Tn=pe+Qt-kn-Nn,us=pe+hs-kn,Jt=Ts(g?wi(Xt,Tn):Xt,pe,g?on(Ze,us):Ze);L[S]=Jt,ee[S]=Jt-pe}if(c){var An,ii=S==="x"?X:fe,ri=S==="x"?Ne:ke,ye=L[O],ht=O==="y"?"height":"width",Cn=ye+_[ii],Sn=ye-_[ri],Ee=[X,fe].indexOf(w)!==-1,Bt=(An=Y==null?void 0:Y[O])!=null?An:0,fs=Ee?Cn:ye-x[ht]-M[ht]-Bt+W.altAxis,ut=Ee?ye+x[ht]+M[ht]-Bt-W.altAxis:Sn,Vt=g&&Ee?Bu(fs,ye,ut):Ts(g?fs:Cn,ye,g?ut:Sn);L[O]=Vt,ee[O]=Vt-ye}e.modifiersData[s]=ee}}const zl={name:"preventOverflow",enabled:!0,phase:"main",fn:Ju,requiresIfExists:["offset"]};function ef(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function tf(t){return t===Te(t)||!Se(t)?Ur(t):ef(t)}function nf(t){var e=t.getBoundingClientRect(),n=Mn(e.width)/t.offsetWidth||1,s=Mn(e.height)/t.offsetHeight||1;return n!==1||s!==1}function sf(t,e,n){n===void 0&&(n=!1);var s=Se(e),r=Se(e)&&nf(e),o=$t(e),a=Rn(t,r,n),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((tt(e)!=="body"||zr(o))&&(c=tf(e)),Se(e)?(l=Rn(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=Hr(o))),{x:a.left+c.scrollLeft-l.x,y:a.top+c.scrollTop-l.y,width:a.width,height:a.height}}function rf(t){var e=new Map,n=new Set,s=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(c){if(!n.has(c)){var l=e.get(c);l&&r(l)}}),s.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),s}function of(t){var e=rf(t);return Sl.reduce(function(n,s){return n.concat(e.filter(function(r){return r.phase===s}))},[])}function af(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function lf(t){var e=t.reduce(function(n,s){var r=n[s.name];return n[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var Wl={placement:"bottom",modifiers:[],strategy:"absolute"};function Kl(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Ai(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?Wl:r;return function(c,l,h){h===void 0&&(h=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},Wl,o),modifiersData:{},elements:{reference:c,popper:l},attributes:{},styles:{}},u=[],p=!1,g={state:f,setOptions:function(w){var T=typeof w=="function"?w(f.options):w;E(),f.options=Object.assign({},o,f.options,T),f.scrollParents={reference:rn(c)?As(c):c.contextElement?As(c.contextElement):[],popper:As(l)};var A=of(lf([].concat(s,f.options.modifiers)));return f.orderedModifiers=A.filter(function(S){return S.enabled}),y(),g.update()},forceUpdate:function(){if(!p){var w=f.elements,T=w.reference,A=w.popper;if(Kl(T,A)){f.rects={reference:sf(T,ks(A),f.options.strategy==="fixed"),popper:qr(A)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(W){return f.modifiersData[W.name]=Object.assign({},W.data)});for(var S=0;S<f.orderedModifiers.length;S++){if(f.reset===!0){f.reset=!1,S=-1;continue}var O=f.orderedModifiers[S],L=O.fn,x=O.options,M=x===void 0?{}:x,z=O.name;typeof L=="function"&&(f=L({state:f,options:M,name:z,instance:g})||f)}}}},update:af(function(){return new Promise(function(_){g.forceUpdate(),_(f)})}),destroy:function(){E(),p=!0}};if(!Kl(c,l))return g;g.setOptions(h).then(function(_){!p&&h.onFirstUpdate&&h.onFirstUpdate(_)});function y(){f.orderedModifiers.forEach(function(_){var w=_.name,T=_.options,A=T===void 0?{}:T,S=_.effect;if(typeof S=="function"){var O=S({state:f,name:w,instance:g,options:A}),L=function(){};u.push(O||L)}})}function E(){u.forEach(function(_){return _()}),u=[]}return g}}var cf=Ai(),df=[Fr,Kr,jr,Mr],hf=Ai({defaultModifiers:df}),uf=[Fr,Kr,jr,Mr,Hl,Pl,zl,xl,Ul],Gr=Ai({defaultModifiers:uf});const Gl=Object.freeze(Object.defineProperty({__proto__:null,afterMain:kl,afterRead:_l,afterWrite:Cl,applyStyles:Mr,arrow:xl,auto:_i,basePlacements:xn,beforeMain:wl,beforeRead:yl,beforeWrite:Tl,bottom:Ne,clippingParents:gl,computeStyles:jr,createPopper:Gr,createPopperBase:cf,createPopperLite:hf,detectOverflow:Pn,end:Dn,eventListeners:Fr,flip:Pl,hide:Ul,left:fe,main:Nl,modifierPhases:Sl,offset:Hl,placements:Dr,popper:$n,popperGenerator:Ai,popperOffsets:Kr,preventOverflow:zl,read:El,reference:bl,right:ke,start:sn,top:X,variationPlacements:xr,viewport:vr,write:Al},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Mt=new Map,Yr={set(t,e,n){Mt.has(t)||Mt.set(t,new Map);const s=Mt.get(t);if(!s.has(e)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(e,n)},get(t,e){return Mt.has(t)&&Mt.get(t).get(e)||null},remove(t,e){if(!Mt.has(t))return;const n=Mt.get(t);n.delete(e),n.size===0&&Mt.delete(t)}},ff=1e6,mf=1e3,Xr="transitionend",Yl=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),pf=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),gf=t=>{do t+=Math.floor(Math.random()*ff);while(document.getElementById(t));return t},bf=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const s=Number.parseFloat(e),r=Number.parseFloat(n);return!s&&!r?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*mf)},Xl=t=>{t.dispatchEvent(new Event(Xr))},bt=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Rt=t=>bt(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(Yl(t)):null,jn=t=>{if(!bt(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const s=t.closest("summary");if(s&&s.parentNode!==n||s===null)return!1}return e},qt=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",Zl=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Zl(t.parentNode):null},Ci=()=>{},Cs=t=>{t.offsetHeight},Ql=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Zr=[],yf=t=>{document.readyState==="loading"?(Zr.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Zr)e()}),Zr.push(t)):t()},Oe=()=>document.documentElement.dir==="rtl",Le=t=>{yf(()=>{const e=Ql();if(e){const n=t.NAME,s=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=s,t.jQueryInterface)}})},be=(t,e=[],n=t)=>typeof t=="function"?t(...e):n,Jl=(t,e,n=!0)=>{if(!n){be(t);return}const r=bf(e)+5;let o=!1;const a=({target:c})=>{c===e&&(o=!0,e.removeEventListener(Xr,a),be(t))};e.addEventListener(Xr,a),setTimeout(()=>{o||Xl(e)},r)},Qr=(t,e,n,s)=>{const r=t.length;let o=t.indexOf(e);return o===-1?!n&&s?t[r-1]:t[0]:(o+=n?1:-1,s&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},Ef=/[^.]*(?=\..*)\.|.*/,_f=/\..*/,wf=/::\d+$/,Jr={};let ec=1;const tc={mouseenter:"mouseover",mouseleave:"mouseout"},Nf=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function nc(t,e){return e&&`${e}::${ec++}`||t.uidEvent||ec++}function sc(t){const e=nc(t);return t.uidEvent=e,Jr[e]=Jr[e]||{},Jr[e]}function kf(t,e){return function n(s){return to(s,{delegateTarget:t}),n.oneOff&&C.off(t,s.type,e),e.apply(t,[s])}}function Tf(t,e,n){return function s(r){const o=t.querySelectorAll(e);for(let{target:a}=r;a&&a!==this;a=a.parentNode)for(const c of o)if(c===a)return to(r,{delegateTarget:a}),s.oneOff&&C.off(t,r.type,e,n),n.apply(a,[r])}}function ic(t,e,n=null){return Object.values(t).find(s=>s.callable===e&&s.delegationSelector===n)}function rc(t,e,n){const s=typeof e=="string",r=s?n:e||n;let o=ac(t);return Nf.has(o)||(o=t),[s,r,o]}function oc(t,e,n,s,r){if(typeof e!="string"||!t)return;let[o,a,c]=rc(e,n,s);e in tc&&(a=(y=>function(E){if(!E.relatedTarget||E.relatedTarget!==E.delegateTarget&&!E.delegateTarget.contains(E.relatedTarget))return y.call(this,E)})(a));const l=sc(t),h=l[c]||(l[c]={}),f=ic(h,a,o?n:null);if(f){f.oneOff=f.oneOff&&r;return}const u=nc(a,e.replace(Ef,"")),p=o?Tf(t,n,a):kf(t,a);p.delegationSelector=o?n:null,p.callable=a,p.oneOff=r,p.uidEvent=u,h[u]=p,t.addEventListener(c,p,o)}function eo(t,e,n,s,r){const o=ic(e[n],s,r);o&&(t.removeEventListener(n,o,!!r),delete e[n][o.uidEvent])}function Af(t,e,n,s){const r=e[n]||{};for(const[o,a]of Object.entries(r))o.includes(s)&&eo(t,e,n,a.callable,a.delegationSelector)}function ac(t){return t=t.replace(_f,""),tc[t]||t}const C={on(t,e,n,s){oc(t,e,n,s,!1)},one(t,e,n,s){oc(t,e,n,s,!0)},off(t,e,n,s){if(typeof e!="string"||!t)return;const[r,o,a]=rc(e,n,s),c=a!==e,l=sc(t),h=l[a]||{},f=e.startsWith(".");if(typeof o<"u"){if(!Object.keys(h).length)return;eo(t,l,a,o,r?n:null);return}if(f)for(const u of Object.keys(l))Af(t,l,u,e.slice(1));for(const[u,p]of Object.entries(h)){const g=u.replace(wf,"");(!c||e.includes(g))&&eo(t,l,a,p.callable,p.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const s=Ql(),r=ac(e),o=e!==r;let a=null,c=!0,l=!0,h=!1;o&&s&&(a=s.Event(e,n),s(t).trigger(a),c=!a.isPropagationStopped(),l=!a.isImmediatePropagationStopped(),h=a.isDefaultPrevented());const f=to(new Event(e,{bubbles:c,cancelable:!0}),n);return h&&f.preventDefault(),l&&t.dispatchEvent(f),f.defaultPrevented&&a&&a.preventDefault(),f}};function to(t,e={}){for(const[n,s]of Object.entries(e))try{t[n]=s}catch{Object.defineProperty(t,n,{configurable:!0,get(){return s}})}return t}function lc(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function no(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const yt={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${no(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${no(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of n){let r=s.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=lc(t.dataset[s])}return e},getDataAttribute(t,e){return lc(t.getAttribute(`data-bs-${no(e)}`))}};class Ss{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const s=bt(n)?yt.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...bt(n)?yt.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[s,r]of Object.entries(n)){const o=e[s],a=bt(o)?"element":pf(o);if(!new RegExp(r).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${a}" but expected type "${r}".`)}}}const Cf="5.3.3";class Pe extends Ss{constructor(e,n){super(),e=Rt(e),e&&(this._element=e,this._config=this._getConfig(n),Yr.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Yr.remove(this._element,this.constructor.DATA_KEY),C.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,s=!0){Jl(e,n,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Yr.get(Rt(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return Cf}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const so=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>Yl(n)).join(","):null},$={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let s=t.parentNode.closest(e);for(;s;)n.push(s),s=s.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!qt(n)&&jn(n))},getSelectorFromElement(t){const e=so(t);return e&&$.findOne(e)?e:null},getElementFromSelector(t){const e=so(t);return e?$.findOne(e):null},getMultipleElementsFromSelector(t){const e=so(t);return e?$.find(e):[]}},Si=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;C.on(document,n,`[data-bs-dismiss="${s}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),qt(this))return;const o=$.getElementFromSelector(this)||this.closest(`.${s}`);t.getOrCreateInstance(o)[e]()})},Sf="alert",cc=".bs.alert",Of=`close${cc}`,Lf=`closed${cc}`,Bf="fade",Vf="show";class Oi extends Pe{static get NAME(){return Sf}close(){if(C.trigger(this._element,Of).defaultPrevented)return;this._element.classList.remove(Vf);const n=this._element.classList.contains(Bf);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),C.trigger(this._element,Lf),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=Oi.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Si(Oi,"close"),Le(Oi);const If="button",vf=".bs.button",xf=".data-api",Df="active",dc='[data-bs-toggle="button"]',$f=`click${vf}${xf}`;class Li extends Pe{static get NAME(){return If}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Df))}static jQueryInterface(e){return this.each(function(){const n=Li.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}C.on(document,$f,dc,t=>{t.preventDefault();const e=t.target.closest(dc);Li.getOrCreateInstance(e).toggle()}),Le(Li);const Mf="swipe",Fn=".bs.swipe",Rf=`touchstart${Fn}`,qf=`touchmove${Fn}`,Pf=`touchend${Fn}`,jf=`pointerdown${Fn}`,Ff=`pointerup${Fn}`,Uf="touch",Hf="pen",zf="pointer-event",Wf=40,Kf={endCallback:null,leftCallback:null,rightCallback:null},Gf={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Bi extends Ss{constructor(e,n){super(),this._element=e,!(!e||!Bi.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Kf}static get DefaultType(){return Gf}static get NAME(){return Mf}dispose(){C.off(this._element,Fn)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),be(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=Wf)return;const n=e/this._deltaX;this._deltaX=0,n&&be(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(C.on(this._element,jf,e=>this._start(e)),C.on(this._element,Ff,e=>this._end(e)),this._element.classList.add(zf)):(C.on(this._element,Rf,e=>this._start(e)),C.on(this._element,qf,e=>this._move(e)),C.on(this._element,Pf,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Hf||e.pointerType===Uf)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Yf="carousel",Pt=".bs.carousel",hc=".data-api",Xf="ArrowLeft",Zf="ArrowRight",Qf=500,Os="next",Un="prev",Hn="left",Vi="right",Jf=`slide${Pt}`,io=`slid${Pt}`,em=`keydown${Pt}`,tm=`mouseenter${Pt}`,nm=`mouseleave${Pt}`,sm=`dragstart${Pt}`,im=`load${Pt}${hc}`,rm=`click${Pt}${hc}`,uc="carousel",Ii="active",om="slide",am="carousel-item-end",lm="carousel-item-start",cm="carousel-item-next",dm="carousel-item-prev",fc=".active",mc=".carousel-item",hm=fc+mc,um=".carousel-item img",fm=".carousel-indicators",mm="[data-bs-slide], [data-bs-slide-to]",pm='[data-bs-ride="carousel"]',gm={[Xf]:Vi,[Zf]:Hn},bm={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ym={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ls extends Pe{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=$.findOne(fm,this._element),this._addEventListeners(),this._config.ride===uc&&this.cycle()}static get Default(){return bm}static get DefaultType(){return ym}static get NAME(){return Yf}next(){this._slide(Os)}nextWhenVisible(){!document.hidden&&jn(this._element)&&this.next()}prev(){this._slide(Un)}pause(){this._isSliding&&Xl(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){C.one(this._element,io,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){C.one(this._element,io,()=>this.to(e));return}const s=this._getItemIndex(this._getActive());if(s===e)return;const r=e>s?Os:Un;this._slide(r,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&C.on(this._element,em,e=>this._keydown(e)),this._config.pause==="hover"&&(C.on(this._element,tm,()=>this.pause()),C.on(this._element,nm,()=>this._maybeEnableCycle())),this._config.touch&&Bi.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of $.find(um,this._element))C.on(s,sm,r=>r.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Hn)),rightCallback:()=>this._slide(this._directionToOrder(Vi)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Qf+this._config.interval))}};this._swipeHelper=new Bi(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=gm[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=$.findOne(fc,this._indicatorsElement);n.classList.remove(Ii),n.removeAttribute("aria-current");const s=$.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add(Ii),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const s=this._getActive(),r=e===Os,o=n||Qr(this._getItems(),s,r,this._config.wrap);if(o===s)return;const a=this._getItemIndex(o),c=g=>C.trigger(this._element,g,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:a});if(c(Jf).defaultPrevented||!s||!o)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=o;const f=r?lm:am,u=r?cm:dm;o.classList.add(u),Cs(o),s.classList.add(f),o.classList.add(f);const p=()=>{o.classList.remove(f,u),o.classList.add(Ii),s.classList.remove(Ii,u,f),this._isSliding=!1,c(io)};this._queueCallback(p,s,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(om)}_getActive(){return $.findOne(hm,this._element)}_getItems(){return $.find(mc,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Oe()?e===Hn?Un:Os:e===Hn?Os:Un}_orderToDirection(e){return Oe()?e===Un?Hn:Vi:e===Un?Vi:Hn}static jQueryInterface(e){return this.each(function(){const n=Ls.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}C.on(document,rm,mm,function(t){const e=$.getElementFromSelector(this);if(!e||!e.classList.contains(uc))return;t.preventDefault();const n=Ls.getOrCreateInstance(e),s=this.getAttribute("data-bs-slide-to");if(s){n.to(s),n._maybeEnableCycle();return}if(yt.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()}),C.on(window,im,()=>{const t=$.find(pm);for(const e of t)Ls.getOrCreateInstance(e)}),Le(Ls);const Em="collapse",Bs=".bs.collapse",_m=".data-api",wm=`show${Bs}`,Nm=`shown${Bs}`,km=`hide${Bs}`,Tm=`hidden${Bs}`,Am=`click${Bs}${_m}`,ro="show",zn="collapse",vi="collapsing",Cm="collapsed",Sm=`:scope .${zn} .${zn}`,Om="collapse-horizontal",Lm="width",Bm="height",Vm=".collapse.show, .collapse.collapsing",oo='[data-bs-toggle="collapse"]',Im={parent:null,toggle:!0},vm={parent:"(null|element)",toggle:"boolean"};class Vs extends Pe{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const s=$.find(oo);for(const r of s){const o=$.getSelectorFromElement(r),a=$.find(o).filter(c=>c===this._element);o!==null&&a.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Im}static get DefaultType(){return vm}static get NAME(){return Em}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(Vm).filter(c=>c!==this._element).map(c=>Vs.getOrCreateInstance(c,{toggle:!1}))),e.length&&e[0]._isTransitioning||C.trigger(this._element,wm).defaultPrevented)return;for(const c of e)c.hide();const s=this._getDimension();this._element.classList.remove(zn),this._element.classList.add(vi),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(vi),this._element.classList.add(zn,ro),this._element.style[s]="",C.trigger(this._element,Nm)},a=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[s]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||C.trigger(this._element,km).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Cs(this._element),this._element.classList.add(vi),this._element.classList.remove(zn,ro);for(const r of this._triggerArray){const o=$.getElementFromSelector(r);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(vi),this._element.classList.add(zn),C.trigger(this._element,Tm)};this._element.style[n]="",this._queueCallback(s,this._element,!0)}_isShown(e=this._element){return e.classList.contains(ro)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Rt(e.parent),e}_getDimension(){return this._element.classList.contains(Om)?Lm:Bm}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(oo);for(const n of e){const s=$.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(e){const n=$.find(Sm,this._config.parent);return $.find(e,this._config.parent).filter(s=>!n.includes(s))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const s of e)s.classList.toggle(Cm,!n),s.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const s=Vs.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}C.on(document,Am,oo,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of $.getMultipleElementsFromSelector(this))Vs.getOrCreateInstance(e,{toggle:!1}).toggle()}),Le(Vs);const pc="dropdown",an=".bs.dropdown",ao=".data-api",xm="Escape",gc="Tab",Dm="ArrowUp",bc="ArrowDown",$m=2,Mm=`hide${an}`,Rm=`hidden${an}`,qm=`show${an}`,Pm=`shown${an}`,yc=`click${an}${ao}`,Ec=`keydown${an}${ao}`,jm=`keyup${an}${ao}`,Wn="show",Fm="dropup",Um="dropend",Hm="dropstart",zm="dropup-center",Wm="dropdown-center",ln='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Km=`${ln}.${Wn}`,xi=".dropdown-menu",Gm=".navbar",Ym=".navbar-nav",Xm=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Zm=Oe()?"top-end":"top-start",Qm=Oe()?"top-start":"top-end",Jm=Oe()?"bottom-end":"bottom-start",ep=Oe()?"bottom-start":"bottom-end",tp=Oe()?"left-start":"right-start",np=Oe()?"right-start":"left-start",sp="top",ip="bottom",rp={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},op={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class st extends Pe{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=$.next(this._element,xi)[0]||$.prev(this._element,xi)[0]||$.findOne(xi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return rp}static get DefaultType(){return op}static get NAME(){return pc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(qt(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!C.trigger(this._element,qm,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Ym))for(const s of[].concat(...document.body.children))C.on(s,"mouseover",Ci);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Wn),this._element.classList.add(Wn),C.trigger(this._element,Pm,e)}}hide(){if(qt(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!C.trigger(this._element,Mm,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))C.off(s,"mouseover",Ci);this._popper&&this._popper.destroy(),this._menu.classList.remove(Wn),this._element.classList.remove(Wn),this._element.setAttribute("aria-expanded","false"),yt.removeDataAttribute(this._menu,"popper"),C.trigger(this._element,Rm,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!bt(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${pc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Gl>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:bt(this._config.reference)?e=Rt(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=Gr(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Wn)}_getPlacement(){const e=this._parent;if(e.classList.contains(Um))return tp;if(e.classList.contains(Hm))return np;if(e.classList.contains(zm))return sp;if(e.classList.contains(Wm))return ip;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(Fm)?n?Qm:Zm:n?ep:Jm}_detectNavbar(){return this._element.closest(Gm)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(yt.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...be(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:n}){const s=$.find(Xm,this._menu).filter(r=>jn(r));s.length&&Qr(s,n,e===bc,!s.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=st.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===$m||e.type==="keyup"&&e.key!==gc)return;const n=$.find(Km);for(const s of n){const r=st.getInstance(s);if(!r||r._config.autoClose===!1)continue;const o=e.composedPath(),a=o.includes(r._menu);if(o.includes(r._element)||r._config.autoClose==="inside"&&!a||r._config.autoClose==="outside"&&a||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===gc||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const c={relatedTarget:r._element};e.type==="click"&&(c.clickEvent=e),r._completeHide(c)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),s=e.key===xm,r=[Dm,bc].includes(e.key);if(!r&&!s||n&&!s)return;e.preventDefault();const o=this.matches(ln)?this:$.prev(this,ln)[0]||$.next(this,ln)[0]||$.findOne(ln,e.delegateTarget.parentNode),a=st.getOrCreateInstance(o);if(r){e.stopPropagation(),a.show(),a._selectMenuItem(e);return}a._isShown()&&(e.stopPropagation(),a.hide(),o.focus())}}C.on(document,Ec,ln,st.dataApiKeydownHandler),C.on(document,Ec,xi,st.dataApiKeydownHandler),C.on(document,yc,st.clearMenus),C.on(document,jm,st.clearMenus),C.on(document,yc,ln,function(t){t.preventDefault(),st.getOrCreateInstance(this).toggle()}),Le(st);const _c="backdrop",ap="fade",wc="show",Nc=`mousedown.bs.${_c}`,lp={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},cp={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class kc extends Ss{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return lp}static get DefaultType(){return cp}static get NAME(){return _c}show(e){if(!this._config.isVisible){be(e);return}this._append();const n=this._getElement();this._config.isAnimated&&Cs(n),n.classList.add(wc),this._emulateAnimation(()=>{be(e)})}hide(e){if(!this._config.isVisible){be(e);return}this._getElement().classList.remove(wc),this._emulateAnimation(()=>{this.dispose(),be(e)})}dispose(){this._isAppended&&(C.off(this._element,Nc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(ap),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Rt(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),C.on(e,Nc,()=>{be(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Jl(e,this._getElement(),this._config.isAnimated)}}const dp="focustrap",Di=".bs.focustrap",hp=`focusin${Di}`,up=`keydown.tab${Di}`,fp="Tab",mp="forward",Tc="backward",pp={autofocus:!0,trapElement:null},gp={autofocus:"boolean",trapElement:"element"};class Ac extends Ss{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return pp}static get DefaultType(){return gp}static get NAME(){return dp}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),C.off(document,Di),C.on(document,hp,e=>this._handleFocusin(e)),C.on(document,up,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,C.off(document,Di))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const s=$.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===Tc?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){e.key===fp&&(this._lastTabNavDirection=e.shiftKey?Tc:mp)}}const Cc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Sc=".sticky-top",$i="padding-right",Oc="margin-right";class lo{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,$i,n=>n+e),this._setElementAttributes(Cc,$i,n=>n+e),this._setElementAttributes(Sc,Oc,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,$i),this._resetElementAttributes(Cc,$i),this._resetElementAttributes(Sc,Oc)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,s){const r=this.getWidth(),o=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+r)return;this._saveInitialAttribute(a,n);const c=window.getComputedStyle(a).getPropertyValue(n);a.style.setProperty(n,`${s(Number.parseFloat(c))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,n){const s=e.style.getPropertyValue(n);s&&yt.setDataAttribute(e,n,s)}_resetElementAttributes(e,n){const s=r=>{const o=yt.getDataAttribute(r,n);if(o===null){r.style.removeProperty(n);return}yt.removeDataAttribute(r,n),r.style.setProperty(n,o)};this._applyManipulationCallback(e,s)}_applyManipulationCallback(e,n){if(bt(e)){n(e);return}for(const s of $.find(e,this._element))n(s)}}const bp="modal",Be=".bs.modal",yp=".data-api",Ep="Escape",_p=`hide${Be}`,wp=`hidePrevented${Be}`,Lc=`hidden${Be}`,Bc=`show${Be}`,Np=`shown${Be}`,kp=`resize${Be}`,Tp=`click.dismiss${Be}`,Ap=`mousedown.dismiss${Be}`,Cp=`keydown.dismiss${Be}`,Sp=`click${Be}${yp}`,Vc="modal-open",Op="fade",Ic="show",co="modal-static",Lp=".modal.show",Bp=".modal-dialog",Vp=".modal-body",Ip='[data-bs-toggle="modal"]',vp={backdrop:!0,focus:!0,keyboard:!0},xp={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class cn extends Pe{constructor(e,n){super(e,n),this._dialog=$.findOne(Bp,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new lo,this._addEventListeners()}static get Default(){return vp}static get DefaultType(){return xp}static get NAME(){return bp}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||C.trigger(this._element,Bc,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Vc),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||C.trigger(this._element,_p).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ic),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){C.off(window,Be),C.off(this._dialog,Be),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new kc({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ac({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=$.findOne(Vp,this._dialog);n&&(n.scrollTop=0),Cs(this._element),this._element.classList.add(Ic);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,C.trigger(this._element,Np,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){C.on(this._element,Cp,e=>{if(e.key===Ep){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),C.on(window,kp,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),C.on(this._element,Ap,e=>{C.one(this._element,Tp,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Vc),this._resetAdjustments(),this._scrollBar.reset(),C.trigger(this._element,Lc)})}_isAnimated(){return this._element.classList.contains(Op)}_triggerBackdropTransition(){if(C.trigger(this._element,wp).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(co)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(co),this._queueCallback(()=>{this._element.classList.remove(co),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),s=n>0;if(s&&!e){const r=Oe()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!s&&e){const r=Oe()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const s=cn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e](n)}})}}C.on(document,Sp,Ip,function(t){const e=$.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),C.one(e,Bc,r=>{r.defaultPrevented||C.one(e,Lc,()=>{jn(this)&&this.focus()})});const n=$.findOne(Lp);n&&cn.getInstance(n).hide(),cn.getOrCreateInstance(e).toggle(this)}),Si(cn),Le(cn);const Dp="offcanvas",Et=".bs.offcanvas",vc=".data-api",$p=`load${Et}${vc}`,Mp="Escape",xc="show",Dc="showing",$c="hiding",Rp="offcanvas-backdrop",Mc=".offcanvas.show",qp=`show${Et}`,Pp=`shown${Et}`,jp=`hide${Et}`,Rc=`hidePrevented${Et}`,qc=`hidden${Et}`,Fp=`resize${Et}`,Up=`click${Et}${vc}`,Hp=`keydown.dismiss${Et}`,zp='[data-bs-toggle="offcanvas"]',Wp={backdrop:!0,keyboard:!0,scroll:!1},Kp={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class jt extends Pe{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Wp}static get DefaultType(){return Kp}static get NAME(){return Dp}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||C.trigger(this._element,qp,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new lo().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Dc);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(xc),this._element.classList.remove(Dc),C.trigger(this._element,Pp,{relatedTarget:e})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||C.trigger(this._element,jp).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add($c),this._backdrop.hide();const n=()=>{this._element.classList.remove(xc,$c),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new lo().reset(),C.trigger(this._element,qc)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){C.trigger(this._element,Rc);return}this.hide()},n=!!this._config.backdrop;return new kc({className:Rp,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new Ac({trapElement:this._element})}_addEventListeners(){C.on(this._element,Hp,e=>{if(e.key===Mp){if(this._config.keyboard){this.hide();return}C.trigger(this._element,Rc)}})}static jQueryInterface(e){return this.each(function(){const n=jt.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}C.on(document,Up,zp,function(t){const e=$.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),qt(this))return;C.one(e,qc,()=>{jn(this)&&this.focus()});const n=$.findOne(Mc);n&&n!==e&&jt.getInstance(n).hide(),jt.getOrCreateInstance(e).toggle(this)}),C.on(window,$p,()=>{for(const t of $.find(Mc))jt.getOrCreateInstance(t).show()}),C.on(window,Fp,()=>{for(const t of $.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&jt.getOrCreateInstance(t).hide()}),Si(jt),Le(jt);const Pc={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Gp=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Yp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Xp=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?Gp.has(n)?!!Yp.test(t.nodeValue):!0:e.filter(s=>s instanceof RegExp).some(s=>s.test(n))};function Zp(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const r=new window.DOMParser().parseFromString(t,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(const a of o){const c=a.nodeName.toLowerCase();if(!Object.keys(e).includes(c)){a.remove();continue}const l=[].concat(...a.attributes),h=[].concat(e["*"]||[],e[c]||[]);for(const f of l)Xp(f,h)||a.removeAttribute(f.nodeName)}return r.body.innerHTML}const Qp="TemplateFactory",Jp={allowList:Pc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},eg={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},tg={entry:"(string|element|function|null)",selector:"(string|element)"};class ng extends Ss{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Jp}static get DefaultType(){return eg}static get NAME(){return Qp}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,o]of Object.entries(this._config.content))this._setContent(e,o,r);const n=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&n.classList.add(...s.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,s]of Object.entries(e))super._typeCheckConfig({selector:n,entry:s},tg)}_setContent(e,n,s){const r=$.findOne(s,e);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(bt(n)){this._putElementInTemplate(Rt(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(e){return this._config.sanitize?Zp(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return be(e,[this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const sg="tooltip",ig=new Set(["sanitize","allowList","sanitizeFn"]),ho="fade",rg="modal",Mi="show",og=".tooltip-inner",jc=`.${rg}`,Fc="hide.bs.modal",Is="hover",uo="focus",ag="click",lg="manual",cg="hide",dg="hidden",hg="show",ug="shown",fg="inserted",mg="click",pg="focusin",gg="focusout",bg="mouseenter",yg="mouseleave",Eg={AUTO:"auto",TOP:"top",RIGHT:Oe()?"left":"right",BOTTOM:"bottom",LEFT:Oe()?"right":"left"},_g={allowList:Pc,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},wg={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};let Ri=class Tu extends Pe{constructor(e,n){if(typeof Gl>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return _g}static get DefaultType(){return wg}static get NAME(){return sg}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),C.off(this._element.closest(jc),Fc,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=C.trigger(this._element,this.constructor.eventName(hg)),s=(Zl(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!s)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(r),C.trigger(this._element,this.constructor.eventName(fg))),this._popper=this._createPopper(r),r.classList.add(Mi),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))C.on(c,"mouseover",Ci);const a=()=>{C.trigger(this._element,this.constructor.eventName(ug)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||C.trigger(this._element,this.constructor.eventName(cg)).defaultPrevented)return;if(this._getTipElement().classList.remove(Mi),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))C.off(r,"mouseover",Ci);this._activeTrigger[ag]=!1,this._activeTrigger[uo]=!1,this._activeTrigger[Is]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),C.trigger(this._element,this.constructor.eventName(dg)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(ho,Mi),n.classList.add(`bs-${this.constructor.NAME}-auto`);const s=gf(this.constructor.NAME).toString();return n.setAttribute("id",s),this._isAnimated()&&n.classList.add(ho),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new ng({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[og]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ho)}_isShown(){return this.tip&&this.tip.classList.contains(Mi)}_createPopper(e){const n=be(this._config.placement,[this,e,this._element]),s=Eg[n.toUpperCase()];return Gr(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return be(e,[this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...n,...be(this._config.popperConfig,[n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")C.on(this._element,this.constructor.eventName(mg),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(n!==lg){const s=n===Is?this.constructor.eventName(bg):this.constructor.eventName(pg),r=n===Is?this.constructor.eventName(yg):this.constructor.eventName(gg);C.on(this._element,s,this._config.selector,o=>{const a=this._initializeOnDelegatedTarget(o);a._activeTrigger[o.type==="focusin"?uo:Is]=!0,a._enter()}),C.on(this._element,r,this._config.selector,o=>{const a=this._initializeOnDelegatedTarget(o);a._activeTrigger[o.type==="focusout"?uo:Is]=a._element.contains(o.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},C.on(this._element.closest(jc),Fc,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=yt.getDataAttributes(this._element);for(const s of Object.keys(n))ig.has(s)&&delete n[s];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Rt(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,s]of Object.entries(this._config))this.constructor.Default[n]!==s&&(e[n]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=Tu.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}};Le(Ri);const Ng="popover",kg=".popover-header",Tg=".popover-body",Ag={...Ri.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Cg={...Ri.DefaultType,content:"(null|string|element|function)"};class fo extends Ri{static get Default(){return Ag}static get DefaultType(){return Cg}static get NAME(){return Ng}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[kg]:this._getTitle(),[Tg]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=fo.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Le(fo);const Sg="scrollspy",mo=".bs.scrollspy",Og=".data-api",Lg=`activate${mo}`,Uc=`click${mo}`,Bg=`load${mo}${Og}`,Vg="dropdown-item",Kn="active",Ig='[data-bs-spy="scroll"]',po="[href]",vg=".nav, .list-group",Hc=".nav-link",xg=`${Hc}, .nav-item > ${Hc}, .list-group-item`,Dg=".dropdown",$g=".dropdown-toggle",Mg={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Rg={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class qi extends Pe{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Mg}static get DefaultType(){return Rg}static get NAME(){return Sg}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Rt(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(C.off(this._config.target,Uc),C.on(this._config.target,Uc,po,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const s=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:r,behavior:"smooth"});return}s.scrollTop=r}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=a=>this._targetLinks.get(`#${a.target.id}`),s=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(n(a))},r=(this._rootElement||document.documentElement).scrollTop,o=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const a of e){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(a));continue}const c=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&c){if(s(a),!r)return;continue}!o&&!c&&s(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=$.find(po,this._config.target);for(const n of e){if(!n.hash||qt(n))continue;const s=$.findOne(decodeURI(n.hash),this._element);jn(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Kn),this._activateParents(e),C.trigger(this._element,Lg,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(Vg)){$.findOne($g,e.closest(Dg)).classList.add(Kn);return}for(const n of $.parents(e,vg))for(const s of $.prev(n,xg))s.classList.add(Kn)}_clearActiveClass(e){e.classList.remove(Kn);const n=$.find(`${po}.${Kn}`,e);for(const s of n)s.classList.remove(Kn)}static jQueryInterface(e){return this.each(function(){const n=qi.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}C.on(window,Bg,()=>{for(const t of $.find(Ig))qi.getOrCreateInstance(t)}),Le(qi);const qg="tab",dn=".bs.tab",Pg=`hide${dn}`,jg=`hidden${dn}`,Fg=`show${dn}`,Ug=`shown${dn}`,Hg=`click${dn}`,zg=`keydown${dn}`,Wg=`load${dn}`,Kg="ArrowLeft",zc="ArrowRight",Gg="ArrowUp",Wc="ArrowDown",go="Home",Kc="End",hn="active",Gc="fade",bo="show",Yg="dropdown",Yc=".dropdown-toggle",Xg=".dropdown-menu",yo=`:not(${Yc})`,Zg='.list-group, .nav, [role="tablist"]',Qg=".nav-item, .list-group-item",Jg=`.nav-link${yo}, .list-group-item${yo}, [role="tab"]${yo}`,Xc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Eo=`${Jg}, ${Xc}`,eb=`.${hn}[data-bs-toggle="tab"], .${hn}[data-bs-toggle="pill"], .${hn}[data-bs-toggle="list"]`;class Gn extends Pe{constructor(e){super(e),this._parent=this._element.closest(Zg),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),C.on(this._element,zg,n=>this._keydown(n)))}static get NAME(){return qg}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),s=n?C.trigger(n,Pg,{relatedTarget:e}):null;C.trigger(e,Fg,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(hn),this._activate($.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(bo);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),C.trigger(e,Ug,{relatedTarget:n})};this._queueCallback(s,e,e.classList.contains(Gc))}_deactivate(e,n){if(!e)return;e.classList.remove(hn),e.blur(),this._deactivate($.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(bo);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),C.trigger(e,jg,{relatedTarget:n})};this._queueCallback(s,e,e.classList.contains(Gc))}_keydown(e){if(![Kg,zc,Gg,Wc,go,Kc].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(r=>!qt(r));let s;if([go,Kc].includes(e.key))s=n[e.key===go?0:n.length-1];else{const r=[zc,Wc].includes(e.key);s=Qr(n,e.target,r,!0)}s&&(s.focus({preventScroll:!0}),Gn.getOrCreateInstance(s).show())}_getChildren(){return $.find(Eo,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const s of n)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",n),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=$.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const s=this._getOuterElement(e);if(!s.classList.contains(Yg))return;const r=(o,a)=>{const c=$.findOne(o,s);c&&c.classList.toggle(a,n)};r(Yc,hn),r(Xg,bo),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,s){e.hasAttribute(n)||e.setAttribute(n,s)}_elemIsActive(e){return e.classList.contains(hn)}_getInnerElement(e){return e.matches(Eo)?e:$.findOne(Eo,e)}_getOuterElement(e){return e.closest(Qg)||e}static jQueryInterface(e){return this.each(function(){const n=Gn.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}C.on(document,Hg,Xc,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!qt(this)&&Gn.getOrCreateInstance(this).show()}),C.on(window,Wg,()=>{for(const t of $.find(eb))Gn.getOrCreateInstance(t)}),Le(Gn);const tb="toast",Ft=".bs.toast",nb=`mouseover${Ft}`,sb=`mouseout${Ft}`,ib=`focusin${Ft}`,rb=`focusout${Ft}`,ob=`hide${Ft}`,ab=`hidden${Ft}`,lb=`show${Ft}`,cb=`shown${Ft}`,db="fade",Zc="hide",Pi="show",ji="showing",hb={animation:"boolean",autohide:"boolean",delay:"number"},ub={animation:!0,autohide:!0,delay:5e3};class Fi extends Pe{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ub}static get DefaultType(){return hb}static get NAME(){return tb}show(){if(C.trigger(this._element,lb).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(db);const n=()=>{this._element.classList.remove(ji),C.trigger(this._element,cb),this._maybeScheduleHide()};this._element.classList.remove(Zc),Cs(this._element),this._element.classList.add(Pi,ji),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||C.trigger(this._element,ob).defaultPrevented)return;const n=()=>{this._element.classList.add(Zc),this._element.classList.remove(ji,Pi),C.trigger(this._element,ab)};this._element.classList.add(ji),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Pi),super.dispose()}isShown(){return this._element.classList.contains(Pi)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){C.on(this._element,nb,e=>this._onInteraction(e,!0)),C.on(this._element,sb,e=>this._onInteraction(e,!1)),C.on(this._element,ib,e=>this._onInteraction(e,!0)),C.on(this._element,rb,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Fi.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Si(Fi),Le(Fi);function _o(t){return{all:t=t||new Map,on:function(e,n){var s=t.get(e);s?s.push(n):t.set(e,[n])},off:function(e,n){var s=t.get(e);s&&(n?s.splice(s.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var s=t.get(e);s&&s.slice().map(function(r){r(n)}),(s=t.get("*"))&&s.slice().map(function(r){r(e,n)})}}}function Ui(t,e){for(const n in e)e[n]instanceof Object&&n in t&&Object.assign(e[n],Ui(t[n],e[n]));return Object.assign(t||{},e)}function vs(t,e,n,s){try{return typeof t=="function"?t(e,n,s):t}catch{return null}}async function Yn(t){try{return{data:await t.json(),error:null}}catch(e){return{data:void 0,error:e}}}function Xn(t,e){let n=[];if(e&&e.errors)for(let s of e.errors)n.push({message:s.message,timeout:3500,priority:"danger"});else t.status>=400&&t.status<=511&&n.push({message:t.status+(t.statusText?" "+t.statusText:""),timeout:3500,priority:"danger"});return n.length>0?n:null}function _t(t,e,n,s){return e.options||(e.options={}),e.options.headers||(e.options.headers={}),t!="GET"&&(e.options.headers["Content-Type"]||(e.options.headers["Content-Type"]="application/json")),s&&s.header&&s.header[0]&&(e.options.headers[s.header[0]]=s.header[1]),e.options.body=void 0,e.options.method=t,n&&Object.assign(e.options,n),e.debug&&console.log("FETCH OPTIONS",e.options),e.options}function wt(t,e,n,s){let r=!1,o=Object.assign({},s||{});return s&&(s.filter&&(o.filter=JSON.stringify(s.filter)),s.order&&(o.order=JSON.stringify(s.order)),r=Object.keys(o).length),e.url+(n?"/"+n:"")+(r?"?"+new URLSearchParams(o).toString():"")}function xs(t,e="-"){return t.toString().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\_/g,"-").replace(/\-\-+/g,"-").replace(/\-$/g,"")}function fb(t){let e=[];for(let n of t)e.push(Hi(n));return e}function Hi(t,e="",n={}){for(let s in t){let r=e?e+"."+s:s;typeof t[s]=="object"&&!Array.isArray(t[s])?Hi(t[s],r,n):n[r]=t[s]}return n}function mb(t){let e={};for(let n in t){let s=n.split(".");s.reduce((r,o,a)=>r[o]||(r[o]=isNaN(Number(s[a+1]))?s.length-1===a?t[n]:{}:[]),e)}return e}function Ds(t,e,n,s){const r=(o,a)=>!o||!a?o:o.replace(/{\s*(.*?)\s*}/g,(c,l)=>a[l]?a[l]:"");return!e||(s=s||document.documentElement.lang,!s||!e[s])||!e[s][t]?r(t,n):r(e[s][t])}function pb(t,e,n=";"){const s=e.map(o=>o.title?o.title:o.name.charAt(0).toUpperCase()+o.name.slice(1)).join(n),r=t.map(o=>e.map(a=>{let c=o[a.name];return a.template?a.template(c,o,t):c!==void 0?c:""}).join(n));return[s,...r].join(`
`)}function gb(t,e="export.csv"){t="\uFEFF"+t;const n=new Blob([t],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=e,r.click(),URL.revokeObjectURL(s)}function bb(t){return[...new Set(t)]}function Qc(t,e){t.indexOf(e)>=0?t.splice(t.indexOf(e),1):t.push(e)}function Jc(t,e){for(let n of e)t.indexOf(n.value)<0&&t.push(n.value)}function ed(t,e){for(let n of e)t.indexOf(n.value)<0?t.push(n.value):t.splice(t.indexOf(n.value),1)}function td(t){t.length=0}function nd(t,e){e<=0||e>=t.length||([t[e-1],t[e]]=[t[e],t[e-1]])}function sd(t,e){e<=0||e>=t.length||(console.log(t[e-1],t[e]),[t[e-1],t[e]]=[t[e],t[e-1]])}function yb(t,e){Object.keys(t).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n](e))})}var id=typeof global=="object"&&global&&global.Object===Object&&global,Eb=typeof self=="object"&&self&&self.Object===Object&&self,it=id||Eb||Function("return this")(),Ut=it.Symbol,rd=Object.prototype,_b=rd.hasOwnProperty,wb=rd.toString,$s=Ut?Ut.toStringTag:void 0;function Nb(t){var e=_b.call(t,$s),n=t[$s];try{t[$s]=void 0;var s=!0}catch{}var r=wb.call(t);return s&&(e?t[$s]=n:delete t[$s]),r}var kb=Object.prototype,Tb=kb.toString;function Ab(t){return Tb.call(t)}var Cb="[object Null]",Sb="[object Undefined]",od=Ut?Ut.toStringTag:void 0;function Zn(t){return t==null?t===void 0?Sb:Cb:od&&od in Object(t)?Nb(t):Ab(t)}function Nt(t){return t!=null&&typeof t=="object"}var un=Array.isArray;function Ht(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function ad(t){return t}var Ob="[object AsyncFunction]",Lb="[object Function]",Bb="[object GeneratorFunction]",Vb="[object Proxy]";function wo(t){if(!Ht(t))return!1;var e=Zn(t);return e==Lb||e==Bb||e==Ob||e==Vb}var No=it["__core-js_shared__"],ld=function(){var t=/[^.]+$/.exec(No&&No.keys&&No.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ib(t){return!!ld&&ld in t}var vb=Function.prototype,xb=vb.toString;function fn(t){if(t!=null){try{return xb.call(t)}catch{}try{return t+""}catch{}}return""}var Db=/[\\^$.*+?()[\]{}|]/g,$b=/^\[object .+?Constructor\]$/,Mb=Function.prototype,Rb=Object.prototype,qb=Mb.toString,Pb=Rb.hasOwnProperty,jb=RegExp("^"+qb.call(Pb).replace(Db,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fb(t){if(!Ht(t)||Ib(t))return!1;var e=wo(t)?jb:$b;return e.test(fn(t))}function Ub(t,e){return t==null?void 0:t[e]}function mn(t,e){var n=Ub(t,e);return Fb(n)?n:void 0}var ko=mn(it,"WeakMap"),cd=Object.create,Hb=function(){function t(){}return function(e){if(!Ht(e))return{};if(cd)return cd(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function zb(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function dd(t,e){var n=-1,s=t.length;for(e||(e=Array(s));++n<s;)e[n]=t[n];return e}var Wb=800,Kb=16,Gb=Date.now;function Yb(t){var e=0,n=0;return function(){var s=Gb(),r=Kb-(s-n);if(n=s,r>0){if(++e>=Wb)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Xb(t){return function(){return t}}var zi=function(){try{var t=mn(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Zb=zi?function(t,e){return zi(t,"toString",{configurable:!0,enumerable:!1,value:Xb(e),writable:!0})}:ad,Qb=Yb(Zb);function Jb(t,e){for(var n=-1,s=t==null?0:t.length;++n<s&&e(t[n],n,t)!==!1;);return t}var e1=9007199254740991,t1=/^(?:0|[1-9]\d*)$/;function hd(t,e){var n=typeof t;return e=e??e1,!!e&&(n=="number"||n!="symbol"&&t1.test(t))&&t>-1&&t%1==0&&t<e}function To(t,e,n){e=="__proto__"&&zi?zi(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Ms(t,e){return t===e||t!==t&&e!==e}var n1=Object.prototype,s1=n1.hasOwnProperty;function ud(t,e,n){var s=t[e];(!(s1.call(t,e)&&Ms(s,n))||n===void 0&&!(e in t))&&To(t,e,n)}function Rs(t,e,n,s){var r=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var c=e[o],l=void 0;l===void 0&&(l=t[c]),r?To(n,c,l):ud(n,c,l)}return n}var fd=Math.max;function i1(t,e,n){return e=fd(e===void 0?t.length-1:e,0),function(){for(var s=arguments,r=-1,o=fd(s.length-e,0),a=Array(o);++r<o;)a[r]=s[e+r];r=-1;for(var c=Array(e+1);++r<e;)c[r]=s[r];return c[e]=n(a),zb(t,this,c)}}function r1(t,e){return Qb(i1(t,e,ad),t+"")}var o1=9007199254740991;function md(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=o1}function Wi(t){return t!=null&&md(t.length)&&!wo(t)}function a1(t,e,n){if(!Ht(n))return!1;var s=typeof e;return(s=="number"?Wi(n)&&hd(e,n.length):s=="string"&&e in n)?Ms(n[e],t):!1}function l1(t){return r1(function(e,n){var s=-1,r=n.length,o=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(r--,o):void 0,a&&a1(n[0],n[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++s<r;){var c=n[s];c&&t(e,c,s,o)}return e})}var c1=Object.prototype;function Ao(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||c1;return t===n}function d1(t,e){for(var n=-1,s=Array(t);++n<t;)s[n]=e(n);return s}var h1="[object Arguments]";function pd(t){return Nt(t)&&Zn(t)==h1}var gd=Object.prototype,u1=gd.hasOwnProperty,f1=gd.propertyIsEnumerable,Co=pd(function(){return arguments}())?pd:function(t){return Nt(t)&&u1.call(t,"callee")&&!f1.call(t,"callee")};function m1(){return!1}var bd=typeof H=="object"&&H&&!H.nodeType&&H,yd=bd&&typeof module=="object"&&module&&!module.nodeType&&module,p1=yd&&yd.exports===bd,Ed=p1?it.Buffer:void 0,g1=Ed?Ed.isBuffer:void 0,qs=g1||m1,b1="[object Arguments]",y1="[object Array]",E1="[object Boolean]",_1="[object Date]",w1="[object Error]",N1="[object Function]",k1="[object Map]",T1="[object Number]",A1="[object Object]",C1="[object RegExp]",S1="[object Set]",O1="[object String]",L1="[object WeakMap]",B1="[object ArrayBuffer]",V1="[object DataView]",I1="[object Float32Array]",v1="[object Float64Array]",x1="[object Int8Array]",D1="[object Int16Array]",$1="[object Int32Array]",M1="[object Uint8Array]",R1="[object Uint8ClampedArray]",q1="[object Uint16Array]",P1="[object Uint32Array]",G={};G[I1]=G[v1]=G[x1]=G[D1]=G[$1]=G[M1]=G[R1]=G[q1]=G[P1]=!0,G[b1]=G[y1]=G[B1]=G[E1]=G[V1]=G[_1]=G[w1]=G[N1]=G[k1]=G[T1]=G[A1]=G[C1]=G[S1]=G[O1]=G[L1]=!1;function j1(t){return Nt(t)&&md(t.length)&&!!G[Zn(t)]}function So(t){return function(e){return t(e)}}var _d=typeof H=="object"&&H&&!H.nodeType&&H,Ps=_d&&typeof module=="object"&&module&&!module.nodeType&&module,F1=Ps&&Ps.exports===_d,Oo=F1&&id.process,Qn=function(){try{var t=Ps&&Ps.require&&Ps.require("util").types;return t||Oo&&Oo.binding&&Oo.binding("util")}catch{}}(),wd=Qn&&Qn.isTypedArray,Lo=wd?So(wd):j1,U1=Object.prototype,H1=U1.hasOwnProperty;function Nd(t,e){var n=un(t),s=!n&&Co(t),r=!n&&!s&&qs(t),o=!n&&!s&&!r&&Lo(t),a=n||s||r||o,c=a?d1(t.length,String):[],l=c.length;for(var h in t)(e||H1.call(t,h))&&!(a&&(h=="length"||r&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||hd(h,l)))&&c.push(h);return c}function kd(t,e){return function(n){return t(e(n))}}var z1=kd(Object.keys,Object),W1=Object.prototype,K1=W1.hasOwnProperty;function G1(t){if(!Ao(t))return z1(t);var e=[];for(var n in Object(t))K1.call(t,n)&&n!="constructor"&&e.push(n);return e}function Bo(t){return Wi(t)?Nd(t):G1(t)}function Y1(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var X1=Object.prototype,Z1=X1.hasOwnProperty;function Q1(t){if(!Ht(t))return Y1(t);var e=Ao(t),n=[];for(var s in t)s=="constructor"&&(e||!Z1.call(t,s))||n.push(s);return n}function js(t){return Wi(t)?Nd(t,!0):Q1(t)}var Fs=mn(Object,"create");function J1(){this.__data__=Fs?Fs(null):{},this.size=0}function ey(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ty="__lodash_hash_undefined__",ny=Object.prototype,sy=ny.hasOwnProperty;function iy(t){var e=this.__data__;if(Fs){var n=e[t];return n===ty?void 0:n}return sy.call(e,t)?e[t]:void 0}var ry=Object.prototype,oy=ry.hasOwnProperty;function ay(t){var e=this.__data__;return Fs?e[t]!==void 0:oy.call(e,t)}var ly="__lodash_hash_undefined__";function cy(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Fs&&e===void 0?ly:e,this}function pn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}pn.prototype.clear=J1,pn.prototype.delete=ey,pn.prototype.get=iy,pn.prototype.has=ay,pn.prototype.set=cy;function dy(){this.__data__=[],this.size=0}function Ki(t,e){for(var n=t.length;n--;)if(Ms(t[n][0],e))return n;return-1}var hy=Array.prototype,uy=hy.splice;function fy(t){var e=this.__data__,n=Ki(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():uy.call(e,n,1),--this.size,!0}function my(t){var e=this.__data__,n=Ki(e,t);return n<0?void 0:e[n][1]}function py(t){return Ki(this.__data__,t)>-1}function gy(t,e){var n=this.__data__,s=Ki(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}function kt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}kt.prototype.clear=dy,kt.prototype.delete=fy,kt.prototype.get=my,kt.prototype.has=py,kt.prototype.set=gy;var Us=mn(it,"Map");function by(){this.size=0,this.__data__={hash:new pn,map:new(Us||kt),string:new pn}}function yy(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Gi(t,e){var n=t.__data__;return yy(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Ey(t){var e=Gi(this,t).delete(t);return this.size-=e?1:0,e}function _y(t){return Gi(this,t).get(t)}function wy(t){return Gi(this,t).has(t)}function Ny(t,e){var n=Gi(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}function gn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}gn.prototype.clear=by,gn.prototype.delete=Ey,gn.prototype.get=_y,gn.prototype.has=wy,gn.prototype.set=Ny;function Td(t,e){for(var n=-1,s=e.length,r=t.length;++n<s;)t[r+n]=e[n];return t}var Vo=kd(Object.getPrototypeOf,Object),ky="[object Object]",Ty=Function.prototype,Ay=Object.prototype,Ad=Ty.toString,Cy=Ay.hasOwnProperty,Sy=Ad.call(Object);function Oy(t){if(!Nt(t)||Zn(t)!=ky)return!1;var e=Vo(t);if(e===null)return!0;var n=Cy.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Ad.call(n)==Sy}function Ly(){this.__data__=new kt,this.size=0}function By(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Vy(t){return this.__data__.get(t)}function Iy(t){return this.__data__.has(t)}var vy=200;function xy(t,e){var n=this.__data__;if(n instanceof kt){var s=n.__data__;if(!Us||s.length<vy-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new gn(s)}return n.set(t,e),this.size=n.size,this}function rt(t){var e=this.__data__=new kt(t);this.size=e.size}rt.prototype.clear=Ly,rt.prototype.delete=By,rt.prototype.get=Vy,rt.prototype.has=Iy,rt.prototype.set=xy;function Dy(t,e){return t&&Rs(e,Bo(e),t)}function $y(t,e){return t&&Rs(e,js(e),t)}var Cd=typeof H=="object"&&H&&!H.nodeType&&H,Sd=Cd&&typeof module=="object"&&module&&!module.nodeType&&module,My=Sd&&Sd.exports===Cd,Od=My?it.Buffer:void 0,Ld=Od?Od.allocUnsafe:void 0;function Bd(t,e){if(e)return t.slice();var n=t.length,s=Ld?Ld(n):new t.constructor(n);return t.copy(s),s}function Ry(t,e){for(var n=-1,s=t==null?0:t.length,r=0,o=[];++n<s;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function Vd(){return[]}var qy=Object.prototype,Py=qy.propertyIsEnumerable,Id=Object.getOwnPropertySymbols,Io=Id?function(t){return t==null?[]:(t=Object(t),Ry(Id(t),function(e){return Py.call(t,e)}))}:Vd;function jy(t,e){return Rs(t,Io(t),e)}var Fy=Object.getOwnPropertySymbols,vd=Fy?function(t){for(var e=[];t;)Td(e,Io(t)),t=Vo(t);return e}:Vd;function Uy(t,e){return Rs(t,vd(t),e)}function xd(t,e,n){var s=e(t);return un(t)?s:Td(s,n(t))}function vo(t){return xd(t,Bo,Io)}function Hy(t){return xd(t,js,vd)}var xo=mn(it,"DataView"),Do=mn(it,"Promise"),$o=mn(it,"Set"),Dd="[object Map]",zy="[object Object]",$d="[object Promise]",Md="[object Set]",Rd="[object WeakMap]",qd="[object DataView]",Wy=fn(xo),Ky=fn(Us),Gy=fn(Do),Yy=fn($o),Xy=fn(ko),je=Zn;(xo&&je(new xo(new ArrayBuffer(1)))!=qd||Us&&je(new Us)!=Dd||Do&&je(Do.resolve())!=$d||$o&&je(new $o)!=Md||ko&&je(new ko)!=Rd)&&(je=function(t){var e=Zn(t),n=e==zy?t.constructor:void 0,s=n?fn(n):"";if(s)switch(s){case Wy:return qd;case Ky:return Dd;case Gy:return $d;case Yy:return Md;case Xy:return Rd}return e});var Zy=Object.prototype,Qy=Zy.hasOwnProperty;function Jy(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Qy.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Yi=it.Uint8Array;function Mo(t){var e=new t.constructor(t.byteLength);return new Yi(e).set(new Yi(t)),e}function eE(t,e){var n=e?Mo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var tE=/\w*$/;function nE(t){var e=new t.constructor(t.source,tE.exec(t));return e.lastIndex=t.lastIndex,e}var Pd=Ut?Ut.prototype:void 0,jd=Pd?Pd.valueOf:void 0;function sE(t){return jd?Object(jd.call(t)):{}}function Fd(t,e){var n=e?Mo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var iE="[object Boolean]",rE="[object Date]",oE="[object Map]",aE="[object Number]",lE="[object RegExp]",cE="[object Set]",dE="[object String]",hE="[object Symbol]",uE="[object ArrayBuffer]",fE="[object DataView]",mE="[object Float32Array]",pE="[object Float64Array]",gE="[object Int8Array]",bE="[object Int16Array]",yE="[object Int32Array]",EE="[object Uint8Array]",_E="[object Uint8ClampedArray]",wE="[object Uint16Array]",NE="[object Uint32Array]";function kE(t,e,n){var s=t.constructor;switch(e){case uE:return Mo(t);case iE:case rE:return new s(+t);case fE:return eE(t,n);case mE:case pE:case gE:case bE:case yE:case EE:case _E:case wE:case NE:return Fd(t,n);case oE:return new s;case aE:case dE:return new s(t);case lE:return nE(t);case cE:return new s;case hE:return sE(t)}}function Ud(t){return typeof t.constructor=="function"&&!Ao(t)?Hb(Vo(t)):{}}var TE="[object Map]";function AE(t){return Nt(t)&&je(t)==TE}var Hd=Qn&&Qn.isMap,CE=Hd?So(Hd):AE,SE="[object Set]";function OE(t){return Nt(t)&&je(t)==SE}var zd=Qn&&Qn.isSet,LE=zd?So(zd):OE,BE=1,VE=2,IE=4,Wd="[object Arguments]",vE="[object Array]",xE="[object Boolean]",DE="[object Date]",$E="[object Error]",Kd="[object Function]",ME="[object GeneratorFunction]",RE="[object Map]",qE="[object Number]",Gd="[object Object]",PE="[object RegExp]",jE="[object Set]",FE="[object String]",UE="[object Symbol]",HE="[object WeakMap]",zE="[object ArrayBuffer]",WE="[object DataView]",KE="[object Float32Array]",GE="[object Float64Array]",YE="[object Int8Array]",XE="[object Int16Array]",ZE="[object Int32Array]",QE="[object Uint8Array]",JE="[object Uint8ClampedArray]",e0="[object Uint16Array]",t0="[object Uint32Array]",K={};K[Wd]=K[vE]=K[zE]=K[WE]=K[xE]=K[DE]=K[KE]=K[GE]=K[YE]=K[XE]=K[ZE]=K[RE]=K[qE]=K[Gd]=K[PE]=K[jE]=K[FE]=K[UE]=K[QE]=K[JE]=K[e0]=K[t0]=!0,K[$E]=K[Kd]=K[HE]=!1;function Xi(t,e,n,s,r,o){var a,c=e&BE,l=e&VE,h=e&IE;if(a!==void 0)return a;if(!Ht(t))return t;var f=un(t);if(f){if(a=Jy(t),!c)return dd(t,a)}else{var u=je(t),p=u==Kd||u==ME;if(qs(t))return Bd(t,c);if(u==Gd||u==Wd||p&&!r){if(a=l||p?{}:Ud(t),!c)return l?Uy(t,$y(a,t)):jy(t,Dy(a,t))}else{if(!K[u])return r?t:{};a=kE(t,u,c)}}o||(o=new rt);var g=o.get(t);if(g)return g;o.set(t,a),LE(t)?t.forEach(function(_){a.add(Xi(_,e,n,_,t,o))}):CE(t)&&t.forEach(function(_,w){a.set(w,Xi(_,e,n,w,t,o))});var y=h?l?Hy:vo:l?js:Bo,E=f?void 0:y(t);return Jb(E||t,function(_,w){E&&(w=_,_=t[w]),ud(a,w,Xi(_,e,n,w,t,o))}),a}var n0=1,s0=4;function Jn(t){return Xi(t,n0|s0)}var i0="__lodash_hash_undefined__";function r0(t){return this.__data__.set(t,i0),this}function o0(t){return this.__data__.has(t)}function Zi(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new gn;++e<n;)this.add(t[e])}Zi.prototype.add=Zi.prototype.push=r0,Zi.prototype.has=o0;function a0(t,e){for(var n=-1,s=t==null?0:t.length;++n<s;)if(e(t[n],n,t))return!0;return!1}function l0(t,e){return t.has(e)}var c0=1,d0=2;function Yd(t,e,n,s,r,o){var a=n&c0,c=t.length,l=e.length;if(c!=l&&!(a&&l>c))return!1;var h=o.get(t),f=o.get(e);if(h&&f)return h==e&&f==t;var u=-1,p=!0,g=n&d0?new Zi:void 0;for(o.set(t,e),o.set(e,t);++u<c;){var y=t[u],E=e[u];if(s)var _=a?s(E,y,u,e,t,o):s(y,E,u,t,e,o);if(_!==void 0){if(_)continue;p=!1;break}if(g){if(!a0(e,function(w,T){if(!l0(g,T)&&(y===w||r(y,w,n,s,o)))return g.push(T)})){p=!1;break}}else if(!(y===E||r(y,E,n,s,o))){p=!1;break}}return o.delete(t),o.delete(e),p}function h0(t){var e=-1,n=Array(t.size);return t.forEach(function(s,r){n[++e]=[r,s]}),n}function u0(t){var e=-1,n=Array(t.size);return t.forEach(function(s){n[++e]=s}),n}var f0=1,m0=2,p0="[object Boolean]",g0="[object Date]",b0="[object Error]",y0="[object Map]",E0="[object Number]",_0="[object RegExp]",w0="[object Set]",N0="[object String]",k0="[object Symbol]",T0="[object ArrayBuffer]",A0="[object DataView]",Xd=Ut?Ut.prototype:void 0,Ro=Xd?Xd.valueOf:void 0;function C0(t,e,n,s,r,o,a){switch(n){case A0:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case T0:return!(t.byteLength!=e.byteLength||!o(new Yi(t),new Yi(e)));case p0:case g0:case E0:return Ms(+t,+e);case b0:return t.name==e.name&&t.message==e.message;case _0:case N0:return t==e+"";case y0:var c=h0;case w0:var l=s&f0;if(c||(c=u0),t.size!=e.size&&!l)return!1;var h=a.get(t);if(h)return h==e;s|=m0,a.set(t,e);var f=Yd(c(t),c(e),s,r,o,a);return a.delete(t),f;case k0:if(Ro)return Ro.call(t)==Ro.call(e)}return!1}var S0=1,O0=Object.prototype,L0=O0.hasOwnProperty;function B0(t,e,n,s,r,o){var a=n&S0,c=vo(t),l=c.length,h=vo(e),f=h.length;if(l!=f&&!a)return!1;for(var u=l;u--;){var p=c[u];if(!(a?p in e:L0.call(e,p)))return!1}var g=o.get(t),y=o.get(e);if(g&&y)return g==e&&y==t;var E=!0;o.set(t,e),o.set(e,t);for(var _=a;++u<l;){p=c[u];var w=t[p],T=e[p];if(s)var A=a?s(T,w,p,e,t,o):s(w,T,p,t,e,o);if(!(A===void 0?w===T||r(w,T,n,s,o):A)){E=!1;break}_||(_=p=="constructor")}if(E&&!_){var S=t.constructor,O=e.constructor;S!=O&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof O=="function"&&O instanceof O)&&(E=!1)}return o.delete(t),o.delete(e),E}var V0=1,Zd="[object Arguments]",Qd="[object Array]",Qi="[object Object]",I0=Object.prototype,Jd=I0.hasOwnProperty;function v0(t,e,n,s,r,o){var a=un(t),c=un(e),l=a?Qd:je(t),h=c?Qd:je(e);l=l==Zd?Qi:l,h=h==Zd?Qi:h;var f=l==Qi,u=h==Qi,p=l==h;if(p&&qs(t)){if(!qs(e))return!1;a=!0,f=!1}if(p&&!f)return o||(o=new rt),a||Lo(t)?Yd(t,e,n,s,r,o):C0(t,e,l,n,s,r,o);if(!(n&V0)){var g=f&&Jd.call(t,"__wrapped__"),y=u&&Jd.call(e,"__wrapped__");if(g||y){var E=g?t.value():t,_=y?e.value():e;return o||(o=new rt),r(E,_,n,s,o)}}return p?(o||(o=new rt),B0(t,e,n,s,r,o)):!1}function eh(t,e,n,s,r){return t===e?!0:t==null||e==null||!Nt(t)&&!Nt(e)?t!==t&&e!==e:v0(t,e,n,s,eh,r)}function x0(t){return function(e,n,s){for(var r=-1,o=Object(e),a=s(e),c=a.length;c--;){var l=a[++r];if(n(o[l],l,o)===!1)break}return e}}var D0=x0();function qo(t,e,n){(n!==void 0&&!Ms(t[e],n)||n===void 0&&!(e in t))&&To(t,e,n)}function $0(t){return Nt(t)&&Wi(t)}function Po(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function M0(t){return Rs(t,js(t))}function R0(t,e,n,s,r,o,a){var c=Po(t,n),l=Po(e,n),h=a.get(l);if(h){qo(t,n,h);return}var f=o?o(c,l,n+"",t,e,a):void 0,u=f===void 0;if(u){var p=un(l),g=!p&&qs(l),y=!p&&!g&&Lo(l);f=l,p||g||y?un(c)?f=c:$0(c)?f=dd(c):g?(u=!1,f=Bd(l,!0)):y?(u=!1,f=Fd(l,!0)):f=[]:Oy(l)||Co(l)?(f=c,Co(c)?f=M0(c):(!Ht(c)||wo(c))&&(f=Ud(l))):u=!1}u&&(a.set(l,f),r(f,l,s,o,a),a.delete(l)),qo(t,n,f)}function th(t,e,n,s,r){t!==e&&D0(e,function(o,a){if(r||(r=new rt),Ht(o))R0(t,e,a,n,th,s,r);else{var c=s?s(Po(t,a),o,a+"",t,e,r):void 0;c===void 0&&(c=o),qo(t,a,c)}},js)}function jo(t,e){return eh(t,e)}var zt=l1(function(t,e,n){th(t,e,n)}),v=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(v||{});class ot{constructor(e,n,s={}){this.attrName=e,this.keyName=n;const r=v.TYPE&v.ATTRIBUTE;this.scope=s.scope!=null?s.scope&v.LEVEL|r:v.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class es extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const nh=class ml{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let s=null;try{s=e.parentNode}catch{return null}return this.find(s,n)}return null}create(e,n,s){const r=this.query(n);if(r==null)throw new es(`Unable to create ${n} blot`);const o=r,a=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:o.create(s),c=new o(e,a,s);return ml.blots.set(c.domNode,c),c}find(e,n=!1){return ml.find(e,n)}query(e,n=v.ANY){let s;return typeof e=="string"?s=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?s=this.types.text:typeof e=="number"?e&v.LEVEL&v.BLOCK?s=this.types.block:e&v.LEVEL&v.INLINE&&(s=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(r=>(s=this.classes[r],!!s)),s=s||this.tags[e.tagName]),s==null?null:"scope"in s&&n&v.LEVEL&s.scope&&n&v.TYPE&s.scope?s:null}register(...e){return e.map(n=>{const s="blotName"in n,r="attrName"in n;if(!s&&!r)throw new es("Invalid definition");if(s&&n.blotName==="abstract")throw new es("Cannot register abstract class");const o=s?n.blotName:r?n.attrName:void 0;return this.types[o]=n,r?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):s&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(a=>a.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(a=>{(this.tags[a]==null||n.className==null)&&(this.tags[a]=n)}))),n})}};nh.blots=new WeakMap;let ts=nh;function sh(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class q0 extends ot{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){sh(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(sh(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const Fe=q0;function Fo(t){const e=t.split("-"),n=e.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return e[0]+n}class P0 extends ot{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[Fo(this.keyName)]=n,!0):!1}remove(e){e.style[Fo(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[Fo(this.keyName)];return this.canAdd(e,n)?n:""}}const Wt=P0;class j0{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=ts.find(this.domNode);if(e==null)return;const n=ot.keys(this.domNode),s=Fe.keys(this.domNode),r=Wt.keys(this.domNode);n.concat(s).concat(r).forEach(o=>{const a=e.scroll.query(o,v.ATTRIBUTE);a instanceof ot&&(this.attributes[a.attrName]=a)})}copy(e){Object.keys(this.attributes).forEach(n=>{const s=this.attributes[n].value(this.domNode);e.format(n,s)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const Ji=j0,ih=class{constructor(e,n){this.scroll=e,this.domNode=n,ts.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new es("Blot definition missing tagName");let n,s;return Array.isArray(this.tagName)?(typeof e=="string"?(s=e.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof e=="number"&&(s=e),typeof s=="number"?n=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?n=document.createElement(s):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),ts.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,s,r){const o=this.isolate(e,n);if(this.scroll.query(s,v.BLOT)!=null&&r)o.wrap(s,r);else if(this.scroll.query(s,v.ATTRIBUTE)!=null){const a=this.scroll.create(this.statics.scope);o.wrap(a),a.format(s,r)}}insertAt(e,n,s){const r=s==null?this.scroll.create("text",n):this.scroll.create(n,s),o=this.split(e);this.parent.insertBefore(r,o||void 0)}isolate(e,n){const s=this.split(e);if(s==null)throw new Error("Attempt to isolate at end");return s.split(n),s}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new es(`Cannot wrap ${e}`);return s.appendChild(this),s}};ih.blotName="abstract";let rh=ih;const oh=class extends rh{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};oh.scope=v.INLINE_BLOT;const ae=oh;class F0{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let s=n();for(;s&&e>0;)e-=1,s=n();return s}contains(e){const n=this.iterator();let s=n();for(;s;){if(s===e)return!0;s=n()}return!1}indexOf(e){const n=this.iterator();let s=n(),r=0;for(;s;){if(s===e)return r;r+=1,s=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,s=this.head;for(;s!=null;){if(s===e)return n;n+=s.length(),s=s.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const s=this.iterator();let r=s();for(;r;){const o=r.length();if(e<o||n&&e===o&&(r.next==null||r.next.length()!==0))return[r,e];e-=o,r=s()}return[null,0]}forEach(e){const n=this.iterator();let s=n();for(;s;)e(s),s=n()}forEachAt(e,n,s){if(n<=0)return;const[r,o]=this.find(e);let a=e-o;const c=this.iterator(r);let l=c();for(;l&&a<e+n;){const h=l.length();e>a?s(l,e-a,Math.min(n,a+h-e)):s(l,0,Math.min(h,e+n-a)),a+=h,l=c()}}map(e){return this.reduce((n,s)=>(n.push(e(s)),n),[])}reduce(e,n){const s=this.iterator();let r=s();for(;r;)n=e(n,r),r=s();return n}}function ah(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const s=e.create(v.INLINE);return Array.from(t.childNodes).forEach(r=>{s.domNode.appendChild(r)}),t.parentNode&&t.parentNode.replaceChild(s.domNode,t),s.attach(),s}}const lh=class nn extends rh{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,nn.uiClass&&this.uiNode.classList.add(nn.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new F0,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=ah(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof es)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(s,r,o)=>{s.deleteAt(r,o)})}descendant(e,n=0){const[s,r]=this.children.find(n);return e.blotName==null&&e(s)||e.blotName!=null&&s instanceof e?[s,r]:s instanceof nn?s.descendant(e,r):[null,-1]}descendants(e,n=0,s=Number.MAX_VALUE){let r=[],o=s;return this.children.forEachAt(n,s,(a,c,l)=>{(e.blotName==null&&e(a)||e.blotName!=null&&a instanceof e)&&r.push(a),a instanceof nn&&(r=r.concat(a.descendants(e,c,o))),o-=l}),r}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(s=>n instanceof s)||(n.statics.scope===v.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof nn?n.unwrap():n.remove())})}formatAt(e,n,s,r){this.children.forEachAt(e,n,(o,a,c)=>{o.formatAt(a,c,s,r)})}insertAt(e,n,s){const[r,o]=this.children.find(e);if(r)r.insertAt(o,n,s);else{const a=s==null?this.scroll.create("text",n):this.scroll.create(n,s);this.appendChild(a)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let s=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(s=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(e.domNode,s),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(s=>{e.insertBefore(s,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[s,r]=this.children.find(e,n),o=[[this,e]];return s instanceof nn?o.concat(s.path(r,n)):(s!=null&&o.push([s,r]),o)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return s instanceof nn&&this.moveChildren(s),super.replaceWith(s)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(e,this.length(),(r,o,a)=>{const c=r.split(o,n);c!=null&&s.appendChild(c)}),s}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const s=[],r=[];e.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(s.push(...o.addedNodes),r.push(...o.removedNodes))}),r.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const a=this.scroll.find(o);a!=null&&(a.domNode.parentNode==null||a.domNode.parentNode===this.domNode)&&a.detach()}),s.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,a)=>o===a?0:o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let a=null;o.nextSibling!=null&&(a=this.scroll.find(o.nextSibling));const c=ah(o,this.scroll);(c.next!==a||c.next==null)&&(c.parent!=null&&c.parent.removeChild(this),this.insertBefore(c,a||void 0))}),this.enforceAllowedChildren()}};lh.uiClass="";const Ue=lh;function U0(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const ns=class Ns extends Ue{static create(e){return super.create(e)}static formats(e,n){const s=n.query(Ns.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Ji(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(s=>{s instanceof Ns||(s=s.wrap(Ns.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(e,v.INLINE);if(s==null)return;s instanceof ot?this.attributes.attribute(s,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,r){this.formats()[s]!=null||this.scroll.query(s,v.ATTRIBUTE)?this.isolate(e,n).format(s,r):super.formatAt(e,n,s,r)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const s=this.next;s instanceof Ns&&s.prev===this&&U0(n,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(e,n){const s=super.wrap(e,n);return s instanceof Ns&&this.attributes.move(s),s}};ns.allowedChildren=[ns,ae],ns.blotName="inline",ns.scope=v.INLINE_BLOT,ns.tagName="SPAN";const Uo=ns,ss=class pl extends Ue{static create(e){return super.create(e)}static formats(e,n){const s=n.query(pl.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Ji(this.domNode)}format(e,n){const s=this.scroll.query(e,v.BLOCK);s!=null&&(s instanceof ot?this.attributes.attribute(s,n):e===this.statics.blotName&&!n?this.replaceWith(pl.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,r){this.scroll.query(s,v.BLOCK)!=null?this.format(s,r):super.formatAt(e,n,s,r)}insertAt(e,n,s){if(s==null||this.scroll.query(n,v.INLINE)!=null)super.insertAt(e,n,s);else{const r=this.split(e);if(r!=null){const o=this.scroll.create(n,s);r.parent.insertBefore(o,r)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};ss.blotName="block",ss.scope=v.BLOCK_BLOT,ss.tagName="P",ss.allowedChildren=[Uo,ss,ae];const Hs=ss,Ho=class extends Ue{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,s,r){super.formatAt(e,n,s,r),this.enforceAllowedChildren()}insertAt(e,n,s){super.insertAt(e,n,s),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Ho.blotName="container",Ho.scope=v.BLOCK_BLOT;const er=Ho;class H0 extends ae{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,s,r){e===0&&n===this.length()?this.format(s,r):super.formatAt(e,n,s,r)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Ae=H0,z0={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},W0=100,is=class extends Ue{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,z0),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const s=this.registry.find(e,n);return s?s.scroll===this?s:n?this.find(s.scroll.domNode.parentNode,!0):null:null}query(e,n=v.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(e,n)}formatAt(e,n,s,r){this.update(),super.formatAt(e,n,s,r)}insertAt(e,n,s){this.update(),super.insertAt(e,n,s)}optimize(e=[],n={}){super.optimize(n);const s=n.mutationsMap||new WeakMap;let r=Array.from(this.observer.takeRecords());for(;r.length>0;)e.push(r.pop());const o=(l,h=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(s.has(l.domNode)||s.set(l.domNode,[]),h&&o(l.parent))},a=l=>{s.has(l.domNode)&&(l instanceof Ue&&l.children.forEach(a),s.delete(l.domNode),l.optimize(n))};let c=e;for(let l=0;c.length>0;l+=1){if(l>=W0)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(h=>{const f=this.find(h.target,!0);f!=null&&(f.domNode===h.target&&(h.type==="childList"?(o(this.find(h.previousSibling,!1)),Array.from(h.addedNodes).forEach(u=>{const p=this.find(u,!1);o(p,!1),p instanceof Ue&&p.children.forEach(g=>{o(g,!1)})})):h.type==="attributes"&&o(f.prev)),o(f))}),this.children.forEach(a),c=Array.from(this.observer.takeRecords()),r=c.slice();r.length>0;)e.push(r.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const s=new WeakMap;e.map(r=>{const o=this.find(r.target,!0);return o==null?null:s.has(o.domNode)?(s.get(o.domNode).push(r),null):(s.set(o.domNode,[r]),o)}).forEach(r=>{r!=null&&r!==this&&s.has(r.domNode)&&r.update(s.get(r.domNode)||[],n)}),n.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),n),this.optimize(e,n)}};is.blotName="scroll",is.defaultChild=Hs,is.allowedChildren=[Hs,er],is.scope=v.BLOCK_BLOT,is.tagName="DIV";const zo=is,Wo=class Au extends ae{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,s){s==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,s)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Au&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(e,n){e.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Wo.blotName="text",Wo.scope=v.INLINE_BLOT;const tr=Wo,K0=Object.freeze(Object.defineProperty({__proto__:null,Attributor:ot,AttributorStore:Ji,BlockBlot:Hs,ClassAttributor:Fe,ContainerBlot:er,EmbedBlot:Ae,InlineBlot:Uo,LeafBlot:ae,ParentBlot:Ue,Registry:ts,Scope:v,ScrollBlot:zo,StyleAttributor:Wt,TextBlot:tr},Symbol.toStringTag,{value:"Module"}));var Kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ch(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ko={exports:{}},Ce=-1,me=1,J=0;function zs(t,e,n,s,r){if(t===e)return t?[[J,t]]:[];if(n!=null){var o=n_(t,e,n);if(o)return o}var a=Go(t,e),c=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=nr(t,e);var l=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var h=G0(t,e);return c&&h.unshift([J,c]),l&&h.push([J,l]),Yo(h,r),s&&Z0(h),h}function G0(t,e){var n;if(!t)return[[me,e]];if(!e)return[[Ce,t]];var s=t.length>e.length?t:e,r=t.length>e.length?e:t,o=s.indexOf(r);if(o!==-1)return n=[[me,s.substring(0,o)],[J,r],[me,s.substring(o+r.length)]],t.length>e.length&&(n[0][0]=n[2][0]=Ce),n;if(r.length===1)return[[Ce,t],[me,e]];var a=X0(t,e);if(a){var c=a[0],l=a[1],h=a[2],f=a[3],u=a[4],p=zs(c,h),g=zs(l,f);return p.concat([[J,u]],g)}return Y0(t,e)}function Y0(t,e){for(var n=t.length,s=e.length,r=Math.ceil((n+s)/2),o=r,a=2*r,c=new Array(a),l=new Array(a),h=0;h<a;h++)c[h]=-1,l[h]=-1;c[o+1]=0,l[o+1]=0;for(var f=n-s,u=f%2!==0,p=0,g=0,y=0,E=0,_=0;_<r;_++){for(var w=-_+p;w<=_-g;w+=2){var T=o+w,A;w===-_||w!==_&&c[T-1]<c[T+1]?A=c[T+1]:A=c[T-1]+1;for(var S=A-w;A<n&&S<s&&t.charAt(A)===e.charAt(S);)A++,S++;if(c[T]=A,A>n)g+=2;else if(S>s)p+=2;else if(u){var O=o+f-w;if(O>=0&&O<a&&l[O]!==-1){var L=n-l[O];if(A>=L)return dh(t,e,A,S)}}}for(var x=-_+y;x<=_-E;x+=2){var O=o+x,L;x===-_||x!==_&&l[O-1]<l[O+1]?L=l[O+1]:L=l[O-1]+1;for(var M=L-x;L<n&&M<s&&t.charAt(n-L-1)===e.charAt(s-M-1);)L++,M++;if(l[O]=L,L>n)E+=2;else if(M>s)y+=2;else if(!u){var T=o+f-x;if(T>=0&&T<a&&c[T]!==-1){var A=c[T],S=o+A-T;if(L=n-L,A>=L)return dh(t,e,A,S)}}}}return[[Ce,t],[me,e]]}function dh(t,e,n,s){var r=t.substring(0,n),o=e.substring(0,s),a=t.substring(n),c=e.substring(s),l=zs(r,o),h=zs(a,c);return l.concat(h)}function Go(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,s=Math.min(t.length,e.length),r=s,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?(n=r,o=n):s=r,r=Math.floor((s-n)/2+n);return ph(t.charCodeAt(r-1))&&r--,r}function hh(t,e){var n=t.length,s=e.length;if(n==0||s==0)return 0;n>s?t=t.substring(n-s):n<s&&(e=e.substring(0,n));var r=Math.min(n,s);if(t==e)return r;for(var o=0,a=1;;){var c=t.substring(r-a),l=e.indexOf(c);if(l==-1)return o;a+=l,(l==0||t.substring(r-a)==e.substring(0,a))&&(o=a,a++)}}function nr(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,s=Math.min(t.length,e.length),r=s,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?(n=r,o=n):s=r,r=Math.floor((s-n)/2+n);return gh(t.charCodeAt(t.length-r))&&r--,r}function X0(t,e){var n=t.length>e.length?t:e,s=t.length>e.length?e:t;if(n.length<4||s.length*2<n.length)return null;function r(g,y,E){for(var _=g.substring(E,E+Math.floor(g.length/4)),w=-1,T="",A,S,O,L;(w=y.indexOf(_,w+1))!==-1;){var x=Go(g.substring(E),y.substring(w)),M=nr(g.substring(0,E),y.substring(0,w));T.length<M+x&&(T=y.substring(w-M,w)+y.substring(w,w+x),A=g.substring(0,E-M),S=g.substring(E+x),O=y.substring(0,w-M),L=y.substring(w+x))}return T.length*2>=g.length?[A,S,O,L,T]:null}var o=r(n,s,Math.ceil(n.length/4)),a=r(n,s,Math.ceil(n.length/2)),c;if(!o&&!a)return null;a?o?c=o[4].length>a[4].length?o:a:c=a:c=o;var l,h,f,u;t.length>e.length?(l=c[0],h=c[1],f=c[2],u=c[3]):(f=c[0],u=c[1],l=c[2],h=c[3]);var p=c[4];return[l,h,f,u,p]}function Z0(t){for(var e=!1,n=[],s=0,r=null,o=0,a=0,c=0,l=0,h=0;o<t.length;)t[o][0]==J?(n[s++]=o,a=l,c=h,l=0,h=0,r=t[o][1]):(t[o][0]==me?l+=t[o][1].length:h+=t[o][1].length,r&&r.length<=Math.max(a,c)&&r.length<=Math.max(l,h)&&(t.splice(n[s-1],0,[Ce,r]),t[n[s-1]+1][0]=me,s--,s--,o=s>0?n[s-1]:-1,a=0,c=0,l=0,h=0,r=null,e=!0)),o++;for(e&&Yo(t),e_(t),o=1;o<t.length;){if(t[o-1][0]==Ce&&t[o][0]==me){var f=t[o-1][1],u=t[o][1],p=hh(f,u),g=hh(u,f);p>=g?(p>=f.length/2||p>=u.length/2)&&(t.splice(o,0,[J,u.substring(0,p)]),t[o-1][1]=f.substring(0,f.length-p),t[o+1][1]=u.substring(p),o++):(g>=f.length/2||g>=u.length/2)&&(t.splice(o,0,[J,f.substring(0,g)]),t[o-1][0]=me,t[o-1][1]=u.substring(0,u.length-g),t[o+1][0]=Ce,t[o+1][1]=f.substring(g),o++),o++}o++}}var uh=/[^a-zA-Z0-9]/,fh=/\s/,mh=/[\r\n]/,Q0=/\n\r?\n$/,J0=/^\r?\n\r?\n/;function e_(t){function e(g,y){if(!g||!y)return 6;var E=g.charAt(g.length-1),_=y.charAt(0),w=E.match(uh),T=_.match(uh),A=w&&E.match(fh),S=T&&_.match(fh),O=A&&E.match(mh),L=S&&_.match(mh),x=O&&g.match(Q0),M=L&&y.match(J0);return x||M?5:O||L?4:w&&!A&&S?3:A||S?2:w||T?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==J&&t[n+1][0]==J){var s=t[n-1][1],r=t[n][1],o=t[n+1][1],a=nr(s,r);if(a){var c=r.substring(r.length-a);s=s.substring(0,s.length-a),r=c+r.substring(0,r.length-a),o=c+o}for(var l=s,h=r,f=o,u=e(s,r)+e(r,o);r.charAt(0)===o.charAt(0);){s+=r.charAt(0),r=r.substring(1)+o.charAt(0),o=o.substring(1);var p=e(s,r)+e(r,o);p>=u&&(u=p,l=s,h=r,f=o)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=h,f?t[n+1][1]=f:(t.splice(n+1,1),n--))}n++}}function Yo(t,e){t.push([J,""]);for(var n=0,s=0,r=0,o="",a="",c;n<t.length;){if(n<t.length-1&&!t[n][1]){t.splice(n,1);continue}switch(t[n][0]){case me:r++,a+=t[n][1],n++;break;case Ce:s++,o+=t[n][1],n++;break;case J:var l=n-r-s-1;if(e){if(l>=0&&yh(t[l][1])){var h=t[l][1].slice(-1);if(t[l][1]=t[l][1].slice(0,-1),o=h+o,a=h+a,!t[l][1]){t.splice(l,1),n--;var f=l-1;t[f]&&t[f][0]===me&&(r++,a=t[f][1]+a,f--),t[f]&&t[f][0]===Ce&&(s++,o=t[f][1]+o,f--),l=f}}if(bh(t[n][1])){var h=t[n][1].charAt(0);t[n][1]=t[n][1].slice(1),o+=h,a+=h}}if(n<t.length-1&&!t[n][1]){t.splice(n,1);break}if(o.length>0||a.length>0){o.length>0&&a.length>0&&(c=Go(a,o),c!==0&&(l>=0?t[l][1]+=a.substring(0,c):(t.splice(0,0,[J,a.substring(0,c)]),n++),a=a.substring(c),o=o.substring(c)),c=nr(a,o),c!==0&&(t[n][1]=a.substring(a.length-c)+t[n][1],a=a.substring(0,a.length-c),o=o.substring(0,o.length-c)));var u=r+s;o.length===0&&a.length===0?(t.splice(n-u,u),n=n-u):o.length===0?(t.splice(n-u,u,[me,a]),n=n-u+1):a.length===0?(t.splice(n-u,u,[Ce,o]),n=n-u+1):(t.splice(n-u,u,[Ce,o],[me,a]),n=n-u+2)}n!==0&&t[n-1][0]===J?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,r=0,s=0,o="",a="";break}}t[t.length-1][1]===""&&t.pop();var p=!1;for(n=1;n<t.length-1;)t[n-1][0]===J&&t[n+1][0]===J&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),p=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),p=!0)),n++;p&&Yo(t,e)}function ph(t){return t>=55296&&t<=56319}function gh(t){return t>=56320&&t<=57343}function bh(t){return gh(t.charCodeAt(0))}function yh(t){return ph(t.charCodeAt(t.length-1))}function t_(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}function Xo(t,e,n,s){return yh(t)||bh(s)?null:t_([[J,t],[Ce,e],[me,n],[J,s]])}function n_(t,e,n){var s=typeof n=="number"?{index:n,length:0}:n.oldRange,r=typeof n=="number"?null:n.newRange,o=t.length,a=e.length;if(s.length===0&&(r===null||r.length===0)){var c=s.index,l=t.slice(0,c),h=t.slice(c),f=r?r.index:null;e:{var u=c+a-o;if(f!==null&&f!==u||u<0||u>a)break e;var p=e.slice(0,u),g=e.slice(u);if(g!==h)break e;var y=Math.min(c,u),E=l.slice(0,y),_=p.slice(0,y);if(E!==_)break e;var w=l.slice(y),T=p.slice(y);return Xo(E,w,T,h)}e:{if(f!==null&&f!==c)break e;var A=c,p=e.slice(0,A),g=e.slice(A);if(p!==l)break e;var S=Math.min(o-A,a-A),O=h.slice(h.length-S),L=g.slice(g.length-S);if(O!==L)break e;var w=h.slice(0,h.length-S),T=g.slice(0,g.length-S);return Xo(l,w,T,O)}}if(s.length>0&&r&&r.length===0)e:{var E=t.slice(0,s.index),O=t.slice(s.index+s.length),y=E.length,S=O.length;if(a<y+S)break e;var _=e.slice(0,y),L=e.slice(a-S);if(E!==_||O!==L)break e;var w=t.slice(y,o-S),T=e.slice(y,a-S);return Xo(E,w,T,O)}return null}function sr(t,e,n,s){return zs(t,e,n,s,!0)}sr.INSERT=me,sr.DELETE=Ce,sr.EQUAL=J;var s_=sr,ir={exports:{}};ir.exports,function(t,e){var n=200,s="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",a="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",f="[object Function]",u="[object GeneratorFunction]",p="[object Map]",g="[object Number]",y="[object Object]",E="[object Promise]",_="[object RegExp]",w="[object Set]",T="[object String]",A="[object Symbol]",S="[object WeakMap]",O="[object ArrayBuffer]",L="[object DataView]",x="[object Float32Array]",M="[object Float64Array]",z="[object Int8Array]",W="[object Int16Array]",Y="[object Int32Array]",ee="[object Uint8Array]",Z="[object Uint8ClampedArray]",Me="[object Uint16Array]",Re="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,pe=/\w*$/,Xt=/^\[object .+?Constructor\]$/,Ze=/^(?:0|[1-9]\d*)$/,P={};P[o]=P[a]=P[O]=P[L]=P[c]=P[l]=P[x]=P[M]=P[z]=P[W]=P[Y]=P[p]=P[g]=P[y]=P[_]=P[w]=P[T]=P[A]=P[ee]=P[Z]=P[Me]=P[Re]=!0,P[h]=P[f]=P[S]=!1;var wn=typeof Kt=="object"&&Kt&&Kt.Object===Object&&Kt,Ot=typeof self=="object"&&self&&self.Object===Object&&self,ce=wn||Ot||Function("return this")(),Qe=e&&!e.nodeType&&e,q=Qe&&!0&&t&&!t.nodeType&&t,dt=q&&q.exports===Qe;function Zt(d,m){return d.set(m[0],m[1]),d}function te(d,m){return d.add(m),d}function Qt(d,m){for(var b=-1,N=d?d.length:0;++b<N&&m(d[b],b,d)!==!1;);return d}function hs(d,m){for(var b=-1,N=m.length,R=d.length;++b<N;)d[R+b]=m[b];return d}function Lt(d,m,b,N){for(var R=-1,D=d?d.length:0;++R<D;)b=m(b,d[R],R,d);return b}function Nn(d,m){for(var b=-1,N=Array(d);++b<d;)N[b]=m(b);return N}function kn(d,m){return d==null?void 0:d[m]}function Tn(d){var m=!1;if(d!=null&&typeof d.toString!="function")try{m=!!(d+"")}catch{}return m}function us(d){var m=-1,b=Array(d.size);return d.forEach(function(N,R){b[++m]=[R,N]}),b}function Jt(d,m){return function(b){return d(m(b))}}function An(d){var m=-1,b=Array(d.size);return d.forEach(function(N){b[++m]=N}),b}var ii=Array.prototype,ri=Function.prototype,ye=Object.prototype,ht=ce["__core-js_shared__"],Cn=function(){var d=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Sn=ri.toString,Ee=ye.hasOwnProperty,Bt=ye.toString,fs=RegExp("^"+Sn.call(Ee).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ut=dt?ce.Buffer:void 0,Vt=ce.Symbol,oi=ce.Uint8Array,qe=Jt(Object.getPrototypeOf,Object),br=Object.create,yr=ye.propertyIsEnumerable,Ba=ii.splice,ai=Object.getOwnPropertySymbols,ms=ut?ut.isBuffer:void 0,Er=Jt(Object.keys,Object),ps=et(ce,"DataView"),On=et(ce,"Map"),Je=et(ce,"Promise"),gs=et(ce,"Set"),li=et(ce,"WeakMap"),Ln=et(Object,"create"),ci=ge(ps),Bn=ge(On),di=ge(Je),hi=ge(gs),ui=ge(li),en=Vt?Vt.prototype:void 0,_r=en?en.valueOf:void 0;function It(d){var m=-1,b=d?d.length:0;for(this.clear();++m<b;){var N=d[m];this.set(N[0],N[1])}}function Va(){this.__data__=Ln?Ln(null):{}}function Ia(d){return this.has(d)&&delete this.__data__[d]}function va(d){var m=this.__data__;if(Ln){var b=m[d];return b===s?void 0:b}return Ee.call(m,d)?m[d]:void 0}function wr(d){var m=this.__data__;return Ln?m[d]!==void 0:Ee.call(m,d)}function fi(d,m){var b=this.__data__;return b[d]=Ln&&m===void 0?s:m,this}It.prototype.clear=Va,It.prototype.delete=Ia,It.prototype.get=va,It.prototype.has=wr,It.prototype.set=fi;function re(d){var m=-1,b=d?d.length:0;for(this.clear();++m<b;){var N=d[m];this.set(N[0],N[1])}}function xa(){this.__data__=[]}function Da(d){var m=this.__data__,b=ys(m,d);if(b<0)return!1;var N=m.length-1;return b==N?m.pop():Ba.call(m,b,1),!0}function $a(d){var m=this.__data__,b=ys(m,d);return b<0?void 0:m[b][1]}function Ma(d){return ys(this.__data__,d)>-1}function Ra(d,m){var b=this.__data__,N=ys(b,d);return N<0?b.push([d,m]):b[N][1]=m,this}re.prototype.clear=xa,re.prototype.delete=Da,re.prototype.get=$a,re.prototype.has=Ma,re.prototype.set=Ra;function de(d){var m=-1,b=d?d.length:0;for(this.clear();++m<b;){var N=d[m];this.set(N[0],N[1])}}function qa(){this.__data__={hash:new It,map:new(On||re),string:new It}}function Pa(d){return In(this,d).delete(d)}function ja(d){return In(this,d).get(d)}function Fa(d){return In(this,d).has(d)}function Ua(d,m){return In(this,d).set(d,m),this}de.prototype.clear=qa,de.prototype.delete=Pa,de.prototype.get=ja,de.prototype.has=Fa,de.prototype.set=Ua;function _e(d){this.__data__=new re(d)}function Ha(){this.__data__=new re}function za(d){return this.__data__.delete(d)}function Wa(d){return this.__data__.get(d)}function Ka(d){return this.__data__.has(d)}function Ga(d,m){var b=this.__data__;if(b instanceof re){var N=b.__data__;if(!On||N.length<n-1)return N.push([d,m]),this;b=this.__data__=new de(N)}return b.set(d,m),this}_e.prototype.clear=Ha,_e.prototype.delete=za,_e.prototype.get=Wa,_e.prototype.has=Ka,_e.prototype.set=Ga;function bs(d,m){var b=bi(d)||_s(d)?Nn(d.length,String):[],N=b.length,R=!!N;for(var D in d)Ee.call(d,D)&&!(R&&(D=="length"||ll(D,N)))&&b.push(D);return b}function Nr(d,m,b){var N=d[m];(!(Ee.call(d,m)&&Sr(N,b))||b===void 0&&!(m in d))&&(d[m]=b)}function ys(d,m){for(var b=d.length;b--;)if(Sr(d[b][0],m))return b;return-1}function ft(d,m){return d&&gi(m,Ei(m),d)}function mi(d,m,b,N,R,D,F){var j;if(N&&(j=D?N(d,R,D,F):N(d)),j!==void 0)return j;if(!pt(d))return d;var Q=bi(d);if(Q){if(j=ol(d),!m)return sl(d,j)}else{var U=xt(d),he=U==f||U==u;if(Or(d))return Es(d,m);if(U==y||U==o||he&&!D){if(Tn(d))return D?d:{};if(j=mt(he?{}:d),!m)return il(d,ft(j,d))}else{if(!P[U])return D?d:{};j=al(d,U,mi,m)}}F||(F=new _e);var we=F.get(d);if(we)return we;if(F.set(d,j),!Q)var ne=b?rl(d):Ei(d);return Qt(ne||d,function(ue,oe){ne&&(oe=ue,ue=d[oe]),Nr(j,oe,mi(ue,m,b,N,oe,d,F))}),j}function Ya(d){return pt(d)?br(d):{}}function Xa(d,m,b){var N=m(d);return bi(d)?N:hs(N,b(d))}function Za(d){return Bt.call(d)}function Qa(d){if(!pt(d)||dl(d))return!1;var m=yi(d)||Tn(d)?fs:Xt;return m.test(ge(d))}function Ja(d){if(!Ar(d))return Er(d);var m=[];for(var b in Object(d))Ee.call(d,b)&&b!="constructor"&&m.push(b);return m}function Es(d,m){if(m)return d.slice();var b=new d.constructor(d.length);return d.copy(b),b}function pi(d){var m=new d.constructor(d.byteLength);return new oi(m).set(new oi(d)),m}function Vn(d,m){var b=m?pi(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.byteLength)}function kr(d,m,b){var N=m?b(us(d),!0):us(d);return Lt(N,Zt,new d.constructor)}function Tr(d){var m=new d.constructor(d.source,pe.exec(d));return m.lastIndex=d.lastIndex,m}function el(d,m,b){var N=m?b(An(d),!0):An(d);return Lt(N,te,new d.constructor)}function tl(d){return _r?Object(_r.call(d)):{}}function nl(d,m){var b=m?pi(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.length)}function sl(d,m){var b=-1,N=d.length;for(m||(m=Array(N));++b<N;)m[b]=d[b];return m}function gi(d,m,b,N){b||(b={});for(var R=-1,D=m.length;++R<D;){var F=m[R],j=void 0;Nr(b,F,j===void 0?d[F]:j)}return b}function il(d,m){return gi(d,vt(d),m)}function rl(d){return Xa(d,Ei,vt)}function In(d,m){var b=d.__data__;return cl(m)?b[typeof m=="string"?"string":"hash"]:b.map}function et(d,m){var b=kn(d,m);return Qa(b)?b:void 0}var vt=ai?Jt(ai,Object):ul,xt=Za;(ps&&xt(new ps(new ArrayBuffer(1)))!=L||On&&xt(new On)!=p||Je&&xt(Je.resolve())!=E||gs&&xt(new gs)!=w||li&&xt(new li)!=S)&&(xt=function(d){var m=Bt.call(d),b=m==y?d.constructor:void 0,N=b?ge(b):void 0;if(N)switch(N){case ci:return L;case Bn:return p;case di:return E;case hi:return w;case ui:return S}return m});function ol(d){var m=d.length,b=d.constructor(m);return m&&typeof d[0]=="string"&&Ee.call(d,"index")&&(b.index=d.index,b.input=d.input),b}function mt(d){return typeof d.constructor=="function"&&!Ar(d)?Ya(qe(d)):{}}function al(d,m,b,N){var R=d.constructor;switch(m){case O:return pi(d);case c:case l:return new R(+d);case L:return Vn(d,N);case x:case M:case z:case W:case Y:case ee:case Z:case Me:case Re:return nl(d,N);case p:return kr(d,N,b);case g:case T:return new R(d);case _:return Tr(d);case w:return el(d,N,b);case A:return tl(d)}}function ll(d,m){return m=m??r,!!m&&(typeof d=="number"||Ze.test(d))&&d>-1&&d%1==0&&d<m}function cl(d){var m=typeof d;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?d!=="__proto__":d===null}function dl(d){return!!Cn&&Cn in d}function Ar(d){var m=d&&d.constructor,b=typeof m=="function"&&m.prototype||ye;return d===b}function ge(d){if(d!=null){try{return Sn.call(d)}catch{}try{return d+""}catch{}}return""}function Cr(d){return mi(d,!0,!0)}function Sr(d,m){return d===m||d!==d&&m!==m}function _s(d){return hl(d)&&Ee.call(d,"callee")&&(!yr.call(d,"callee")||Bt.call(d)==o)}var bi=Array.isArray;function ws(d){return d!=null&&Lr(d.length)&&!yi(d)}function hl(d){return Br(d)&&ws(d)}var Or=ms||fl;function yi(d){var m=pt(d)?Bt.call(d):"";return m==f||m==u}function Lr(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=r}function pt(d){var m=typeof d;return!!d&&(m=="object"||m=="function")}function Br(d){return!!d&&typeof d=="object"}function Ei(d){return ws(d)?bs(d):Ja(d)}function ul(){return[]}function fl(){return!1}t.exports=Cr}(ir,ir.exports);var Eh=ir.exports,rr={exports:{}};rr.exports,function(t,e){var n=200,s="__lodash_hash_undefined__",r=1,o=2,a=9007199254740991,c="[object Arguments]",l="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",u="[object Date]",p="[object Error]",g="[object Function]",y="[object GeneratorFunction]",E="[object Map]",_="[object Number]",w="[object Null]",T="[object Object]",A="[object Promise]",S="[object Proxy]",O="[object RegExp]",L="[object Set]",x="[object String]",M="[object Symbol]",z="[object Undefined]",W="[object WeakMap]",Y="[object ArrayBuffer]",ee="[object DataView]",Z="[object Float32Array]",Me="[object Float64Array]",Re="[object Int8Array]",ie="[object Int16Array]",pe="[object Int32Array]",Xt="[object Uint8Array]",Ze="[object Uint8ClampedArray]",P="[object Uint16Array]",wn="[object Uint32Array]",Ot=/[\\^$.*+?()[\]{}|]/g,ce=/^\[object .+?Constructor\]$/,Qe=/^(?:0|[1-9]\d*)$/,q={};q[Z]=q[Me]=q[Re]=q[ie]=q[pe]=q[Xt]=q[Ze]=q[P]=q[wn]=!0,q[c]=q[l]=q[Y]=q[f]=q[ee]=q[u]=q[p]=q[g]=q[E]=q[_]=q[T]=q[O]=q[L]=q[x]=q[W]=!1;var dt=typeof Kt=="object"&&Kt&&Kt.Object===Object&&Kt,Zt=typeof self=="object"&&self&&self.Object===Object&&self,te=dt||Zt||Function("return this")(),Qt=e&&!e.nodeType&&e,hs=Qt&&!0&&t&&!t.nodeType&&t,Lt=hs&&hs.exports===Qt,Nn=Lt&&dt.process,kn=function(){try{return Nn&&Nn.binding&&Nn.binding("util")}catch{}}(),Tn=kn&&kn.isTypedArray;function us(d,m){for(var b=-1,N=d==null?0:d.length,R=0,D=[];++b<N;){var F=d[b];m(F,b,d)&&(D[R++]=F)}return D}function Jt(d,m){for(var b=-1,N=m.length,R=d.length;++b<N;)d[R+b]=m[b];return d}function An(d,m){for(var b=-1,N=d==null?0:d.length;++b<N;)if(m(d[b],b,d))return!0;return!1}function ii(d,m){for(var b=-1,N=Array(d);++b<d;)N[b]=m(b);return N}function ri(d){return function(m){return d(m)}}function ye(d,m){return d.has(m)}function ht(d,m){return d==null?void 0:d[m]}function Cn(d){var m=-1,b=Array(d.size);return d.forEach(function(N,R){b[++m]=[R,N]}),b}function Sn(d,m){return function(b){return d(m(b))}}function Ee(d){var m=-1,b=Array(d.size);return d.forEach(function(N){b[++m]=N}),b}var Bt=Array.prototype,fs=Function.prototype,ut=Object.prototype,Vt=te["__core-js_shared__"],oi=fs.toString,qe=ut.hasOwnProperty,br=function(){var d=/[^.]+$/.exec(Vt&&Vt.keys&&Vt.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),yr=ut.toString,Ba=RegExp("^"+oi.call(qe).replace(Ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ai=Lt?te.Buffer:void 0,ms=te.Symbol,Er=te.Uint8Array,ps=ut.propertyIsEnumerable,On=Bt.splice,Je=ms?ms.toStringTag:void 0,gs=Object.getOwnPropertySymbols,li=ai?ai.isBuffer:void 0,Ln=Sn(Object.keys,Object),ci=vt(te,"DataView"),Bn=vt(te,"Map"),di=vt(te,"Promise"),hi=vt(te,"Set"),ui=vt(te,"WeakMap"),en=vt(Object,"create"),_r=ge(ci),It=ge(Bn),Va=ge(di),Ia=ge(hi),va=ge(ui),wr=ms?ms.prototype:void 0,fi=wr?wr.valueOf:void 0;function re(d){var m=-1,b=d==null?0:d.length;for(this.clear();++m<b;){var N=d[m];this.set(N[0],N[1])}}function xa(){this.__data__=en?en(null):{},this.size=0}function Da(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m}function $a(d){var m=this.__data__;if(en){var b=m[d];return b===s?void 0:b}return qe.call(m,d)?m[d]:void 0}function Ma(d){var m=this.__data__;return en?m[d]!==void 0:qe.call(m,d)}function Ra(d,m){var b=this.__data__;return this.size+=this.has(d)?0:1,b[d]=en&&m===void 0?s:m,this}re.prototype.clear=xa,re.prototype.delete=Da,re.prototype.get=$a,re.prototype.has=Ma,re.prototype.set=Ra;function de(d){var m=-1,b=d==null?0:d.length;for(this.clear();++m<b;){var N=d[m];this.set(N[0],N[1])}}function qa(){this.__data__=[],this.size=0}function Pa(d){var m=this.__data__,b=Es(m,d);if(b<0)return!1;var N=m.length-1;return b==N?m.pop():On.call(m,b,1),--this.size,!0}function ja(d){var m=this.__data__,b=Es(m,d);return b<0?void 0:m[b][1]}function Fa(d){return Es(this.__data__,d)>-1}function Ua(d,m){var b=this.__data__,N=Es(b,d);return N<0?(++this.size,b.push([d,m])):b[N][1]=m,this}de.prototype.clear=qa,de.prototype.delete=Pa,de.prototype.get=ja,de.prototype.has=Fa,de.prototype.set=Ua;function _e(d){var m=-1,b=d==null?0:d.length;for(this.clear();++m<b;){var N=d[m];this.set(N[0],N[1])}}function Ha(){this.size=0,this.__data__={hash:new re,map:new(Bn||de),string:new re}}function za(d){var m=et(this,d).delete(d);return this.size-=m?1:0,m}function Wa(d){return et(this,d).get(d)}function Ka(d){return et(this,d).has(d)}function Ga(d,m){var b=et(this,d),N=b.size;return b.set(d,m),this.size+=b.size==N?0:1,this}_e.prototype.clear=Ha,_e.prototype.delete=za,_e.prototype.get=Wa,_e.prototype.has=Ka,_e.prototype.set=Ga;function bs(d){var m=-1,b=d==null?0:d.length;for(this.__data__=new _e;++m<b;)this.add(d[m])}function Nr(d){return this.__data__.set(d,s),this}function ys(d){return this.__data__.has(d)}bs.prototype.add=bs.prototype.push=Nr,bs.prototype.has=ys;function ft(d){var m=this.__data__=new de(d);this.size=m.size}function mi(){this.__data__=new de,this.size=0}function Ya(d){var m=this.__data__,b=m.delete(d);return this.size=m.size,b}function Xa(d){return this.__data__.get(d)}function Za(d){return this.__data__.has(d)}function Qa(d,m){var b=this.__data__;if(b instanceof de){var N=b.__data__;if(!Bn||N.length<n-1)return N.push([d,m]),this.size=++b.size,this;b=this.__data__=new _e(N)}return b.set(d,m),this.size=b.size,this}ft.prototype.clear=mi,ft.prototype.delete=Ya,ft.prototype.get=Xa,ft.prototype.has=Za,ft.prototype.set=Qa;function Ja(d,m){var b=_s(d),N=!b&&Sr(d),R=!b&&!N&&ws(d),D=!b&&!N&&!R&&Br(d),F=b||N||R||D,j=F?ii(d.length,String):[],Q=j.length;for(var U in d)qe.call(d,U)&&!(F&&(U=="length"||R&&(U=="offset"||U=="parent")||D&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||al(U,Q)))&&j.push(U);return j}function Es(d,m){for(var b=d.length;b--;)if(Cr(d[b][0],m))return b;return-1}function pi(d,m,b){var N=m(d);return _s(d)?N:Jt(N,b(d))}function Vn(d){return d==null?d===void 0?z:w:Je&&Je in Object(d)?xt(d):Ar(d)}function kr(d){return pt(d)&&Vn(d)==c}function Tr(d,m,b,N,R){return d===m?!0:d==null||m==null||!pt(d)&&!pt(m)?d!==d&&m!==m:el(d,m,b,N,Tr,R)}function el(d,m,b,N,R,D){var F=_s(d),j=_s(m),Q=F?l:mt(d),U=j?l:mt(m);Q=Q==c?T:Q,U=U==c?T:U;var he=Q==T,we=U==T,ne=Q==U;if(ne&&ws(d)){if(!ws(m))return!1;F=!0,he=!1}if(ne&&!he)return D||(D=new ft),F||Br(d)?gi(d,m,b,N,R,D):il(d,m,Q,b,N,R,D);if(!(b&r)){var ue=he&&qe.call(d,"__wrapped__"),oe=we&&qe.call(m,"__wrapped__");if(ue||oe){var tn=ue?d.value():d,Dt=oe?m.value():m;return D||(D=new ft),R(tn,Dt,b,N,D)}}return ne?(D||(D=new ft),rl(d,m,b,N,R,D)):!1}function tl(d){if(!Lr(d)||cl(d))return!1;var m=Or(d)?Ba:ce;return m.test(ge(d))}function nl(d){return pt(d)&&yi(d.length)&&!!q[Vn(d)]}function sl(d){if(!dl(d))return Ln(d);var m=[];for(var b in Object(d))qe.call(d,b)&&b!="constructor"&&m.push(b);return m}function gi(d,m,b,N,R,D){var F=b&r,j=d.length,Q=m.length;if(j!=Q&&!(F&&Q>j))return!1;var U=D.get(d);if(U&&D.get(m))return U==m;var he=-1,we=!0,ne=b&o?new bs:void 0;for(D.set(d,m),D.set(m,d);++he<j;){var ue=d[he],oe=m[he];if(N)var tn=F?N(oe,ue,he,m,d,D):N(ue,oe,he,d,m,D);if(tn!==void 0){if(tn)continue;we=!1;break}if(ne){if(!An(m,function(Dt,vn){if(!ye(ne,vn)&&(ue===Dt||R(ue,Dt,b,N,D)))return ne.push(vn)})){we=!1;break}}else if(!(ue===oe||R(ue,oe,b,N,D))){we=!1;break}}return D.delete(d),D.delete(m),we}function il(d,m,b,N,R,D,F){switch(b){case ee:if(d.byteLength!=m.byteLength||d.byteOffset!=m.byteOffset)return!1;d=d.buffer,m=m.buffer;case Y:return!(d.byteLength!=m.byteLength||!D(new Er(d),new Er(m)));case f:case u:case _:return Cr(+d,+m);case p:return d.name==m.name&&d.message==m.message;case O:case x:return d==m+"";case E:var j=Cn;case L:var Q=N&r;if(j||(j=Ee),d.size!=m.size&&!Q)return!1;var U=F.get(d);if(U)return U==m;N|=o,F.set(d,m);var he=gi(j(d),j(m),N,R,D,F);return F.delete(d),he;case M:if(fi)return fi.call(d)==fi.call(m)}return!1}function rl(d,m,b,N,R,D){var F=b&r,j=In(d),Q=j.length,U=In(m),he=U.length;if(Q!=he&&!F)return!1;for(var we=Q;we--;){var ne=j[we];if(!(F?ne in m:qe.call(m,ne)))return!1}var ue=D.get(d);if(ue&&D.get(m))return ue==m;var oe=!0;D.set(d,m),D.set(m,d);for(var tn=F;++we<Q;){ne=j[we];var Dt=d[ne],vn=m[ne];if(N)var ku=F?N(vn,Dt,ne,m,d,D):N(Dt,vn,ne,d,m,D);if(!(ku===void 0?Dt===vn||R(Dt,vn,b,N,D):ku)){oe=!1;break}tn||(tn=ne=="constructor")}if(oe&&!tn){var Vr=d.constructor,Ir=m.constructor;Vr!=Ir&&"constructor"in d&&"constructor"in m&&!(typeof Vr=="function"&&Vr instanceof Vr&&typeof Ir=="function"&&Ir instanceof Ir)&&(oe=!1)}return D.delete(d),D.delete(m),oe}function In(d){return pi(d,Ei,ol)}function et(d,m){var b=d.__data__;return ll(m)?b[typeof m=="string"?"string":"hash"]:b.map}function vt(d,m){var b=ht(d,m);return tl(b)?b:void 0}function xt(d){var m=qe.call(d,Je),b=d[Je];try{d[Je]=void 0;var N=!0}catch{}var R=yr.call(d);return N&&(m?d[Je]=b:delete d[Je]),R}var ol=gs?function(d){return d==null?[]:(d=Object(d),us(gs(d),function(m){return ps.call(d,m)}))}:ul,mt=Vn;(ci&&mt(new ci(new ArrayBuffer(1)))!=ee||Bn&&mt(new Bn)!=E||di&&mt(di.resolve())!=A||hi&&mt(new hi)!=L||ui&&mt(new ui)!=W)&&(mt=function(d){var m=Vn(d),b=m==T?d.constructor:void 0,N=b?ge(b):"";if(N)switch(N){case _r:return ee;case It:return E;case Va:return A;case Ia:return L;case va:return W}return m});function al(d,m){return m=m??a,!!m&&(typeof d=="number"||Qe.test(d))&&d>-1&&d%1==0&&d<m}function ll(d){var m=typeof d;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?d!=="__proto__":d===null}function cl(d){return!!br&&br in d}function dl(d){var m=d&&d.constructor,b=typeof m=="function"&&m.prototype||ut;return d===b}function Ar(d){return yr.call(d)}function ge(d){if(d!=null){try{return oi.call(d)}catch{}try{return d+""}catch{}}return""}function Cr(d,m){return d===m||d!==d&&m!==m}var Sr=kr(function(){return arguments}())?kr:function(d){return pt(d)&&qe.call(d,"callee")&&!ps.call(d,"callee")},_s=Array.isArray;function bi(d){return d!=null&&yi(d.length)&&!Or(d)}var ws=li||fl;function hl(d,m){return Tr(d,m)}function Or(d){if(!Lr(d))return!1;var m=Vn(d);return m==g||m==y||m==h||m==S}function yi(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=a}function Lr(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function pt(d){return d!=null&&typeof d=="object"}var Br=Tn?ri(Tn):nl;function Ei(d){return bi(d)?Ja(d):sl(d)}function ul(){return[]}function fl(){return!1}t.exports=hl}(rr,rr.exports);var _h=rr.exports,Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});const i_=Eh,r_=_h;var Qo;(function(t){function e(o={},a={},c=!1){typeof o!="object"&&(o={}),typeof a!="object"&&(a={});let l=i_(a);c||(l=Object.keys(l).reduce((h,f)=>(l[f]!=null&&(h[f]=l[f]),h),{}));for(const h in o)o[h]!==void 0&&a[h]===void 0&&(l[h]=o[h]);return Object.keys(l).length>0?l:void 0}t.compose=e;function n(o={},a={}){typeof o!="object"&&(o={}),typeof a!="object"&&(a={});const c=Object.keys(o).concat(Object.keys(a)).reduce((l,h)=>(r_(o[h],a[h])||(l[h]=a[h]===void 0?null:a[h]),l),{});return Object.keys(c).length>0?c:void 0}t.diff=n;function s(o={},a={}){o=o||{};const c=Object.keys(a).reduce((l,h)=>(a[h]!==o[h]&&o[h]!==void 0&&(l[h]=a[h]),l),{});return Object.keys(o).reduce((l,h)=>(o[h]!==a[h]&&a[h]===void 0&&(l[h]=null),l),c)}t.invert=s;function r(o,a,c=!1){if(typeof o!="object")return a;if(typeof a!="object")return;if(!c)return a;const l=Object.keys(a).reduce((h,f)=>(o[f]===void 0&&(h[f]=a[f]),h),{});return Object.keys(l).length>0?l:void 0}t.transform=r})(Qo||(Qo={})),Zo.default=Qo;var or={};Object.defineProperty(or,"__esModule",{value:!0});var Jo;(function(t){function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e})(Jo||(Jo={})),or.default=Jo;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});const wh=or;class o_{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const n=this.ops[this.index];if(n){const s=this.offset,r=wh.default.length(n);if(e>=r-s?(e=r-s,this.index+=1,this.offset=0):this.offset+=e,typeof n.delete=="number")return{delete:e};{const o={};return n.attributes&&(o.attributes=n.attributes),typeof n.retain=="number"?o.retain=e:typeof n.retain=="object"&&n.retain!==null?o.retain=n.retain:typeof n.insert=="string"?o.insert=n.insert.substr(s,e):o.insert=n.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?wh.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const e=this.offset,n=this.index,s=this.next(),r=this.ops.slice(this.index);return this.offset=e,this.index=n,[s].concat(r)}}else return[]}}ea.default=o_,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=s_,s=Eh,r=_h,o=Zo;e.AttributeMap=o.default;const a=or;e.Op=a.default;const c=ea;e.OpIterator=c.default;const l="\0",h=(u,p)=>{if(typeof u!="object"||u===null)throw new Error(`cannot retain a ${typeof u}`);if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);const g=Object.keys(u)[0];if(!g||g!==Object.keys(p)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(p)[0]}`);return[g,u[g],p[g]]};class f{constructor(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]}static registerEmbed(p,g){this.handlers[p]=g}static unregisterEmbed(p){delete this.handlers[p]}static getHandler(p){const g=this.handlers[p];if(!g)throw new Error(`no handlers for embed type "${p}"`);return g}insert(p,g){const y={};return typeof p=="string"&&p.length===0?this:(y.insert=p,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(y.attributes=g),this.push(y))}delete(p){return p<=0?this:this.push({delete:p})}retain(p,g){if(typeof p=="number"&&p<=0)return this;const y={retain:p};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(y.attributes=g),this.push(y)}push(p){let g=this.ops.length,y=this.ops[g-1];if(p=s(p),typeof y=="object"){if(typeof p.delete=="number"&&typeof y.delete=="number")return this.ops[g-1]={delete:y.delete+p.delete},this;if(typeof y.delete=="number"&&p.insert!=null&&(g-=1,y=this.ops[g-1],typeof y!="object"))return this.ops.unshift(p),this;if(r(p.attributes,y.attributes)){if(typeof p.insert=="string"&&typeof y.insert=="string")return this.ops[g-1]={insert:y.insert+p.insert},typeof p.attributes=="object"&&(this.ops[g-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof y.retain=="number")return this.ops[g-1]={retain:y.retain+p.retain},typeof p.attributes=="object"&&(this.ops[g-1].attributes=p.attributes),this}}return g===this.ops.length?this.ops.push(p):this.ops.splice(g,0,p),this}chop(){const p=this.ops[this.ops.length-1];return p&&typeof p.retain=="number"&&!p.attributes&&this.ops.pop(),this}filter(p){return this.ops.filter(p)}forEach(p){this.ops.forEach(p)}map(p){return this.ops.map(p)}partition(p){const g=[],y=[];return this.forEach(E=>{(p(E)?g:y).push(E)}),[g,y]}reduce(p,g){return this.ops.reduce(p,g)}changeLength(){return this.reduce((p,g)=>g.insert?p+a.default.length(g):g.delete?p-g.delete:p,0)}length(){return this.reduce((p,g)=>p+a.default.length(g),0)}slice(p=0,g=1/0){const y=[],E=new c.default(this.ops);let _=0;for(;_<g&&E.hasNext();){let w;_<p?w=E.next(p-_):(w=E.next(g-_),y.push(w)),_+=a.default.length(w)}return new f(y)}compose(p){const g=new c.default(this.ops),y=new c.default(p.ops),E=[],_=y.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){let T=_.retain;for(;g.peekType()==="insert"&&g.peekLength()<=T;)T-=g.peekLength(),E.push(g.next());_.retain-T>0&&y.next(_.retain-T)}const w=new f(E);for(;g.hasNext()||y.hasNext();)if(y.peekType()==="insert")w.push(y.next());else if(g.peekType()==="delete")w.push(g.next());else{const T=Math.min(g.peekLength(),y.peekLength()),A=g.next(T),S=y.next(T);if(S.retain){const O={};if(typeof A.retain=="number")O.retain=typeof S.retain=="number"?T:S.retain;else if(typeof S.retain=="number")A.retain==null?O.insert=A.insert:O.retain=A.retain;else{const x=A.retain==null?"insert":"retain",[M,z,W]=h(A[x],S.retain),Y=f.getHandler(M);O[x]={[M]:Y.compose(z,W,x==="retain")}}const L=o.default.compose(A.attributes,S.attributes,typeof A.retain=="number");if(L&&(O.attributes=L),w.push(O),!y.hasNext()&&r(w.ops[w.ops.length-1],O)){const x=new f(g.rest());return w.concat(x).chop()}}else typeof S.delete=="number"&&(typeof A.retain=="number"||typeof A.retain=="object"&&A.retain!==null)&&w.push(S)}return w.chop()}concat(p){const g=new f(this.ops.slice());return p.ops.length>0&&(g.push(p.ops[0]),g.ops=g.ops.concat(p.ops.slice(1))),g}diff(p,g){if(this.ops===p.ops)return new f;const y=[this,p].map(A=>A.map(S=>{if(S.insert!=null)return typeof S.insert=="string"?S.insert:l;const O=A===p?"on":"with";throw new Error("diff() called "+O+" non-document")}).join("")),E=new f,_=n(y[0],y[1],g,!0),w=new c.default(this.ops),T=new c.default(p.ops);return _.forEach(A=>{let S=A[1].length;for(;S>0;){let O=0;switch(A[0]){case n.INSERT:O=Math.min(T.peekLength(),S),E.push(T.next(O));break;case n.DELETE:O=Math.min(S,w.peekLength()),w.next(O),E.delete(O);break;case n.EQUAL:O=Math.min(w.peekLength(),T.peekLength(),S);const L=w.next(O),x=T.next(O);r(L.insert,x.insert)?E.retain(O,o.default.diff(L.attributes,x.attributes)):E.push(x).delete(O);break}S-=O}}),E.chop()}eachLine(p,g=`
`){const y=new c.default(this.ops);let E=new f,_=0;for(;y.hasNext();){if(y.peekType()!=="insert")return;const w=y.peek(),T=a.default.length(w)-y.peekLength(),A=typeof w.insert=="string"?w.insert.indexOf(g,T)-T:-1;if(A<0)E.push(y.next());else if(A>0)E.push(y.next(A));else{if(p(E,y.next(1).attributes||{},_)===!1)return;_+=1,E=new f}}E.length()>0&&p(E,{},_)}invert(p){const g=new f;return this.reduce((y,E)=>{if(E.insert)g.delete(a.default.length(E));else{if(typeof E.retain=="number"&&E.attributes==null)return g.retain(E.retain),y+E.retain;if(E.delete||typeof E.retain=="number"){const _=E.delete||E.retain;return p.slice(y,y+_).forEach(T=>{E.delete?g.push(T):E.retain&&E.attributes&&g.retain(a.default.length(T),o.default.invert(E.attributes,T.attributes))}),y+_}else if(typeof E.retain=="object"&&E.retain!==null){const _=p.slice(y,y+1),w=new c.default(_.ops).next(),[T,A,S]=h(E.retain,w.insert),O=f.getHandler(T);return g.retain({[T]:O.invert(A,S)},o.default.invert(E.attributes,w.attributes)),y+1}}return y},0),g.chop()}transform(p,g=!1){if(g=!!g,typeof p=="number")return this.transformPosition(p,g);const y=p,E=new c.default(this.ops),_=new c.default(y.ops),w=new f;for(;E.hasNext()||_.hasNext();)if(E.peekType()==="insert"&&(g||_.peekType()!=="insert"))w.retain(a.default.length(E.next()));else if(_.peekType()==="insert")w.push(_.next());else{const T=Math.min(E.peekLength(),_.peekLength()),A=E.next(T),S=_.next(T);if(A.delete)continue;if(S.delete)w.push(S);else{const O=A.retain,L=S.retain;let x=typeof L=="object"&&L!==null?L:T;if(typeof O=="object"&&O!==null&&typeof L=="object"&&L!==null){const M=Object.keys(O)[0];if(M===Object.keys(L)[0]){const z=f.getHandler(M);z&&(x={[M]:z.transform(O[M],L[M],g)})}}w.retain(x,o.default.transform(A.attributes,S.attributes,g))}}return w.chop()}transformPosition(p,g=!1){g=!!g;const y=new c.default(this.ops);let E=0;for(;y.hasNext()&&E<=p;){const _=y.peekLength(),w=y.peekType();if(y.next(),w==="delete"){p-=Math.min(_,p-E);continue}else w==="insert"&&(E<p||!g)&&(p+=_);E+=_}return p}}f.Op=a.default,f.OpIterator=c.default,f.AttributeMap=o.default,f.handlers={},e.default=f,t.exports=f,t.exports.default=f}(Ko,Ko.exports);var Ve=Ko.exports;const I=ch(Ve);class He extends Ae{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}He.blotName="break",He.tagName="BR";let ze=class extends tr{};function ar(t){return t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}const ct=class ct extends Uo{static compare(e,n){const s=ct.order.indexOf(e),r=ct.order.indexOf(n);return s>=0||r>=0?s-r:e===n?0:e<n?-1:1}formatAt(e,n,s,r){if(ct.compare(this.statics.blotName,s)<0&&this.scroll.query(s,v.BLOT)){const o=this.isolate(e,n);r&&o.wrap(s,r)}else super.formatAt(e,n,s,r)}optimize(e){if(super.optimize(e),this.parent instanceof ct&&ct.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}};B(ct,"allowedChildren",[ct,He,Ae,ze]),B(ct,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let at=ct;const Nh=1;class se extends Hs{constructor(){super(...arguments);B(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=kh(this)),this.cache.delta}deleteAt(n,s){super.deleteAt(n,s),this.cache={}}formatAt(n,s,r,o){s<=0||(this.scroll.query(r,v.BLOCK)?n+s===this.length()&&this.format(r,o):super.formatAt(n,Math.min(s,this.length()-n-1),r,o),this.cache={})}insertAt(n,s,r){if(r!=null){super.insertAt(n,s,r),this.cache={};return}if(s.length===0)return;const o=s.split(`
`),a=o.shift();a.length>0&&(n<this.length()-1||this.children.tail==null?super.insertAt(Math.min(n,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let c=this;o.reduce((l,h)=>(c=c.split(l,!0),c.insertAt(0,h),h.length),n+a.length)}insertBefore(n,s){const{head:r}=this.children;super.insertBefore(n,s),r instanceof He&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Nh),this.cache.length}moveChildren(n,s){super.moveChildren(n,s),this.cache={}}optimize(n){super.optimize(n),this.cache={}}path(n){return super.path(n,!0)}removeChild(n){super.removeChild(n),this.cache={}}split(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s&&(n===0||n>=this.length()-Nh)){const o=this.clone();return n===0?(this.parent.insertBefore(o,this),this):(this.parent.insertBefore(o,this.next),o)}const r=super.split(n,s);return this.cache={},r}}se.blotName="block",se.tagName="P",se.defaultChild=He,se.allowedChildren=[He,at,Ae,ze];class Ie extends Ae{attach(){super.attach(),this.attributes=new Ji(this.domNode)}delta(){return new I().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const s=this.scroll.query(e,v.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,n)}formatAt(e,n,s,r){this.format(s,r)}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s);return}const r=n.split(`
`),o=r.pop(),a=r.map(l=>{const h=this.scroll.create(se.blotName);return h.insertAt(0,l),h}),c=this.split(e);a.forEach(l=>{this.parent.insertBefore(l,c)}),o&&this.parent.insertBefore(this.scroll.create("text",o),c)}}Ie.scope=v.BLOCK_BLOT;function kh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(ae).reduce((n,s)=>s.length()===0?n:n.insert(s.value(),ve(s,{},e)),new I).insert(`
`,ve(t))}function ve(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:ve(t.parent,e,n)}const $e=class $e extends Ae{static value(){}constructor(e,n,s){super(e,n),this.selection=s,this.textNode=document.createTextNode($e.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let s=this,r=0;for(;s!=null&&s.statics.scope!==v.BLOCK_BLOT;)r+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=$e.CONTENTS.length,s.optimize(),s.formatAt(r,$e.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof ze?this.prev:null,s=n?n.length():0,r=this.next instanceof ze?this.next:null,o=r?r.text:"",{textNode:a}=this,c=a.data.split($e.CONTENTS).join("");a.data=$e.CONTENTS;let l;if(n)l=n,(c||r)&&(n.insertAt(n.length(),c+o),r&&r.remove());else if(r)l=r,r.insertAt(0,c);else{const h=document.createTextNode(c);l=this.scroll.create(h),this.parent.insertBefore(l,this)}if(this.remove(),e){const h=(p,g)=>n&&p===n.domNode?g:p===a?s+g-1:r&&p===r.domNode?s+c.length+g:null,f=h(e.start.node,e.start.offset),u=h(e.end.node,e.end.offset);if(f!==null&&u!==null)return{startNode:l.domNode,startOffset:f,endNode:l.domNode,endOffset:u}}return null}update(e,n){if(e.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(n.range=s)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=$e.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}};B($e,"blotName","cursor"),B($e,"className","ql-cursor"),B($e,"tagName","span"),B($e,"CONTENTS","\uFEFF");let rs=$e;var Th={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function r(l,h,f){this.fn=l,this.context=h,this.once=f||!1}function o(l,h,f,u,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new r(f,u||l,p),y=n?n+h:h;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new s:delete l._events[h]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],f,u;if(this._eventsCount===0)return h;for(u in f=this._events)e.call(f,u)&&h.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},c.prototype.listeners=function(h){var f=n?n+h:h,u=this._events[f];if(!u)return[];if(u.fn)return[u.fn];for(var p=0,g=u.length,y=new Array(g);p<g;p++)y[p]=u[p].fn;return y},c.prototype.listenerCount=function(h){var f=n?n+h:h,u=this._events[f];return u?u.fn?1:u.length:0},c.prototype.emit=function(h,f,u,p,g,y){var E=n?n+h:h;if(!this._events[E])return!1;var _=this._events[E],w=arguments.length,T,A;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),w){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,u),!0;case 4:return _.fn.call(_.context,f,u,p),!0;case 5:return _.fn.call(_.context,f,u,p,g),!0;case 6:return _.fn.call(_.context,f,u,p,g,y),!0}for(A=1,T=new Array(w-1);A<w;A++)T[A-1]=arguments[A];_.fn.apply(_.context,T)}else{var S=_.length,O;for(A=0;A<S;A++)switch(_[A].once&&this.removeListener(h,_[A].fn,void 0,!0),w){case 1:_[A].fn.call(_[A].context);break;case 2:_[A].fn.call(_[A].context,f);break;case 3:_[A].fn.call(_[A].context,f,u);break;case 4:_[A].fn.call(_[A].context,f,u,p);break;default:if(!T)for(O=1,T=new Array(w-1);O<w;O++)T[O-1]=arguments[O];_[A].fn.apply(_[A].context,T)}}return!0},c.prototype.on=function(h,f,u){return o(this,h,f,u,!1)},c.prototype.once=function(h,f,u){return o(this,h,f,u,!0)},c.prototype.removeListener=function(h,f,u,p){var g=n?n+h:h;if(!this._events[g])return this;if(!f)return a(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!p||y.once)&&(!u||y.context===u)&&a(this,g);else{for(var E=0,_=[],w=y.length;E<w;E++)(y[E].fn!==f||p&&!y[E].once||u&&y[E].context!==u)&&_.push(y[E]);_.length?this._events[g]=_.length===1?_[0]:_:a(this,g)}return this},c.prototype.removeAllListeners=function(h){var f;return h?(f=n?n+h:h,this._events[f]&&a(this,f)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(Th);var a_=Th.exports;const l_=ch(a_),ta=new WeakMap,na=["error","warn","log","info"];let sa="warn";function Ah(t){if(sa&&na.indexOf(t)<=na.indexOf(sa)){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];console[t](...n)}}function Tt(t){return na.reduce((e,n)=>(e[n]=Ah.bind(console,n,t),e),{})}Tt.level=t=>{sa=t},Ah.level=Tt.level;const ia=Tt("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(r=>{const o=ta.get(r);o&&o.emitter&&o.emitter.handleDOM(...n)})})});class V extends l_{constructor(){super(),this.domListeners={},this.on("error",ia.error)}emit(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return ia.log.call(ia,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];(this.domListeners[e.type]||[]).forEach(o=>{let{node:a,handler:c}=o;(e.target===a||a.contains(e.target))&&c(e,...s)})}listenDOM(e,n,s){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:s})}}B(V,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),B(V,"sources",{API:"api",SILENT:"silent",USER:"user"});const ra=Tt("quill:selection");class bn{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class c_{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new bn(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,V.sources.USER),1)}),this.emitter.on(V.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(V.events.SCROLL_UPDATE,(r,o)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const a=o.some(c=>c.type==="characterData"||c.type==="childList"||c.type==="attributes"&&c.target===this.root);this.update(a?V.sources.SILENT:r)}catch{}})}),this.emitter.on(V.events.SCROLL_OPTIMIZE,(s,r)=>{if(r.range){const{startNode:o,startOffset:a,endNode:c,endOffset:l}=r.range;this.setNativeRange(o,a,c,l),this.update(V.sources.SILENT)}}),this.update(V.sources.SILENT)}handleComposition(){this.emitter.on(V.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(V.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(V.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(e,v.BLOCK))){if(s.start.node!==this.cursor.textNode){const r=this.scroll.find(s.start.node,!1);if(r==null)return;if(r instanceof ae){const o=r.split(s.start.offset);r.parent.insertBefore(this.cursor,o)}else r.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();e=Math.min(e,s-1),n=Math.min(e+n,s-1)-e;let r,[o,a]=this.scroll.leaf(e);if(o==null)return null;if(n>0&&a===o.length()){const[f]=this.scroll.leaf(e+1);if(f){const[u]=this.scroll.line(e),[p]=this.scroll.line(e+1);u===p&&(o=f,a=0)}}[r,a]=o.position(a,!0);const c=document.createRange();if(n>0)return c.setStart(r,a),[o,a]=this.scroll.leaf(e+n),o==null?null:([r,a]=o.position(a,!0),c.setEnd(r,a),c.getBoundingClientRect());let l="left",h;if(r instanceof Text){if(!r.data.length)return null;a<r.data.length?(c.setStart(r,a),c.setEnd(r,a+1)):(c.setStart(r,a-1),c.setEnd(r,a),l="right"),h=c.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;h=o.domNode.getBoundingClientRect(),a>0&&(l="right")}return{bottom:h.top+h.height,height:h.height,left:h[l],right:h[l],top:h.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const s=this.normalizeNative(n);return ra.info("getNativeRange",s),s}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&oa(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const s=n.map(a=>{const[c,l]=a,h=this.scroll.find(c,!0),f=h.offset(this.scroll);return l===0?f:h instanceof ae?f+h.index(c,l):f+h.length()}),r=Math.min(Math.max(...s),this.scroll.length()-1),o=Math.min(r,...s);return new bn(o,r-o)}normalizeNative(e){if(!oa(this.root,e.startContainer)||!e.collapsed&&!oa(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(s=>{let{node:r,offset:o}=s;for(;!(r instanceof Text)&&r.childNodes.length>0;)if(r.childNodes.length>o)r=r.childNodes[o],o=0;else if(r.childNodes.length===o)r=r.lastChild,r instanceof Text?o=r.data.length:r.childNodes.length>0?o=r.childNodes.length:o=r.childNodes.length+1;else break;s.node=r,s.offset=o}),n}rangeToNative(e){const n=this.scroll.length(),s=(r,o)=>{r=Math.min(n-1,r);const[a,c]=this.scroll.leaf(r);return a?a.position(c,o):[null,-1]};return[...s(e.index,!1),...s(e.index+e.length,!0)]}setNativeRange(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(ra.info("setNativeRange",e,n,s,r),e!=null&&(this.root.parentNode==null||e.parentNode==null||s.parentNode==null))return;const a=document.getSelection();if(a!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:c}=this.getNativeRange()||{};if(c==null||o||e!==c.startContainer||n!==c.startOffset||s!==c.endContainer||r!==c.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),s instanceof Element&&s.tagName==="BR"&&(r=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const l=document.createRange();l.setStart(e,n),l.setEnd(s,r),a.removeAllRanges(),a.addRange(l)}}else a.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:V.sources.API;if(typeof n=="string"&&(s=n,n=!1),ra.info("setRange",e),e!=null){const r=this.rangeToNative(e);this.setNativeRange(...r,n)}else this.setNativeRange(null);this.update(s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V.sources.USER;const n=this.lastRange,[s,r]=this.getRange();if(this.lastRange=s,this.lastNative=r,this.lastRange!=null&&(this.savedRange=this.lastRange),!jo(n,this.lastRange)){if(!this.composing&&r!=null&&r.native.collapsed&&r.start.node!==this.cursor.textNode){const a=this.cursor.restore();a&&this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)}const o=[V.events.SELECTION_CHANGE,Jn(this.lastRange),Jn(n),e];this.emitter.emit(V.events.EDITOR_CHANGE,...o),e!==V.sources.SILENT&&this.emitter.emit(...o)}}}function oa(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const d_=/^[ -~]*$/;class h_{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const s=Ch(e),r=new I;return f_(s.ops.slice()).reduce((a,c)=>{const l=Ve.Op.length(c);let h=c.attributes||{},f=!1,u=!1;if(c.insert!=null){if(r.retain(l),typeof c.insert=="string"){const y=c.insert;u=!y.endsWith(`
`)&&(n<=a||!!this.scroll.descendant(Ie,a)[0]),this.scroll.insertAt(a,y);const[E,_]=this.scroll.line(a);let w=zt({},ve(E));if(E instanceof se){const[T]=E.descendant(ae,_);T&&(w=zt(w,ve(T)))}h=Ve.AttributeMap.diff(w,h)||{}}else if(typeof c.insert=="object"){const y=Object.keys(c.insert)[0];if(y==null)return a;const E=this.scroll.query(y,v.INLINE)!=null;if(E)(n<=a||this.scroll.descendant(Ie,a)[0])&&(u=!0);else if(a>0){const[_,w]=this.scroll.descendant(ae,a-1);_ instanceof ze?_.value()[w]!==`
`&&(f=!0):_ instanceof Ae&&_.statics.scope===v.INLINE_BLOT&&(f=!0)}if(this.scroll.insertAt(a,y,c.insert[y]),E){const[_]=this.scroll.descendant(ae,a);if(_){const w=zt({},ve(_));h=Ve.AttributeMap.diff(w,h)||{}}}}n+=l}else if(r.push(c),c.retain!==null&&typeof c.retain=="object"){const y=Object.keys(c.retain)[0];if(y==null)return a;this.scroll.updateEmbedAt(a,y,c.retain[y])}Object.keys(h).forEach(y=>{this.scroll.formatAt(a,l,y,h[y])});const p=f?1:0,g=u?1:0;return n+=p+g,r.retain(p),r.delete(g),a+l+p+g},0),r.reduce((a,c)=>typeof c.delete=="number"?(this.scroll.deleteAt(a,c.delete),a):a+Ve.Op.length(c),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new I().retain(e).delete(n))}formatLine(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(o=>{this.scroll.lines(e,Math.max(n,1)).forEach(a=>{a.format(o,s[o])})}),this.scroll.optimize();const r=new I().retain(e).retain(n,Jn(s));return this.update(r)}formatText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(o=>{this.scroll.formatAt(e,n,o,s[o])});const r=new I().retain(e).retain(n,Jn(s));return this.update(r)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new I)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],r=[];n===0?this.scroll.path(e).forEach(c=>{const[l]=c;l instanceof se?s.push(l):l instanceof ae&&r.push(l)}):(s=this.scroll.lines(e,n),r=this.scroll.descendants(ae,e,n));const[o,a]=[s,r].map(c=>{const l=c.shift();if(l==null)return{};let h=ve(l);for(;Object.keys(h).length>0;){const f=c.shift();if(f==null)return h;h=u_(ve(f),h)}return h});return{...o,...a}}getHTML(e,n){const[s,r]=this.scroll.line(e);if(s){const o=s.length();return s.length()>=r+n&&!(r===0&&n===o)?Ws(s,r,n,!0):Ws(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(e,n){const s=Ch(n),r=new I().retain(e).concat(s);return this.scroll.insertContents(e,s),this.update(r)}insertEmbed(e,n,s){return this.scroll.insertAt(e,n,s),this.update(new I().retain(e).insert({[n]:s}))}insertText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(s).forEach(r=>{this.scroll.formatAt(e,n.length,r,s[r])}),this.update(new I().retain(e).insert(n,Jn(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==se.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof He}removeFormat(e,n){const s=this.getText(e,n),[r,o]=this.scroll.line(e+n);let a=0,c=new I;r!=null&&(a=r.length()-o,c=r.delta().slice(o,o+a-1).insert(`
`));const h=this.getContents(e,n+a).diff(new I().insert(s).concat(c)),f=new I().retain(e).concat(h);return this.applyDelta(f)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const r=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(d_)&&this.scroll.find(n[0].target)){const o=this.scroll.find(n[0].target),a=ve(o),c=o.offset(this.scroll),l=n[0].oldValue.replace(rs.CONTENTS,""),h=new I().insert(l),f=new I().insert(o.value()),u=s&&{oldRange:Sh(s.oldRange,-c),newRange:Sh(s.newRange,-c)};e=new I().retain(c).concat(h.diff(f,u)).reduce((g,y)=>y.insert?g.insert(y.insert,a):g.push(y),new I),this.delta=r.compose(e)}else this.delta=this.getDelta(),(!e||!jo(r.compose(e),this.delta))&&(e=r.diff(this.delta,s));return e}}function os(t,e,n){if(t.length===0){const[g]=aa(n.pop());return e<=0?`</li></${g}>`:`</li></${g}>${os([],e-1,n)}`}const[{child:s,offset:r,length:o,indent:a,type:c},...l]=t,[h,f]=aa(c);if(a>e)return n.push(c),a===e+1?`<${h}><li${f}>${Ws(s,r,o)}${os(l,a,n)}`:`<${h}><li>${os(t,e+1,n)}`;const u=n[n.length-1];if(a===e&&c===u)return`</li><li${f}>${Ws(s,r,o)}${os(l,a,n)}`;const[p]=aa(n.pop());return`</li></${p}>${os(t,e-1,n)}`}function Ws(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof ze)return ar(t.value().slice(e,e+n));if(t instanceof Ue){if(t.statics.blotName==="list-container"){const h=[];return t.children.forEachAt(e,n,(f,u,p)=>{const g="formats"in f&&typeof f.formats=="function"?f.formats():{};h.push({child:f,offset:u,length:p,indent:g.indent||0,type:g.list})}),os(h,-1,[])}const r=[];if(t.children.forEachAt(e,n,(h,f,u)=>{r.push(Ws(h,f,u))}),s||t.statics.blotName==="list")return r.join("");const{outerHTML:o,innerHTML:a}=t.domNode,[c,l]=o.split(`>${a}<`);return c==="<table"?`<table style="border: 1px solid #000;">${r.join("")}<${l}`:`${c}>${r.join("")}<${l}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function u_(t,e){return Object.keys(e).reduce((n,s)=>{if(t[s]==null)return n;const r=e[s];return r===t[s]?n[s]=r:Array.isArray(r)?r.indexOf(t[s])<0?n[s]=r.concat([t[s]]):n[s]=r:n[s]=[r,t[s]],n},{})}function aa(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Ch(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const s=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(s,n.attributes)}return e.push(n)},new I)}function Sh(t,e){let{index:n,length:s}=t;return new bn(n+e,s)}function f_(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((r,o)=>{o&&e.push({insert:`
`,attributes:n.attributes}),r&&e.push({insert:r,attributes:n.attributes})}):e.push(n)}),e}class We{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}B(We,"DEFAULTS",{});const lr="\uFEFF";class la extends Ae{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(lr),this.rightGuard=document.createTextNode(lr),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,s;const r=e.data.split(lr).join("");if(e===this.leftGuard)if(this.prev instanceof ze){const o=this.prev.length();this.prev.insertAt(o,r),n={startNode:this.prev.domNode,startOffset:o+r.length}}else s=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(s),this),n={startNode:s,startOffset:r.length};else e===this.rightGuard&&(this.next instanceof ze?(this.next.insertAt(0,r),n={startNode:this.next.domNode,startOffset:r.length}):(s=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(s),this.next),n={startNode:s,startOffset:r.length}));return e.data=lr,n}update(e,n){e.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const r=this.restore(s.target);r&&(n.range=r)}})}}class m_{constructor(e,n){B(this,"isComposing",!1);this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof la)&&(this.emitter.emit(V.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(V.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(V.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(V.events.COMPOSITION_END,e),this.isComposing=!1}}const ni=class ni{constructor(e,n){B(this,"modules",{});this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}};B(ni,"DEFAULTS",{modules:{}}),B(ni,"themes",{default:ni});let as=ni;const p_=t=>t.parentElement||t.getRootNode().host||null,g_=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,s="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*s,left:e.left}},cr=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},Oh=(t,e,n,s,r,o)=>t<n&&e>s?0:t<n?-(n-t+r):e>s?e-t>s-n?t+r-n:e-s+o:0,b_=(t,e)=>{var o,a,c;const n=t.ownerDocument;let s=e,r=t;for(;r;){const l=r===n.body,h=l?{top:0,right:((o=window.visualViewport)==null?void 0:o.width)??n.documentElement.clientWidth,bottom:((a=window.visualViewport)==null?void 0:a.height)??n.documentElement.clientHeight,left:0}:g_(r),f=getComputedStyle(r),u=Oh(s.left,s.right,h.left,h.right,cr(f.scrollPaddingLeft),cr(f.scrollPaddingRight)),p=Oh(s.top,s.bottom,h.top,h.bottom,cr(f.scrollPaddingTop),cr(f.scrollPaddingBottom));if(u||p)if(l)(c=n.defaultView)==null||c.scrollBy(u,p);else{const{scrollLeft:g,scrollTop:y}=r;p&&(r.scrollTop+=p),u&&(r.scrollLeft+=u);const E=r.scrollLeft-g,_=r.scrollTop-y;s={left:s.left-E,top:s.top-_,right:s.right-E,bottom:s.bottom-_}}r=l||f.position==="fixed"?null:p_(r)}},y_=100,E_=["block","break","cursor","inline","scroll","text"],__=(t,e,n)=>{const s=new ts;return E_.forEach(r=>{const o=e.query(r);o&&s.register(o)}),t.forEach(r=>{let o=e.query(r);o||n.error(`Cannot register "${r}" specified in "formats" config. Are you sure it was registered?`);let a=0;for(;o;)if(s.register(o),o="blotName"in o?o.requiredContainer??null:null,a+=1,a>y_){n.error(`Cycle detected in registering blot requiredContainer: "${r}"`);break}}),s},ls=Tt("quill"),dr=new ts;Ue.uiClass="ql-ui";const Xe=class Xe{static debug(e){e===!0&&(e="log"),Tt.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ta.get(e)||dr.find(e,n)}static import(e){return this.imports[e]==null&&ls.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in e?e.attrName:e.blotName;typeof s=="string"?this.register(`formats/${s}`,e,n):Object.keys(e).forEach(r=>{this.register(r,e[r],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!s&&ls.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&dr.register(n),typeof n.register=="function"&&n.register(dr)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=w_(e,n),this.container=this.options.container,this.container==null){ls.error("Invalid Quill container",e);return}this.options.debug&&Xe.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",ta.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new V;const r=zo.blotName,o=this.options.registry.query(r);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${r}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new h_(this.scroll),this.selection=new c_(this.scroll,this.emitter),this.composition=new m_(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(V.events.EDITOR_CHANGE,a=>{a===V.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(V.events.SCROLL_UPDATE,(a,c)=>{const l=this.selection.lastRange,[h]=this.selection.getRange(),f=l&&h?{oldRange:l,newRange:h}:void 0;Ke.call(this,()=>this.editor.update(null,c,f),a)}),this.emitter.on(V.events.SCROLL_EMBED_UPDATE,(a,c)=>{const l=this.selection.lastRange,[h]=this.selection.getRange(),f=l&&h?{oldRange:l,newRange:h}:void 0;Ke.call(this,()=>{const u=new I().retain(a.offset(this)).retain({[a.statics.blotName]:c});return this.editor.update(u,[],f)},Xe.sources.USER)}),s){const a=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(a)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const s=e;e=document.createElement("div"),e.classList.add(s)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,s){return[e,n,,s]=At(e,n,s),Ke.call(this,()=>this.editor.deleteText(e,n),s,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:V.sources.API;return Ke.call(this,()=>{const r=this.getSelection(!0);let o=new I;if(r==null)return o;if(this.scroll.query(e,v.BLOCK))o=this.editor.formatLine(r.index,r.length,{[e]:n});else{if(r.length===0)return this.selection.format(e,n),o;o=this.editor.formatText(r.index,r.length,{[e]:n})}return this.setSelection(r,V.sources.SILENT),o},s)}formatLine(e,n,s,r,o){let a;return[e,n,a,o]=At(e,n,s,r,o),Ke.call(this,()=>this.editor.formatLine(e,n,a),o,e,0)}formatText(e,n,s,r,o){let a;return[e,n,a,o]=At(e,n,s,r,o),Ke.call(this,()=>this.editor.formatText(e,n,a),o,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof e=="number"?s=this.selection.getBounds(e,n):s=this.selection.getBounds(e.index,e.length),!s)return null;const r=this.container.getBoundingClientRect();return{bottom:s.bottom-r.top,height:s.height,left:s.left-r.left,right:s.right-r.left,top:s.top-r.top,width:s.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=At(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=At(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=At(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Xe.sources.API;return Ke.call(this,()=>this.editor.insertEmbed(e,n,s),r,e)}insertText(e,n,s,r,o){let a;return[e,,a,o]=At(e,0,s,r,o),Ke.call(this,()=>this.editor.insertText(e,n,a),o,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,s){return[e,n,,s]=At(e,n,s),Ke.call(this,()=>this.editor.removeFormat(e,n),s,e)}scrollRectIntoView(e){b_(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V.sources.API;return Ke.call(this,()=>{e=new I(e);const s=this.getLength(),r=this.editor.deleteText(0,s),o=this.editor.insertContents(0,e),a=this.editor.deleteText(this.getLength()-1,1);return r.compose(o).compose(a)},n)}setSelection(e,n,s){e==null?this.selection.setRange(null,n||Xe.sources.API):([e,n,,s]=At(e,n,s),this.selection.setRange(new bn(Math.max(0,e),n),s),s!==V.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V.sources.API;const s=new I().insert(e);return this.setContents(s,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V.sources.API;return Ke.call(this,()=>(e=new I(e),this.editor.applyDelta(e)),n,!0)}};B(Xe,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:dr,theme:"default"}),B(Xe,"events",V.events),B(Xe,"sources",V.sources),B(Xe,"version","2.0.2"),B(Xe,"imports",{delta:I,parchment:K0,"core/module":We,"core/theme":as});let k=Xe;function Lh(t){return typeof t=="string"?document.querySelector(t):t}function ca(t){return Object.entries(t??{}).reduce((e,n)=>{let[s,r]=n;return{...e,[s]:r===!0?{}:r}},{})}function Bh(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function w_(t,e){const n=Lh(t);if(!n)throw new Error("Invalid Quill container");const r=!e.theme||e.theme===k.DEFAULTS.theme?as:k.import(`themes/${e.theme}`);if(!r)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:o,...a}=k.DEFAULTS,{modules:c,...l}=r.DEFAULTS;let h=ca(e.modules);h!=null&&h.toolbar&&h.toolbar.constructor!==Object&&(h={...h,toolbar:{container:h.toolbar}});const f=zt({},ca(o),ca(c),h),u={...a,...Bh(l),...Bh(e)};let p=e.registry;return p?e.formats&&ls.warn('Ignoring "formats" option because "registry" is specified'):p=e.formats?__(e.formats,u.registry,ls):u.registry,{...u,registry:p,container:n,theme:r,modules:Object.entries(f).reduce((g,y)=>{let[E,_]=y;if(!_)return g;const w=k.import(`modules/${E}`);return w==null?(ls.error(`Cannot load ${E} module. Are you sure you registered it?`),g):{...g,[E]:zt({},w.DEFAULTS||{},_)}},{}),bounds:Lh(u.bounds)}}function Ke(t,e,n,s){if(!this.isEnabled()&&e===V.sources.USER&&!this.allowReadOnlyEdits)return new I;let r=n==null?null:this.getSelection();const o=this.editor.delta,a=t();if(r!=null&&(n===!0&&(n=r.index),s==null?r=Vh(r,a,e):s!==0&&(r=Vh(r,n,s,e)),this.setSelection(r,V.sources.SILENT)),a.length()>0){const c=[V.events.TEXT_CHANGE,a,o,e];this.emitter.emit(V.events.EDITOR_CHANGE,...c),e!==V.sources.SILENT&&this.emitter.emit(...c)}return a}function At(t,e,n,s,r){let o={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(r=s,s=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(r=s,s=n,n=e,e=0),typeof n=="object"?(o=n,r=s):typeof n=="string"&&(s!=null?o[n]=s:r=n),r=r||V.sources.API,[t,e,o,r]}function Vh(t,e,n,s){const r=typeof n=="number"?n:0;if(t==null)return null;let o,a;return e&&typeof e.transformPosition=="function"?[o,a]=[t.index,t.index+t.length].map(c=>e.transformPosition(c,s!==V.sources.USER)):[o,a]=[t.index,t.index+t.length].map(c=>c<e||c===e&&s===V.sources.USER?c:r>=0?c+r:Math.max(e,c+r)),new bn(o,a-o)}class yn extends er{}function Ih(t){return t instanceof se||t instanceof Ie}function vh(t){return typeof t.updateContent=="function"}class cs extends zo{constructor(e,n,s){let{emitter:r}=s;super(e,n),this.emitter=r,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(V.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(V.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(V.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[s,r]=this.line(e),[o]=this.line(e+n);if(super.deleteAt(e,n),o!=null&&s!==o&&r>0){if(s instanceof Ie||o instanceof Ie){this.optimize();return}const a=o.children.head instanceof He?null:o.children.head;s.moveChildren(o,a),s.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,s,r){super.formatAt(e,n,s,r),this.optimize()}insertAt(e,n,s){if(e>=this.length())if(s==null||this.scroll.query(n,v.BLOCK)==null){const r=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(r),s==null&&n.endsWith(`
`)?r.insertAt(0,n.slice(0,-1),s):r.insertAt(0,n,s)}else{const r=this.scroll.create(n,s);this.appendChild(r)}else super.insertAt(e,n,s);this.optimize()}insertBefore(e,n){if(e.statics.scope===v.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(e),super.insertBefore(s,n)}else super.insertBefore(e,n)}insertContents(e,n){const s=this.deltaToRenderBlocks(n.concat(new I().insert(`
`))),r=s.pop();if(r==null)return;this.batchStart();const o=s.shift();if(o){const l=o.type==="block"&&(o.delta.length()===0||!this.descendant(Ie,e)[0]&&e<this.length()),h=o.type==="block"?o.delta:new I().insert({[o.key]:o.value});da(this,e,h);const f=o.type==="block"?1:0,u=e+h.length()+f;l&&this.insertAt(u-1,`
`);const p=ve(this.line(e)[0]),g=Ve.AttributeMap.diff(p,o.attributes)||{};Object.keys(g).forEach(y=>{this.formatAt(u-1,1,y,g[y])}),e=u}let[a,c]=this.children.find(e);if(s.length&&(a&&(a=a.split(c),c=0),s.forEach(l=>{if(l.type==="block"){const h=this.createBlock(l.attributes,a||void 0);da(h,0,l.delta)}else{const h=this.create(l.key,l.value);this.insertBefore(h,a||void 0),Object.keys(l.attributes).forEach(f=>{h.format(f,l.attributes[f])})}})),r.type==="block"&&r.delta.length()){const l=a?a.offset(a.scroll)+c:this.length();da(this,l,r.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[s,r]=n;return s instanceof ae?[s,r]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(Ih,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(r,o,a)=>{let c=[],l=a;return r.children.forEachAt(o,a,(h,f,u)=>{Ih(h)?c.push(h):h instanceof er&&(c=c.concat(s(h,f,l))),l-=u}),c};return s(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(V.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=V.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(s=>{let{target:r}=s;const o=this.find(r,!0);return o&&!vh(o)}),e.length>0&&this.emitter.emit(V.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(V.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,s){const[r]=this.descendant(o=>o instanceof Ie,e);r&&r.statics.blotName===n&&vh(r)&&r.updateContent(s)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let s=new I;return e.forEach(r=>{const o=r==null?void 0:r.insert;if(o)if(typeof o=="string"){const a=o.split(`
`);a.slice(0,-1).forEach(l=>{s.insert(l,r.attributes),n.push({type:"block",delta:s,attributes:r.attributes??{}}),s=new I});const c=a[a.length-1];c&&s.insert(c,r.attributes)}else{const a=Object.keys(o)[0];if(!a)return;this.query(a,v.INLINE)?s.push(r):(s.length()&&n.push({type:"block",delta:s,attributes:{}}),s=new I,n.push({type:"blockEmbed",key:a,value:o[a],attributes:r.attributes??{}}))}}),s.length()&&n.push({type:"block",delta:s,attributes:{}}),n}createBlock(e,n){let s;const r={};Object.entries(e).forEach(c=>{let[l,h]=c;this.query(l,v.BLOCK&v.BLOT)!=null?s=l:r[l]=h});const o=this.create(s||this.statics.defaultChild.blotName,s?e[s]:void 0);this.insertBefore(o,n||void 0);const a=o.length();return Object.entries(r).forEach(c=>{let[l,h]=c;o.formatAt(0,a,l,h)}),o}}B(cs,"blotName","scroll"),B(cs,"className","ql-editor"),B(cs,"tagName","DIV"),B(cs,"defaultChild",se),B(cs,"allowedChildren",[se,Ie,yn]);function da(t,e,n){n.reduce((s,r)=>{const o=Ve.Op.length(r);let a=r.attributes||{};if(r.insert!=null){if(typeof r.insert=="string"){const c=r.insert;t.insertAt(s,c);const[l]=t.descendant(ae,s),h=ve(l);a=Ve.AttributeMap.diff(h,a)||{}}else if(typeof r.insert=="object"){const c=Object.keys(r.insert)[0];if(c==null)return s;if(t.insertAt(s,c,r.insert[c]),t.scroll.query(c,v.INLINE)!=null){const[h]=t.descendant(ae,s),f=ve(h);a=Ve.AttributeMap.diff(f,a)||{}}}}return Object.keys(a).forEach(c=>{t.formatAt(s,o,c,a[c])}),s+o},e)}const ha={scope:v.BLOCK,whitelist:["right","center","justify"]},N_=new ot("align","align",ha),xh=new Fe("align","ql-align",ha),Dh=new Wt("align","text-align",ha);class $h extends Wt{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(r=>`00${parseInt(r,10).toString(16)}`.slice(-2)).join("")}`):n}}const k_=new Fe("color","ql-color",{scope:v.INLINE}),ua=new $h("color","color",{scope:v.INLINE}),T_=new Fe("background","ql-bg",{scope:v.INLINE}),fa=new $h("background","background-color",{scope:v.INLINE});class En extends yn{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${ar(this.code(e,n))}
</pre>`}}class le extends se{static register(){k.register(En)}}B(le,"TAB","  ");class ma extends at{}ma.blotName="code",ma.tagName="CODE",le.blotName="code-block",le.className="ql-code-block",le.tagName="DIV",En.blotName="code-block-container",En.className="ql-code-block-container",En.tagName="DIV",En.allowedChildren=[le],le.allowedChildren=[ze,He,rs],le.requiredContainer=En;const pa={scope:v.BLOCK,whitelist:["rtl"]},Mh=new ot("direction","dir",pa),Rh=new Fe("direction","ql-direction",pa),qh=new Wt("direction","direction",pa),Ph={scope:v.INLINE,whitelist:["serif","monospace"]},jh=new Fe("font","ql-font",Ph);class A_ extends Wt{value(e){return super.value(e).replace(/["']/g,"")}}const Fh=new A_("font","font-family",Ph),Uh=new Fe("size","ql-size",{scope:v.INLINE,whitelist:["small","large","huge"]}),Hh=new Wt("size","font-size",{scope:v.INLINE,whitelist:["10px","18px","32px"]}),C_=Tt("quill:keyboard"),S_=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class hr extends We{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!n[s]!==e[s]&&n[s]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=L_(e);if(r==null){C_.warn("Attempted to add invalid keyboard binding",r);return}typeof n=="function"&&(n={handler:n}),typeof s=="function"&&(s={handler:s}),(Array.isArray(r.key)?r.key:[r.key]).forEach(a=>{const c={...r,key:a,...n,...s};this.bindings[c.key]=this.bindings[c.key]||[],this.bindings[c.key].push(c)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const r=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(w=>hr.match(e,w));if(r.length===0)return;const o=k.find(e.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const a=this.quill.getSelection();if(a==null||!this.quill.hasFocus())return;const[c,l]=this.quill.getLine(a.index),[h,f]=this.quill.getLeaf(a.index),[u,p]=a.length===0?[h,f]:this.quill.getLeaf(a.index+a.length),g=h instanceof tr?h.value().slice(0,f):"",y=u instanceof tr?u.value().slice(p):"",E={collapsed:a.length===0,empty:a.length===0&&c.length()<=1,format:this.quill.getFormat(a),line:c,offset:l,prefix:g,suffix:y,event:e};r.some(w=>{if(w.collapsed!=null&&w.collapsed!==E.collapsed||w.empty!=null&&w.empty!==E.empty||w.offset!=null&&w.offset!==E.offset)return!1;if(Array.isArray(w.format)){if(w.format.every(T=>E.format[T]==null))return!1}else if(typeof w.format=="object"&&!Object.keys(w.format).every(T=>w.format[T]===!0?E.format[T]!=null:w.format[T]===!1?E.format[T]==null:jo(w.format[T],E.format[T])))return!1;return w.prefix!=null&&!w.prefix.test(E.prefix)||w.suffix!=null&&!w.suffix.test(E.suffix)?!1:w.handler.call(this,a,E,w)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let r={};const[o]=this.quill.getLine(e.index);let a=new I().retain(e.index-s).delete(s);if(n.offset===0){const[c]=this.quill.getLine(e.index-1);if(c&&!(c.statics.blotName==="block"&&c.length()<=1)){const h=o.formats(),f=this.quill.getFormat(e.index-1,1);if(r=Ve.AttributeMap.diff(h,f)||{},Object.keys(r).length>0){const u=new I().retain(e.index+o.length()-2).retain(1,r);a=a.compose(u)}}}this.quill.updateContents(a,k.sources.USER),this.quill.focus()}handleDelete(e,n){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-s)return;let r={};const[o]=this.quill.getLine(e.index);let a=new I().retain(e.index).delete(s);if(n.offset>=o.length()-1){const[c]=this.quill.getLine(e.index+1);if(c){const l=o.formats(),h=this.quill.getFormat(e.index,1);r=Ve.AttributeMap.diff(l,h)||{},Object.keys(r).length>0&&(a=a.retain(c.length()-1).retain(1,r))}}this.quill.updateContents(a,k.sources.USER),this.quill.focus()}handleDeleteRange(e){ba({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const s=Object.keys(n.format).reduce((o,a)=>(this.quill.scroll.query(a,v.BLOCK)&&!Array.isArray(n.format[a])&&(o[a]=n.format[a]),o),{}),r=new I().retain(e.index).delete(e.length).insert(`
`,s);this.quill.updateContents(r,k.sources.USER),this.quill.setSelection(e.index+1,k.sources.SILENT),this.quill.focus()}}const O_={bindings:{bold:ga("bold"),italic:ga("italic"),underline:ga("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",k.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",k.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",k.sources.USER):e.format.list!=null&&this.quill.format("list",!1,k.sources.USER)}},"indent code-block":zh(!0),"outdent code-block":zh(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,k.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new I().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,k.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,k.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,k.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,k.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),s={...e.formats(),list:"checked"},r=new I().retain(t.index).insert(`
`,s).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,k.sources.USER),this.quill.setSelection(t.index+1,k.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,s]=this.quill.getLine(t.index),r=new I().retain(t.index).insert(`
`,e.format).retain(n.length()-s-1).retain(1,{header:null});this.quill.updateContents(r,k.sources.USER),this.quill.setSelection(t.index+1,k.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,s,r,o]=e.getTable(t),a=B_(n,s,r,o);if(a==null)return;let c=n.offset();if(a<0){const l=new I().retain(c).insert(`
`);this.quill.updateContents(l,k.sources.USER),this.quill.setSelection(t.index+1,t.length,k.sources.SILENT)}else if(a>0){c+=n.length();const l=new I().retain(c).insert(`
`);this.quill.updateContents(l,k.sources.USER),this.quill.setSelection(c,k.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:s}=e,r=s.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(r-1,k.sources.USER):this.quill.setSelection(r+s.length(),k.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[s,r]=this.quill.getLine(t.index);if(r>n)return!0;let o;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(t.index," ",k.sources.USER),this.quill.history.cutoff();const a=new I().retain(t.index-r).delete(n+1).retain(s.length()-2-r).retain(1,{list:o});return this.quill.updateContents(a,k.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,k.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let s=2,r=e;for(;r!=null&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,s-=1,s<=0){const o=new I().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,k.sources.USER),this.quill.setSelection(t.index-1,k.sources.SILENT),!1}return!0}},"embed left":ur("ArrowLeft",!1),"embed left shift":ur("ArrowLeft",!0),"embed right":ur("ArrowRight",!1),"embed right shift":ur("ArrowRight",!0),"table down":Wh(!1),"table up":Wh(!0)}};hr.DEFAULTS=O_;function zh(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:s}=n;const r=this.quill.scroll.query("code-block"),{TAB:o}=r;if(e.length===0&&!s.shiftKey){this.quill.insertText(e.index,o,k.sources.USER),this.quill.setSelection(e.index+o.length,k.sources.SILENT);return}const a=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:c,length:l}=e;a.forEach((h,f)=>{t?(h.insertAt(0,o),f===0?c+=o.length:l+=o.length):h.domNode.textContent.startsWith(o)&&(h.deleteAt(0,o.length),f===0?c-=o.length:l-=o.length)}),this.quill.update(k.sources.USER),this.quill.setSelection(c,l,k.sources.SILENT)}}}function ur(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:r}=s;t==="ArrowRight"&&(r+=s.length+1);const[o]=this.quill.getLeaf(r);return o instanceof Ae?(t==="ArrowLeft"?e?this.quill.setSelection(s.index-1,s.length+1,k.sources.USER):this.quill.setSelection(s.index-1,k.sources.USER):e?this.quill.setSelection(s.index,s.length+1,k.sources.USER):this.quill.setSelection(s.index+s.length+1,k.sources.USER),!1):!0}}}function ga(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],k.sources.USER)}}}function Wh(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const s=t?"prev":"next",r=n.line,o=r.parent[s];if(o!=null){if(o.statics.blotName==="table-row"){let a=o.children.head,c=r;for(;c.prev!=null;)c=c.prev,a=a.next;const l=a.offset(this.quill.scroll)+Math.min(n.offset,a.length()-1);this.quill.setSelection(l,0,k.sources.USER)}}else{const a=r.table()[s];a!=null&&(t?this.quill.setSelection(a.offset(this.quill.scroll)+a.length()-1,0,k.sources.USER):this.quill.setSelection(a.offset(this.quill.scroll),0,k.sources.USER))}return!1}}}function L_(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=Jn(t);else return null;return t.shortKey&&(t[S_]=t.shortKey,delete t.shortKey),t}function ba(t){let{quill:e,range:n}=t;const s=e.getLines(n);let r={};if(s.length>1){const o=s[0].formats(),a=s[s.length-1].formats();r=Ve.AttributeMap.diff(a,o)||{}}e.deleteText(n,k.sources.USER),Object.keys(r).length>0&&e.formatLine(n.index,1,r,k.sources.USER),e.setSelection(n.index,k.sources.SILENT)}function B_(t,e,n,s){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?s===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const V_=/font-weight:\s*normal/,I_=["P","OL","UL"],Kh=t=>t&&I_.includes(t.tagName),v_=t=>{Array.from(t.querySelectorAll("br")).filter(e=>Kh(e.previousElementSibling)&&Kh(e.nextElementSibling)).forEach(e=>{var n;(n=e.parentNode)==null||n.removeChild(e)})},x_=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var n;return(n=e.getAttribute("style"))==null?void 0:n.match(V_)}).forEach(e=>{var s;const n=t.createDocumentFragment();n.append(...e.childNodes),(s=e.parentNode)==null||s.replaceChild(n,e)})};function D_(t){t.querySelector('[id^="docs-internal-guid-"]')&&(x_(t),v_(t))}const $_=/\bmso-list:[^;]*ignore/i,M_=/\bmso-list:[^;]*\bl(\d+)/i,R_=/\bmso-list:[^;]*\blevel(\d+)/i,q_=(t,e)=>{const n=t.getAttribute("style"),s=n==null?void 0:n.match(M_);if(!s)return null;const r=Number(s[1]),o=n==null?void 0:n.match(R_),a=o?Number(o[1]):1,c=new RegExp(`@list l${r}:level${a}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(c),h=l&&l[1]==="bullet"?"bullet":"ordered";return{id:r,indent:a,type:h,element:t}},P_=t=>{var a,c;const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],s=[];e.forEach(l=>{(l.getAttribute("style")||"").match($_)?n.push(l):s.push(l)}),n.forEach(l=>{var h;return(h=l.parentNode)==null?void 0:h.removeChild(l)});const r=t.documentElement.innerHTML,o=s.map(l=>q_(l,r)).filter(l=>l);for(;o.length;){const l=[];let h=o.shift();for(;h;)l.push(h),h=o.length&&((a=o[0])==null?void 0:a.element)===h.element.nextElementSibling&&o[0].id===h.id?o.shift():null;const f=document.createElement("ul");l.forEach(g=>{const y=document.createElement("li");y.setAttribute("data-list",g.type),g.indent>1&&y.setAttribute("class",`ql-indent-${g.indent-1}`),y.innerHTML=g.element.innerHTML,f.appendChild(y)});const u=(c=l[0])==null?void 0:c.element,{parentNode:p}=u??{};u&&(p==null||p.replaceChild(f,u)),l.slice(1).forEach(g=>{let{element:y}=g;p==null||p.removeChild(y)})}};function j_(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&P_(t)}const F_=[j_,D_],U_=t=>{t.documentElement&&F_.forEach(e=>{e(t)})},H_=Tt("quill:clipboard"),z_=[[Node.TEXT_NODE,sw],[Node.TEXT_NODE,Zh],["br",X_],[Node.ELEMENT_NODE,Zh],[Node.ELEMENT_NODE,Y_],[Node.ELEMENT_NODE,G_],[Node.ELEMENT_NODE,tw],["li",J_],["ol, ul",ew],["pre",Z_],["tr",nw],["b",Ea("bold")],["i",Ea("italic")],["strike",Ea("strike")],["style",Q_]],W_=[N_,Mh].reduce((t,e)=>(t[e.keyName]=e,t),{}),Gh=[Dh,fa,ua,qh,Fh,Hh].reduce((t,e)=>(t[e.keyName]=e,t),{});class Yh extends We{constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],z_.concat(this.options.matchers??[]).forEach(s=>{let[r,o]=s;this.addMatcher(r,o)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:s}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r[le.blotName])return new I().insert(s||"",{[le.blotName]:r[le.blotName]});if(!n)return new I().insert(s||"",r);const o=this.convertHTML(n);return Ks(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||r.table)?o.compose(new I().retain(o.length()-1).delete(1)):o}normalizeHTML(e){U_(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const s=n.body,r=new WeakMap,[o,a]=this.prepareMatching(s,r);return ya(this.quill.scroll,s,o,a,r)}dangerouslyPasteHTML(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.sources.API;if(typeof e=="string"){const r=this.convert({html:e,text:""});this.quill.setContents(r,n),this.quill.setSelection(0,k.sources.SILENT)}else{const r=this.convert({html:n,text:""});this.quill.updateContents(new I().retain(e).concat(r),s),this.quill.setSelection(e+r.length(),k.sources.SILENT)}}onCaptureCopy(e){var a,c;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:r,text:o}=this.onCopy(s,n);(a=e.clipboardData)==null||a.setData("text/plain",o),(c=e.clipboardData)==null||c.setData("text/html",r),n&&ba({range:s,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){var a,c,l,h,f;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const s=(a=e.clipboardData)==null?void 0:a.getData("text/html");let r=(c=e.clipboardData)==null?void 0:c.getData("text/plain");if(!s&&!r){const u=(l=e.clipboardData)==null?void 0:l.getData("text/uri-list");u&&(r=this.normalizeURIList(u))}const o=Array.from(((h=e.clipboardData)==null?void 0:h.files)||[]);if(!s&&o.length>0){this.quill.uploader.upload(n,o);return}if(s&&o.length>0){const u=new DOMParser().parseFromString(s,"text/html");if(u.body.childElementCount===1&&((f=u.body.firstElementChild)==null?void 0:f.tagName)==="IMG"){this.quill.uploader.upload(n,o);return}}this.onPaste(n,{html:s,text:r})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:s,html:r}=n;const o=this.quill.getFormat(e.index),a=this.convert({text:s,html:r},o);H_.log("onPaste",a,{text:s,html:r});const c=new I().retain(e.index).delete(e.length).concat(a);this.quill.updateContents(c,k.sources.USER),this.quill.setSelection(c.length()-e.length,k.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const s=[],r=[];return this.matchers.forEach(o=>{const[a,c]=o;switch(a){case Node.TEXT_NODE:r.push(c);break;case Node.ELEMENT_NODE:s.push(c);break;default:Array.from(e.querySelectorAll(a)).forEach(l=>{if(n.has(l)){const h=n.get(l);h==null||h.push(c)}else n.set(l,[c])});break}}),[s,r]}}B(Yh,"DEFAULTS",{matchers:[]});function _n(t,e,n,s){return s.query(e)?t.reduce((r,o)=>{if(!o.insert)return r;if(o.attributes&&o.attributes[e])return r.push(o);const a=n?{[e]:n}:{};return r.insert(o.insert,{...a,...o.attributes})},new I):t}function Ks(t,e){let n="";for(let s=t.ops.length-1;s>=0&&n.length<e.length;--s){const r=t.ops[s];if(typeof r.insert!="string")break;n=r.insert+n}return n.slice(-1*e.length)===e}function Gt(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Ae?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function K_(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Gt(t.previousElementSibling,e)&&!Gt(t.nextElementSibling,e)}const fr=new WeakMap;function Xh(t){return t==null?!1:(fr.has(t)||(t.tagName==="PRE"?fr.set(t,!0):fr.set(t,Xh(t.parentNode))),fr.get(t))}function ya(t,e,n,s,r){return e.nodeType===e.TEXT_NODE?s.reduce((o,a)=>a(e,o,t),new I):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((o,a)=>{let c=ya(t,a,n,s,r);return a.nodeType===e.ELEMENT_NODE&&(c=n.reduce((l,h)=>h(a,l,t),c),c=(r.get(a)||[]).reduce((l,h)=>h(a,l,t),c)),o.concat(c)},new I):new I}function Ea(t){return(e,n,s)=>_n(n,t,!0,s)}function G_(t,e,n){const s=ot.keys(t),r=Fe.keys(t),o=Wt.keys(t),a={};return s.concat(r).concat(o).forEach(c=>{let l=n.query(c,v.ATTRIBUTE);l!=null&&(a[l.attrName]=l.value(t),a[l.attrName])||(l=W_[c],l!=null&&(l.attrName===c||l.keyName===c)&&(a[l.attrName]=l.value(t)||void 0),l=Gh[c],l!=null&&(l.attrName===c||l.keyName===c)&&(l=Gh[c],a[l.attrName]=l.value(t)||void 0))}),Object.entries(a).reduce((c,l)=>{let[h,f]=l;return _n(c,h,f,n)},e)}function Y_(t,e,n){const s=n.query(t);if(s==null)return e;if(s.prototype instanceof Ae){const r={},o=s.value(t);if(o!=null)return r[s.blotName]=o,new I().insert(r,s.formats(t,n))}else if(s.prototype instanceof Hs&&!Ks(e,`
`)&&e.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return _n(e,s.blotName,s.formats(t,n),n);return e}function X_(t,e){return Ks(e,`
`)||e.insert(`
`),e}function Z_(t,e,n){const s=n.query("code-block"),r=s&&"formats"in s&&typeof s.formats=="function"?s.formats(t,n):!0;return _n(e,"code-block",r,n)}function Q_(){return new I}function J_(t,e,n){const s=n.query(t);if(s==null||s.blotName!=="list"||!Ks(e,`
`))return e;let r=-1,o=t.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(r+=1),o=o.parentNode;return r<=0?e:e.reduce((a,c)=>c.insert?c.attributes&&typeof c.attributes.indent=="number"?a.push(c):a.insert(c.insert,{indent:r,...c.attributes||{}}):a,new I)}function ew(t,e,n){const s=t;let r=s.tagName==="OL"?"ordered":"bullet";const o=s.getAttribute("data-checked");return o&&(r=o==="true"?"checked":"unchecked"),_n(e,"list",r,n)}function Zh(t,e,n){if(!Ks(e,`
`)){if(Gt(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let s=t.nextSibling;for(;s!=null;){if(Gt(s,n))return e.insert(`
`);const r=n.query(s);if(r&&r.prototype instanceof Ie)return e.insert(`
`);s=s.firstChild}}}return e}function tw(t,e,n){var o;const s={},r=t.style||{};return r.fontStyle==="italic"&&(s.italic=!0),r.textDecoration==="underline"&&(s.underline=!0),r.textDecoration==="line-through"&&(s.strike=!0),((o=r.fontWeight)!=null&&o.startsWith("bold")||parseInt(r.fontWeight,10)>=700)&&(s.bold=!0),e=Object.entries(s).reduce((a,c)=>{let[l,h]=c;return _n(a,l,h,n)},e),parseFloat(r.textIndent||0)>0?new I().insert("	").concat(e):e}function nw(t,e,n){var r,o;const s=((r=t.parentElement)==null?void 0:r.tagName)==="TABLE"?t.parentElement:(o=t.parentElement)==null?void 0:o.parentElement;if(s!=null){const c=Array.from(s.querySelectorAll("tr")).indexOf(t)+1;return _n(e,"table",c,n)}return e}function sw(t,e,n){var r;let s=t.data;if(((r=t.parentElement)==null?void 0:r.tagName)==="O:P")return e.insert(s.trim());if(!Xh(t)){if(s.trim().length===0&&s.includes(`
`)&&!K_(t,n))return e;const o=(a,c)=>{const l=c.replace(/[^\u00a0]/g,"");return l.length<1&&a?" ":l};s=s.replace(/\r\n/g," ").replace(/\n/g," "),s=s.replace(/\s\s+/g,o.bind(o,!0)),(t.previousSibling==null&&t.parentElement!=null&&Gt(t.parentElement,n)||t.previousSibling instanceof Element&&Gt(t.previousSibling,n))&&(s=s.replace(/^\s+/,o.bind(o,!1))),(t.nextSibling==null&&t.parentElement!=null&&Gt(t.parentElement,n)||t.nextSibling instanceof Element&&Gt(t.nextSibling,n))&&(s=s.replace(/\s+$/,o.bind(o,!1)))}return e.insert(s)}class Qh extends We{constructor(n,s){super(n,s);B(this,"lastRecorded",0);B(this,"ignoreChange",!1);B(this,"stack",{undo:[],redo:[]});B(this,"currentRange",null);this.quill.on(k.events.EDITOR_CHANGE,(r,o,a,c)=>{r===k.events.SELECTION_CHANGE?o&&c!==k.sources.SILENT&&(this.currentRange=o):r===k.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||c===k.sources.USER?this.record(o,a):this.transform(o)),this.currentRange=_a(this.currentRange,o))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(n,s){if(this.stack[n].length===0)return;const r=this.stack[n].pop();if(!r)return;const o=this.quill.getContents(),a=r.delta.invert(o);this.stack[s].push({delta:a,range:_a(r.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,k.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(n,s){if(n.ops.length===0)return;this.stack.redo=[];let r=n.invert(s),o=this.currentRange;const a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){const c=this.stack.undo.pop();c&&(r=r.compose(c.delta),o=c.range)}else this.lastRecorded=a;r.length()!==0&&(this.stack.undo.push({delta:r,range:o}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(n){Jh(this.stack.undo,n),Jh(this.stack.redo,n)}undo(){this.change("undo","redo")}restoreSelection(n){if(n.range)this.quill.setSelection(n.range,k.sources.USER);else{const s=rw(this.quill.scroll,n.delta);this.quill.setSelection(s,k.sources.USER)}}}B(Qh,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Jh(t,e){let n=e;for(let s=t.length-1;s>=0;s-=1){const r=t[s];t[s]={delta:n.transform(r.delta,!0),range:r.range&&_a(r.range,n)},n=r.delta.transform(n),t[s].delta.length()===0&&t.splice(s,1)}}function iw(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(s=>t.query(s,v.BLOCK)!=null):!1}function rw(t,e){const n=e.reduce((r,o)=>r+(o.delete||0),0);let s=e.length()-n;return iw(t,e)&&(s-=1),s}function _a(t,e){if(!t)return t;const n=e.transformPosition(t.index),s=e.transformPosition(t.index+t.length);return{index:n,length:s-n}}class eu extends We{constructor(e,n){super(e,n),e.root.addEventListener("drop",s=>{var a;s.preventDefault();let r=null;if(document.caretRangeFromPoint)r=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const c=document.caretPositionFromPoint(s.clientX,s.clientY);r=document.createRange(),r.setStart(c.offsetNode,c.offset),r.setEnd(c.offsetNode,c.offset)}const o=r&&e.selection.normalizeNative(r);if(o){const c=e.selection.normalizedToRange(o);(a=s.dataTransfer)!=null&&a.files&&this.upload(c,s.dataTransfer.files)}})}upload(e,n){const s=[];Array.from(n).forEach(r=>{var o;r&&((o=this.options.mimetypes)!=null&&o.includes(r.type))&&s.push(r)}),s.length>0&&this.options.handler.call(this,e,s)}}eu.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(s=>new Promise(r=>{const o=new FileReader;o.onload=()=>{r(o.result)},o.readAsDataURL(s)}));Promise.all(n).then(s=>{const r=s.reduce((o,a)=>o.insert({image:a}),new I().retain(t.index).delete(t.length));this.quill.updateContents(r,V.sources.USER),this.quill.setSelection(t.index+s.length,V.sources.SILENT)})}};const ow=["insertText","insertReplacementText"];class aw extends We{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||e.on(k.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){ba({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const s=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new I().retain(e.index).insert(n,s),k.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,k.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!ow.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const s=lw(e);if(s==null)return;const r=this.quill.selection.normalizeNative(n),o=r?this.quill.selection.normalizedToRange(r):null;o&&this.replaceText(o,s)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function lw(t){var e;return typeof t.data=="string"?t.data:(e=t.dataTransfer)!=null&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const cw=/Mac/i.test(navigator.platform),dw=100,hw=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||cw&&t.key==="a"&&t.ctrlKey===!0);class uw extends We{constructor(n,s){super(n,s);B(this,"isListening",!1);B(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(n,s){let{line:r,event:o}=s;if(!(r instanceof Ue)||!r.uiNode)return!0;const a=getComputedStyle(r.domNode).direction==="rtl";return a&&o.key!=="ArrowRight"||!a&&o.key!=="ArrowLeft"?!0:(this.quill.setSelection(n.index-1,n.length+(o.shiftKey?1:0),k.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",n=>{!n.defaultPrevented&&hw(n)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+dw,this.isListening)return;this.isListening=!0;const n=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",n,{once:!0})}handleSelectionChange(){const n=document.getSelection();if(!n)return;const s=n.getRangeAt(0);if(s.collapsed!==!0||s.startOffset!==0)return;const r=this.quill.scroll.find(s.startContainer);if(!(r instanceof Ue)||!r.uiNode)return;const o=document.createRange();o.setStartAfter(r.uiNode),o.setEndAfter(r.uiNode),n.removeAllRanges(),n.addRange(o)}}k.register({"blots/block":se,"blots/block/embed":Ie,"blots/break":He,"blots/container":yn,"blots/cursor":rs,"blots/embed":la,"blots/inline":at,"blots/scroll":cs,"blots/text":ze,"modules/clipboard":Yh,"modules/history":Qh,"modules/keyboard":hr,"modules/uploader":eu,"modules/input":aw,"modules/uiNode":uw});class fw extends Fe{add(e,n){let s=0;if(n==="+1"||n==="-1"){const r=this.value(e)||0;s=n==="+1"?r+1:r-1}else typeof n=="number"&&(s=n);return s===0?(this.remove(e),!0):super.add(e,s.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const mw=new fw("indent","ql-indent",{scope:v.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class wa extends se{}B(wa,"blotName","blockquote"),B(wa,"tagName","blockquote");class Na extends se{static formats(e){return this.tagName.indexOf(e.tagName)+1}}B(Na,"blotName","header"),B(Na,"tagName",["H1","H2","H3","H4","H5","H6"]);class Gs extends yn{}Gs.blotName="list-container",Gs.tagName="OL";class Ys extends se{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){k.register(Gs)}constructor(e,n){super(e,n);const s=n.ownerDocument.createElement("span"),r=o=>{if(!e.isEnabled())return;const a=this.statics.formats(n,e);a==="checked"?(this.format("list","unchecked"),o.preventDefault()):a==="unchecked"&&(this.format("list","checked"),o.preventDefault())};s.addEventListener("mousedown",r),s.addEventListener("touchstart",r),this.attachUI(s)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}Ys.blotName="list",Ys.tagName="LI",Gs.allowedChildren=[Ys],Ys.requiredContainer=Gs;class Xs extends at{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}B(Xs,"blotName","bold"),B(Xs,"tagName",["STRONG","B"]);class ka extends Xs{}B(ka,"blotName","italic"),B(ka,"tagName",["EM","I"]);class Yt extends at{static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return tu(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}B(Yt,"blotName","link"),B(Yt,"tagName","A"),B(Yt,"SANITIZED_URL","about:blank"),B(Yt,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function tu(t,e){const n=document.createElement("a");n.href=t;const s=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(s)>-1}class Ta extends at{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}B(Ta,"blotName","script"),B(Ta,"tagName",["SUB","SUP"]);class Aa extends Xs{}B(Aa,"blotName","strike"),B(Aa,"tagName",["S","STRIKE"]);class Ca extends at{}B(Ca,"blotName","underline"),B(Ca,"tagName","U");class mr extends la{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}B(mr,"blotName","formula"),B(mr,"className","ql-formula"),B(mr,"tagName","SPAN");const nu=["alt","height","width"];class Sa extends Ae{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return nu.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return tu(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){nu.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}}B(Sa,"blotName","image"),B(Sa,"tagName","IMG");const su=["height","width"];class pr extends Ie{static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return su.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static sanitize(e){return Yt.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){su.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}B(pr,"blotName","video"),B(pr,"className","ql-video"),B(pr,"tagName","IFRAME");const Zs=new Fe("code-token","hljs",{scope:v.INLINE});class Ct extends at{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(le.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,s){super(e,n,s),Zs.add(this.domNode,s)}format(e,n){e!==Ct.blotName?super.format(e,n):n?Zs.add(this.domNode,n):(Zs.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Zs.value(this.domNode)||this.unwrap()}}Ct.blotName="code-token",Ct.className="ql-token";class xe extends le{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),Ct.blotName,!1),super.replaceWith(e,n)}}class Qs extends En{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===xe.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(e,n)}))}formatAt(e,n,s,r){s===xe.blotName&&(this.forceNext=!0),super.formatAt(e,n,s,r)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const r=`${Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).map(a=>a.textContent).join(`
`)}
`,o=xe.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==r){if(r.trim().length>0||this.cachedText==null){const a=this.children.reduce((l,h)=>l.concat(kh(h,!1)),new I),c=e(r,o);a.diff(c).reduce((l,h)=>{let{retain:f,attributes:u}=h;return f?(u&&Object.keys(u).forEach(p=>{[xe.blotName,Ct.blotName].includes(p)&&this.formatAt(l,f,p,u[p])}),l+f):l},0)}this.cachedText=r,this.forceNext=!1}}html(e,n){const[s]=this.children.find(e);return`<pre data-language="${s?xe.formats(s.domNode):"plain"}">
${ar(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=xe.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}Qs.allowedChildren=[xe],xe.requiredContainer=Qs,xe.allowedChildren=[Ct,rs,ze,He];const pw=(t,e,n)=>{if(typeof t.versionString=="string"){const s=t.versionString.split(".")[0];if(parseInt(s,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class iu extends We{static register(){k.register(Ct,!0),k.register(xe,!0),k.register(Qs,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,r)=>{let{key:o}=r;return s[o]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(k.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Qs))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:r,label:o}=s;const a=n.ownerDocument.createElement("option");a.textContent=o,a.setAttribute("value",r),n.appendChild(a)}),n.addEventListener("change",()=>{e.format(xe.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=xe.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(k.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(k.sources.USER);const s=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Qs):[e]).forEach(o=>{o.highlight(this.highlightBlot,n)}),this.quill.update(k.sources.SILENT),s!=null&&this.quill.setSelection(s,k.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return ar(e).split(`
`).reduce((r,o,a)=>(a!==0&&r.insert(`
`,{[le.blotName]:n}),r.insert(o)),new I);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(le.className),s.innerHTML=pw(this.options.hljs,n,e),ya(this.quill.scroll,s,[(r,o)=>{const a=Zs.value(r);return a?o.compose(new I().retain(o.length(),{[Ct.blotName]:a})):o}],[(r,o)=>r.data.split(`
`).reduce((a,c,l)=>(l!==0&&a.insert(`
`,{[le.blotName]:n}),a.insert(c)),o)],new WeakMap)}}iu.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const si=class si extends se{static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",Oa()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===si.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};B(si,"blotName","table"),B(si,"tagName","TD");let Ge=si;class St extends yn{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),s=this.next.children.head.formats(),r=this.next.children.tail.formats();return e.table===n.table&&e.table===s.table&&e.table===r.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const s=n.formats(),r=n.next.formats();if(s.table!==r.table){const o=this.splitAfter(n);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}B(St,"blotName","table-row"),B(St,"tagName","TR");class lt extends yn{}B(lt,"blotName","table-body"),B(lt,"tagName","TBODY");class ds extends yn{balanceCells(){const e=this.descendants(St),n=e.reduce((s,r)=>Math.max(r.children.length,s),0);e.forEach(s=>{new Array(n-s.children.length).fill(0).forEach(()=>{let r;s.children.head!=null&&(r=Ge.formats(s.children.head.domNode));const o=this.scroll.create(Ge.blotName,r);s.appendChild(o),o.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(lt);n==null||n.children.head==null||n.children.forEach(s=>{const r=s.children.at(e);r!=null&&r.remove()})}insertColumn(e){const[n]=this.descendant(lt);n==null||n.children.head==null||n.children.forEach(s=>{const r=s.children.at(e),o=Ge.formats(s.children.head.domNode),a=this.scroll.create(Ge.blotName,o);s.insertBefore(a,r)})}insertRow(e){const[n]=this.descendant(lt);if(n==null||n.children.head==null)return;const s=Oa(),r=this.scroll.create(St.blotName);n.children.head.children.forEach(()=>{const a=this.scroll.create(Ge.blotName,s);r.appendChild(a)});const o=n.children.at(e);n.insertBefore(r,o)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}B(ds,"blotName","table-container"),B(ds,"tagName","TABLE"),ds.allowedChildren=[lt],lt.requiredContainer=ds,lt.allowedChildren=[St],St.requiredContainer=lt,St.allowedChildren=[Ge],Ge.requiredContainer=St;function Oa(){return`row-${Math.random().toString(36).slice(2,6)}`}class gw extends We{static register(){k.register(Ge),k.register(St),k.register(lt),k.register(ds)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(ds).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(k.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(k.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(k.sources.USER),this.quill.setSelection(n,k.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,s]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==Ge.blotName)return[null,null,null,-1];const r=n.parent;return[r.parent.parent,r,n,s]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[s,r,o]=this.getTable(n);if(o==null)return;const a=o.cellOffset();s.insertColumn(a+e),this.quill.update(k.sources.USER);let c=r.rowOffset();e===0&&(c+=1),this.quill.setSelection(n.index+c,n.length,k.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[s,r,o]=this.getTable(n);if(o==null)return;const a=r.rowOffset();s.insertRow(a+e),this.quill.update(k.sources.USER),e>0?this.quill.setSelection(n,k.sources.SILENT):this.quill.setSelection(n.index+r.children.length,n.length,k.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const s=this.quill.getSelection();if(s==null)return;const r=new Array(e).fill(0).reduce(o=>{const a=new Array(n).fill(`
`).join("");return o.insert(a,{table:Oa()})},new I().retain(s.index));this.quill.updateContents(r,k.sources.USER),this.quill.setSelection(s.index,k.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(k.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(k.events.TEXT_CHANGE,(s,r,o)=>{o===k.sources.USER&&this.balanceTables()}),!0):!1)})}}const ru=Tt("quill:toolbar");class La extends We{constructor(e,n){var s,r;if(super(e,n),Array.isArray(this.options.container)){const o=document.createElement("div");o.setAttribute("role","toolbar"),bw(o,this.options.container),(r=(s=e.container)==null?void 0:s.parentNode)==null||r.insertBefore(o,e.container),this.container=o}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){ru.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(o=>{var c;const a=(c=this.options.handlers)==null?void 0:c[o];a&&this.addHandler(o,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(o=>{this.attach(o)}),this.quill.on(k.events.EDITOR_CHANGE,()=>{const[o]=this.quill.selection.getRange();this.update(o)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(r=>r.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){ru.warn("ignoring attaching to nonexistent format",n,e);return}const s=e.tagName==="SELECT"?"change":"click";e.addEventListener(s,r=>{let o;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const c=e.options[e.selectedIndex];c.hasAttribute("selected")?o=!1:o=c.value||!1}else e.classList.contains("ql-active")?o=!1:o=e.value||!e.hasAttribute("value"),r.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,o);else if(this.quill.scroll.query(n).prototype instanceof Ae){if(o=prompt(`Enter ${n}`),!o)return;this.quill.updateContents(new I().retain(a.index).delete(a.length).insert({[n]:o}),k.sources.USER)}else this.quill.format(n,o,k.sources.USER);this.update(a)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(s=>{const[r,o]=s;if(o.tagName==="SELECT"){let a=null;if(e==null)a=null;else if(n[r]==null)a=o.querySelector("option[selected]");else if(!Array.isArray(n[r])){let c=n[r];typeof c=="string"&&(c=c.replace(/"/g,'\\"')),a=o.querySelector(`option[value="${c}"]`)}a==null?(o.value="",o.selectedIndex=-1):a.selected=!0}else if(e==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const a=n[r],c=a===o.getAttribute("value")||a!=null&&a.toString()===o.getAttribute("value")||a==null&&!o.getAttribute("value");o.classList.toggle("ql-active",c),o.setAttribute("aria-pressed",c.toString())}else{const a=n[r]!=null;o.classList.toggle("ql-active",a),o.setAttribute("aria-pressed",a.toString())}})}}La.DEFAULTS={};function ou(t,e,n){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${e}`),s.setAttribute("aria-pressed","false"),n!=null?(s.value=n,s.setAttribute("aria-label",`${e}: ${n}`)):s.setAttribute("aria-label",e),t.appendChild(s)}function bw(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const s=document.createElement("span");s.classList.add("ql-formats"),n.forEach(r=>{if(typeof r=="string")ou(s,r);else{const o=Object.keys(r)[0],a=r[o];Array.isArray(a)?yw(s,o,a):ou(s,o,a)}}),t.appendChild(s)})}function yw(t,e,n){const s=document.createElement("select");s.classList.add(`ql-${e}`),n.forEach(r=>{const o=document.createElement("option");r!==!1?o.setAttribute("value",String(r)):o.setAttribute("selected","selected"),s.appendChild(o)}),t.appendChild(s)}La.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,v.INLINE)!=null&&this.quill.format(n,!1,k.sources.USER)})}else this.quill.removeFormat(t.index,t.length,k.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",k.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,k.sources.USER),this.quill.format("direction",t,k.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),s=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let r=t==="+1"?1:-1;n.direction==="rtl"&&(r*=-1),this.quill.format("indent",s+r,k.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,k.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,k.sources.USER):this.quill.format("list","unchecked",k.sources.USER):this.quill.format("list",t,k.sources.USER)}}};const Ew='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',_w='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',ww='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',Nw='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',kw='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Tw='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',Aw='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',Cw='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',au='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Js={align:{"":Ew,center:_w,right:ww,justify:Nw},background:kw,blockquote:Tw,bold:Aw,clean:Cw,code:au,"code-block":au,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'},Sw='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let lu=0;function cu(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class gr{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),cu(this.label,"aria-expanded"),cu(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const s=e.getAttribute("value");return s&&n.setAttribute("data-value",s),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",r=>{switch(r.key){case"Enter":this.selectItem(n,!0),r.preventDefault();break;case"Escape":this.escape(),r.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=Sw,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${lu}`,lu+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const s=this.buildItem(n);e.appendChild(s),n.selected===!0&&this.selectItem(s)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");e!==s&&(s!=null&&s.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class du extends gr{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const s=this.label.querySelector(".ql-color-label"),r=e&&e.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=r:s.style.fill=r)}}class hu extends gr{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=n[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const s=e||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const Ow=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class uu{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Ow(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,s=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const r=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let a=0;if(o.right>r.right&&(a=r.right-o.right,this.root.style.left=`${n+a}px`),o.left<r.left&&(a=r.left-o.left,this.root.style.left=`${n+a}px`),o.bottom>r.bottom){const c=o.bottom-o.top,l=e.bottom-e.top+c;this.root.style.top=`${s-l}px`,this.root.classList.add("ql-flip")}return a}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Lw=[!1,"center","right","justify"],Bw=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Vw=[!1,"serif","monospace"],Iw=["1","2","3",!1],vw=["small",!1,"large","huge"];class ei extends as{constructor(e,n){super(e,n);const s=r=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(r.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(r.target)||o.close()})};e.emitter.listenDOM("click",document.body,s)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(o.startsWith("ql-")&&(o=o.slice(3),n[o]!=null))if(o==="direction")s.innerHTML=n[o][""]+n[o].rtl;else if(typeof n[o]=="string")s.innerHTML=n[o];else{const a=s.value||"";a!=null&&n[o][a]&&(s.innerHTML=n[o][a])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(r=>{if(r.classList.contains("ql-align")&&(r.querySelector("option")==null&&ti(r,Lw),typeof n.align=="object"))return new hu(r,n.align);if(r.classList.contains("ql-background")||r.classList.contains("ql-color")){const o=r.classList.contains("ql-background")?"background":"color";return r.querySelector("option")==null&&ti(r,Bw,o==="background"?"#ffffff":"#000000"),new du(r,n[o])}return r.querySelector("option")==null&&(r.classList.contains("ql-font")?ti(r,Vw):r.classList.contains("ql-header")?ti(r,Iw):r.classList.contains("ql-size")&&ti(r,vw)),new gr(r)});const s=()=>{this.pickers.forEach(r=>{r.update()})};this.quill.on(V.events.EDITOR_CHANGE,s)}}ei.DEFAULTS=zt({},as.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class fu extends uu{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,V.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,V.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=xw(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const s=n.index+n.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),e,V.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",V.sources.USER),this.quill.setSelection(s+2,V.sources.USER)}break}}this.textbox.value="",this.hide()}}function xw(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function ti(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(s=>{const r=document.createElement("option");s===n?r.setAttribute("selected","selected"):r.setAttribute("value",String(s)),t.appendChild(r)})}const Dw=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class mu extends fu{constructor(e,n){super(e,n),this.quill.on(V.events.EDITOR_CHANGE,(s,r,o,a)=>{if(s===V.events.SELECTION_CHANGE)if(r!=null&&r.length>0&&a===V.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const c=this.quill.getLines(r.index,r.length);if(c.length===1){const l=this.quill.getBounds(r);l!=null&&this.position(l)}else{const l=c[c.length-1],h=this.quill.getIndex(l),f=Math.min(l.length()-1,r.index+r.length-h),u=this.quill.getBounds(new bn(h,f));u!=null&&this.position(u)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(V.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",n!==0&&(s.style.marginLeft=`${-1*n-s.offsetWidth/2}px`),n}}B(mu,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class pu extends ei{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=Dw),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new mu(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Js),this.buildPickers(e.container.querySelectorAll("select"),Js))}}pu.DEFAULTS=zt({},ei.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,k.sources.USER)}}}}});const $w=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class gu extends fu{constructor(){super(...arguments);B(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",n=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),n.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",n=>{if(this.linkRange!=null){const s=this.linkRange;this.restoreFocus(),this.quill.formatText(s,"link",!1,V.sources.USER),delete this.linkRange}n.preventDefault(),this.hide()}),this.quill.on(V.events.SELECTION_CHANGE,(n,s,r)=>{if(n!=null){if(n.length===0&&r===V.sources.USER){const[o,a]=this.quill.scroll.descendant(Yt,n.index);if(o!=null){this.linkRange=new bn(n.index-a,o.length());const c=Yt.formats(o.domNode);this.preview.textContent=c,this.preview.setAttribute("href",c),this.show();const l=this.quill.getBounds(this.linkRange);l!=null&&this.position(l);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}B(gu,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class bu extends ei{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=$w),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Js),this.buildPickers(e.container.querySelectorAll("select"),Js),this.tooltip=new gu(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,s)=>{e.handlers.link.call(e,!s.format.link)}))}}bu.DEFAULTS=zt({},ei.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:s}=this.quill.theme;s.edit("link",n)}else this.quill.format("link",!1,k.sources.USER)}}}}}),k.register({"attributors/attribute/direction":Mh,"attributors/class/align":xh,"attributors/class/background":T_,"attributors/class/color":k_,"attributors/class/direction":Rh,"attributors/class/font":jh,"attributors/class/size":Uh,"attributors/style/align":Dh,"attributors/style/background":fa,"attributors/style/color":ua,"attributors/style/direction":qh,"attributors/style/font":Fh,"attributors/style/size":Hh},!0),k.register({"formats/align":xh,"formats/direction":Rh,"formats/indent":mw,"formats/background":fa,"formats/color":ua,"formats/font":jh,"formats/size":Uh,"formats/blockquote":wa,"formats/code-block":le,"formats/header":Na,"formats/list":Ys,"formats/bold":Xs,"formats/code":ma,"formats/italic":ka,"formats/link":Yt,"formats/script":Ta,"formats/strike":Aa,"formats/underline":Ca,"formats/formula":mr,"formats/image":Sa,"formats/video":pr,"modules/syntax":iu,"modules/table":gw,"modules/toolbar":La,"themes/bubble":pu,"themes/snow":bu,"ui/icons":Js,"ui/picker":gr,"ui/icon-picker":hu,"ui/color-picker":du,"ui/tooltip":uu},!0);const Ye=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},Mw={props:["modelValue"],mounted(){this.initQuillEditor()},watch:{modelValue(t){t||(t=""),this.quill.root.innerHTML!=t&&(this.quill.root.innerHTML=t)}},methods:{initQuillEditor(){this.quill=new k(this.$refs.editor,{theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["link","image"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["clean"]]},formats:["bold","italic","underline","strike","link","image","list","indent","align"]}),this.modelValue?this.quill.root.innerHTML=this.modelValue:this.quill.root.innerHTML="",this.quill.on("text-change",()=>{this.$emit("update:modelValue",this.quill.root.innerHTML)})}}},Rw={class:"ql-editor-container"},qw={class:"",ref:"editor"};function Pw(t,e,n,s,r,o){return i.openBlock(),i.createElementBlock("div",Rw,[i.createElementVNode("div",qw,null,512)])}const jw=Ye(Mw,[["render",Pw],["__scopeId","data-v-443c4edc"]]),De={image:{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif"},video:{mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",mpeg:"video/mpeg",mov:"video/quicktime"},document:{txt:"text/plain",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rtf:"application/rtf"}},Fw={props:{modelValue:Array,field:Object,settings:Object},data:function(){return{files:[],editfile:null,count:0,bytes:0,wait:!1,uploadEvent:null}},created(){let t=Math.round(Math.random()*1e5);this.uploadId="image_upload_"+t,this.params=this.field.params},mounted(){this.editfile=this.modelValue,this.editfile||(this.editfile=[])},watch:{modelValue(t){if(t==null)this.reset();else{for(let e of t)this.setDefaults(e);this.files=t}}},methods:{roundFileSize(t,e){return t<1024?t+(e?" Byte":""):t<1048576?(t/1024).toFixed(0)+(e?'<span class="text-muted fw-light"> KB</span>':""):t<1073741824?(t/1048576).toFixed(2)+(e?'<span class="text-muted fw-light"> MB</span>':""):(t/1073741824).toFixed(2)+(e?'<span class="text-muted fw-light"> GB</span>':"")},extensionByFilename(t){return t.split(".").reverse()[0]},getAcceptMimeTypes(t){let e=[];for(const n in De)if(De.hasOwnProperty(n)){const s=De[n];t.forEach(r=>{s[r]&&e.push(s[r])})}return e.join(",")},setDefaults(t){this.params.tags&&!t.tags&&(t.tags=[])},detect(t){this.setDefaults(t),t.bytes=0,t.types={default:{}},t.title=t.name.split(".").slice(0,-1).join("."),t.uid=Math.round(Math.random()*9999999).toString(32)+Date.now().toString(32),t.slug=xs(t.title),t.timestamp=Math.round(Date.now()/1e3),t.original={bytes:t.size,mime:t.type,name:t.name,modified:t.lastModified,extension:this.extensionByFilename(t.name)},Object.values(De.video).indexOf(t.original.mime)>=0?t.isVideo=!0:Object.values(De.image).indexOf(t.original.mime)>=0?t.isImage=!0:Object.values(De.document).indexOf(t.original.mime)>=0?t.isDocument=!0:t.isUnknown=!0,(t.isVideo||t.isImage&&!this.params.presets.default)&&(this.params.presets.default={width:1920,height:1920,extension:"webp",quality:.9})},async createThumbnail(t,e){const n=document.createElement("video"),s=new FileReader;s.onload=r=>{n.src=r.target.result,n.addEventListener("loadeddata",()=>{n.currentTime=n.duration*Math.random(),t.video=n}),n.addEventListener("seeked",()=>{this.forEachPresets(t,n),t.loaded=!0,this.bytes+=t.bytes})},s.readAsDataURL(t)},seekRandom(t){t.video&&(t.video.currentTime=t.video.duration*Math.random())},async handleFileChange(t){this.uploadEvent=t,this.count=this.files?this.files.length:0,this.wait=!0;for(let e of t.target.files)if(this.count++,this.count<=this.params.limit){if(this.files.push(e),this.detect(e),e.isVideo)await this.createThumbnail(e);else if(e.isImage)await this.resizeImage(e);else if(e.isDocument){const n=new FileReader;n.addEventListener("load",s=>{e.types.default={extension:e.original.extension,mime:e.original.mime,slug:xs(e.title)+"-"+e.uid,bytes:e.size,data:s.target.result},e.loaded=!0,e.bytes+=e.size,this.bytes+=e.bytes}),n.readAsDataURL(e)}}this.$emit("update:modelValue",this.files),this.wait=!1,this.uploadEvent.target.value=""},async forEachPresets(t,e,n){const s=document.createElement("canvas"),r=s.getContext("2d");let o=!!e.videoWidth,a,c;o?(a=e.videoWidth,c=e.videoHeight):(a=e.width,c=e.height),t.original.width=a,t.original.height=c;for(let l in this.params.presets){let h=this.params.presets[l];h.key=l,h.width=h.width?h.width:1920,h.height=h.height?h.height:1080;let f=h.width,u=h.height;if(h.crop==="fit"){let p=Math.max(f/a,u/c),g=a*p,y=c*p,E=(g-f)/2,_=(y-u)/2;s.width=f,s.height=u,r.drawImage(e,-E,-_,g,y)}else if(h.crop==="contain"){let p=Math.min(f/a,u/c),g=a*p,y=c*p,E=(f-g)/2,_=(u-y)/2;s.width=f,s.height=u,r.clearRect(0,0,f,u),r.drawImage(e,E,_,g,y)}else a>f&&(c=Math.round(c*(f/a)),a=f),c>u&&(a=Math.round(a*(u/c)),c=u),s.width=a,s.height=c,r.drawImage(e,0,0,a,c);t.types[h.key]={width:s.width,height:s.height,extension:h.extension?h.extension:this.getExtensionByMimeType(t.type),quality:h.quality?h.quality:.9,crop:h.crop?h.crop:null},t.types[h.key].slug=xs(t.title)+"-"+s.width+"x"+s.height+"-"+t.uid,t.types[h.key].mime=this.getMimeTypeByExtension(t.types[h.key].extension),t.types[h.key].data=s.toDataURL(t.types[h.key].mime,t.types[h.key].quality),t.types[h.key].blob=await this.getBlob(s,t.types[h.key].mime,t.types[h.key].quality),t.types[h.key].blob&&(t.types[h.key].bytes=t.types[h.key].blob.size),t.types[h.key].bytes&&(t.bytes+=t.types[h.key].bytes),n&&n(h,t)}},getBlob(t,e,n){return new Promise((s,r)=>{t.toBlob(function(o){o?s(o):r(new Error("Failed to convert canvas to Blob"))},e,n)})},async resizeImage(t){const e=await this.fileToBlob(t),n=await createImageBitmap(e);await this.forEachPresets(t,n),t.loaded=!0,this.bytes+=t.bytes},fileToBlob(t){return new Promise(e=>{const n=new FileReader;n.onload=s=>{e(new Blob([s.target.result],{type:t.mime}))},n.readAsArrayBuffer(t)})},slug(t){if(!t.uploaded){t.slug=xs(t.title);for(let e in t.types){let n=this.params.presets[e];t.types[e].slug=xs(t.title)+"-"+n.width+"x"+n.height}this.$forceUpdate()}},download(t,e){let n=this.files[t].types[e.download],s=document.createElement("a");s.href=n.url,s.download=n.slug+"."+n.extension,s.click()},remove(t){confirm("Are you sure you want to remove?")&&(this.bytes-=this.files[t].bytes,this.files.splice(t,1),this.count=this.files.length)},resetConfirm(){confirm("Are you sure you want to remove all?")&&this.reset()},reset(){this.files=[],this.editfile={},this.count=0,this.bytes=0,this.wait=!1,this.$emit("update:modelValue",this.files)},toggleView(){this.params.ui=this.params.ui=="list"?"grid":"list"},dateFormat(t){return new Date(t).toLocaleDateString("hu-HU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},getMimeTypeByExtension(t){for(const e in De)if(De.hasOwnProperty(e)){const n=De[e];if(n[t])return n[t]}return null},getExtensionByMimeType(t){for(const e in De)if(De.hasOwnProperty(e)){const n=De[e];for(const s in n)if(n[s]===t)return s}return null},translate(t,e,n){return Ds(t,this.settings.translate,e,n||this.settings.language)},dropdownSelectToggleOne(t,e){Qc(t,e),this.$forceUpdate()},dropdownSelectAll(t,e){Jc(t,e),this.$forceUpdate()},dropdownSelectInvert(t,e){ed(t,e),this.$forceUpdate()},dropdownSelectClear(t){typeof t!="object"?t.value=null:td(t),this.$forceUpdate()}}},Uw={class:""},Hw={key:0,class:"vsa-image-editor p-2 text-center text-light"},zw={class:"row"},Ww={class:"badge bg-dark text-light fw-light mx-1 text-uppercase"},Kw={class:"badge bg-dark text-light fw-light mx-1"},Gw={class:"badge bg-dark text-light fw-light mx-1"},Yw=["src"],Xw={class:"row g-1"},Zw={class:"col-md-6"},Qw={class:"col-md-6"},Jw={class:"col-md-6"},eN=["href"],tN={key:1,class:"row g-2 mb-1"},nN={key:0},sN={class:"table table-sm table-responsive table-borderless"},iN={class:"align-middle text-center ps-0"},rN={class:"align-middle px-0"},oN={class:"input-group border rounded"},aN={key:0,class:"fs-5 ms-2"},lN={key:1,class:"fs-5 ms-2"},cN={key:2,class:"fs-5 ms-2"},dN=["onUpdate:modelValue","onInput"],hN={key:3,class:"mx-1"},uN=["href"],fN=["src","alt"],mN=["src","alt"],pN={key:4,class:"dropdown rounded-bottom"},gN={class:"btn btn-sm bg-light text-dark w-100",type:"button","data-bs-auto-close":"outside","data-bs-toggle":"dropdown","aria-expanded":"false"},bN={class:"dropdown-menu"},yN=["onClick"],EN={key:0,class:"bi bi-check-square"},_N={key:1,class:"bi bi-square"},wN=["onClick"],NN=["onClick"],kN=["onClick"],TN={class:"dropdown"},AN={class:"dropdown-menu"},CN=["onClick"],SN={key:0},ON=["onClick"],LN={key:1},BN={class:"dropdown-item py-0 d-flex justify-content-between"},VN={key:2},IN={class:"dropdown-item py-0 d-flex justify-content-between"},vN=["innerHTML"],xN={class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},DN={key:0},$N={key:1},MN={class:"dropdown-item py-0 d-flex justify-content-between"},RN={class:"text-muted fw-light me-4"},qN={class:"text-primary"},PN={key:0,class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},jN={class:"dropdown-item py-0 d-flex justify-content-between"},FN={class:"text-muted fw-light me-1"},UN={key:0,class:"text-primary"},HN=["innerHTML"],zN={class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},WN={key:3},KN={class:"dropdown-item py-0 d-flex justify-content-between"},GN={class:"dropdown-item py-0 d-flex justify-content-between"},YN={class:"text-muted fw-light me-3"},XN=["innerHTML"],ZN={class:"dropdown-item py-0 d-flex justify-content-between"},QN={class:"text-muted fw-light me-3"},JN={class:"vsa-image-container h-100 position-relative border p-1 rounded"},ek={key:0,class:"w-100 h-100 d-flex align-items-center flex-column"},tk={key:1,class:"vsa-image-frame mb-auto text-center"},nk={key:0},sk=["src","alt"],ik=["src","alt"],rk={key:2,class:"display-3 w-100 h-100 text-center mb-auto d-flex align-items-center justify-content-center"},ok=["onUpdate:modelValue","onInput"],ak={class:"w-100 d-flex justify-content-around align-items-center"},lk={class:"dropdown rounded-bottom border w-100"},ck={class:"dropdown-menu"},dk=["onClick"],hk={key:0},uk=["onClick"],fk={key:1},mk={class:"dropdown-item py-0 d-flex justify-content-between"},pk={key:2},gk={class:"dropdown-item py-0 d-flex justify-content-between"},bk=["innerHTML"],yk={class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},Ek={key:0},_k={key:1},wk={class:"dropdown-item py-0 d-flex justify-content-between"},Nk={class:"text-muted fw-light me-4"},kk={class:"text-primary"},Tk={key:0,class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},Ak={class:"dropdown-item py-0 d-flex justify-content-between"},Ck={class:"text-muted fw-light me-1"},Sk={key:0,class:"text-primary"},Ok=["innerHTML"],Lk={class:"fw-normal bg-light text-dark rounded border px-2 ms-2 shadow-sm"},Bk={key:3},Vk={class:"dropdown-item py-0 d-flex justify-content-between"},Ik={class:"dropdown-item py-0 d-flex justify-content-between"},vk={class:"text-muted fw-light me-3"},xk=["innerHTML"],Dk={class:"dropdown-item py-0 d-flex justify-content-between"},$k={class:"text-muted fw-light me-3"},Mk={key:0,class:"dropdown rounded-bottom border w-100"},Rk={class:"btn btn-sm bg-light text-dark w-100",type:"button","data-bs-auto-close":"outside","data-bs-toggle":"dropdown","aria-expanded":"false"},qk={class:"dropdown-menu"},Pk=["onClick"],jk={key:0,class:"bi bi-check-square"},Fk={key:1,class:"bi bi-square"},Uk=["onClick"],Hk=["onClick"],zk=["onClick"],Wk={key:1,class:"w-100 h-100 vsa-image-loading d-flex align-items-center justify-content-center"},Kk={class:"row g-1"},Gk={class:"col-12 d-flex align-items-center justify-content-center"},Yk=["for"],Xk={key:0},Zk={key:0},Qk={class:""},Jk={class:""},eT={key:1,class:"fs-6"},tT={key:0,class:"bi bi-list-ol"},nT={key:1,class:"bi bi-grid"},sT=["disabled"],iT={class:"col-12 text-center"},rT={key:0},oT=["id","accept"];function aT(t,e,n,s,r,o){return i.openBlock(),i.createElementBlock("div",Uw,[i.createElementVNode("div",{class:i.normalizeClass(["vsa-upload",{wait:t.wait}])},[t.editfile&&t.editfile.presets?(i.openBlock(),i.createElementBlock("div",Hw,[i.createElementVNode("div",zw,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.editfile.types,(a,c)=>(i.openBlock(),i.createElementBlock("div",{class:"col-md-3",key:c},[i.createElementVNode("span",Ww,i.toDisplayString(a.extension),1),i.createElementVNode("span",Kw,i.toDisplayString(a.width)+" x "+i.toDisplayString(a.height),1),i.createElementVNode("span",Gw,"~"+i.toDisplayString(t.roundFileSize(a.bytes)),1),a?(i.openBlock(),i.createElementBlock("img",{key:0,class:"img-thumbnail rounded",src:a.url?a.url:a.data},null,8,Yw)):i.createCommentVNode("",!0)]))),128))]),i.withDirectives(i.createElementVNode("input",{type:"text",class:"form-control form-control-sm w-100 mt-1","onUpdate:modelValue":e[0]||(e[0]=a=>t.editfile.title=a)},null,512),[[i.vModelText,t.editfile.title]]),i.createElementVNode("div",Xw,[i.createElementVNode("div",Zw,[i.createElementVNode("button",{type:"button",class:"btn btn-sm btn-outline-danger mt-1 w-100",onClick:e[1]||(e[1]=a=>t.editfile=null)}," Close ")]),i.createElementVNode("div",Qw,[i.createElementVNode("button",{type:"button",class:"btn btn-sm btn-outline-danger mt-1 w-100",onClick:e[2]||(e[2]=a=>t.remove(t.index))}," Remove ")]),i.createElementVNode("div",Jw,[t.type&&!t.type.url?(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",class:"btn btn-sm btn-outline-light mt-1 w-100",onClick:e[3]||(e[3]=a=>t.download(t.index,t.params))}," Download ")):i.createCommentVNode("",!0),t.type&&t.type.url?(i.openBlock(),i.createElementBlock("a",{key:1,type:"button",class:"btn btn-sm btn-outline-light mt-1 w-100",href:t.type.url}," Download ",8,eN)):i.createCommentVNode("",!0)])])])):i.createCommentVNode("",!0),t.files&&t.files.length?(i.openBlock(),i.createElementBlock("div",tN,[t.params.ui==="list"?(i.openBlock(),i.createElementBlock("div",nN,[i.createElementVNode("table",sN,[i.createElementVNode("tbody",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.files,(a,c)=>(i.openBlock(),i.createElementBlock("tr",{key:c},[i.createElementVNode("td",iN,[i.createElementVNode("small",null,i.toDisplayString(c+1),1)]),i.createElementVNode("td",rN,[i.createElementVNode("div",oN,[a.isDocument?(i.openBlock(),i.createElementBlock("span",aN,[i.createElementVNode("i",{class:i.normalizeClass(["bi bi-filetype-"+a.types.default.extension])},null,2)])):a.isImage?(i.openBlock(),i.createElementBlock("span",lN,e[9]||(e[9]=[i.createElementVNode("i",{class:"bi bi-file-image"},null,-1)]))):a.isVideo?(i.openBlock(),i.createElementBlock("span",cN,e[10]||(e[10]=[i.createElementVNode("i",{class:"bi bi-file-play"},null,-1)]))):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{required:"text",class:"form-control py-1 px-2 border-0 fw-light","onUpdate:modelValue":l=>a.title=l,onInput:l=>t.slug(a),onKeydown:e[4]||(e[4]=i.withKeys(i.withModifiers(()=>{},["prevent"]),["enter"]))},null,40,dN),[[i.vModelText,a.title]]),!a.isDocument&&a.types&&a.types[t.params.thumbnail]?(i.openBlock(),i.createElementBlock("span",hN,[a.types[t.params.thumbnail].url?(i.openBlock(),i.createElementBlock("a",{key:0,target:"_blank",href:a.types[t.params.thumbnail].url},[i.createElementVNode("img",{height:"32",width:"auto",class:"rounded border",src:a.types[t.params.thumbnail].url,alt:a.name},null,8,fN)],8,uN)):(i.openBlock(),i.createElementBlock("img",{key:1,height:"32",width:"auto",class:"",src:a.types[t.params.thumbnail].data,alt:a.name},null,8,mN))])):i.createCommentVNode("",!0),t.params.tags?(i.openBlock(),i.createElementBlock("div",pN,[i.createElementVNode("button",gN,i.toDisplayString(a.tags?a.tags.length:0)+" tag(s) ",1),i.createElementVNode("ul",bN,[i.createElementVNode("li",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.params.tags,l=>(i.openBlock(),i.createElementBlock("span",{key:l,class:"dropdown-item cursor-pointer",onClick:h=>t.dropdownSelectToggleOne(a.tags,l.value)},[a.tags&&a.tags.indexOf(l.value)>=0?(i.openBlock(),i.createElementBlock("i",EN)):(i.openBlock(),i.createElementBlock("i",_N)),i.createTextVNode(" "+i.toDisplayString(t.translate(l.label?l.label:l.value)),1)],8,yN))),128))]),e[11]||(e[11]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:l=>t.dropdownSelectAll(a.tags,t.params.tags)},i.toDisplayString(t.translate("Select all")),9,wN)]),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:l=>t.dropdownSelectClear(a.tags)},i.toDisplayString(t.translate("Unselect all")),9,NN)]),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:l=>t.dropdownSelectInvert(a.tags,t.params.tags)},i.toDisplayString(t.translate("Invert all")),9,kN)])])])):i.createCommentVNode("",!0),i.createElementVNode("div",TN,[e[25]||(e[25]=i.createElementVNode("button",{class:"btn btn-sm bg-light text-dark dropdown-toggle h-100",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},null,-1)),i.createElementVNode("ul",AN,[i.createElementVNode("li",null,[i.createElementVNode("button",{class:"dropdown-item text-danger py-1",onClick:l=>t.remove(c),type:"button"},e[12]||(e[12]=[i.createElementVNode("i",{class:"bi bi-x-circle"},null,-1),i.createTextVNode(" Remove ")]),8,CN)]),a.uploaded?(i.openBlock(),i.createElementBlock("li",SN,[i.createElementVNode("button",{class:"dropdown-item text-primary py-1",onClick:l=>t.download(c,t.params),type:"button"},e[13]||(e[13]=[i.createElementVNode("i",{class:"bi bi-download"},null,-1),i.createTextVNode(" Download ")]),8,ON)])):i.createCommentVNode("",!0),e[23]||(e[23]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),a.original.width?(i.openBlock(),i.createElementBlock("li",LN,[i.createElementVNode("small",BN,[e[14]||(e[14]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"original resolution",-1)),i.createTextVNode(" "+i.toDisplayString(a.original.width)+" x "+i.toDisplayString(a.original.height),1)])])):i.createCommentVNode("",!0),a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("li",VN,[i.createElementVNode("small",IN,[e[15]||(e[15]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"original size & extension",-1)),i.createElementVNode("span",null,[i.createElementVNode("span",{innerHTML:t.roundFileSize(a.original.bytes,!0)},null,8,vN),i.createElementVNode("small",xN,i.toDisplayString(a.original.extension),1)])])])),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(a.types,(l,h)=>(i.openBlock(),i.createElementBlock(i.Fragment,{key:l},[a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("li",DN,e[16]||(e[16]=[i.createElementVNode("hr",{class:"dropdown-divider"},null,-1)]))),a.original.width?(i.openBlock(),i.createElementBlock("li",$N,[i.createElementVNode("small",MN,[i.createElementVNode("span",RN,[i.createElementVNode("span",qN,i.toDisplayString(h),1),e[17]||(e[17]=i.createTextVNode(" resolution & crop"))]),i.createElementVNode("span",null,[i.createTextVNode(i.toDisplayString(l.width)+" x "+i.toDisplayString(l.height)+" ",1),l.crop?(i.openBlock(),i.createElementBlock("small",PN,i.toDisplayString(l.crop),1)):i.createCommentVNode("",!0)])])])):i.createCommentVNode("",!0),i.createElementVNode("li",null,[i.createElementVNode("small",jN,[i.createElementVNode("span",FN,[a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("span",UN,i.toDisplayString(h),1)),e[18]||(e[18]=i.createTextVNode(" size & extension"))]),i.createElementVNode("span",null,[i.createElementVNode("span",{class:i.normalizeClass({"text-danger":l.bytes>a.original.bytes}),innerHTML:t.roundFileSize(l.bytes,!0)},null,10,HN),i.createElementVNode("small",zN,i.toDisplayString(l.extension),1)])])])],64))),128)),e[24]||(e[24]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),a.uploaded?(i.openBlock(),i.createElementBlock("li",WN,[i.createElementVNode("small",KN,[e[19]||(e[19]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"uploaded at",-1)),e[20]||(e[20]=i.createTextVNode()),i.createElementVNode("span",null,i.toDisplayString(t.dateFormat(a.timestamp*1e3)),1)])])):i.createCommentVNode("",!0),i.createElementVNode("li",null,[i.createElementVNode("small",GN,[i.createElementVNode("span",YN,i.toDisplayString(a.uploaded?"uploaded":"uploading")+" bytes",1),e[21]||(e[21]=i.createTextVNode()),i.createElementVNode("span",{innerHTML:t.roundFileSize(a.bytes,!0)},null,8,XN)])]),i.createElementVNode("li",null,[i.createElementVNode("small",ZN,[i.createElementVNode("span",QN,i.toDisplayString(a.uploaded?"uploaded":"uploading")+" filename",1),e[22]||(e[22]=i.createTextVNode()),i.createElementVNode("span",null,i.toDisplayString(a.slug),1)])])])])])])]))),128))])])])):(i.openBlock(!0),i.createElementBlock(i.Fragment,{key:1},i.renderList(t.files,(a,c)=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([t.params.colclass?t.params.colclass:"col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3"]),key:c},[i.createElementVNode("div",JN,[a.loaded?(i.openBlock(),i.createElementBlock("div",ek,[i.createCommentVNode("",!0),a.types&&a.types[t.params.thumbnail]?(i.openBlock(),i.createElementBlock("div",tk,[a.types[t.params.thumbnail].url?(i.openBlock(),i.createElementBlock("a",nk,[i.createElementVNode("img",{class:"img-fluid rounded transparent-background",src:a.types[t.params.thumbnail].url,alt:a.name},null,8,sk)])):(i.openBlock(),i.createElementBlock("img",{key:1,class:"img-fluid rounded transparent-background",src:a.types[t.params.thumbnail].data,alt:a.name},null,8,ik))])):i.createCommentVNode("",!0),a.isDocument?(i.openBlock(),i.createElementBlock("div",rk,[i.createElementVNode("i",{class:i.normalizeClass(["bi bi-filetype-"+a.types.default.extension])},null,2)])):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{required:"text",class:"form-control rounded-0 rounded-top py-1 px-2 fw-light mt-1","onUpdate:modelValue":l=>a.title=l,onInput:l=>t.slug(a),onKeydown:e[5]||(e[5]=i.withKeys(i.withModifiers(()=>{},["prevent"]),["enter"]))},null,40,ok),[[i.vModelText,a.title]]),i.createElementVNode("div",ak,[i.createElementVNode("div",lk,[e[42]||(e[42]=i.createElementVNode("button",{class:"btn btn-sm bg-light text-dark dropdown-toggle w-100",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Menu ",-1)),i.createElementVNode("ul",ck,[i.createElementVNode("li",null,[i.createElementVNode("button",{class:"dropdown-item text-danger py-1",onClick:l=>t.remove(c),type:"button"},e[29]||(e[29]=[i.createElementVNode("i",{class:"bi bi-x-circle"},null,-1),i.createTextVNode(" Remove ")]),8,dk)]),a.uploaded?(i.openBlock(),i.createElementBlock("li",hk,[i.createElementVNode("button",{class:"dropdown-item text-primary py-1",onClick:l=>t.download(c,t.params),type:"button"},e[30]||(e[30]=[i.createElementVNode("i",{class:"bi bi-download"},null,-1),i.createTextVNode(" Download ")]),8,uk)])):i.createCommentVNode("",!0),e[40]||(e[40]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),a.original.width?(i.openBlock(),i.createElementBlock("li",fk,[i.createElementVNode("small",mk,[e[31]||(e[31]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"original resolution",-1)),i.createTextVNode(" "+i.toDisplayString(a.original.width)+" x "+i.toDisplayString(a.original.height),1)])])):i.createCommentVNode("",!0),a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("li",pk,[i.createElementVNode("small",gk,[e[32]||(e[32]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"original size & extension",-1)),i.createElementVNode("span",null,[i.createElementVNode("span",{innerHTML:t.roundFileSize(a.original.bytes,!0)},null,8,bk),i.createElementVNode("small",yk,i.toDisplayString(a.original.extension),1)])])])),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(a.types,(l,h)=>(i.openBlock(),i.createElementBlock(i.Fragment,{key:l},[a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("li",Ek,e[33]||(e[33]=[i.createElementVNode("hr",{class:"dropdown-divider"},null,-1)]))),a.original.width?(i.openBlock(),i.createElementBlock("li",_k,[i.createElementVNode("small",wk,[i.createElementVNode("span",Nk,[i.createElementVNode("span",kk,i.toDisplayString(h),1),e[34]||(e[34]=i.createTextVNode(" resolution & crop"))]),i.createElementVNode("span",null,[i.createTextVNode(i.toDisplayString(l.width)+" x "+i.toDisplayString(l.height)+" ",1),l.crop?(i.openBlock(),i.createElementBlock("small",Tk,i.toDisplayString(l.crop),1)):i.createCommentVNode("",!0)])])])):i.createCommentVNode("",!0),i.createElementVNode("li",null,[i.createElementVNode("small",Ak,[i.createElementVNode("span",Ck,[a.isDocument?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("span",Sk,i.toDisplayString(h),1)),e[35]||(e[35]=i.createTextVNode(" size & extension"))]),i.createElementVNode("span",null,[i.createElementVNode("span",{class:i.normalizeClass({"text-danger":l.bytes>a.original.bytes}),innerHTML:t.roundFileSize(l.bytes,!0)},null,10,Ok),i.createElementVNode("small",Lk,i.toDisplayString(l.extension),1)])])])],64))),128)),e[41]||(e[41]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),a.uploaded?(i.openBlock(),i.createElementBlock("li",Bk,[i.createElementVNode("small",Vk,[e[36]||(e[36]=i.createElementVNode("span",{class:"text-muted fw-light me-3"},"uploaded at",-1)),e[37]||(e[37]=i.createTextVNode()),i.createElementVNode("span",null,i.toDisplayString(t.dateFormat(a.timestamp*1e3)),1)])])):i.createCommentVNode("",!0),i.createElementVNode("li",null,[i.createElementVNode("small",Ik,[i.createElementVNode("span",vk,i.toDisplayString(a.uploaded?"uploaded":"uploading")+" bytes",1),e[38]||(e[38]=i.createTextVNode()),i.createElementVNode("span",{innerHTML:t.roundFileSize(a.bytes,!0)},null,8,xk)])]),i.createElementVNode("li",null,[i.createElementVNode("small",Dk,[i.createElementVNode("span",$k,i.toDisplayString(a.uploaded?"uploaded":"uploading")+" filename",1),e[39]||(e[39]=i.createTextVNode()),i.createElementVNode("span",null,i.toDisplayString(a.slug),1)])])])]),t.params.tags?(i.openBlock(),i.createElementBlock("div",Mk,[i.createElementVNode("button",Rk,i.toDisplayString(a.tags?a.tags.length:0)+" tag(s) ",1),i.createElementVNode("ul",qk,[i.createElementVNode("li",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.params.tags,l=>(i.openBlock(),i.createElementBlock("span",{key:l,class:"dropdown-item cursor-pointer",onClick:h=>t.dropdownSelectToggleOne(a.tags,l.value)},[a.tags&&a.tags.indexOf(l.value)>=0?(i.openBlock(),i.createElementBlock("i",jk)):(i.openBlock(),i.createElementBlock("i",Fk)),i.createTextVNode(" "+i.toDisplayString(t.translate(l.label?l.label:l.value)),1)],8,Pk))),128))]),e[43]||(e[43]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:l=>t.dropdownSelectAll(a.tags,t.params.tags)},i.toDisplayString(t.translate("Select all")),9,Uk)]),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:l=>t.dropdownSelectClear(a.tags)},i.toDisplayString(t.translate("Unselect all")),9,Hk)]),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:l=>t.dropdownSelectInvert(a.tags,t.params.tags)},i.toDisplayString(t.translate("Invert all")),9,zk)])])])):i.createCommentVNode("",!0)])])):(i.openBlock(),i.createElementBlock("div",Wk,e[44]||(e[44]=[i.createElementVNode("span",null,null,-1)])))])],2))),128))])):i.createCommentVNode("",!0),i.createElementVNode("div",Kk,[i.createElementVNode("div",Gk,[i.createElementVNode("label",{for:t.uploadId,class:i.normalizeClass([{"disabled bg-secondary":t.files&&t.params.limit<=t.files.length},"btn btn-light border border-dark cursor-pointer w-100"])},[t.files&&t.params.limit>t.files.length?(i.openBlock(),i.createElementBlock("span",Xk,[e[48]||(e[48]=i.createElementVNode("i",{class:"bi bi-upload me-2"},null,-1)),i.createTextVNode(" "+i.toDisplayString(t.params.text)+" ",1),t.params.limit?(i.openBlock(),i.createElementBlock("small",Zk,[e[45]||(e[45]=i.createTextVNode(" ( ")),i.createElementVNode("strong",Qk,i.toDisplayString(t.files.length),1),e[46]||(e[46]=i.createTextVNode(" / ")),i.createElementVNode("span",Jk,i.toDisplayString(t.params.limit),1),e[47]||(e[47]=i.createTextVNode(" ) "))])):i.createCommentVNode("",!0)])):(i.openBlock(),i.createElementBlock("span",eT,e[49]||(e[49]=[i.createElementVNode("i",{class:"bi bi-exclamation-circle"},null,-1),i.createTextVNode(" You've reached the upload limit ")])))],10,Yk),i.createElementVNode("button",{type:"button",class:"btn btn-outline-primary ms-1",onClick:e[6]||(e[6]=a=>t.toggleView())},[t.params.ui!="list"?(i.openBlock(),i.createElementBlock("i",tT)):i.createCommentVNode("",!0),t.params.ui=="list"?(i.openBlock(),i.createElementBlock("i",nT)):i.createCommentVNode("",!0)]),i.createElementVNode("button",{disabled:!t.files.length,type:"button",class:"btn btn-outline-danger ms-1",onClick:e[7]||(e[7]=a=>t.resetConfirm())},e[50]||(e[50]=[i.createElementVNode("i",{class:"bi bi-trash"},null,-1)]),8,sT)]),i.createElementVNode("div",iT,[i.createElementVNode("small",null,[t.params.accept?(i.openBlock(),i.createElementBlock("div",rT,[e[51]||(e[51]=i.createElementVNode("span",{class:"text-secondary"},"accept only",-1)),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.params.accept,a=>(i.openBlock(),i.createElementBlock("strong",{class:"ms-1 text-muted",key:a},i.toDisplayString(a),1))),128))])):i.createCommentVNode("",!0),i.createCommentVNode("",!0)])])]),t.uploadId?(i.openBlock(),i.createElementBlock("input",{key:2,multiple:"",style:{opacity:"0",height:"1px",width:"1px"},id:t.uploadId,type:"file",accept:t.getAcceptMimeTypes(t.params.accept),onChange:e[8]||(e[8]=(...a)=>t.handleFileChange&&t.handleFileChange(...a))},null,40,oT)):i.createCommentVNode("",!0)],2)])}const lT=Ye(Fw,[["render",aT],["__scopeId","data-v-606ed6ec"]]),cT={props:{modelValue:String|Object|Number,optionValue:String,field:Object,item:Object,settings:Object,formId:String,auth:Object},data:function(){return{newitem:null,options:[]}},created(){},mounted(){this.loadOptions(),this.setNewItem(this.modelValue)},watch:{modelValue(t){this.setNewItem(t)}},methods:{setNewItem(t){this.optionValue==="object"?this.newitem=t&&t.value:this.newitem=t},async loadOptions(){this.options=await this.selectOptions(this.field.options,this.field)},getValueOrFunction(t,e){return vs(t,e,this.settings,this)},async selectOptions(t,e){return typeof t=="function"?await t(this.item,e,this):t},async fetchCustom(t,e){const n=await fetch(wt("GET",{url:t},e),_t("GET",this.settings.form.api,null,this.auth)),s=await Yn(n);if(!Xn(n,s.data))return s.data},handleChange(t){if(this.optionValue==="object"){const e=this.options.find(n=>n.value===this.newitem);e&&this.$emit("update:modelValue",e)}else this.$emit("update:modelValue",this.newitem)}},components:{}},dT=["name","id","disabled","readonly","required"],hT=["value"];function uT(t,e,n,s,r,o){return i.withDirectives((i.openBlock(),i.createElementBlock("select",{class:i.normalizeClass(["form-select",t.getValueOrFunction(t.field.inputclass?t.field.inputclass:"",{field:t.field,item:t.item})]),name:t.field.name,id:t.formId+"_"+t.field.name,onChange:e[0]||(e[0]=a=>t.handleChange(a)),"onUpdate:modelValue":e[1]||(e[1]=a=>t.newitem=a),disabled:t.field.disabled,readonly:t.field.readonly,required:t.field.required},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.options,a=>(i.openBlock(),i.createElementBlock("option",{class:i.normalizeClass(t.getValueOrFunction(t.field.optionclass?t.field.optionclass:"",{field:t.field,item:t.item,option:a})),key:a,value:a.value},i.toDisplayString(a.label?a.label:a.value),11,hT))),128))],42,dT)),[[i.vModelSelect,t.newitem]])}const yu=Ye(cT,[["render",uT]]),fT={props:{modelValue:Array,field:Object,item:Object,settings:Object,formId:String},data:function(){return{value:[]}},created(){},mounted(){},watch:{modelValue(t){this.value=t,(!this.value||typeof this.value!="object")&&(this.value=[])}},methods:{getValueOrFunction(t,e){return vs(t,e,this.settings,this)},selectOptions(t,e){return typeof t=="function"?t(this.item,e,this):t},arrayAddNewItem(t,e){let n={};for(let s in t.elements){let r=Object.assign({},t.elements[s]),o=r.value?r.value:null;if(o!=null)n[s]=o;else return}this.value.push(n),this.$emit("update:modelValue",this.value);for(let s in t.elements)t.elements[s].value=null},arrayRemoveItem(t,e){t.splice(e,1)},arrayItemMoveUp(t,e){nd(t,e)},arrayItemMoveDown(t,e){sd(t,e)}},components:{VuAdminFormSelect:yu}},mT={class:"row g-1 d-flex align-items-center justify-content-between mb-1"},pT={class:"col-10"},gT={class:"row g-1 d-flex align-items-center justify-content-between"},bT={class:"col-10"},yT={class:"row g-1 d-flex align-items-center justify-content-between"},ET=["innerHTML"],_T={key:1,class:"input-group input-group-sm"},wT=["type","required","placeholder","onUpdate:modelValue"],NT={class:"col-2 text-nowrap text-end"},kT=["onClick"],TT=["onClick"],AT=["onClick"],CT={key:0},ST={class:"row g-1 d-flex align-items-center justify-content-between"},OT={class:"col-10"},LT={class:"row g-1 d-flex align-items-center justify-content-between"},BT={class:"input-group input-group-sm"},VT={key:0,class:"input-group-text"},IT=["type","placeholder","onUpdate:modelValue"],vT={key:3,class:"input-group-text"},xT={class:"col-2"};function DT(t,e,n,s,r,o){const a=i.resolveComponent("VuAdminFormSelect");return i.openBlock(),i.createElementBlock("div",null,[i.createElementVNode("div",mT,[i.createElementVNode("div",pT,[i.createElementVNode("div",gT,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.field.elements,c=>(i.openBlock(),i.createElementBlock("div",{key:c,class:i.normalizeClass(c.class||"col")},[i.createElementVNode("small",null,i.toDisplayString(c.placeholder?c.placeholder:c.prefix?c.prefix:""),1)],2))),128))])]),e[1]||(e[1]=i.createElementVNode("div",{class:"col-2 text-nowrap text-end"},null,-1))]),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.value,(c,l)=>(i.openBlock(),i.createElementBlock("div",{class:"row g-1 d-flex align-items-center justify-content-between mb-1",key:l},[i.createElementVNode("div",bT,[i.createElementVNode("div",yT,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(c,(h,f)=>(i.openBlock(),i.createElementBlock("div",{key:f,class:i.normalizeClass(t.field.elements[f].class||"col")},[t.field.elements[f].template?(i.openBlock(),i.createElementBlock("span",{key:0,innerHTML:t.getValueOrFunction(t.field.elements[f].template,t.value[l])},null,8,ET)):(i.openBlock(),i.createElementBlock("div",_T,[t.field.elements[f].type=="select"&&t.value[l][f]?(i.openBlock(),i.createBlock(a,{key:0,modelValue:t.value[l][f],"onUpdate:modelValue":u=>t.value[l][f]=u,field:t.field.elements[f],item:t.item,settings:t.settings,formId:t.formId,optionValue:"object"},null,8,["modelValue","onUpdate:modelValue","field","item","settings","formId"])):i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:1,type:t.field.elements[f].type,required:t.field.elements[f].required,placeholder:t.field.elements[f].placeholder||f,class:"form-control","onUpdate:modelValue":u=>t.value[l][f]=u},null,8,wT)),[[i.vModelDynamic,t.value[l][f]]])]))],2))),128))])]),i.createElementVNode("div",NT,[t.field.sortable?(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",class:"btn btn-sm btn-outline-secondary p-1 me-1",onClick:h=>t.arrayItemMoveUp(t.value,l)},e[2]||(e[2]=[i.createElementVNode("i",{class:"bi bi-arrow-up"},null,-1)]),8,kT)):i.createCommentVNode("",!0),t.field.sortable?(i.openBlock(),i.createElementBlock("button",{key:1,type:"button",class:"btn btn-sm btn-outline-secondary p-1 me-1",onClick:h=>t.arrayItemMoveDown(t.value,l+1)},e[3]||(e[3]=[i.createElementVNode("i",{class:"bi bi-arrow-down"},null,-1)]),8,TT)):i.createCommentVNode("",!0),i.createElementVNode("button",{type:"button",class:"btn btn-sm btn-outline-danger p-1 me-1",onClick:h=>t.arrayRemoveItem(t.value,l)},e[4]||(e[4]=[i.createElementVNode("i",{class:"bi bi-trash"},null,-1)]),8,AT)])]))),128)),t.item[t.field.name]&&t.item[t.field.name].length?(i.openBlock(),i.createElementBlock("hr",CT)):i.createCommentVNode("",!0),i.createElementVNode("div",ST,[i.createElementVNode("div",OT,[i.createElementVNode("div",LT,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.field.elements,c=>(i.openBlock(),i.createElementBlock("div",{key:c,class:i.normalizeClass(c.class||"col")},[i.createElementVNode("div",BT,[c.prefix?(i.openBlock(),i.createElementBlock("span",VT,i.toDisplayString(c.prefix),1)):i.createCommentVNode("",!0),c.type=="select"&&(!c.relation||c.relation&&c.relation.items)?(i.openBlock(),i.createBlock(a,{key:1,modelValue:c.value,"onUpdate:modelValue":l=>c.value=l,field:c,item:t.item,settings:t.settings,formId:t.formId,optionValue:"object"},null,8,["modelValue","onUpdate:modelValue","field","item","settings","formId"])):i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:2,type:c.type,placeholder:c.placeholder||c.name,class:"form-control form-control-sm","onUpdate:modelValue":l=>c.value=l},null,8,IT)),[[i.vModelDynamic,c.value]]),c.suffix?(i.openBlock(),i.createElementBlock("span",vT,i.toDisplayString(c.suffix),1)):i.createCommentVNode("",!0)]),i.createCommentVNode("",!0)],2))),128))])]),i.createElementVNode("div",xT,[i.createElementVNode("button",{type:"button",class:"btn btn-sm btn-outline-primary my-1 w-100",onClick:e[0]||(e[0]=c=>t.arrayAddNewItem(t.field,t.item))},e[5]||(e[5]=[i.createElementVNode("i",{class:"bi bi-plus"},null,-1)]))])])])}const $T={props:{modelValue:Object,group:Object,formId:String,settings:Object,auth:Object},data:function(){return{item:{}}},created(){},mounted(){this.item=this.modelValue},watch:{modelValue(t){this.item=this.modelValue}},methods:{getValueOrFunction(t,e){return vs(t,e,this.settings,this)},translate(t,e,n){return Ds(t,this.settings.translate,e,n||this.settings.language)},selectOptions(t,e){return typeof t=="function"?t(this.item,e,this):t},renderOptions(t,e,n){let s=[];if(!t||!t.length)return[];for(let r of t)s.push({value:r[e],label:r[n]?r[n]:r[e]});return s},arrayAddNewItem(t,e){(!e[t.name]||typeof e[t.name]!="object")&&(e[t.name]=[]);let n={};for(let s in t.elements){let r=t.elements[s];n[s]=r.value,r.value=void 0}e[t.name].push(n)},arrayRemoveItem(t,e){t.splice(e,1)},arrayItemMoveUp(t,e){nd(t,e)},arrayItemMoveDown(t,e){sd(t,e)},insertAddress(t){this.item[t]||(this.item[t]=[]),this.item[t].push({country:void 0,zipcode:void 0,city:void 0,street_name:void 0,street_type:void 0,house_number:void 0})}},components:{HtmlEditor:jw,FileUpload:lT,VuAdminFormSelect:yu,VuAdminFormList:Ye(fT,[["render",DT]])}},MT={class:"row m-1"},RT=["innerHTML"],qT={key:1,class:"row"},PT={class:"form-group pb-3"},jT={key:0},FT={key:0,class:"badge text-secondary fw-light"},UT=["for","innerHTML"],HT={key:1,class:"input-group"},zT=["innerHTML"],WT=["name","id","onUpdate:modelValue","minlength","maxlength","placeholder","disabled","readonly","required"],KT=["name","id","onUpdate:modelValue","min","max","step","placeholder","disabled","readonly","required"],GT=["type","name","id","onUpdate:modelValue","min","max","disabled","readonly","required"],YT={key:4,class:"form-check"},XT=["name","id","true-value","false-value","onUpdate:modelValue","disabled","readonly","required"],ZT=["for"],QT=["name","id","onUpdate:modelValue","minlength","maxlength","placeholder","readonly","disabled","required"],JT=["name","id","onUpdate:modelValue","rows","minlength","maxlength","placeholder","disabled","readonly","required"],eA=["innerHTML"],tA={key:5},nA={key:0},sA=["for"],iA=["name","id","onUpdate:modelValue"],rA=["onClick"],oA=["innerHTML"],aA={key:7,class:"p-1"},lA=["innerHTML"];function cA(t,e,n,s,r,o){const a=i.resolveComponent("VuAdminFormSelect"),c=i.resolveComponent("HtmlEditor"),l=i.resolveComponent("FileUpload"),h=i.resolveComponent("VuAdminFormList");return i.openBlock(),i.createElementBlock("div",MT,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.settings.form.groups,f=>(i.openBlock(),i.createElementBlock("div",{key:f,class:i.normalizeClass([f.class?f.class:"col-md-12"])},[f.title?(i.openBlock(),i.createElementBlock("h2",{key:0,class:"form-row-title mb-4 fw-lighter",innerHTML:f.title?f.title:""},null,8,RT)):i.createCommentVNode("",!0),t.item&&f.fields?(i.openBlock(),i.createElementBlock("div",qT,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(f.fields,u=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass([t.getValueOrFunction(u.class?u.class:"col-md-12"),"input_type_"+u.type]),key:u},[i.createElementVNode("div",PT,[u.label?(i.openBlock(),i.createElementBlock("span",jT,[["html","image","upload"].indexOf(u.type)>=0?(i.openBlock(),i.createElementBlock("label",{key:0,class:i.normalizeClass([{required:u.required},"form-label text-secondary mb-1"])},[i.createTextVNode(i.toDisplayString(u.label?u.label:t.translate(u.name))+" ",1),u.maxlength?(i.openBlock(),i.createElementBlock("span",FT,i.toDisplayString(t.item[u.name]?t.item[u.name].length:0)+" / "+i.toDisplayString(u.maxlength),1)):i.createCommentVNode("",!0)],2)):(i.openBlock(),i.createElementBlock("label",{key:1,class:i.normalizeClass([{required:u.required},"form-label text-secondary mb-1"]),for:t.formId+"_"+u.name,innerHTML:t.getValueOrFunction(u.label?u.label:t.translate(u.name),{field:u,item:t.item})},null,10,UT))])):i.createCommentVNode("",!0),["html","image","list","addresses","template"].indexOf(u.type)<0?(i.openBlock(),i.createElementBlock("div",HT,[u.prefix?(i.openBlock(),i.createElementBlock("span",{key:0,class:"input-group-text",innerHTML:t.getValueOrFunction(u.prefix,{field:u,item:t.item})},null,8,zT)):i.createCommentVNode("",!0),u.type=="text"?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:1,class:i.normalizeClass(["form-control",t.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:t.item})]),type:"text",name:u.name,id:t.formId+"_"+u.name,"onUpdate:modelValue":p=>t.item[u.name]=p,minlength:u.minlength,maxlength:u.maxlength,placeholder:u.placeholder?u.placeholder:"",disabled:u.disabled,readonly:u.readonly,required:u.required},null,10,WT)),[[i.vModelText,t.item[u.name]]]):i.createCommentVNode("",!0),u.type=="number"?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:2,class:i.normalizeClass(["form-control",t.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:t.item})]),type:"number",name:u.name,id:t.formId+"_"+u.name,"onUpdate:modelValue":p=>t.item[u.name]=p,min:u.min,max:u.max,step:u.step,placeholder:u.placeholder?u.placeholder:"",disabled:u.disabled,readonly:u.readonly,required:u.required},null,10,KT)),[[i.vModelText,t.item[u.name]]]):i.createCommentVNode("",!0),["date","datetime","datetime-local"].indexOf(u.type)>=0?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:3,class:i.normalizeClass(["form-control",t.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:t.item})]),type:u.type,name:u.name,id:t.formId+"_"+u.name,"onUpdate:modelValue":p=>t.item[u.name]=p,min:u.min,max:u.max,disabled:u.disabled,readonly:u.readonly,required:u.required},null,10,GT)),[[i.vModelDynamic,t.item[u.name]]]):i.createCommentVNode("",!0),u.type=="checkbox"?(i.openBlock(),i.createElementBlock("div",YT,[i.withDirectives(i.createElementVNode("input",{class:i.normalizeClass(["form-check-input",t.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:t.item})]),type:"checkbox",name:u.name,id:t.formId+"_"+u.name,"true-value":u.true!=null?u.true:!0,"false-value":u.false!=null?u.false:!1,"onUpdate:modelValue":p=>t.item[u.name]=p,disabled:u.disabled,readonly:u.readonly,required:u.required},null,10,XT),[[i.vModelCheckbox,t.item[u.name]]]),i.createElementVNode("label",{class:"form-check-label cursor-pointer",for:t.formId+"_"+u.name},i.toDisplayString(u.checkbox),9,ZT)])):i.createCommentVNode("",!0),u.type=="email"?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:5,autocomplete:"on",class:i.normalizeClass(["form-control",t.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:t.item})]),type:"email",name:u.name,id:t.formId+"_"+u.name,"onUpdate:modelValue":p=>t.item[u.name]=p,minlength:u.minlength,maxlength:u.maxlength,placeholder:u.placeholder?u.placeholder:"",readonly:u.readonly,disabled:u.disabled,required:u.required},null,10,QT)),[[i.vModelText,t.item[u.name]]]):i.createCommentVNode("",!0),u.type=="select"&&(!u.relation||u.relation&&u.relation.items)?(i.openBlock(),i.createBlock(a,{key:6,modelValue:t.item[u.name],"onUpdate:modelValue":p=>t.item[u.name]=p,field:u,item:t.item,settings:t.settings,formId:t.formId,auth:t.auth},null,8,["modelValue","onUpdate:modelValue","field","item","settings","formId","auth"])):i.createCommentVNode("",!0),u.type=="textarea"?i.withDirectives((i.openBlock(),i.createElementBlock("textarea",{key:7,class:i.normalizeClass(["form-control",t.getValueOrFunction(u.inputclass?u.inputclass:"",{field:u,item:t.item})]),name:u.name,id:t.formId+"_"+u.name,"onUpdate:modelValue":p=>t.item[u.name]=p,rows:u.rows,minlength:u.minlength,maxlength:u.maxlength,placeholder:u.placeholder?u.placeholder:"",disabled:u.disabled,readonly:u.readonly,required:u.required},"              ",10,JT)),[[i.vModelText,t.item[u.name]]]):i.createCommentVNode("",!0),u.suffix?(i.openBlock(),i.createElementBlock("span",{key:8,class:"input-group-text",innerHTML:t.getValueOrFunction(u.suffix,{field:u,item:t.item})},null,8,eA)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),u.type=="html"?(i.openBlock(),i.createBlock(c,{key:2,modelValue:t.item[u.name],"onUpdate:modelValue":p=>t.item[u.name]=p,class:i.normalizeClass([u.class])},null,8,["modelValue","onUpdate:modelValue","class"])):i.createCommentVNode("",!0),u.type=="image"||u.type=="upload"?(i.openBlock(),i.createBlock(l,{key:3,modelValue:t.item[u.name],"onUpdate:modelValue":p=>t.item[u.name]=p,class:i.normalizeClass([u.class]),field:u,settings:t.settings},null,8,["modelValue","onUpdate:modelValue","class","field","settings"])):i.createCommentVNode("",!0),u.type=="list"&&(!u.relation||u.relation&&u.relation.items)?(i.openBlock(),i.createBlock(h,{key:4,modelValue:t.item[u.name],"onUpdate:modelValue":p=>t.item[u.name]=p,field:u,item:t.item,settings:t.settings,formId:t.formId},null,8,["modelValue","onUpdate:modelValue","field","item","settings","formId"])):i.createCommentVNode("",!0),u.type=="addresses"?(i.openBlock(),i.createElementBlock("span",tA,[t.item[u.name]?(i.openBlock(),i.createElementBlock("div",nA,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.item[u.name],p=>(i.openBlock(),i.createElementBlock("div",{key:p},[i.createTextVNode(i.toDisplayString(p)+" ",1),i.createElementVNode("label",{class:"form-label text-secondary mb-1",for:t.formId+"_"+u.name},i.toDisplayString(u.label),9,sA),i.withDirectives(i.createElementVNode("input",{class:"form-control",type:"text",name:u.name,id:t.formId+"_"+u.name,"onUpdate:modelValue":g=>p.country=g},null,8,iA),[[i.vModelText,p.country]])]))),128))])):i.createCommentVNode("",!0),i.createElementVNode("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:p=>t.insertAddress(u.name)}," Add ",8,rA)])):i.createCommentVNode("",!0),u.type=="template"?(i.openBlock(),i.createElementBlock("div",{key:6,innerHTML:t.getValueOrFunction(u.template,{field:u,item:t.item})},null,8,oA)):i.createCommentVNode("",!0),u.description?(i.openBlock(),i.createElementBlock("div",aA,[i.createElementVNode("small",null,[i.createElementVNode("i",{class:"text-muted",innerHTML:t.getValueOrFunction(u.description,{field:u,item:t.item})},null,8,lA)])])):i.createCommentVNode("",!0)])],2))),128))])):i.createCommentVNode("",!0)],2))),128))])}const dA={props:{modelValue:Object,modalWindow:Object,saveItem:Function,reloadTable:Function,fetchRelation:Function,group:Object,formId:String,settings:Object,auth:Object},data:function(){return{item:{},loaded:!1,ui:{wait:{table:!1,form:!1},block:{table:!1,form:!1}},messages:{table:[],form:[]},message:{table:null,form:null},messageTimeOut:null}},created(){},mounted(){this.item=this.modelValue;let t=this.item[this.settings.pkey];this.fetchItem(t,this.settings,this.auth)},watch:{modelValue(t){this.item=this.modelValue}},methods:{translate(t,e,n){return Ds(t,this.settings.translate,e,n||this.settings.language)},getValueOrFunction(t,e){return vs(t,e,this.settings,this)},formWait(t){this.ui.wait.form=!0,this.ui.block.form=t},formNoWait(){this.ui.wait.form=!1,this.ui.block.form=!1},addFormMessage(t,e,n,s){this.addMessage("form",t,e,n,s)},addMessage(t,e,n,s,r){clearTimeout(this.messageTimeout);const o=Date.now()+Math.random().toString(36).substring(2,9);this.message[t]={uid:o,msg:e,timeout:n!==void 0?n:2500,datetime:new Date().toLocaleString("hu-HU"),priority:s||"secondary",details:r},this.messages[t].unshift(this.message[t]),clearTimeout(this.messageTimeOut),this.messageTimeOut=setTimeout(()=>{this.message[t]=null,this.messages[t].length>10&&this.messages[t].splice(10)},this.message[t].timeout)},createItem(){this.item=this.settings.form.default?this.settings.form.default:{},setTimeout(()=>{this.itemOriginal=Object.assign({},this.item)},100)},copyItem(){this.item[this.settings.pkey]=void 0,setTimeout(()=>{this.itemOriginal=Object.assign({},this.item)},100)},reloadItem(){let t=this.item[this.settings.pkey];this.fetchItem(t,null,this.auth)},async fetchItem(t,e,n){try{if(e=e||this.settings,!e.form||!e.form.api)return!1;this.formWait(!0);const s=await fetch(wt("GET",e.form.api,t),_t("GET",e.api,null,n)).catch(c=>{}),r=await Yn(s);if(Xn(s,r.data,"form")||!r.data)return this.formNoWait(),!1;e.form.default&&(r.data=Object.assign({},e.form.default,r.data)),e.events&&e.events.afterItemLoad&&e.events.afterItemLoad(r.data,s);let a;e.form.api.input.item?a=typeof e.form.api.input.item=="string"?r.data[e.form.api.input.item]:e.form.api.input.item(r.data,s):a=r.data;for(let c of e.form.groups)for(let l of c.fields)l.relation&&e.relations[l.relation.config]&&(l.relation=Ui(e.relations[l.relation.config],l.relation),console.log(l.relation,n),await this.fetchRelation(l,[a],n));this.item=Hi(a),this.itemOriginal=Object.assign({},a),this.loaded=!0,this.formNoWait()}catch(s){console.error(s),this.formNoWait()}},async submit(){let t=this.$refs.form;t.checkValidity()?this.submitItem():t.reportValidity()},async submitAndClose(){let t=this.$refs.form;t.checkValidity()?this.submitItem(!0):t.reportValidity()},async submitItem(t){this.saveItem(this.item,e=>{let n={};this.settings.form.api.input.item?n=typeof this.settings.form.api.input.item=="string"?e[this.settings.form.api.input.item]:this.settings.form.api.input.item(e,response):n=e,n&&(this.addFormMessage(this.translate("Saved")+` <small>( ${this.settings.pkey}:  ${n[this.settings.pkey]} )</small>`,2500),this.item=Hi(n),this.itemOriginal=Object.assign({},n)),t===!0&&this.modalWindow.hide(),this.reloadTable()},e=>{console.log(e),this.addFormMessage(e.message,14500,"danger")})},async deleteItem(t,e){try{t||(t=this.item);let n=t[this.settings.pkey];if(!n||!confirm("Are you sure you want to delete this item?"))return;this.formWait(!0),this.settings.events&&this.settings.events.beforeItemDelete&&this.settings.events.beforeItemDelete(t);const r=await fetch(wt("DELETE",this.settings.form.api,n,e),_t("DELETE",this.settings.api,null,this.auth));if(r.status!==200)throw new Error(this.translate("Response status: "+r.status));this.item&&(this.item={},this.modalWindow.hide());const o=await r.json();this.settings.events&&this.settings.events.afterItemDelete&&this.settings.events.afterItemDelete(o,r),this.reloadTable(),this.formNoWait()}catch(n){console.error(n.message),this.formNoWait()}},formAction(t,e){e.$event&&e.$event.stopPropagation();let n=t.action?t.action:t.click?t.click:null;if(n&&typeof n!="string"){n(e.item,e,this);return}switch(n){case"FORM_RELOAD":if(!this.item[this.settings.pkey])return;this.reloadItem();break;case"FORM_NEW":this.createItem();break;case"FORM_COPY":this.copyItem();break;case"FORM_DELETE":if(!this.item[this.settings.pkey])return;this.deleteItem();break;case"FORM_CLOSE":this.modalWindow.hide();break;case"FORM_SAVE":this.submit();break;case"FORM_SAVE_AND_CLOSE":this.submitAndClose();break}}},components:{VuAdminFormGroup:Ye($T,[["render",cA],["__scopeId","data-v-9d078f58"]])}},hA=["id","data-bs-theme"],uA={class:"modal-header"},fA={key:0,class:"modal-title"},mA=["innerHTML"],pA={key:1},gA={key:2},bA={key:3,class:"rounded border ms-2 px-2 py-0 fs-6"},yA={key:1,class:"d-inline-block ms-3 mt-1"},EA=["innerHTML"],_A={class:"spinner-border spinner-border-sm mx-2",role:"status"},wA={key:0,class:"modal-header bg-body sticky-top"},NA={key:0,class:"d-inline-block m-1"},kA={class:"dropdown d-inline-block"},TA=["innerHTML"],AA={class:"dropdown-menu text-start"},CA={class:"me-2 text-muted"},SA=["innerHTML"],OA=["disabled","onClick"],LA={key:1,class:"dropdown d-inline-block"},BA={class:"mx-1"},VA={class:"dropdown-menu px-2"},IA=["onClick"],vA={key:1,class:"modal-body custom-scroll"},xA={key:2,class:"modal-footer d-flex justify-content-between"},DA={key:3,class:"bg-light text-dark"};function $A(t,e,n,s,r,o){const a=i.resolveComponent("VuAdminFormGroup");return t.item?(i.openBlock(),i.createElementBlock("form",{key:0,ref:"form",id:t.formId,class:i.normalizeClass(["form",[t.settings.form.class,{wait:t.ui.wait.form}]]),onSubmit:e[1]||(e[1]=i.withModifiers((...c)=>t.submitItem&&t.submitItem(...c),["prevent"])),"data-bs-theme":[t.settings.theme]},[i.createElementVNode("div",{class:i.normalizeClass(["vua-overlay",{blocked:t.ui.block.form}])},null,2),i.createElementVNode("div",uA,[t.loaded?(i.openBlock(),i.createElementBlock("h5",fA,[t.settings.form.title&&typeof t.settings.form.title=="function"?(i.openBlock(),i.createElementBlock("span",{key:0,innerHTML:t.settings.form.title(t.item,t.settings)},null,8,mA)):i.createCommentVNode("",!0),t.settings.form.title&&typeof t.settings.form.title=="string"?(i.openBlock(),i.createElementBlock("span",pA,i.toDisplayString(t.translate(t.settings.form.title)),1)):i.createCommentVNode("",!0),t.settings.form.title?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("span",gA,i.toDisplayString(t.translate("Edit")),1)),t.item[t.settings.pkey]?(i.openBlock(),i.createElementBlock("small",bA,[e[2]||(e[2]=i.createElementVNode("span",{class:"text-muted fw-light"},"id",-1)),i.createTextVNode(" "+i.toDisplayString(t.item[t.settings.pkey]),1)])):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),t.message.form?(i.openBlock(),i.createElementBlock("span",yA,[i.createElementVNode("span",{class:i.normalizeClass(["text-"+t.message.form.priority])},[e[3]||(e[3]=i.createElementVNode("i",{class:"bi bi-envelope-fill me-2"},null,-1)),i.createElementVNode("span",{innerHTML:t.message.form.msg},null,8,EA)],2)])):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("span",_A,e[4]||(e[4]=[i.createElementVNode("span",{class:"visually-hidden"},"Loading...",-1)]),512),[[i.vShow,t.ui.wait.form]]),e[5]||(e[5]=i.createElementVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),t.item?(i.openBlock(),i.createElementBlock("div",wA,[t.settings.form.control?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(["w-100",t.settings.form.control.class==null?"d-flex justify-content-center":t.settings.form.control.class])},[t.messages.form.length?(i.openBlock(),i.createElementBlock("span",NA,[i.createElementVNode("div",kA,[i.createElementVNode("button",{class:i.normalizeClass(["btn btn-sm dropdown-toggle",["btn-"+t.messages.form[0].priority]]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",innerHTML:t.messages.form.length+" "+(t.messages.form.length>1?t.translate("messages"):t.translate("message"))},null,10,TA),i.createElementVNode("ul",AA,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.messages.form,c=>(i.openBlock(),i.createElementBlock("li",{key:c},[i.createElementVNode("span",{class:i.normalizeClass(["dropdown-item disabled",["text-"+c.priority]])},[i.createElementVNode("small",CA,i.toDisplayString(c.datetime),1),i.createElementVNode("span",{innerHTML:c.msg},null,8,SA)],2)]))),128))])])])):i.createCommentVNode("",!0),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(t.settings.form.control.buttons,c=>(i.openBlock(),i.createElementBlock("span",{key:c.action},[c.dropdowns?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",disabled:c.disabled!==void 0?t.getValueOrFunction(c.disabled,{button:c,item:t.item,form:this}):!1,class:i.normalizeClass([c.class?c.class:t.getButtonClassByAction(c.action)]),onClick:l=>t.formAction(c,{button:c,item:t.item,form:this,$event:l})},[i.createElementVNode("i",{class:i.normalizeClass([c.icon!==void 0?t.getValueOrFunction(c.icon,{button:c,item:t.item,form:this}):t.getButtonIconClassByAction(c.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(t.translate(c.title)),1)],10,OA)),c.dropdowns?(i.openBlock(),i.createElementBlock("div",LA,[i.createElementVNode("button",{type:"button",class:i.normalizeClass([[c.class],"dropdown-toggle"]),"data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false"},[i.createElementVNode("span",BA,[i.createElementVNode("i",{class:i.normalizeClass([c.icon!==void 0?t.getValueOrFunction(c.icon,{button:c,table:this}):t.getButtonIconClassByAction(c.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(t.translate(c.title)),1)])],2),i.createElementVNode("ul",VA,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(c.dropdowns,l=>(i.openBlock(),i.createElementBlock("li",{key:l},[i.createElementVNode("span",{class:i.normalizeClass([l.class?l.class:""]),onClick:h=>t.formAction(l,{button:c,item:t.item,form:this,$event:h})},[l.icon?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass([l.icon])},null,2)):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(t.translate(l.title)),1)],10,IA)]))),128))])])):i.createCommentVNode("",!0)]))),128))],2)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),t.settings.form?(i.openBlock(),i.createElementBlock("div",vA,[t.settings.form.visible&&t.settings.form.groups?(i.openBlock(),i.createBlock(a,{key:0,modelValue:t.item,"onUpdate:modelValue":e[0]||(e[0]=c=>t.item=c),formid:t.formId,settings:t.settings},null,8,["modelValue","formid","settings"])):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),t.item?(i.openBlock(),i.createElementBlock("div",xA)):i.createCommentVNode("",!0),t.settings.debug>1?(i.openBlock(),i.createElementBlock("pre",DA,"        "+i.toDisplayString(t.item)+`
    `,1)):i.createCommentVNode("",!0)],42,hA)):i.createCommentVNode("",!0)}const MA=Ye(dA,[["render",$A],["__scopeId","data-v-e9fbbf5c"]]),RA={name:"VuAdminTablePagination",emits:["setPage","setPageLimit","translate"],props:{config:Object,settings:Object,ui:Object},methods:{setPage(t){this.$emit("setPage",t)},setPageLimit(t){this.$emit("setPageLimit",t)},translate(t,e,n){return Ds(t,this.settings.translate,e,n||this.settings.language)},firstDisabled(){return this.config.pagination.page<=1},prevDisabled(){return this.config.pagination.page<=1},nextDisabled(){return this.config.pagination.pages?this.config.pagination.page+1>this.config.pagination.pages:this.config.pagination.items<this.config.pagination.limit},lastDisabled(){return this.config.pagination.page==this.config.pagination.pages}},components:{}},qA={key:0,"aria-label":"Page navigation",class:"mt-2 d-flex align-items-center justify-content-between"},PA={class:"dropdown d-inline-block m-1"},jA={class:"mx-1"},FA={key:0},UA={key:0,class:"dropdown-menu text-end"},HA=["onClick"],zA={class:"ms-2"},WA={key:0,class:"bi bi-check-circle-fill ms-2"},KA={key:1,class:"bi bi-circle ms-2"},GA={class:"spinner-border spinner-border-sm mx-2",role:"status"},YA={class:"pagination pagination-sm m-1"},XA={class:"page-item"},ZA=["innerHTML"],QA={class:"page-item"},JA=["innerHTML"],eC=["onClick"],tC={class:"page-item"},nC=["innerHTML"],sC={key:0,class:"page-item"},iC=["innerHTML"];function rC(t,e,n,s,r,o){return n.config.pagination.hidden?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("nav",qA,[i.createElementVNode("div",null,[i.createElementVNode("div",PA,[i.createElementVNode("button",{type:"button",class:i.normalizeClass(["btn btn-sm btn-secondary",{"dropdown-toggle":n.config.pagination.limits}]),"data-bs-toggle":"dropdown","aria-expanded":"false"},[i.withDirectives(i.createElementVNode("span",jA,[i.createElementVNode("strong",null,i.toDisplayString(n.config.pagination.from)+"-"+i.toDisplayString(n.config.pagination.to),1),n.config.pagination.total?(i.openBlock(),i.createElementBlock("span",FA," / "+i.toDisplayString(n.config.pagination.total),1)):i.createCommentVNode("",!0)],512),[[i.vShow,n.config.pagination.from>0]])],2),n.config.pagination.limits?(i.openBlock(),i.createElementBlock("ul",UA,[i.createElementVNode("li",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.config.pagination.limits,a=>(i.openBlock(),i.createElementBlock("span",{class:i.normalizeClass(["dropdown-item cursor-pointer",{selected:n.config.pagination.limit==a}]),key:a,onClick:c=>o.setPageLimit(a)},[i.createElementVNode("strong",null,i.toDisplayString(a),1),i.createElementVNode("small",zA,i.toDisplayString(o.translate("row"))+"/"+i.toDisplayString(o.translate("page")),1),n.config.pagination.limit==a?(i.openBlock(),i.createElementBlock("i",WA)):i.createCommentVNode("",!0),n.config.pagination.limit!=a?(i.openBlock(),i.createElementBlock("i",KA)):i.createCommentVNode("",!0)],10,HA))),128))])])):i.createCommentVNode("",!0)]),i.withDirectives(i.createElementVNode("div",GA,e[4]||(e[4]=[i.createElementVNode("span",{class:"visually-hidden"},"Loading...",-1)]),512),[[i.vShow,n.ui&&n.ui.wait.table]])]),i.createElementVNode("ul",YA,[i.createElementVNode("li",XA,[i.createElementVNode("a",{class:i.normalizeClass(["page-link cursor-pointer",{disabled:o.firstDisabled()}]),onClick:e[0]||(e[0]=a=>o.setPage(1)),"aria-label":"{{  translate('First')  }}"},[i.createElementVNode("span",{"aria-hidden":"true",innerHTML:o.translate("First")},null,8,ZA)],2)]),i.createElementVNode("li",QA,[i.createElementVNode("a",{class:i.normalizeClass(["page-link cursor-pointer",{disabled:o.prevDisabled()}]),onClick:e[1]||(e[1]=a=>o.setPage(n.config.pagination.page-1)),"aria-label":"{{ translate('Prev')  }}"},[i.createElementVNode("span",{"aria-hidden":"true",innerHTML:o.translate("Prev")},null,8,JA)],2)]),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.config.pagination.numbers,a=>(i.openBlock(),i.createElementBlock("li",{key:a,class:"page-item"},[i.createElementVNode("a",{class:i.normalizeClass(["page-link cursor-pointer",{disabled:a>n.config.pagination.pages,current:a==n.config.pagination.page}]),onClick:c=>o.setPage(a)},i.toDisplayString(a),11,eC)]))),128)),i.createElementVNode("li",tC,[i.createElementVNode("a",{class:i.normalizeClass(["page-link cursor-pointer",{disabled:o.nextDisabled()}]),onClick:e[2]||(e[2]=a=>o.setPage(n.config.pagination.page+1)),"aria-label":"{{  translate('Next')  }}"},[i.createElementVNode("span",{"aria-hidden":"true",innerHTML:o.translate("Next")},null,8,nC)],2)]),n.config.pagination.total?(i.openBlock(),i.createElementBlock("li",sC,[i.createElementVNode("a",{class:i.normalizeClass(["page-link cursor-pointer",{disabled:o.lastDisabled()}]),onClick:e[3]||(e[3]=a=>o.setPage(n.config.pagination.total)),"aria-label":"{{  translate('Last')  }}"},[i.createElementVNode("span",{"aria-hidden":"true",innerHTML:o.translate("Last")},null,8,iC)],2)])):i.createCommentVNode("",!0)])]))}const oC=Ye(RA,[["render",rC],["__scopeId","data-v-a7fb8960"]]),Eu=_o(),aC={name:"VuAdminTable",props:{settings:Object,auth:Object},components:{VuAdminForm:MA,VuAdminTablePagination:oC},data(){return{item:{},items:{},selected:[],details:[],bulkitem:{},bulkinputs:[],config:{pagination:{total:void 0,page:1,skip:0,limit:10,limits:[10,20,50,100],size:5,items:null,pages:null,numbers:[]},order:{},filter:{},orderIndex:1},ui:{wait:{table:!1,form:!1},block:{table:!1,form:!1}},formId:null,formData:null,modalId:null,modalElement:null,modalWindow:null,messages:{table:[],form:[]},message:{table:null,form:null},messageTimeOut:null}},watch:{auth:{immediate:!0,handler(t,e){t&&t.header&&this.init()}}},created(){let t=Math.round(Math.random()*1e5);this.formId="form_"+this.settings.entity+"_"+t,this.modalId="modal_"+this.settings.entity+"_"+t},mounted(){this.modalElement=document.getElementById(this.modalId),this.modalWindow=new cn(this.modalElement),this.modalElement.addEventListener("hidden.bs.modal",t=>{this.settings.form.visible=!1}),this.modalElement.addEventListener("show.bs.modal",t=>{this.settings.form.visible=!0})},methods:{init(){if(!this.settings.table)return!1;this.settings.table.pagination&&(this.config.pagination=Object.assign({},this.config.pagination,this.settings.table.pagination)),this.setPage(this.config.pagination.page,!1),this.settings.table.order&&(this.config.order=Object.assign({},this.config.order,this.settings.table.order)),this.settings.table.header||(this.settings.table.header={}),this.settings.api||(this.settings.api={}),this.settings.api=Object.assign({url:null,input:{},output:{},options:{}},this.settings.api),this.settings.table.api||(this.settings.table.api={}),this.settings.form||(this.settings.form={}),this.settings.form.api||(this.settings.form.api={}),this.settings.table.api=Object.assign({},this.settings.api,this.settings.table.api),this.settings.form.api=Object.assign({},this.settings.api,this.settings.form.api),this.settings.initialized=!0,this.listenEvent(),this.resetTable()},authAndSettings(){return this.settings.initialized&&this.auth&&this.auth.header&&this.settings&&this.settings.table},sendEvent(t,e,n){Eu.emit(t+"-"+e,{from:this.settings.entity,payload:n})},listenEvent(){Eu.on(`EDIT-${this.settings.entity}`,t=>{this.editItem(t.payload.item)})},tableWait(t){this.ui.wait.table=!0,this.ui.block.table=t},tableNoWait(){this.ui.wait.table=!1,this.ui.block.table=!1},countFilters(){return this.settings.table.columns.filter(t=>t.filter&&!t.hidden).length},resetTable(){this.settings.table.pagination&&(this.config.pagination.limit=this.settings.table.pagination.limit),this.resetFilter(),this.resetOrder(!0)},resetFilter(t){if(this.settings.table.columns){for(let e of this.settings.table.columns)e.filter&&(e.filter.value=e.filter.default_value!==void 0?e.filter.default_value:e.filter.multiple?[]:void 0,e.filter.operator=e.filter.default_operator!==void 0?e.filter.default_operator:void 0);t&&(this.reloadTable(),this.calcPage())}},resetOrder(t){this.settings.table.order?this.config.order=Object.assign({},this.settings.table.order):this.config.order={},t&&(this.reloadTable(),this.calcPage())},reloadTable(t){this.fetchTable(t)},calcPage(){if(!(this.config.pagination.items===null||this.config.pagination.items===void 0)){if(this.config.pagination.total!==null&&this.config.pagination.total!==void 0&&(this.config.pagination.pages=Math.ceil(this.config.pagination.total/this.config.pagination.limit)),this.config.pagination.pages!==null){let t=Math.floor((this.config.pagination.size-1)/2),e=this.config.pagination.page-t;this.config.pagination.page>this.config.pagination.pages&&(this.config.pagination.page=this.config.pagination.pages),this.config.pagination.page<1&&(this.config.pagination.page=1),e+this.config.pagination.size>this.config.pagination.pages&&(e=this.config.pagination.pages-this.config.pagination.size+1),e<1&&(e=1),this.config.pagination.numbers=Array.from({length:this.config.pagination.size},(n,s)=>e+s)}this.config.pagination.from=this.config.pagination.skip+1,this.config.pagination.to=this.config.pagination.skip+(this.config.pagination.items!==null?this.config.pagination.items:this.config.pagination.limit)}},setPage(t,e){e=e!==void 0?e:!0,t<1&&(t=1),this.config.pagination.pages!==null&&this.config.pagination.pages!==void 0&&t>this.config.pagination.pages&&(t=this.config.pagination.pages),this.config.pagination.skip=(t-1)*this.config.pagination.limit,this.config.pagination.page!=t&&e&&(this.config.pagination.page=t,this.reloadTable())},setPageLimit(t){t!=this.config.pagination.limit&&(this.config.pagination.limit=t,this.setPage(1),this.calcPage(),this.reloadTable())},getValueOrFunction(t,e){return vs(t,e,this.settings,this)},getButtonClassByAction(t){switch(t){case"TABLE_RESET_ORDERS":case"TABLE_RESET_FILTERS":return"btn btn-sm btn-outline-secondary text-nowrap mx-1";case"TABLE_CLOSE_DETAILS":return"btn btn-sm btn-outline-secondary text-nowrap mx-1";case"TABLE_ROW_EDIT":return"btn btn-sm btn-secondary text-nowrap mx-1";case"FORM_SUBMIT":case"TABLE_ROW_SAVE":case"TABLE_BULK_SAVE":return"btn btn-sm btn-primary text-nowrap mx-1";case"FORM_DELETE":case"TABLE_ROW_DELETE":case"TABLE_BULK_DELETE":return"btn btn-sm btn-danger text-nowrap mx-1";case"TABLE_ROW_DETAIL":return"btn btn-sm btn-outline-secondary text-nowrap mx-1";case"TABLE_COLUMNS":return"btn btn-sm btn-outline-dark text-nowrap mx-1";case"TABLE_EXPORT":return"btn btn-sm btn-primary text-nowrap mx-1";default:return"btn btn-sm btn-outline-primary text-nowrap mx-1"}},getButtonIconClassByAction(t){switch(t){case"TABLE_RESET_ORDERS":case"TABLE_RESET_FILTERS":return"bi bi-x";case"TABLE_CLOSE_DETAILS":return"bi bi-chevron-compact-up";case"TABLE_ROW_EDIT":return"bi bi-pencil-square";case"FORM_SUBMIT":case"TABLE_ROW_SAVE":case"TABLE_BULK_SAVE":return"bi bi-save";case"FORM_DELETE":case"TABLE_ROW_DELETE":case"TABLE_BULK_DELETE":return"bi bi-trash";case"TABLE_ROW_DETAIL":return"bi bi-chevron-compact-down";case"TABLE_COLUMNS":return"bi bi-table";case"TABLE_EXPORT":return"bi bi-download";default:return"bi bi-question"}},tableCellValue(t,e,n,s){try{return t===void 0||e===void 0?void 0:s.value?s.value(t,e,n,s):e[t]!==void 0||!t.includes(".")?e[t]:t.split(".").reduce((r,o)=>r&&r[o],e)}catch(r){return r.message}},tableCellTemplate(t,e,n,s){try{return typeof t=="string"?t:t(e[s.name],e,n,s)}catch(r){return r.message}},tableAction(t,e){e.$event&&e.$event.stopPropagation();let n=t.action?t.action:t.click?t.click:null;if(n&&typeof n!="string"){n(e.item,e,this);return}switch(n){case"TABLE_ROW_SELECT":this.toggleSelected(e.item[this.settings.pkey]);break;case"TABLE_ROW_DETAIL":this.toggleDetail(e.item[this.settings.pkey]);break;case"TABLE_CLOSE_DETAILS":this.details=[];break;case"TABLE_RESET_ORDERS":this.resetOrder(!0);break;case"TABLE_RESET_FILTERS":this.resetFilter(!0);break;case"TABLE_ROW_EDIT":this.editItem(e.item);break;case"TABLE_ROW_SAVE":this.tableRowSave(e.item,t.params);break;case"FORM_SUBMIT":this.saveForm(e.item);break;case"___save":this.saveItem(item,()=>{this.addTableMessage(this.translate("Saved")+` <small>( ${this.settings.pkey}:  ${e.item[this.settings.pkey]} )</small>`,2500)},s=>{this.addTableMessage(s.message,3500,"danger")},t.params);break;case"FORM_CREATE":this.createItem(e.item,t.params);break;case"TABLE_ROW_DELETE":this.deleteItem(e.item,t.params);break;case"FORM_DELETE":this.deleteItem(e.item,t.params);break;case"TABLE_RELOAD":this.reloadTable(t.params);break;case"TABLE_EXPORT":this.exportTable(t.params);break}},tableBulkAction(t,e,n,s){if(s&&s.stopPropagation(),t&&typeof t!="string"){t(item,this);return}switch(t){case"TABLE_BULK_SAVE":this.saveBulk(()=>{this.addTableMessage(this.translate("Saved all selected items"),2500)});break;case"TABLE_BULK_DELETE":this.deleteItems(this.selected,r=>{this.selected=[]});break}},isSortable(t){return t.sortable===void 0||t.sortable},sortTable(t){if(this.config.order[t.name]&&this.config.order[t.name].fixed||!this.isSortable(t))return;this.config.order[t.name]===void 0||this.config.order[t.name]===null?this.config.order[t.name]={dir:"ASC",idx:this.config.orderIndex++}:this.config.order[t.name].dir==="ASC"?this.config.order[t.name]={dir:"DESC",idx:this.config.orderIndex++}:delete this.config.order[t.name],Object.entries(this.config.order).sort((n,s)=>n[1].idx-s[1].idx).forEach((n,s)=>{n[1].idx=s}),this.reloadTable()},getOrdersForFetch(){let t=[],e=!1;for(let n of Object.keys(this.config.order))e=!0,t[this.config.order[n].idx]={key:n,dir:this.config.order[n].dir};return e?t:null},getFiltersForFetch(){let t={},e=!1;for(let n of this.settings.table.columns)n.filter&&n.filter.value!==void 0&&(e=!0,t[n.name]={type:n.filter.type,value:n.filter.onchange?n.filter.onchange(n.filter):n.filter.value,operator:n.filter.operator});return e?t:null},async fetchTableRelations(t){for(let e of this.settings.table.columns)if(e.relation&&this.settings.relations[e.relation.config]){let n=[];e.relation=Ui(this.settings.relations[e.relation.config],e.relation);for(let s of t)s[e.relation.local]&&n.push(s[e.relation.local]);e.relation.ids=bb(n),await this.fetchRelation(e,t,this.auth)}},async fetchTable(t){try{this.tableWait(!0),t=t||{},t.filter=this.getFiltersForFetch(),t.order=this.getOrdersForFetch(),this.config.pagination.page!==null&&this.config.pagination.page!==void 0&&(t.page=this.config.pagination.page),this.config.pagination.limit!==null&&this.config.pagination.limit!==void 0&&(t.limit=this.config.pagination.limit),t.page&&t.limit&&(t.skip=(t.page-1)*t.limit);let e=await this.fetchItems(this.settings,t,this.config,this.auth);if(e===!1)return this.tableNoWait(),!1;await this.fetchTableRelations(e),this.items=e,this.tableNoWait()}catch(e){console.error(e),this.addTableMessage(e.message,3500,"danger"),this.tableNoWait()}},async fetchItems(t,e,n,s){t.events&&t.events.beforeItemsLoad&&t.events.beforeItemsLoad(e,t);const r=await fetch(wt("GET",t.table.api,null,e),_t("GET",t.table.api,null,s)),o=await Yn(r),a=Xn(r,o.data);if(a){this.handleTableErrors(a);return}if(o.error){this.handleTableErrors(o.error);return}t.events&&t.events.afterItemsLoad&&t.events.afterItemsLoad(o.data,r);let c;t.table.api.input.items?c=typeof t.table.api.input.items=="string"?o.data[t.table.api.input.items]:t.table.api.input.items(o.data,r):c=o.data,n&&(t.table.api.input.total?n.pagination.total=typeof t.table.api.input.total=="string"?o.data[t.table.api.input.total]:t.table.api.input.total(o.data,r):o.data.total&&(n.pagination.total=o.data.total),n.pagination.items=c.length,this.calcPage());let l=fb(c);return this.convertIn(t.table.columns,l),l},async fetchRelation(t,e,n){try{let s=t.relation.params?t.relation.params:{};t.relation.columns&&(s.columns=JSON.stringify(t.relation.columns));let r={};if(t.relation.ids&&t.relation.ids.length){let h=(typeof t.relation.ids[0]=="string"?"text":"number")==="string"?"'"+t.relation.ids.join("','")+"'":t.relation.ids.join(",");r[t.relation.foreign]={type:"array",value:h,operator:"IN"}}s.filter=JSON.stringify(r),yb(s,{column:t});const o=await fetch(wt("GET",t.relation.api,null,s),_t("GET",t.relation.api,null,n));if(o.status!==200)throw new Error(this.translate("Response status: "+o.status));const a=await Yn(o);if(Xn(o,a.data)||!a.data)return;if(t.relation.api.input.items?t.relation.items=typeof t.relation.api.input.items=="string"?a.data[t.relation.api.input.items]:t.relation.api.input.items(a.data,o):t.relation.items=a.data,e&&e[0])for(let l of e)l[t.relation.local]&&(l[t.relation.entity]=t.relation.items.find((h,f,u)=>h[t.relation.foreign]===l[t.relation.local]))}catch(s){console.error(s)}},async editItem(t){if(!this.settings.form||!this.settings.form.api)return!1;this.item=t,this.message.form=null,this.messages.form=[],this.modalWindow.show()},async deleteItem(t,e){try{t||(t=this.item);let n=t[this.settings.pkey];if(!n||!confirm("Are you sure you want to delete this item"))return;this.tableWait(!0),this.settings.events&&this.settings.events.beforeItemDelete&&this.settings.events.beforeItemDelete(t);const r=await fetch(wt("DELETE",this.settings.form.api,n,e),_t("DELETE",this.settings.api,null,this.auth));if(r.status!==200)throw new Error(this.translate("Response status: "+r.status));let o=this.items.find(c=>c[this.settings.pkey]===n);o>=0&&this.items.splice(o,1),this.item&&(this.item={});const a=await r.json();this.settings.events&&this.settings.events.afterItemDelete&&this.settings.events.afterItemDelete(a,r),this.reloadTable()}catch(n){console.error(n),this.tableNoWait()}},async deleteItems(t,e){try{if(!t||!confirm(this.translate("Are you sure you want to delete all selected items?")))return;this.tableWait(!0);const s=await fetch(wt("DELETE",this.settings.table.api),_t("DELETE",this.settings.api,{body:JSON.stringify({ids:t})},this.auth));if(s.status!==200)throw new Error(this.translate("Response status: "+s.status));e&&e(s),this.reloadTable(),this.tableNoWait()}catch(n){console.error(n),this.tableNoWait()}},tableRowSave(t,e){this.tableWait(),this.saveItem(t,()=>{this.tableNoWait(),this.addTableMessage(this.translate("Saved")+` <small>( ${this.settings.pkey}:  ${t[this.settings.pkey]} )</small>`,2500)},(n,s,r,o)=>{this.tableNoWait(),this.handleTableErrors(n)},e)},handleTableErrors(t){if(console.log(t),t==null)return;const e=3500,n="danger";if(typeof t=="string"){this.addTableMessage(t,e,n);return}if(t.length>0)for(let s of t)this.addTableMessage(s.message,s.timeout,s.priority)},handleFormErrors(){if(errors==null)return;const t=3500,e="danger";if(typeof errors=="string"){this.addTableMessage(errors,t,e);return}if(errors.length>0)for(let n of errors)this.addTableMessage(n.message,n.timeout,n.priority)},getColumnByName(t){return this.settings.table.columns.find(e=>e.name===t)},createItem(){this.item=this.settings.form.default?this.settings.form.default:{},this.modalWindow.show(),setTimeout(()=>{this.itemOriginal=Object.assign({},this.item)},100)},async saveItem(t,e,n,s){try{s=s||{};let r={},o=t[this.settings.pkey];if(this.settings.form.api.output&&this.settings.form.api.output.fields)for(let u in t)this.settings.form.api.output.fields.includes(u)&&(r[u]=t[u]);else Object.assign(r,t);let a,c;if(this.convertOut(this.settings.table.columns,[r]),(!this.settings.form.api.output.flatten||!o)&&(r=mb(r)),this.settings.events&&this.settings.events.beforeItemSave&&this.settings.events.beforeItemSave(r,s,t),!this.settings.form.api.output.item)a=JSON.stringify(r);else if(typeof this.settings.form.api.output.item=="string"){let u={};u[this.settings.form.api.output.item]=r,a=JSON.stringify(u)}else a=JSON.stringify(this.settings.form.api.output.item(r,options));const l=o?"PUT":"POST";c=await fetch(wt(l,this.settings.form.api,o,s),_t(l,this.settings.form.api,{body:a},this.auth));const h=await Yn(c),f=Xn(c,h.data);if(f){n&&n(f,t,s,c);return}if(h.error){n&&n(h.error,t,s,c);return}this.settings.events&&this.settings.events.afterItemSave&&this.settings.events.afterItemSave(h.data,s),e&&e(h.data,c)}catch(r){n&&n(r,t,s)}},async saveBulk(t){try{this.tableWait(!0);let e={};this.settings.events&&this.settings.events.beforeBulkSave&&this.settings.events.beforeBulkSave(this.bulkitem);for(let o in this.bulkitem)this.bulkinputs.indexOf(o)>=0&&this.settings.table.api.output.fields.includes(o)&&(e[o]=this.bulkitem[o]);this.convertOut(this.settings.table.columns,[e]);const n=await fetch(wt("PUT",this.settings.table.api),_t("PUT",this.settings.table.api,{body:JSON.stringify({item:e,ids:this.selected})},this.auth)).catch(o=>{console.error(o),this.addTableMessage(o.message,3500,"danger",o)}),s=await Yn(n),r=Xn(n,s.data);if(this.tableNoWait(),r)return;t&&t(s.data),this.reloadTable()}catch(e){console.error(e),this.addTableMessage(e.message,3500,"danger",e),this.tableNoWait()}},countHiddenColumns(){return this.settings.table.columns.filter(t=>t.hidden===!0).length},toggleColumn(t){t===!0?this.settings.table.columns.map(e=>{e.hidden=!1}):t===!1?this.settings.table.columns.map(e=>{e.hidden=!0}):t.hidden=!t.hidden},toggleSelectedAll(){this.selected.length?this.selected=[]:this.selected=this.items.map(t=>t[this.settings.pkey])},toggleSelected(t){let e=this.selected.indexOf(t);e>=0?this.selected.splice(e,1):this.selected.push(t)},toggleSelectedRowInPage(){if(this.haveSelectedRowInPage())for(let t of this.items){let e=this.selected.indexOf(t[this.settings.pkey]);e>=0&&this.selected.splice(e,1)}else for(let t of this.items)this.selected.indexOf(t[this.settings.pkey])<0&&this.selected.push(t[this.settings.pkey]);this.selected.length||(this.bulkitem={})},haveSelectedRowInPage(){if(!this.items||!this.items.length)return!1;for(let t of this.items)if(this.selected.indexOf(t[this.settings.pkey])>=0)return!0;return!1},toggleDetail(t){let e=this.details.indexOf(t);e>=0?this.details.splice(e,1):this.details.push(t)},dropdownSelectToggleOne(t,e){let n=e.value;t.multiple?Qc(t.value,n):t.value=t.value===n?null:n,this.reloadTable()},dropdownSelectAll(t,e){Jc(t,e),this.reloadTable()},dropdownSelectInvert(t,e){ed(t,e),this.reloadTable()},dropdownSelectClear(t){typeof t!="object"?t.value=null:td(t),this.reloadTable()},async exportTable(t){try{fetchItems,t.limit=this.config.pagination.total?this.config.pagination.total:0;let e=this.getFiltersForFetch(),n=this.getOrdersForFetch();this.selected.length>0&&(e[this.settings.pkey]={type:"string",value:this.selected,operator:"in"}),t.filter=e,t.order=n,this.settings.events&&this.settings.events.beforeItemsExport&&this.settings.events.beforeItemsExport(items);let s=pb(items,this.settings.table.exports[t.type].fields);gb(s,this.settings.entity+".csv")}catch(e){console.error(e),this.addTableMessage(e.message,3500,"danger")}},onRowInputChange(t,e,n,s){!e||!e.input||(e.input.onchange&&e.input.onchange(t,e,n),e.input.autosave&&(this.tableWait(),this.saveItem(n,()=>{this.tableNoWait(),this.addTableMessage(this.translate("Saved")+` <small>( ${this.settings.pkey}:  ${n[this.settings.pkey]} )</small>`,2500)},(r,o,a,c)=>{this.tableNoWait(),this.handleTableErrors(r)})))},onBulkInputChange(t,e,n){!n||!n.input||n.input.onchange&&n.input.onchange(t,n)},ifBulkInputClick(t){let e=this.bulkinputs.indexOf(t.name);e<0?this.bulkinputs.push(t.name):this.bulkinputs.splice(e,1),this.bulkitem[t.name]===void 0?this.bulkitem[t.name]=null:this.bulkitem[t.name]=void 0},addTableMessage(t,e,n,s){this.addMessage("table",t,e,n,s)},addMessage(t,e,n,s,r){clearTimeout(this.messageTimeout);const o=Date.now()+Math.random().toString(36).substring(2,9);this.message[t]={uid:o,msg:e,timeout:n!==void 0?n:2500,datetime:new Date().toLocaleString("hu-HU"),priority:s||"secondary",details:r},this.messages[t].unshift(this.message[t]),clearTimeout(this.messageTimeOut),this.messageTimeOut=setTimeout(()=>{this.message[t]=null,this.messages[t].length>10&&this.messages[t].splice(10)},this.message[t].timeout)},translate(t,e,n){return Ds(t,this.settings.translate,e,n||this.settings.language)},convertIn(t,e){for(let n of t)if(n.convert&&n.convert.in)for(let s of e)s[n.name]=n.convert.in(s[n.name],s,n)},convertOut(t,e){for(let n of t)if(n.convert&&n.convert.out)for(let s of e)s[n.name]=n.convert.out(s[n.name],s,n)}}},lC=["data-bs-theme"],cC={class:"vua-table-title"},dC={class:"d-flex align-items-center justify-content-between"},hC={class:"d-inline-block"},uC={key:0,class:"card-title d-inline-block mb-2"},fC={class:"spinner-border spinner-border-sm mx-2",role:"status"},mC={key:0,class:"d-inline-block"},pC={key:0,class:"d-inline-block px-1 mx-1"},gC=["innerHTML"],bC={class:"dropdown d-inline-block"},yC=["innerHTML"],EC={class:"dropdown-menu text-start"},_C={class:"me-2 text-muted"},wC=["innerHTML"],NC=["onClick"],kC={key:1,class:"dropdown d-inline-block"},TC={class:"mx-1"},AC={key:0},CC={class:"dropdown-menu"},SC=["onClick"],OC={key:0,class:"bi bi-check-square-fill me-2"},LC={key:1,class:"bi bi-x-square me-2 text-danger"},BC={class:"badge text-secondary fw-normal"},VC={key:2,class:"dropdown d-inline-block"},IC={class:"mx-1"},vC={class:"dropdown-menu"},xC=["onClick"],DC={class:"vua-table-header"},$C=["width"],MC=["onClick"],RC=["innerHTML"],qC={key:0,class:"bi bi-arrow-down"},PC={key:1,class:"bi bi-arrow-up"},jC={key:0},FC=["disabled","onClick"],UC={key:0,class:"vua-table-filter"},HC=["width"],zC={key:0,class:"d-inline-block w-100 px-1"},WC={class:"bi bi-check-all"},KC={class:"bi bi-x-lg"},GC={key:1,class:"input-group input-group-sm my-1"},YC=["onUpdate:modelValue"],XC=["disabled","onClick"],ZC={key:2,class:"input-group input-group-sm my-1"},QC=["onUpdate:modelValue","disabled"],JC={value:"="},eS={value:">"},tS={value:">="},nS={value:"<"},sS={value:"<="},iS=["onUpdate:modelValue","disabled"],rS=["value"],oS=["onUpdate:modelValue","disabled","min","max"],aS=["disabled","onClick"],lS={key:3},cS={key:0,class:"dropdown"},dS={class:"btn btn-sm btn-secondary dropdown-toggle my-1",type:"button","data-bs-auto-close":"outside","data-bs-toggle":"dropdown","aria-expanded":"false"},hS={class:"dropdown-menu"},uS=["onClick"],fS={key:0,class:"bi bi-check-square"},mS={key:1,class:"bi bi-square"},pS={key:0},gS={key:1},bS=["onClick"],yS={key:2},ES=["onClick"],_S={key:3},wS=["onClick"],NS={key:1,class:"input-group input-group-sm my-1"},kS=["onUpdate:modelValue","multiple"],TS=["value"],AS=["disabled","onClick"],CS={key:4,class:"input-group input-group-sm my-1"},SS=["onUpdate:modelValue"],OS={value:"="},LS={value:">"},BS={value:">="},VS={value:"<"},IS={value:"<="},vS=["onUpdate:modelValue"],xS=["value"],DS=["type","onUpdate:modelValue"],$S=["disabled","onClick"],MS=["disabled","onClick"],RS={class:"align-middle"},qS=["data-label","width","onClick"],PS={key:0,class:"d-inline-block w-100 px-1"},jS=["innerHTML"],FS={key:1},US=["innerHTML"],HS=["aria-valuenow","aria-valuemax"],zS={key:0},WS={key:4,class:"input-group input-group-sm"},KS=["innerHTML"],GS=["type","onChange","onUpdate:modelValue"],YS=["onChange","onUpdate:modelValue"],XS=["value"],ZS=["innerHTML"],QS={key:5},JS=["disabled","onClick"],eO=["innerHTML"],tO={key:2},nO={key:0},sO=["colspan"],iO={class:"row g-3 align-items-center"},rO={class:"col-form-label"},oO=["type","onUpdate:modelValue","onChange"],aO=["onUpdate:modelValue","onChange"],lO=["onUpdate:modelValue","onChange"],cO=["value"],dO=["innerHTML"],hO={key:0,class:"bg-light text-dark"},uO={key:0,class:"vua-table-bulk border-info"},fO=["data-label","width"],mO={key:0,class:"d-inline-block w-100 px-1"},pO={key:1,class:"input-group input-group-sm my-1"},gO=["type","disabled","onChange","onUpdate:modelValue"],bO=["disabled","onChange","onUpdate:modelValue"],yO=["value"],EO=["onClick"],_O={key:0,class:"bi bi-square text-secondary"},wO={key:1,class:"bi bi-check-square"},NO={key:2},kO=["disabled","onClick"],TO=["innerHTML"],AO={key:2},CO=["id"],SO={class:"modal-dialog modal-xl"},OO={class:"modal-content h-100"};function LO(t,e,n,s,r,o){const a=i.resolveComponent("VuAdminTablePagination"),c=i.resolveComponent("VuAdminForm");return i.openBlock(),i.createElementBlock("div",null,[o.authAndSettings()?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(["vua-table-container",[n.settings.class]]),"data-bs-theme":[n.settings.theme]},[i.createElementVNode("div",{class:i.normalizeClass(["vua-overlay",{blocked:r.ui.block.table}])},null,2),i.createElementVNode("div",cC,[i.createElementVNode("div",dC,[i.createElementVNode("div",hC,[n.settings.table.title?(i.openBlock(),i.createElementBlock("h5",uC,i.toDisplayString(n.settings.table.title),1)):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("div",fC,e[15]||(e[15]=[i.createElementVNode("span",{class:"visually-hidden"},"Loading...",-1)]),512),[[i.vShow,r.ui.wait.table&&n.settings.table.title]])]),r.messages.table.length?(i.openBlock(),i.createElementBlock("div",mC,[r.message.table?(i.openBlock(),i.createElementBlock("small",pC,[i.createElementVNode("span",{class:i.normalizeClass(["text-"+r.message.table.priority])},[i.createElementVNode("span",{class:"fw-bold",innerHTML:r.message.table.msg},null,8,gC)],2)])):i.createCommentVNode("",!0),i.createElementVNode("div",bC,[i.createElementVNode("button",{class:i.normalizeClass(["btn btn-sm dropdown-toggle",["btn-"+r.messages.table[0].priority]]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",innerHTML:r.messages.table.length+" "+(r.messages.table.length>1?o.translate("messages"):o.translate("message"))},null,10,yC),i.createElementVNode("ul",EC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(r.messages.table,l=>(i.openBlock(),i.createElementBlock("li",{key:l},[i.createElementVNode("span",{class:i.normalizeClass(["dropdown-item",["text-"+l.priority]])},[i.createElementVNode("small",_C,i.toDisplayString(l.datetime),1),i.createElementVNode("span",{class:"fw-bold",innerHTML:l.msg},null,8,wC)],2)]))),128))])])])):i.createCommentVNode("",!0)])]),n.settings.table.control?(i.openBlock(),i.createElementBlock("div",{key:0,class:i.normalizeClass(["vua-table-control",[n.settings.table.control.class]])},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.settings.table.control.buttons,l=>(i.openBlock(),i.createElementBlock("span",{key:l.action},[l.action!=="TABLE_COLUMNS"&&!l.dropdowns?(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",class:i.normalizeClass([l.class?l.class:o.getButtonClassByAction(l.action)]),onClick:h=>o.tableAction(l,{items:r.items,$event:h})},[i.createElementVNode("i",{class:i.normalizeClass([l.icon!==void 0?o.getValueOrFunction(l.icon,{button:l,table:this}):o.getButtonIconClassByAction(l.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(o.translate(l.title)),1)],10,NC)):i.createCommentVNode("",!0),l.action==="TABLE_COLUMNS"?(i.openBlock(),i.createElementBlock("div",kC,[i.createElementVNode("button",{type:"button",class:i.normalizeClass([[l.class?l.class:o.getButtonClassByAction(l.action)],"dropdown-toggle"]),"data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false"},[i.withDirectives(i.createElementVNode("span",TC,[i.createElementVNode("i",{class:i.normalizeClass([l.icon!==void 0?o.getValueOrFunction(l.icon,{button:l,table:this}):o.getButtonIconClassByAction(l.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(o.translate(l.title))+" ",1),o.countHiddenColumns()?(i.openBlock(),i.createElementBlock("span",AC," ( "+i.toDisplayString(o.countHiddenColumns())+" "+i.toDisplayString(o.translate("hidden"))+" ) ",1)):i.createCommentVNode("",!0)],512),[[i.vShow,n.settings.table.columns.length>0]])],2),i.createElementVNode("ul",CC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.settings.table.columns,h=>(i.openBlock(),i.createElementBlock("li",{key:h},[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:f=>o.toggleColumn(h)},[h.hidden?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("i",OC)),h.hidden?(i.openBlock(),i.createElementBlock("i",LC)):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(h.title)+" ",1),i.createElementVNode("small",BC,i.toDisplayString(h.name),1)],8,SC)]))),128)),e[16]||(e[16]=i.createElementVNode("li",null,[i.createElementVNode("hr",{class:"dropdown-divider"})],-1)),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:e[0]||(e[0]=h=>o.toggleColumn(!0))},i.toDisplayString(o.translate("Visible all")),1)]),i.createElementVNode("li",null,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:e[1]||(e[1]=h=>o.toggleColumn(!1))},i.toDisplayString(o.translate("Hidden all")),1)])])])):i.createCommentVNode("",!0),l.dropdowns?(i.openBlock(),i.createElementBlock("div",VC,[i.createElementVNode("button",{type:"button",class:i.normalizeClass([[l.class],"dropdown-toggle"]),"data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false"},[i.createElementVNode("span",IC,[i.createElementVNode("i",{class:i.normalizeClass([l.icon!==void 0?o.getValueOrFunction(l.icon,{button:l,table:this}):o.getButtonIconClassByAction(l.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(o.translate(l.title)),1)])],2),i.createElementVNode("ul",vC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.dropdowns,h=>(i.openBlock(),i.createElementBlock("li",{key:h},[i.createElementVNode("span",{class:i.normalizeClass(["dropdown-item cursor-pointer",[h.class]]),onClick:f=>o.tableAction(h,{items:r.items,$event:f})},[h.icon?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass([h.icon])},null,2)):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(o.translate(h.title)),1)],10,xC)]))),128))])])):i.createCommentVNode("",!0)]))),128))],2)):i.createCommentVNode("",!0),n.settings.table?(i.openBlock(),i.createElementBlock("table",{key:1,class:i.normalizeClass(["table vua-table mb-0",[n.settings.table.class]])},[i.createElementVNode("thead",null,[i.createElementVNode("tr",DC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.settings.table.columns,l=>(i.openBlock(),i.createElementBlock("th",{class:i.normalizeClass(["",[l.header?l.header.class:""]]),style:i.normalizeStyle([l.hidden?"display: none":""]),key:l,width:l.width},[i.createElementVNode("span",{class:i.normalizeClass(["d-inline-block no-select text-nowrap",{"cursor-pointer":o.isSortable(l)}]),onClick:h=>o.sortTable(l)},[i.createElementVNode("span",{innerHTML:l.header&&l.header.title!==void 0?o.translate(l.header.title):l.title?o.translate(l.title):o.translate(l.name)},null,8,RC),r.config.order[l.name]?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(["badge text-bg-light ms-1 p-badge",{"opacity-50":r.config.order[l.name].fixed}])},[r.config.order[l.name].dir==="ASC"?(i.openBlock(),i.createElementBlock("i",qC)):i.createCommentVNode("",!0),r.config.order[l.name].dir==="DESC"?(i.openBlock(),i.createElementBlock("i",PC)):i.createCommentVNode("",!0),i.createTextVNode(" "+i.toDisplayString(r.config.order[l.name].idx+1),1)],2)):i.createCommentVNode("",!0)],10,MC),l.header&&l.header.buttons?(i.openBlock(),i.createElementBlock("span",jC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.header.buttons,h=>(i.openBlock(),i.createElementBlock("button",{key:h.action,type:"button",disabled:h.disabled!==void 0?o.getValueOrFunction(h.disabled):null,class:i.normalizeClass([h.class?h.class:o.getButtonClassByAction(h.action)]),onClick:f=>o.tableAction(h,{items:r.items,$event:f})},[i.createElementVNode("i",{class:i.normalizeClass([h.icon!==void 0?o.getValueOrFunction(h.icon,{button:h,column:l,table:this}):o.getButtonIconClassByAction(h.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(o.translate(h.title)),1)],10,FC))),128))])):i.createCommentVNode("",!0)],14,$C))),128))]),o.countFilters()?(i.openBlock(),i.createElementBlock("tr",UC,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.settings.table.columns,l=>(i.openBlock(),i.createElementBlock("th",{style:i.normalizeStyle([l.hidden?"display: none":""]),key:l,width:l.width,class:i.normalizeClass([l.filter?l.filter.class:""])},[l.index&&l.click?(i.openBlock(),i.createElementBlock("div",zC,[i.createElementVNode("span",{class:i.normalizeClass(["cursor-pointer badge border badge-index-toggle py-1 px-2 me-1 my-2 w-100",{active:o.haveSelectedRowInPage()}]),onClick:e[2]||(e[2]=h=>o.toggleSelectedRowInPage())},[i.withDirectives(i.createElementVNode("i",WC,null,512),[[i.vShow,!o.haveSelectedRowInPage()]]),i.withDirectives(i.createElementVNode("i",KC,null,512),[[i.vShow,o.haveSelectedRowInPage()]])],2)])):i.createCommentVNode("",!0),l.filter&&l.filter.type=="text"?(i.openBlock(),i.createElementBlock("div",GC,[i.withDirectives(i.createElementVNode("input",{type:"text",class:i.normalizeClass([{fixed:l.filter.fixed},"form-control form-control-sm"]),"onUpdate:modelValue":h=>l.filter.value=h,onKeyup:e[3]||(e[3]=i.withKeys(h=>o.reloadTable(),["enter"]))},null,42,YC),[[i.vModelText,l.filter.value]]),l.filter.buttonx&&l.filter.buttonx!=!1?(i.openBlock(),i.createElementBlock("button",{key:0,class:i.normalizeClass(["btn btn-outline-secondary",{"opacity-25":l.filter.value==null}]),disabled:l.filter.value==null,onClick:h=>{l.filter.value=void 0,o.reloadTable()}},e[17]||(e[17]=[i.createElementVNode("i",{class:"bi bi-x"},null,-1)]),10,XC)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),l.filter&&l.filter.type=="number"?(i.openBlock(),i.createElementBlock("div",ZC,[l.filter.operators==!0?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:0,"onUpdate:modelValue":h=>l.filter.operator=h,disabled:l.filter.fixed,onChange:e[4]||(e[4]=h=>o.reloadTable()),class:"form-select form-select-sm pe-0"},[i.createElementVNode("option",JC,i.toDisplayString(o.translate("=")),1),i.createElementVNode("option",eS,i.toDisplayString(o.translate(">")),1),i.createElementVNode("option",tS,i.toDisplayString(o.translate(">=")),1),i.createElementVNode("option",nS,i.toDisplayString(o.translate("<")),1),i.createElementVNode("option",sS,i.toDisplayString(o.translate("<=")),1)],40,QC)),[[i.vModelSelect,l.filter.operator]]):i.createCommentVNode("",!0),l.filter.operators&&l.filter.operators.length>0?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:1,"onUpdate:modelValue":h=>l.filter.operator=h,disabled:l.filter.fixed,onChange:e[5]||(e[5]=h=>o.reloadTable()),class:"form-select form-select-sm pe-0"},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.filter.operators,h=>(i.openBlock(),i.createElementBlock("option",{key:h,value:h.value},i.toDisplayString(h.label),9,rS))),128))],40,iS)),[[i.vModelSelect,l.filter.operator]]):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{type:"number",class:i.normalizeClass(["form-control",{fixed:l.filter.fixed}]),"onUpdate:modelValue":h=>l.filter.value=h,disabled:l.filter.fixed,min:l.filter.min,max:l.filter.max,onChange:e[6]||(e[6]=h=>o.reloadTable()),onKeyup:e[7]||(e[7]=i.withKeys(h=>o.reloadTable(),["enter"]))},null,42,oS),[[i.vModelText,l.filter.value]]),!l.filter.fixed&&l.filter.buttonx&&l.filter.buttonx!=!1?(i.openBlock(),i.createElementBlock("button",{key:2,class:i.normalizeClass(["btn btn-outline-secondary",{"opacity-25":l.filter.value==null}]),disabled:l.filter.value==null,onClick:h=>{l.filter.value=void 0,o.reloadTable()}},e[18]||(e[18]=[i.createElementVNode("i",{class:"bi bi-x"},null,-1)]),10,aS)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),l.filter&&l.filter.type=="select"?(i.openBlock(),i.createElementBlock("div",lS,[l.filter.dropdown?(i.openBlock(),i.createElementBlock("div",cS,[i.createElementVNode("button",dS,i.toDisplayString(l.filter.multiple?l.filter.value.length+" selected":l.filter.value?l.filter.value:"not selected"),1),i.createElementVNode("ul",hS,[i.createElementVNode("li",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.filter.options,h=>(i.openBlock(),i.createElementBlock("span",{key:h,class:i.normalizeClass(["dropdown-item cursor-pointer",{selected:l.filter.multiple?l.filter.value.indexOf(h.value)>=0:l.filter.value===h.value}]),onClick:f=>o.dropdownSelectToggleOne(l.filter,h)},[(l.filter.multiple?l.filter.value.indexOf(h.value)>=0:l.filter.value===h.value)?(i.openBlock(),i.createElementBlock("i",fS)):(i.openBlock(),i.createElementBlock("i",mS)),i.createTextVNode(" "+i.toDisplayString(o.translate(h.label?h.label:h.value)),1)],10,uS))),128))]),l.filter.multiple?(i.openBlock(),i.createElementBlock("li",pS,e[19]||(e[19]=[i.createElementVNode("hr",{class:"dropdown-divider"},null,-1)]))):i.createCommentVNode("",!0),l.filter.multiple?(i.openBlock(),i.createElementBlock("li",gS,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:h=>o.dropdownSelectAll(l.filter.value,l.filter.options)},i.toDisplayString(o.translate("Select all")),9,bS)])):i.createCommentVNode("",!0),l.filter.multiple?(i.openBlock(),i.createElementBlock("li",yS,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:h=>o.dropdownSelectClear(l.filter.value)},i.toDisplayString(o.translate("Unselect all")),9,ES)])):i.createCommentVNode("",!0),l.filter.multiple?(i.openBlock(),i.createElementBlock("li",_S,[i.createElementVNode("span",{class:"dropdown-item cursor-pointer",onClick:h=>o.dropdownSelectInvert(l.filter.value,l.filter.options)},i.toDisplayString(o.translate("Invert all")),9,wS)])):i.createCommentVNode("",!0)])])):(i.openBlock(),i.createElementBlock("div",NS,[i.withDirectives(i.createElementVNode("select",{"onUpdate:modelValue":h=>l.filter.value=h,onChange:e[8]||(e[8]=h=>o.reloadTable()),multiple:l.filter.multiple,class:"form-select form-select-sm pe-0"},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.filter.options,h=>(i.openBlock(),i.createElementBlock("option",{key:h,value:h.value},i.toDisplayString(o.translate(h.label?h.label:h.value)),9,TS))),128))],40,kS),[[i.vModelSelect,l.filter.value]]),l.filter.buttonx&&l.filter.buttonx!=!1?(i.openBlock(),i.createElementBlock("button",{key:0,class:i.normalizeClass(["btn btn-outline-secondary",{"opacity-25":l.filter.value==null}]),disabled:l.filter.value==null,onClick:h=>{l.filter.value=void 0,o.reloadTable()}},e[20]||(e[20]=[i.createElementVNode("i",{class:"bi bi-x"},null,-1)]),10,AS)):i.createCommentVNode("",!0)]))])):i.createCommentVNode("",!0),l.filter&&(l.filter.type=="datetime-local"||l.filter.type=="date")?(i.openBlock(),i.createElementBlock("div",CS,[l.filter.operators==!0?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:0,"onUpdate:modelValue":h=>l.filter.operator=h,onChange:e[9]||(e[9]=h=>o.reloadTable()),class:"form-select form-select-sm pe-0"},[i.createElementVNode("option",OS,i.toDisplayString(o.translate("=")),1),i.createElementVNode("option",LS,i.toDisplayString(o.translate(">")),1),i.createElementVNode("option",BS,i.toDisplayString(o.translate(">=")),1),i.createElementVNode("option",VS,i.toDisplayString(o.translate("<")),1),i.createElementVNode("option",IS,i.toDisplayString(o.translate("<=")),1)],40,SS)),[[i.vModelSelect,l.filter.operator]]):i.createCommentVNode("",!0),l.filter.operators&&l.filter.operators.length>0?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:1,"onUpdate:modelValue":h=>l.filter.operator=h,onChange:e[10]||(e[10]=h=>o.reloadTable()),class:"form-select form-select-sm pe-0"},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.filter.operators,h=>(i.openBlock(),i.createElementBlock("option",{key:h,value:h.value},i.toDisplayString(o.translate(h.label)),9,xS))),128))],40,vS)),[[i.vModelSelect,l.filter.operator]]):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{type:l.filter.type,class:i.normalizeClass([{fixed:l.filter.fixed},"form-control form-control-sm"]),"onUpdate:modelValue":h=>l.filter.value=h,onChange:e[11]||(e[11]=h=>o.reloadTable()),onKeyup:e[12]||(e[12]=i.withKeys(h=>o.reloadTable(),["enter"]))},null,42,DS),[[i.vModelDynamic,l.filter.value]]),i.createElementVNode("button",{class:i.normalizeClass(["btn btn-outline-secondary",{"opacity-25":!l.filter.value}]),disabled:!l.filter.value,onClick:h=>{l.filter.value=void 0,o.reloadTable()}},e[21]||(e[21]=[i.createElementVNode("i",{class:"bi bi-x"},null,-1)]),10,$S)])):i.createCommentVNode("",!0),l.filter&&l.filter.buttons?(i.openBlock(),i.createElementBlock("span",{key:5,class:i.normalizeClass(o.getValueOrFunction(l.filter.buttons,{column:l}))},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.filter.buttons,h=>(i.openBlock(),i.createElementBlock("span",{key:h.action},[i.createElementVNode("button",{type:"button",disabled:h.disabled!==void 0?o.getValueOrFunction(h.disabled):null,class:i.normalizeClass([h.class?h.class:o.getButtonClassByAction(h.action)]),onClick:f=>o.tableAction(h,{items:r.items,$event:f})},[i.createElementVNode("i",{class:i.normalizeClass([h.icon!==void 0?o.getValueOrFunction(h.icon,{button:h,column:l,table:this}):o.getButtonIconClassByAction(h.action)])},null,2),i.createTextVNode(" "+i.toDisplayString(o.translate(h.title)),1)],10,MS)]))),128))],2)):i.createCommentVNode("",!0)],14,HC))),128))])):i.createCommentVNode("",!0)]),i.createElementVNode("tbody",null,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(this.items,(l,h)=>(i.openBlock(),i.createElementBlock(i.Fragment,{key:l.id},[i.createElementVNode("tr",RS,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.settings.table.columns,f=>(i.openBlock(),i.createElementBlock("td",{style:i.normalizeStyle([f.hidden?"display: none":""]),key:f.name,"data-label":f.title?f.title:o.translate(f.name),width:f.width,class:i.normalizeClass(o.getValueOrFunction(f.class,{column:f,item:l})),onClick:u=>o.tableAction(f,{item:l,index:h,$event:u})},[f.index?(i.openBlock(),i.createElementBlock("div",PS,[i.createElementVNode("span",{class:i.normalizeClass(["cursor-pointer badge border badge-index p-1 w-100",{selected:r.selected.indexOf(l[n.settings.pkey])>=0}]),innerHTML:h+1+(r.config.pagination.page-1)*r.config.pagination.limit},null,10,jS)])):i.createCommentVNode("",!0),!f.template&&!f.input&&!f.progressbar?(i.openBlock(),i.createElementBlock("span",FS,i.toDisplayString(o.tableCellValue(f.name,l,h,f)),1)):i.createCommentVNode("",!0),f.template?(i.openBlock(),i.createElementBlock("span",{key:2,innerHTML:o.tableCellTemplate(f.template,l,h,f)},null,8,US)):i.createCommentVNode("",!0),f.progressbar?(i.openBlock(),i.createElementBlock("div",{key:3,class:"progress",role:"progressbar","aria-label":"Warning example","aria-valuenow":l[f.name],"aria-valuemax":f.progressbar.max},[i.createElementVNode("div",{class:i.normalizeClass(["progress-bar",[f.progressbar.class]]),style:i.normalizeStyle({width:Math.round(l[f.name]/f.progressbar.max*100)+"%"})},[f.progressbar.value?(i.openBlock(),i.createElementBlock("span",zS,i.toDisplayString(l[f.name]),1)):i.createCommentVNode("",!0)],6)],8,HS)):i.createCommentVNode("",!0),f.input?(i.openBlock(),i.createElementBlock("div",WS,[f.input.prefix?(i.openBlock(),i.createElementBlock("span",{key:0,class:"input-group-text",innerHTML:o.getValueOrFunction(f.input.prefix,{column:f,item:l})},null,8,KS)):i.createCommentVNode("",!0),["text","number","date","datetime-local"].indexOf(f.input.type)>=0?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:1,type:f.input.type,class:i.normalizeClass(["form-control form-control-sm",o.getValueOrFunction(f.input.class,{column:f,item:l})]),onChange:u=>o.onRowInputChange(l[f.name],f,l,h),"onUpdate:modelValue":u=>l[f.name]=u},null,42,GS)),[[i.vModelDynamic,l[f.name]]]):i.createCommentVNode("",!0),f.input.type=="select"?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:2,class:i.normalizeClass(["form-select form-select-sm pe-0",o.getValueOrFunction(f.input.class,{column:f,item:l})]),onChange:u=>o.onRowInputChange(l[f.name],f,l,h),"onUpdate:modelValue":u=>l[f.name]=u},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(f.input.options,u=>(i.openBlock(),i.createElementBlock("option",{value:u.value,key:u},i.toDisplayString(o.translate(u.label)),9,XS))),128))],42,YS)),[[i.vModelSelect,l[f.name]]]):i.createCommentVNode("",!0),f.input.suffix?(i.openBlock(),i.createElementBlock("span",{key:3,class:"input-group-text",innerHTML:o.getValueOrFunction(f.input.suffix,{column:f,item:l})},null,8,ZS)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),f.buttons?(i.openBlock(),i.createElementBlock("span",QS,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(f.buttons,u=>(i.openBlock(),i.createElementBlock("span",{key:u.action},[u.hidden?i.createCommentVNode("",!0):(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",disabled:u.disabled!==void 0?o.getValueOrFunction(u.disabled):null,class:i.normalizeClass([u.class?o.getValueOrFunction(u.class,{button:u,column:f,item:l,table:this}):o.getButtonClassByAction(u.action)]),onClick:p=>o.tableAction(u,{column:f,item:l,index:h,$event:p})},[u.icon!==null?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass([u.icon!==void 0?o.getValueOrFunction(u.icon,{button:u,column:f,item:l,table:this}):o.getButtonIconClassByAction(u.action)])},null,2)):i.createCommentVNode("",!0),u.template?(i.openBlock(),i.createElementBlock("span",{key:1,innerHTML:o.tableCellTemplate(u.template,l,h,f)},null,8,eO)):(i.openBlock(),i.createElementBlock("span",tO,i.toDisplayString(o.translate(u.title)),1))],10,JS))]))),128))])):i.createCommentVNode("",!0)],14,qS))),128))]),n.settings.table.details&&r.details.indexOf(l[n.settings.pkey])>=0?(i.openBlock(),i.createElementBlock("tr",nO,[i.createElementVNode("td",{class:i.normalizeClass([n.settings.table.details.class]),colspan:n.settings.table.columns.length},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.settings.table.details.fields,f=>(i.openBlock(),i.createElementBlock("div",{class:"m-0",key:f},[i.createElementVNode("div",iO,[i.createElementVNode("div",{class:i.normalizeClass(["col text-end",[f.class]])},[i.createElementVNode("label",rO,i.toDisplayString(f.label),1)],2),i.createElementVNode("div",{class:i.normalizeClass(["col",[f.input.class]])},[["select","textarea"].indexOf(f.input.type)<0?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:0,type:f.input.type,class:"form-control form-control-sm","onUpdate:modelValue":u=>l[f.name]=u,onChange:u=>o.onRowInputChange(l[f.name],f,l,h)},null,40,oO)),[[i.vModelDynamic,l[f.name]]]):i.createCommentVNode("",!0),f.input.type=="textarea"?i.withDirectives((i.openBlock(),i.createElementBlock("textarea",{key:1,class:"form-control form-control-sm",rows:"3","onUpdate:modelValue":u=>l[f.name]=u,onChange:u=>o.onRowInputChange(l[f.name],f,l,h)},`\r
                    `,40,aO)),[[i.vModelText,l[f.name]]]):i.createCommentVNode("",!0),f.input.type=="select"?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:2,class:"form-select form-select-sm pe-0","onUpdate:modelValue":u=>l[f.name]=u,onChange:u=>o.onRowInputChange(l[f.name],f,l,h)},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(f.input.options,u=>(i.openBlock(),i.createElementBlock("option",{value:u.value,key:u},i.toDisplayString(o.translate(u.label)),9,cO))),128))],40,lO)),[[i.vModelSelect,l[f.name]]]):i.createCommentVNode("",!0)],2)])]))),128)),i.createElementVNode("span",{innerHTML:n.settings.table.details.raw(l)},null,8,dO),n.settings.debug>1?(i.openBlock(),i.createElementBlock("pre",hO,"                  "+i.toDisplayString(l)+`
                `,1)):i.createCommentVNode("",!0)],10,sO)])):i.createCommentVNode("",!0)],64))),128))]),i.createElementVNode("tfoot",null,[r.selected.length>0?(i.openBlock(),i.createElementBlock("tr",uO,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.settings.table.columns,l=>(i.openBlock(),i.createElementBlock("td",{style:i.normalizeStyle([l.hidden?"display: none":""]),key:l.name,"data-label":l.title,width:l.width,class:i.normalizeClass(l.class)},[l.index?(i.openBlock(),i.createElementBlock("div",mO,[i.createElementVNode("span",{class:"cursor-pointer d-inline-block badge border badge-index-toggle active py-1 px-2 me-1 my-2 w-100",onClick:e[13]||(e[13]=h=>o.toggleSelectedAll())},i.toDisplayString(r.selected.length),1)])):i.createCommentVNode("",!0),l.input&&l.bulk&&l.bulk.enabled?(i.openBlock(),i.createElementBlock("div",pO,[["text","number","date","datetime-local"].indexOf(l.input.type)>=0?i.withDirectives((i.openBlock(),i.createElementBlock("input",{key:0,type:l.input.type,class:i.normalizeClass(["form-control form-control-sm",l.input.class]),disabled:r.bulkinputs.indexOf(l.name)<0,onChange:h=>o.onBulkInputChange(r.bulkitem[l.name],r.bulkitem,l),"onUpdate:modelValue":h=>r.bulkitem[l.name]=h},null,42,gO)),[[i.vModelDynamic,r.bulkitem[l.name]]]):i.createCommentVNode("",!0),l.input.type=="select"?i.withDirectives((i.openBlock(),i.createElementBlock("select",{key:1,class:i.normalizeClass(["form-select form-select-sm pe-0",l.input.class]),disabled:r.bulkinputs.indexOf(l.name)<0,onChange:h=>o.onBulkInputChange(r.bulkitem[l.name],r.bulkitem,l),"onUpdate:modelValue":h=>r.bulkitem[l.name]=h},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.input.options,h=>(i.openBlock(),i.createElementBlock("option",{value:h.value,key:h},i.toDisplayString(o.translate(h.label)),9,yO))),128))],42,bO)),[[i.vModelSelect,r.bulkitem[l.name]]]):i.createCommentVNode("",!0),i.createElementVNode("span",{class:"input-group-text cursor-pointer",onClick:h=>o.ifBulkInputClick(l)},[r.bulkitem[l.name]===void 0?(i.openBlock(),i.createElementBlock("i",_O)):(i.openBlock(),i.createElementBlock("i",wO))],8,EO)])):i.createCommentVNode("",!0),l.bulk?(i.openBlock(),i.createElementBlock("span",NO,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l.bulk.buttons,h=>(i.openBlock(),i.createElementBlock("span",{key:h.action},[i.createElementVNode("button",{type:"button",class:i.normalizeClass([h.class?h.class:o.getButtonClassByAction(h.action)]),disabled:h.action==="save"&&!this.bulkinputs.length,onClick:f=>o.tableBulkAction(h.action,r.bulkitem,l,f)},[h.icon!==null?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass([h.icon!==void 0?o.getValueOrFunction(h.icon,{button:h,column:l,table:this}):o.getButtonIconClassByAction(h.action)])},null,2)):i.createCommentVNode("",!0),h.template?(i.openBlock(),i.createElementBlock("span",{key:1,innerHTML:o.tableCellTemplate(h.template,r.bulkitem,null,l)},null,8,TO)):(i.openBlock(),i.createElementBlock("span",AO,i.toDisplayString(o.translate(h.title)),1))],10,kO)]))),128))])):i.createCommentVNode("",!0)],14,fO))),128))])):i.createCommentVNode("",!0)])],2)):i.createCommentVNode("",!0),i.createVNode(a,{settings:n.settings,config:r.config,ui:r.ui,onSetPage:o.setPage,onSetPageLimit:o.setPageLimit,onTranslate:o.translate},null,8,["settings","config","ui","onSetPage","onSetPageLimit","onTranslate"])],10,lC)):i.createCommentVNode("",!0),i.createElementVNode("div",{class:"modal shadow",id:r.modalId,tabindex:"-1"},[i.createElementVNode("div",SO,[i.createElementVNode("div",OO,[o.authAndSettings()&&n.settings.form.visible&&n.settings.form.groups?(i.openBlock(),i.createBlock(c,{key:0,modelValue:r.item,"onUpdate:modelValue":e[14]||(e[14]=l=>r.item=l),formid:r.formId,settings:n.settings,modalWindow:r.modalWindow,auth:n.auth,saveItem:o.saveItem,deleteItem:o.deleteItem,reloadTable:o.reloadTable,fetchRelation:o.fetchRelation},null,8,["modelValue","formid","settings","modalWindow","auth","saveItem","deleteItem","reloadTable","fetchRelation"])):i.createCommentVNode("",!0)])])],8,CO)])}const BO={name:"VuAdmin",props:{entity:{type:String,required:!0},auth:{type:Object}},init:t=>{},data(){return{settings:void 0,defaults:{pkey:"id",theme:void 0,class:"my-1 p-3 rounded",init:null,language:document.documentElement?document.documentElement.lang:"hu",api:{auth:{},options:{},input:{item:void 0,items:void 0,total:void 0},output:{item:void 0,flatten:!0,fields:void 0}},translate:{hu:{Columns:"Oszlopok",All:"Mind",page:"oldal",row:"sor",hidden:"rejtett",First:"Első",Next:"Következő",Prev:"Előző",Last:"Utolsó",Reload:"Újratöltés",New:"Új",Active:"Aktív",Deleted:"Törölt",Copy:"Másolás",Delete:"Törlés",Close:"Bezár",Save:"Mentés",Send:"Küldés",Export:"Exportálás","Select all":"Mind kiválaszt","Unselect all":"Mind töröl","Invert all":"Kijelölések megfordítása","Visible all":"Mind látható","Hidden all":"Mind rejtett","Save and close":"Ment és bezár","=":"Egyenlő",">":"Nagyobb",">=":"Nagyobb vagy egyenlő","<":"Kisebb","<=":"Kisebb vagy egyenlő","Are you sure you want to delete all selected items?":"Biztos hogy törölni akarod az összes kiválasztott elemet?"}},events:{afterSettingsInit:void 0,beforeItemsLoad:void 0,afterItemsLoad:void 0,afterItemLoad:void 0,beforeItemSave:void 0,afterItemSave:void 0,beforeItemDelete:void 0,afterItemDelete:void 0,beforeBulkSave:void 0,afterBulkSave:void 0,beforeItemsExport:void 0},relations:{},table:{title:null,columns:[],pagination:{size:10,limit:10,limits:[10,20,50,100]},order:{},control:{},details:{},exports:{}},form:{}}}},created(){if(window.VuEntities&&window.VuEntities[this.entity]){if(this.settings=Ui(this.defaults,window.VuEntities[this.entity]),this.settings.entity=this.entity,this.settings.preset=this.preset?this.preset:"default",!this.settings.theme){const t=document.documentElement.getAttribute("data-bs-theme");this.settings.theme=t||"light"}this.settings.auth=this.auth,this.settings.events.afterSettingsInit&&this.settings.events.afterSettingsInit(this.settings),this.settings.debug&&(console.log("vu-admin ","1.2.60"),console.log(`Entity config (${this.entity}) initialized`),this.settings.debug>1&&console.log(this.settings))}else console.log("vu-admin ","1.2.60"),console.error(`Entity config (${this.entity}) not found`)},mounted(){},methods:{},components:{VuAdminTable:Ye(aC,[["render",LO],["__scopeId","data-v-def0797d"]])}},VO={key:0},IO=["data-bs-theme"];function vO(t,e,n,s,r,o){const a=i.resolveComponent("vu-admin-table");return t.entity&&t.settings?(i.openBlock(),i.createElementBlock("div",VO,[t.auth?(i.openBlock(),i.createElementBlock("div",{key:0,class:"vu-admin","data-bs-theme":[t.settings.theme]},[i.createVNode(a,{settings:t.settings,auth:t.auth},null,8,["settings","auth"])],8,IO)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0)}const _u=Ye(BO,[["render",vO]]),xO=t=>{const e=new DataView(t);let n="";for(let s=0;s<e.byteLength;s+=4)n+=e.getUint32(s).toString(16).padStart(8,"0");return n},DO=(t=>async(e,{outputFormat:n="hex"}={})=>{typeof e=="string"&&(e=new globalThis.TextEncoder().encode(e));const s=await globalThis.crypto.subtle.digest(t,e);return n==="hex"?xO(s):s})("SHA-384");_o();const $O={name:"VuAuth",props:{modelValue:Object,api_login:String,api_register:String,api_password:String,settings:Object},data(){return{auth:void 0,username:"",password:"",password_again:"",recaptchaSiteKey:null,responseMessage:null,captcha:{items:["A","B","C","D","E"],required:"D",selected:null}}},watch:{modelValue(t){this.auth=t}},methods:{checkStorage(){this.auth.user={},this.auth.user=JSON.parse(localStorage.getItem("vu-user")),this.auth.header=JSON.parse(localStorage.getItem("vu-header")),this.$emit("update:modelValue",this.auth)},async handleSubmit(){this.auth.panel=="forgot"&&this.handleForgotPasswordSubmit(),this.auth.panel=="registration"&&this.handleNewRegistrationSubmit(),this.handleLogin()},async handleLogin(){if(!this.username||!this.password)return;const t=await fetch(this.settings.api.login,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:await this.hashPassword(this.password)})});if(t.ok){const e=await t.json();this.responseOk=!0,this.responseMessage="Sikeres bejelentkezés",this.settings.onsuccess&&(this.settings.onsuccess(e,this.auth),localStorage.setItem("vu-user",JSON.stringify(this.auth.user)),localStorage.setItem("vu-header",JSON.stringify(this.auth.header))),this.userUpdate(e),this.close()}else this.responseOk=!1,this.responseMessage="Sikertelen bejelentkezés"},async handleNewRegistrationSubmit(){if(!this.username||!this.password||!this.password_again||this.password!=this.password_again)return;const t=await fetch(this.settings.api.register,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:await this.hashPassword(this.password)})});t.ok?(await t.json(),this.responseOk=!0,this.responseMessage="Sikeres regisztráció"):(this.responseOk=!1,this.responseMessage="Sikertelen regisztráció")},handleForgotPasswordSubmit(){console.log("Elfelejtett jelszó e-mail beküldve:",this.email),alert("E-mail elküldve a megadott címre!"),this.reset()},async hashPassword(t){this.settings.password.hash=this.settings.password.hash===void 0?0:this.settings.password.hash;let e=t;for(let n=0;n<this.settings.password.hash;n++)e=await DO(e);return e},reset(){this.password="",this.password_again="",this.responseMessage="",this.responseOk=!1},close(){this.auth.visible=!1,this.$emit("update:modelValue",this.auth),this.reset()},toggleClear(){this.auth.panel="login",this.reset()},toggleForgotPassword(){this.auth.panel=this.auth.panel!=="forgot"?"forgot":"login",this.reset()},toggleNewRegistration(){this.auth.panel=this.auth.panel!=="registration"?"registration":"login",this.reset()},toggleHelp(){this.auth.panel=this.auth.panel!=="help"?"help":"login",this.reset()},toggleType(t){this.settings[t].type=this.settings[t].type!="password"?"password":"text",this.$forceUpdate()},onCaptchaClick(){console.log("reCAPTCHA clicked")},userUpdate(t){this.auth.user=t,this.$emit("update:modelValue",this.auth)},handleEscapeKey(t){t.key==="Escape"&&this.close()}},mounted(){if(window.addEventListener("keydown",this.handleEscapeKey),this.recaptchaSiteKey&&!document.querySelector('script[src="https://www.google.com/recaptcha/api.js"]')){const t=document.createElement("script");t.src="https://www.google.com/recaptcha/api.js",t.async=!0,t.defer=!0,document.head.appendChild(t)}this.settings.username.value&&(this.username=this.settings.username.value),this.auth||(this.auth={user:void 0,header:void 0}),this.userUpdate(),this.checkStorage(),this.reset()},beforeUnmount(){window.removeEventListener("keydown",this.handleEscapeKey)}},MO={key:0,class:"vua-auth position-fixed"},RO={class:"text-center mt-2 mb-4"},qO={key:0},PO={key:1},jO={key:2},FO={key:3},UO={key:0},HO=["innerHTML"],zO={class:"d-flex justify-content-between"},WO={class:"mb-3"},KO={for:"username",class:"form-label text-primary"},GO={class:"input-group"},YO=["type","placeholder"],XO=["innerHTML"],ZO={class:"mb-3"},QO={for:"password",class:"form-label text-primary"},JO={class:"input-group"},eL=["type","placeholder","pattern","minlength"],tL={key:0,class:"bi bi-eye"},nL={key:1,class:"bi bi-eye-slash"},sL=["innerHTML"],iL={key:0,class:"mb-4"},rL={for:"password_again",class:"form-label text-primary"},oL={key:0,class:"text-danger"},aL={class:"input-group"},lL=["type","placeholder","minlength"],cL={key:0,class:"bi bi-eye"},dL={key:1,class:"bi bi-eye-slash"},hL=["innerHTML"],uL={class:"mb-3 text-center"},fL=["data-sitekey"],mL={key:1,class:"mb-3 text-center"},pL={key:2,class:"d-flex mb-4"},gL={class:"d-flex justify-content-between"},bL={key:0,class:"bi bi-person-plus mx-1"},yL={key:1,class:"bi bi-arrow-right-square mx-1"},EL={key:3,class:"mt-3 text-center"},_L=["innerHTML"],wL={class:"mt-2 text-end"};function NL(t,e,n,s,r,o){return t.auth&&t.auth.visible?(i.openBlock(),i.createElementBlock("div",MO,[i.createElementVNode("div",{class:"d-flex justify-content-center align-items-center min-vh-100",onClick:e[16]||(e[16]=i.withModifiers((...a)=>t.close&&t.close(...a),["stop"]))},[i.createElementVNode("div",{class:"card shadow p-4 position-relative bg-light",onClick:e[15]||(e[15]=i.withModifiers(()=>{},["stop"])),style:i.normalizeStyle({"max-width":(t.settings.maxwidth?t.settings.maxwidth:400)+"px"}),_style:"width: 100%;"},[i.createElementVNode("button",{type:"button",class:"btn position-absolute top-0 end-0 p-0 m-2",onClick:e[0]||(e[0]=i.withModifiers((...a)=>t.close&&t.close(...a),["stop"]))},e[17]||(e[17]=[i.createElementVNode("i",{class:"bi bi-x px-1 text-muted"},null,-1)])),i.createElementVNode("h1",RO,[t.auth.panel=="forgot"?(i.openBlock(),i.createElementBlock("span",qO," Elfelejtett jelszó ")):i.createCommentVNode("",!0),t.auth.panel=="registration"?(i.openBlock(),i.createElementBlock("span",PO," Regisztráció ")):i.createCommentVNode("",!0),t.auth.panel=="help"?(i.openBlock(),i.createElementBlock("span",jO," Segítség ")):i.createCommentVNode("",!0),t.auth.panel=="login"?(i.openBlock(),i.createElementBlock("span",FO," Bejelentkezés ")):i.createCommentVNode("",!0)]),t.auth.panel=="help"?(i.openBlock(),i.createElementBlock("div",UO,[i.createElementVNode("div",{innerHTML:t.settings.help,class:"mb-4"},null,8,HO),i.createElementVNode("div",zO,[t.auth.panel!="login"?(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",onClick:e[1]||(e[1]=i.withModifiers((...a)=>t.toggleClear&&t.toggleClear(...a),["stop"])),class:"btn btn-secondary w-100 me-1"},e[18]||(e[18]=[i.createElementVNode("i",{class:"bi bi-arrow-left-square mx-1"},null,-1),i.createTextVNode(" Vissza ")]))):i.createCommentVNode("",!0)])])):(i.openBlock(),i.createElementBlock("form",{key:1,onSubmit:e[13]||(e[13]=i.withModifiers(a=>t.handleSubmit(),["prevent"])),onClick:e[14]||(e[14]=i.withModifiers(()=>{},["stop"]))},[i.createElementVNode("div",WO,[i.createElementVNode("label",KO,i.toDisplayString(t.settings.username.label),1),i.createElementVNode("div",GO,[t.settings.username.icon?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(["input-group-text",{"rounded-bottom-0":t.settings.username.help}])},[i.createElementVNode("i",{class:i.normalizeClass([t.settings.username.icon])},null,2)],2)):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{id:"username",type:t.settings.username.type,"onUpdate:modelValue":e[2]||(e[2]=a=>t.username=a),class:i.normalizeClass(["form-control",{"rounded-bottom-0":t.settings.username.help}]),placeholder:t.settings.username.placeholder,required:""},null,10,YO),[[i.vModelDynamic,t.username]])]),t.settings.username.help?(i.openBlock(),i.createElementBlock("small",{key:0,class:"d-block border border-top-0 rounded-bottom bg-light p-2 text-muted",innerHTML:t.settings.username.help},null,8,XO)):i.createCommentVNode("",!0)]),t.auth.panel!="forgot"?(i.openBlock(),i.createElementBlock(i.Fragment,{key:0},[i.createElementVNode("div",ZO,[i.createElementVNode("label",QO,i.toDisplayString(t.settings.password.label),1),i.createElementVNode("div",JO,[t.settings.password.icon?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(["input-group-text",{"rounded-bottom-0":t.auth.panel=="registration"&&t.settings.password.help}])},[i.createElementVNode("i",{class:i.normalizeClass([t.settings.password.icon])},null,2)],2)):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{id:"password",type:t.settings.password.type,"onUpdate:modelValue":e[3]||(e[3]=a=>t.password=a),class:i.normalizeClass(["form-control",{"rounded-bottom-0":t.auth.panel=="registration"&&t.settings.password.help}]),placeholder:t.settings.password.placeholder,pattern:t.settings.password.pattern,minlength:t.auth.panel=="registration"?t.settings.password.minlength:1,required:""},null,10,eL),[[i.vModelDynamic,t.password]]),t.auth.panel=="registration"?(i.openBlock(),i.createElementBlock("span",{key:1,class:i.normalizeClass(["input-group-text",{"rounded-bottom-0":t.auth.panel=="registration"&&t.settings.password.help}])},[i.createElementVNode("small",{class:i.normalizeClass(["",{"text-success":t.password.length>=t.settings.password.minlength,"text-danger":t.password.length<t.settings.password.minlength}])},i.toDisplayString(t.password.length),3)],2)):i.createCommentVNode("",!0),i.createElementVNode("span",{class:i.normalizeClass(["cursor-pointer input-group-text",{"rounded-bottom-0":t.auth.panel=="registration"&&t.settings.password.help}]),onClick:e[4]||(e[4]=i.withModifiers(a=>t.toggleType("password"),["stop"]))},[t.settings.password.type=="password"?(i.openBlock(),i.createElementBlock("i",tL)):(i.openBlock(),i.createElementBlock("i",nL))],2)]),t.auth.panel=="registration"&&t.settings.password.help?(i.openBlock(),i.createElementBlock("small",{key:0,class:"d-block border border-top-0 rounded-bottom bg-light p-2 text-muted",innerHTML:t.settings.password.help},null,8,sL)):i.createCommentVNode("",!0)]),t.auth.panel==="registration"?(i.openBlock(),i.createElementBlock("div",iL,[i.createElementVNode("label",rL,[i.createTextVNode(i.toDisplayString(t.settings.password_again.label)+" ",1),t.password_again.length>0&&t.password_again!=t.password?(i.openBlock(),i.createElementBlock("small",oL," ( a két jelszó nem egyezik ) ")):i.createCommentVNode("",!0)]),i.createElementVNode("div",aL,[t.settings.password.icon?(i.openBlock(),i.createElementBlock("span",{key:0,class:i.normalizeClass(["input-group-text",{"rounded-bottom-0":t.settings.password_again.help}])},[i.createElementVNode("i",{class:i.normalizeClass([t.settings.password_again.icon])},null,2)],2)):i.createCommentVNode("",!0),i.withDirectives(i.createElementVNode("input",{id:"password_again",type:t.settings.password_again.type,"onUpdate:modelValue":e[5]||(e[5]=a=>t.password_again=a),class:i.normalizeClass(["form-control",{"rounded-bottom-0":t.settings.password_again.help}]),placeholder:t.settings.password_again.placeholder,minlength:t.settings.password.minlength,required:""},null,10,lL),[[i.vModelDynamic,t.password_again]]),i.createElementVNode("span",{class:i.normalizeClass(["input-group-text",{"rounded-bottom-0":t.settings.password_again.help}])},[i.createElementVNode("small",{class:i.normalizeClass(["",{"text-success":t.password_again.length>=t.settings.password.minlength,"text-danger":t.password_again.length<t.settings.password.minlength}])},i.toDisplayString(t.password_again.length),3)],2),i.createElementVNode("span",{class:i.normalizeClass(["cursor-pointer input-group-text",{"rounded-bottom-0":t.auth.panel=="registration"&&t.settings.password_again.help}]),onClick:e[6]||(e[6]=i.withModifiers(a=>t.toggleType("password_again"),["stop"]))},[t.settings.password_again.type=="password"?(i.openBlock(),i.createElementBlock("i",cL)):(i.openBlock(),i.createElementBlock("i",dL))],2)]),t.auth.panel=="registration"&&t.settings.password_again.help?(i.openBlock(),i.createElementBlock("small",{key:0,class:"d-block border border-top-0 rounded-bottom bg-light p-2 text-muted",innerHTML:t.settings.password_again.help},null,8,hL)):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),i.createElementVNode("div",uL,[i.createElementVNode("div",{class:"g-recaptcha","data-sitekey":t.recaptchaSiteKey,onClick:e[7]||(e[7]=i.withModifiers((...a)=>t.onCaptchaClick&&t.onCaptchaClick(...a),["stop"]))},null,8,fL)])],64)):i.createCommentVNode("",!0),t.auth.panel=="login"?(i.openBlock(),i.createElementBlock("div",mL,[i.createElementVNode("button",{type:"button",class:"btn btn-link p-0 text-decoration-none text-nowrap",onClick:e[8]||(e[8]=i.withModifiers((...a)=>t.toggleForgotPassword&&t.toggleForgotPassword(...a),["stop"]))}," Elfelejtetted a jelszavad? "),t.settings.help?(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",class:"btn btn-link p-0 text-decoration-none text-nowrap",onClick:e[9]||(e[9]=i.withModifiers((...a)=>t.toggleHelp&&t.toggleHelp(...a),["stop"]))}," Segítségre van szükséged? ")):i.createCommentVNode("",!0)])):i.createCommentVNode("",!0),t.auth.panel=="forgot"?(i.openBlock(),i.createElementBlock("div",pL,e[19]||(e[19]=[i.createElementVNode("small",{class:"text-muted"}," A megadott e-mail címre ( amennyiben az szerepel az adatbázisunkban ) egy levelet küldünk, melyben az új jelszó igénylése linkre kattintva egy weboldalra jutsz. Ott tudod megadni az új jelszavadat. Az e-mailben szereplő link csak 1 óráig érvényes. ",-1)]))):i.createCommentVNode("",!0),i.createElementVNode("div",gL,[t.auth.panel!="login"?(i.openBlock(),i.createElementBlock("button",{key:0,type:"button",onClick:e[10]||(e[10]=i.withModifiers((...a)=>t.toggleClear&&t.toggleClear(...a),["stop"])),class:"btn btn-secondary w-100 me-2 text-nowrap"},e[20]||(e[20]=[i.createElementVNode("i",{class:"bi bi-arrow-left-square mx-1"},null,-1),i.createTextVNode(" Bejelentkezés ")]))):i.createCommentVNode("",!0),t.auth.panel=="login"?(i.openBlock(),i.createElementBlock("button",{key:1,type:"button",class:"btn btn-warning w-100 me-2 text-nowrap",onClick:e[11]||(e[11]=i.withModifiers((...a)=>t.toggleNewRegistration&&t.toggleNewRegistration(...a),["stop"]))},e[21]||(e[21]=[i.createElementVNode("i",{class:"bi bi-person-plus mx-1"},null,-1),i.createTextVNode(" Regisztráció ")]))):i.createCommentVNode("",!0),i.createElementVNode("button",{type:"submit",class:i.normalizeClass(["btn w-100 text-nowrap",{"btn-primary":t.auth.panel!="registration","btn-warning":t.auth.panel=="registration"}])},[i.createTextVNode(i.toDisplayString(t.auth.panel=="forgot"?"Új jelszó kérése":t.auth.panel=="registration"?"Regisztráció":"Bejelentkezés")+" ",1),t.auth.panel=="registration"?(i.openBlock(),i.createElementBlock("i",bL)):(i.openBlock(),i.createElementBlock("i",yL))],2)]),t.responseMessage?(i.openBlock(),i.createElementBlock("div",EL,[i.createElementVNode("div",{class:i.normalizeClass({"text-danger":!t.responseOk,"text-success":t.responseOk}),innerHTML:t.responseMessage},null,10,_L)])):i.createCommentVNode("",!0),i.createElementVNode("div",wL,[i.createElementVNode("button",{type:"button",onClick:e[12]||(e[12]=i.withModifiers((...a)=>t.close&&t.close(...a),["stop"])),class:"btn btn-light border w-100 me-1"},e[22]||(e[22]=[i.createElementVNode("i",{class:"bi bi-x-square mx-1"},null,-1),i.createTextVNode(" Mégsem ")]))])],32))],4)])])):i.createCommentVNode("",!0)}const wu=Ye($O,[["render",NL],["__scopeId","data-v-2f9e924c"]]);_o();const kL={name:"VuUserButton",props:{modelValue:Object,settings:Object},data(){return{auth:void 0}},watch:{modelValue(t){this.auth=t||void 0}},computed:{},methods:{updateAuth(){this.$emit("update:modelValue",this.auth)},togglePanel(){this.auth.visible=!this.auth.visible,this.auth.panel=this.settings.panel?this.settings.panel:"login",this.updateAuth()},logout(){this.auth.visible=!1,this.auth.user=null,this.auth.header=null,localStorage.removeItem("vu-header"),localStorage.removeItem("vu-user"),this.updateAuth()}},mounted(){}},TL={key:0,class:"d-inline-block"},AL={key:0,class:"dropdown"},CL=["src"],SL={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"userDropdown"},OL={class:"dropdown-item text-muted fw-light"},LL={key:1,class:"d-inline-block"},BL=["innerHTML"];function VL(t,e,n,s,r,o){return!t.auth||!t.auth.user&&t.settings.panel!="login"||t.settings.panel=="login"?(i.openBlock(),i.createElementBlock("div",TL,[t.auth&&t.auth.user?(i.openBlock(),i.createElementBlock("div",AL,[i.createElementVNode("button",{class:i.normalizeClass(["dropdown-toggle",[t.settings.class]]),type:"button",id:"userDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},[i.createElementVNode("img",{class:"img-fluid rounded",width:"22",src:t.auth.user.image},null,8,CL),i.createTextVNode(" "+i.toDisplayString(t.auth.user.username),1)],2),i.createElementVNode("ul",SL,[i.createElementVNode("li",null,[i.createElementVNode("span",OL,[i.createTextVNode(i.toDisplayString(t.auth.user.firstName)+" "+i.toDisplayString(t.auth.user.lastName)+" ",1),e[2]||(e[2]=i.createElementVNode("br",null,null,-1)),i.createTextVNode(" "+i.toDisplayString(t.auth.user.email),1)])]),e[4]||(e[4]=i.createElementVNode("li",{class:"dropdown-divider"},null,-1)),i.createElementVNode("li",null,[i.createElementVNode("button",{type:"button",class:"dropdown-item",onClick:e[0]||(e[0]=(...a)=>t.logout&&t.logout(...a))},e[3]||(e[3]=[i.createElementVNode("i",{class:"bi bi-door-open"},null,-1),i.createTextVNode(" Kilépés ")]))])])])):(i.openBlock(),i.createElementBlock("div",LL,[i.createElementVNode("button",{class:i.normalizeClass([t.settings.class]),type:"button",onClick:e[1]||(e[1]=(...a)=>t.togglePanel&&t.togglePanel(...a))},[t.settings.icon?(i.openBlock(),i.createElementBlock("i",{key:0,class:i.normalizeClass([t.settings.icon])},null,2)):i.createCommentVNode("",!0),i.createElementVNode("span",{innerHTML:t.settings.label},null,8,BL)],2)]))])):i.createCommentVNode("",!0)}const Nu=Ye(kL,[["render",VL],["__scopeId","data-v-c3d17bd2"]]),IL={install(t){t.component("VuAdmin",_u),t.component("VuAuth",wu),t.component("VuUserButton",Nu)}};H.VuAdmin=_u,H.VuAuth=wu,H.VuUserButton=Nu,H.default=IL,Object.defineProperties(H,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
